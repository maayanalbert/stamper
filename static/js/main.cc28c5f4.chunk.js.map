{"version":3,"sources":["react-cristal/dist/es2015/styled.js","react-cristal/dist/es2015/domain.js","react-cristal/dist/es2015/utils.js","react-cristal/dist/es2015/stacker.js","react-archer/src/Point.js","react-archer/src/SvgArrow.js","react-archer/src/ArcherContainer.js","react-archer/src/ArcherElement.js","react-cristal/dist/es2015/cristal.js","react-cristal/dist/es2015/content.js","react-cristal/dist/es2015/header.js","StampConsole.js","Stamp.js","ConsoleStamp.js","ControlBar.js","View.js","App.js","index.js","icons/box.svg","icons/file.svg","icons/tool.svg","icons/bell.svg","icons/image.svg","icons/chevron-down.svg","icons/download.svg","icons/upload.svg","icons/archive.svg","icons/message-square.svg","icons/info.svg","icons/star.svg","starterStamps.js","globals.js","parser.js","icons/code.svg","icons/grid.svg","icons/git-commit.svg","icons/message-circle.svg","icons/layout.svg","icons/layers-light.svg","icons/trash.svg","icons/copy.svg","icons/rotate-ccw.svg","icons/type.svg","icons/chevron-up.svg","icons/check-square.svg","icons/square.svg","icons/eye.svg","icons/eye-off.svg","icons/empty.svg","ModalManager.js","PublishModal.js","icons/globe.svg","theme-p5.js"],"names":["templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","templateObject_10","templateObject_11","__makeTemplateObject","cooked","raw","Object","defineProperty","value","minWidth","minHeight","padding","Wrapper","styled","div","_a","isActive","Header","isDraggable","BottomRightResizeHandle","BottomLeftResizeHandle","ContentWrapper","RightResizeHandle","img","LeftResizeHandle","BottomResizeHandle","isSmartPosition","position","defaultSize","width","height","getBoundaryCoords","coords","size","x","y","innerWidth","window","innerHeight","maxX","maxY","Math","min","max","getCordsFromInitialPosition","initialPosition","xCenter","yCenter","Infinity","Stacker","getNextIndex","index","maxIndex","updateMaxIndex","Point","this","point","SvgArrow","startingPoint","startingAnchorOrientation","endingPoint","endingAnchorOrientation","strokeColor","arrowLength","strokeWidth","strokeDasharray","arrowLabel","arrowMarkerId","noCurves","offset","onLineSelection","actualArrowLength","xStart","yStart","endingPointWithArrow","xArrowHeadEnd","yArrowHeadEnd","endingVector","arrowX","arrowY","computeEndingArrowDirectionVector","xEnd","yEnd","computeEndingPointAccordingToArrowHead","startingPosition","xAnchor1","yAnchor1","abs","computeStartingAnchorPosition","endingPosition","xAnchor2","yAnchor2","computeEndingAnchorPosition","pathString","curveMarker","angle","atan2","xOffset","cos","yOffset","sin","computePathString","xLabel","yLabel","labelWidth","labelHeight","computeLabelDimensions","onDoubleClick","d","style","fill","stroke","markerEnd","location","href","split","overflow","pointerEvents","left","top","transform","defaultSvgContainerStyle","background","rectToPoint","rect","ArcherContainerContext","React","createContext","ArcherContainerContextProvider","Provider","ArcherContainerContextConsumer","Consumer","ArcherContainer","props","refreshScreen","setState","state","storeParent","ref","parent","currentState","getRectFromRef","getBoundingClientRect","getParentCoordinates","rectp","getPointCoordinatesFromAnchorPosition","parentCoordinates","refs","retPos","anchorPosition","add","computeCoordinatesFromAnchorPosition","substract","scale","registerTransitions","elementId","newSourceToTargets","prevState","sourceToTargetsMap","unregisterTransitions","sourceToTargetsMapCopy","registerChild","id","observer","observe","unregisterChild","unobserve","newRefs","getSourceToTargets","jaggedSourceToTargets","keys","map","key","concat","apply","getDist","x1","y1","x2","y2","sqrt","pow","p5NumberMap","in_min","in_max","out_min","out_max","setRelativeOffsets","sourceToTargets","anchor","relevantSourceToTargets","filter","data","source","target","otherLocationPosList","otherLocationPosDict","otherLocation","negationFactor","opposite","adjacent","thetaDegrees","atan","PI","push","sort","a","b","pos","medianVal","length","relativeSourceOffset","relativeOffsetSize","relativeTargetOffset","getComputedAnchors","computedSourceAnchor","computedTargetAnchor","xDiff","yDiff","newSource","assign","newTarget","computeArrows","result","idDict","label","arrowThickness","JSON","stringify","getMarkerId","arrowMarkerUniquePrefix","generateAllArrowMarkers","arrowPath","markerWidth","markerHeight","refX","refY","orient","markerUnits","svgContainerStyle","ResizeObserver","arrowMarkerRandomNumber","random","toString","slice","addEventListener","elementKey","removeEventListener","SvgArrows","className","viewBox","children","Component","defaultProps","ArcherElementNoContext","newRelations","newSourceToTarget","generateSourceToTarget","context","Error","relations","targetId","sourceAnchor","targetAnchor","onRefUpdate","prevProps","isEqual","ArcherElementWithContext","navigator","userAgent","toLowerCase","indexOf","require","ipcRenderer","__extends","extendStatics","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Cristal","_super","_this","arguments","zIndex","isDragging","isResizingX","isResizingY","isResizingXLeft","downKey","isMoving","originalHeight","ghostX","ghostY","opt","cmd","ctrl","plus","minus","zero","space","onWindowResize","_b","undefined","newX","newY","saveWrapperRef","el","childrenElement","initialSize","setInitialPosition","cords","saveHeaderRef","headerElement","onKeyDown","e","keyCode","preventDefault","onKeyUp","onMouseDown","manualResize","widthDiff","heightDiff","manualSetSize","onWheel","ctrlKey","getPosition","movementX","movementY","getScale","getSnapMargin","snapMargin","round","getDimensions","changeX","newWidth","newHeight","oldAbsX","oldAbsY","newAbsX","newAbsY","onResize","roundAbsX","roundAbsY","sendingWidthDiff","sendingHeightDiff","onMouseMove","isResizing","postMessage","type","onStartMove","newPosition","resizeCristal","_c","notifyResize","onStoppedMove","notifyStopMove","callBack","notifyMove","notifyStartMove","notifyOptMove","onMove","notifyZChange","onZChange","dimensions","onStopMove","onOptMove","notifyStartResize","onStartResize","notifyStopResize","onStopResize","onMouseUp","mouseIsDown","startFullResize","startFullLeftResize","startXResize","startXLeftResize","startYResize","renderResizeHandles","isResizable","color","right","bottom","changeZIndex","createIcon","iconType","hiddenFlag","classVal","tooltipText","uniqueClass","parentId","mouseOverCallback","$","css","opacity","mouseOutCallback","globals","iconOpacity","icon","onClick","iconSize","onMouseOver","onMouseOut","src","OverlayTrigger","trigger","placement","overlay","Tooltip","componentDidMount","document","onGlobalMouseDown","passive","iframeElem","getElementById","console","log","componentWillUnmount","get","enumerable","configurable","title","onClose","closeHidden","onCopy","copyHidden","closeBtn","DeleteStampIcon","copyBtn","CopyIcon","consoleBtn","ClearConsoleIcon","showConsole","onConsole","onMinimize","minimizeBtn","MinimzeIcon","titleIcon","makeBigIcon","CodeSizeIcon","showCodeSize","onCodeSize","sideButtons","class","cursor","render","margin","border","outline","HeaderComponent","header","ContentComponent","content","invisible","getLinesOn","lineData","allContent","ArcherElement","wrapperName","CristalContent","CristalHeader","_","StampConsole","logs","consoleHeight","consoleWidth","lastFreq","limit","receiveMessage","bind","addErrorLine","lineno","message","logToConsole","scrollIntoView","consoleContainer","scrollTop","scrollHeight","autoScollDown","lastLog","freqString","method","checkLastLog","newConsole","Hook","newLogs","renderedLogs","cloneDeep","setEditorScrolling","maxHeight","userSelect","styles","LOG_COLOR","LOG_ERROR_BACKGROUND","LOG_ERROR_BORDER","LOG_ERROR_COLOR","BASE_FONT_FAMILY","BASE_FONT_SIZE","LOG_COMMAND_COLOR","BASE_BACKGROUND_COLOR","LOG_BORDER","LOG_COMMAND_ICON","LOG_ERROR_ICON","LOG_DEBUG_ICON","LOG_DEBUG_COLOR","variant","mime","FunctionStamp","starterEditorWidth","isMediaFile","starterArgs","isIndex","isTxtFile","isBlob","starterName","starterIframeWidth","starterIframeHeight","code","starterCode","name","args","iframeDisabled","iframeWidth","iframeHeight","editorHeight","starterEditorHeight","editorWidth","isSpecialFn","editorScrolling","errorLines","iframeCode","editsMade","runningBorder","resizingIframe","hidden","initialHidden","looping","loopingTransition","starterZIndex","exportableCode","codeSize","starterCodeSize","dataUri","editorTopShadow","editorBottomShadow","iframeDimensTransition","mediaAssetHeight","mediaAssetWidth","lineHighLightingStatus","starterLineHighLightingStatus","identifierMarkers","mouseOnStamp","mouseOnTooltip","cristalRef","createRef","editorRef","consoleRef","updateLooping","callback","checkName","setDataUri","requestCompile","highlightedLines","getHighlightedLines","setIdentifierMarkers","mimeType","lookup","mimeTypeArr","join","fileObj","File","reader","FileReader","onload","readAsDataURL","specialFns","lineNum","setLayerPicker","getExportableCode","getHTML","current","editor","completers","getCompletions","session","prefix","completions","p5Lib","forEach","w","meta","roundX","roundY","newDimensions","getIframeDimensionFromGhost","isScrolling","disablePan","text","forEditor","fnTitleHeight","tooltipWidth","fontSize","font","markers","i","startRow","endRow","startCol","endCol","theme","mode","errorTooltipText","line","getErrorTooltip","boxShadow","onChange","onEditsMade","onLoad","setEditorShadow","renderer","scrollBar","on","arg","showPrintMargin","wrapEnabled","showGutter","highlightActiveLine","onScroll","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","hasCssTransforms","fontFamily","nameArr","pop","nameWithExtension","compileActions","setTimeout","displayName","Name","nameColor","builtIns","listeners","namePlaceholder","stripExtension","nameBackground","argsBackground","placeholder","disabled","event","newName","addExtension","startsWith","imageWidth","Image","imageHeight","controls","createElement","MediaAssetIcon","updateIframeDimensions","loopingOpacity","iframeDimensOpacity","transition","floor","onResizeStart","onResizeStop","newSize","getCristalDimens","getData","compileCallback","handle","manualIframeResize","dimens","getP5CanvasDimensions","renderMediaAsset","addNewIframeConsole","contentWindow","scrolling","srcdoc","sandbox","allow","status","isFile","isOpt","getCopyStampName","copyOffset","addStamp","getFirstLine","exported","getIcon","change","resize","FunctionStampIcon","HtmlStampIcon","BlobStampIcon","FileStampIcon","ImageStampIcon","BuiltInStampIcon","ListenerStampIcon","letters","lettersNumbers","positions","curCol","curRow","substr","match","identifierData","values","start","end","labelText","identifier","getTextPositions","marker","getLineClassColor","bgColor","cristalOpacity","shadowSize","s","setDependencyLineHighlightings","onDelete","copyAndOpt","resizeEditor","clearConsole","bigCodeSize","onMouseLeave","headerHeight","renderFunctionName","flexWrap","renderEditor","renderConsole","renderIframe","ipc","ControlBar","minPickerHeight","minJsImporterHeight","topBarHeight","minNonSideBarWidth","importButtonHeight","spanWidth","spanWidthWide","worldDropDowns","jsImporterHeight","sideBarWidth","pickerHeight","pickerScrollEnabled","codeHasError","updateControlBarDimensions","setWorldDropDowns","disableZoom","axis","renderSideBarResizeHandle","renderLayerPicker","renderJsImporter","renderImportButton","addRawJavascript","buttonTextSize","parseCode","snapshot","hasError","item","toggleOnIcon","iconNameCallback","centerCallback","toggleOffIcon","overalOpacity","EmptyIcon","clas","hideCallback","provided","pickers","overflowY","pickerData","isSetting","renderSettingsPicker","draggableId","getDraggableClass","innerRef","draggableProps","dragHandleProps","renderPicker","flexGrow","droppableProps","settingsPicker","renderPickerResizeHandle","flexFlow","display","renderSettingsPickers","onDragEnd","droppableId","renderPickers","removeClass","addClass","UploadIcon","iconCallback","modalManagerRef","requestUpload","alignLeft","DownloadIcon","requestDownload","normalFn","dropDownData","builtInFns","listenerFns","starterBlobs","starterBlob","requestFileUpload","sampleFile","undoDelete","deletedStamps","stampData","reverse","WorldsIcon","alignRight","requestPublish","requestPublishInfo","InfoIcon","getWorldNamesAndKeys","allWorlds","open","worldKeyToUrl","renderSideBar","renderTopBar","TopButton","down","mouseOverDropDown","givenUniqueClass","dropDownIcon","ExpandMoreIcon","dropDowns","oneWordName","getUniqueID","createTopButtonIcon","dropDownHeight","textAlign","expandButton","renderTooltip","renderDropDowns","View","compiledBefore","stampRefs","stampElems","counter","htmlID","setupExists","htmlAsksForJs","lines","traversalGraph","numToggles","originX","originY","counterMutex","Mutex","gridSize","newStampMarginVariance","newStampMargin","g","l","shft","centerX","centerY","zoom","body","snapToGrid","toggleLinesOn","pan","newTimeOut","mouseWheelTimeout","clearTimeout","deltaY","clientX","clientY","deltaX","changeY","panDisabled","newScale","mouseX","mouseY","zoomDisabled","curDistX","curDistY","unScaledDistX","unScaledDistY","scaledDistX","scaledDistY","newOriginX","newOriginY","numFns","stampOrder","stamperObject","worldKey","worldEdited","worldPublishTime","linesOn","recompileIfEnoughStamps","stamps","getAutoLayout","js","rawJS","parser","jsToStamps","curNumStamps","getNumStamps","stampsData","xPos","yPos","initialXPos","layoutedStampsData","getFilledInStampData","iframeDimens","brHeight","cristalDimens","autoLayoutMargin","ranges","strRanges","defaultDimens","createCanvasStart","paramsArr","Number","htmlCode","runnableCode","codeData","getRunnableCode","html","cheerio","load","withStartIndices","jsBlock","prepend","getIframeErrorCallBack","htmlStr","linesToJs","replaceWith","loadAssets","dimension","defaults","defaultEditorWidth","defaultEditorHeight","defaultIframeWidth","defaultIframeHeight","seenCode","setting","elem","unHighlightAllLines","setLineData","deleteFrame","checkAllNames","starterConsoleVisible","consoleVisible","addStampToState","acquire","release","newSetupExists","fileDict","getStamperObject","stamperHeader","getLineData","supplyLineData","stampRef","clearErrorsAndUpdate","reversed","graph","compileSingleStamp","nameDict","stamp","curLine","addCodeBlock","contents","numLines","isFn","getNumLines","variableClusters","getVariables","codePg","codeLine","codeSentance","declaredDict","undeclaredArr","addBlobToVariableClusters","variableCluster","declared","variable","undeclared","noWhiteSpace","replace","varEndIndex","lineDict","undeclaredItem","usingID","declaringID","lineKey","getLineRelation","listenerIDs","isListener","isFnStamp","listenerID","setupID","preloadID","indexID","fileIsReferenced","fileName","includes","isHighlighted","backgroundColor","textColor","getLineColor","colorOpacity","getLineLabel","getLineStyle","fileIdDict","lineId","lineDataToGraph","otherID","fillInHighlightedLineData","setLineHighlighted","sourceAndTarget","startStampId","endStampId","getJSLineData","getListenerLineData","getSetupLineData","getIndexLineData","getPreloadLineData","getFileLineData","seen","getInfluencingStamps","overalID","lineGraph","influencingStamps","fullFun","setLoopingControl","loopingCallbacks","splice","stampID","setIframeDisabled","xOff","yOff","manualPan","toggleHide","firstN","dots","calcSnapMargin","destination","removed","gridLines","borderWidth","x0","y0","roundedX0","roundedY0","borderLeft","borderTop","LinesIcon","SettingOnIcon","SettingOffIcon","GridIcon","setSettingsPicker","centerOnStamp","isConsole","VisibilityIcon","VisibilityOffIcon","initialHeight","renderGridLines","loadStamperObject","controlBarRef","getWorldData","ModalManager","getFileDict","App","ReactDOM","module","exports","keyPressCode","mousePressCode","starter","compressedJs","worlds","ExpandLessIcon","ConsoleStampIcon","GlobalVarIcon","CommentIcon","PermanentWorldIcon","defaultVarEditorHeight","iframeMargin","iconTransition","borderTransition","windowResized","deviceMoved","deviceTurned","deviceShaken","keyPressed","keyReleased","keyTyped","mouseMoved","mouseDragged","mousePressed","mouseReleased","mouseClicked","doubleClicked","mouseWheel","draw","preload","setup","fnStampWidth","fnStampHeight","esprima","getPos","comment","range","addBlob","rawCode","lastBlobLine","isComment","lineDiff","loc","addFn","fnStamps","params","argStart","argEnd","program","parseScript","tolerant","error","comments","insertComments","fillStampArrays","fullDict","typeName","q","cur","shift","val","pVal","lvl","newVal","newKey","GitHub","detect","browser","modalButtons","modalVisible","modalHeader","modalContent","saveInterval","cdnLibs","askedAboutCdn","inputElem","miniInputElem","publishInfoVisible","onlineWorldDict","lastWorldCheck","publishModal","protectAgainstClosed","domain","oauthToken","githubUsername","receiveFiles","hideModal","hidePublishInfoModal","sendSaveData","libs","queryString","search","URLSearchParams","urlWorldKey","getUrlWorldKey","getWorldObject","loadStoredStamperObject","stored","localStorage","getItem","parse","LZUTF8","decompress","inputEncoding","setWorldData","send","repo","token","getRepo","date","Date","listCommits","request","getTime","getWorldPublishTime","time","requestOnlineWorldCheck","loadInitialStamperObject","setInterval","fileObjs","rawFileList","fileInfo","buffer","checkAndOpenFiles","path","buttons","createInputElement","returnValue","getOnlineWorlds","onlineWorlds","removeChild","webkitdirectory","multiple","idAttr","createAttribute","setAttributeNode","typeAttr","multipleAttr","directoryAttr","styleAttr","appendChild","fileType","accept","uploadMini","clearInterval","createMiniImputElem","click","dispatchEvent","MouseEvent","onfocus","file","webkitRelativePath","readAsText","files","imgData","stampifyFiles","readFile","initialFiles","containsLib","usingName","deleteInputElement","readFiles","newWorldStamper","compressedStamperObj","compress","outputEncoding","setItem","zip","JSZip","uri","idx","substring","base64","generateAsync","then","saveAs","oldJs","newStamperObject","imgs","indexContent","libName","replaceFilesWithCDN","stamperFileContent","updateStamperObject","fnData","singleFnData","transferred","endsWith","author","keyArr","worldData","localWorldAuthor","publishModalName","worldKeyToNameAuthor","publishModalAuthor","checkPublishWorldName","renderLinkForm","publishWorld","hidePublishModal","worldNameAuthorToKey","publishDate","worldKeyToFileName","writeFile","history","pushState","getContents","onlineWorldTimeArr","onlineWorldTimeDict","worldFileNameToKey","timeCallback","modalizeErrors","getOnlineWorldObject","dateString","commit","committer","timeNum","bufContent","Buffer","stringContent","TextDecoder","decode","nameAuthorDict","show","centered","onHide","closeButton","Title","Body","Footer","buttonElems","btnData","renderPublishInfoModal","publishVisible","publishNameAuthorExists","publishModalMode","fontStyle","publishModalLoading","ace","define","isDark","cssClass","cssText","importCssString","m"],"mappings":"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CACT4b,eAAe,EACfC,aAAa,EACbC,cAAc,EACdC,cAAc,EAEdC,YAAY,EACZC,aAAa,EACbC,UAAU,EAEVC,YAAY,EACZC,cAAc,EAEdC,cAAc,EACdC,eAAe,EACfC,cAAc,EACdC,eAAe,EAEfC,YAAY,GAGd1c,SAAU,CACR2c,MAAM,EACNC,SAAS,EACTC,OAAO,GAGTlhB,WAAY,CACVghB,MAAM,EACNC,SAAS,EACTC,OAAO,EAEPhB,eAAe,EACfC,aAAa,EACbC,cAAc,EACdC,cAAc,EAEdC,YAAY,EACZC,aAAa,EACbC,UAAU,EAEVC,YAAY,EACZC,cAAc,EAEdC,cAAc,EACdC,eAAe,EACfC,cAAc,EACdC,eAAe,EAEfC,YAAY,GAGdI,aAAc,IACdC,cAAe,KAGJxgB,GAAQ,CACnB,QACA,SACA,eACA,iBACA,sBACA,sBACA,+EACA,4BACA,8BACA,SACA,SACA,UACA,oBACA,gBACA,iBACA,8BACA,iCACA,eACA,kCACA,uBACA,yBACA,2BACA,kCACA,yBACA,sCACA,kBACA,cACA,iBACA,YACA,oBACA,cACA,6DACA,SACA,cACA,UACA,eACA,kBACA,cACA,cACA,gCACA,QACA,wBACA,sBACA,0BACA,wBACA,yBACA,yBACA,+BACA,yBACA,cACA,iCACA,sBACA,wBACA,0BACA,4BACA,mBACA,QACA,YACA,mCACA,mBACA,SACA,4BACA,oBACA,kBACA,cACA,eACA,WACA,cACA,aACA,QACA,yBACA,cACA,iBACA,eACA,UACA,iBACA,0CACA,uBACA,WACA,eACA,sBACA,SACA,aACA,mBACA,kBACA,aACA,uBACA,eACA,SACA,kCACA,0CACA,WACA,uBACA,oBACA,sBACA,qBACA,sBACA,eACA,0CACA,sBACA,wBACA,gCACA,oBACA,QACA,QACA,QACA,uBACA,0BACA,QACA,WACA,QACA,WACA,gBACA,gBACA,gBACA,UACA,iBACA,mBACA,oBACA,kBACA,aACA,aACA,WACA,UACA,gBACA,cACA,aACA,SACA,mBACA,aACA,aACA,WACA,+BACA,6BACA,sCACA,wBACA,aACA,0BACA,cACA,QACA,mBACA,oBACA,gBACA,qBACA,gBACA,oBACA,eACA,8BACA,6BACA,YACA,WACA,mBACA,eACA,yBACA,iBACA,aACA,yBACA,gBACA,gBACA,gBACA,gBACA,iBACA,iBACA,iBACA,UACA,oBACA,iBACA,2BACA,0BACA,4BACA,6BACA,sCACA,kCACA,WACA,eACA,eACA,eACA,WACA,gCACA,+BACA,gCACA,iBACA,iBACA,mBACA,kBACA,gBACA,gBACA,mBACA,gBACA,QACA,8BACA,WACA,qBACA,kBACA,iBACA,oBACA,2BACA,sBACA,4BACA,sDACA,OACA,SACA,gBACA,gBACA,iBACA,mBACA,uBACA,6BACA,QACA,mBACA,6BACA,eACA,gBACA,wBACA,uBACA,iBACA,iBACA,iBACA,oBACA,oBACA,oBACA,cACA,iBACA,8BACA,eACA,kBACA,eACA,iBACA,cACA,SACA,UACA,KACA,aACA,MACA,SACA,aACA,YACA,UACA,eACA,gBACA,cACA,eACA,QACA,SACA,wBACA,aACA,QACA,QACA,kBACA,UACA,cACA,eACA,gBACA,oBACA,gBACA,gBACA,gBACA,iBACA,iBACA,iBACA,YACA,YACA,YACA,aACA,aACA,aACA,WACA,eACA,MACA,UACA,SACA,SACA,SACA,SACA,UACA,UACA,YACA,YACA,aACA,aACA,cACA,iBACA,UACA,UACA,SACA,UACA,SACA,SACA,oBACA,kBACA,UACA,oBACA,kBACA,kBACA,sDACA,sCACA,mEACA,SACA,0EACA,wDACA,4CACA,iEACA,mDACA,2CACA,kEACA,oDACA,4CACA,0EACA,qDACA,uCACA,8BACA,sBACA,+DACA,cACA,kBACA,uEACA,sDACA,6HACA,gBACA,4BACA,uBACA,sBACA,wBACA,uBACA,iCACA,mBACA,uCACA,yBACA,wCACA,0BACA,wCACA,0BACA,iBACA,mB,mBC3dF,IAAIygB,EAAUz0B,EAAQ,KAClBkM,EAAIlM,EAAQ,IACJA,EAAQ,KAwEpB,SAAS00B,EAAOpP,EAAM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","file":"static/js/main.cc28c5f4.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\n\nexport var minWidth = 60;\nexport var minHeight = 60;\nexport var padding = 10;\nvar wrapperStyles = function (_a) {\n    var isActive = _a.isActive;\n    if (isActive) {\n        return \"\\n      \\n    \";\n    }\n    return \"opacity: 1;\";\n};\nexport var Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \"\\n position: fixed;\\n  display: inline-flex;\\n  flex-direction: column;\\n  background: white;\\n  min-width: \", \"px;\\n  min-height: \", \"px;\\n  user-select: none;\\n\"], [\"\\n  \", \"\\n  position: fixed;\\n  display: inline-flex;\\n  flex-direction: column;\\n  background: white;\\n  min-width: \", \"px;\\n  min-height: \", \"px;\\n  user-select: none;\\n\"])), wrapperStyles, minWidth, minHeight);\nexport var Header = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  height: 30px;\\n  border-bottom: 1px solid rgb(215,215,215);\\n  cursor: \", \";\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-left: \", \"px;\\n\"], [\"\\n  height: 30px;\\n  border-bottom: 1px solid #ccc;\\n  cursor: \", \";\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-left: \", \"px;\\n\"])), function (_a) {\n    var isDraggable = _a.isDraggable;\n    return isDraggable ? \"-webkit-grab\" : \"default\";\n}, padding);\nexport var BottomRightResizeHandle = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"], [\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"])));\nexport var BottomLeftResizeHandle = styled.div(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  cursor: nesw-resize;\\n\"], [\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"])));\nexport var ContentWrapper = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\" \\n  padding: \", \"px;\\n\"], [\"\\n  padding: \", \"px;\\n\"])), padding);\n\nexport var CloseIcon = styled.img(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 15px;\\n  height: 15px;\\n margin-left:12px;\\n  opacity: 0.3;\\n  cursor: auto;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 60px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"], [\"\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  opacity: 0.3;\\n  cursor: pointer;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 30px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"])));\nexport var CopyIcon = styled.img(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 17px;\\n  height: 17px;\\n  opacity: 0.3;\\n  cursor: auto;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 40px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #FF0000;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"], [\"\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  opacity: 0.3;\\n  cursor: pointer;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 40px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"])));\n\nexport var Title = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  white-space: nowrap;\\n  max-width: calc(100% - 25px);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"], [\"\\n  white-space: nowrap;\\n  max-width: calc(100% - 25px);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"])));\nexport var RightResizeHandle = styled.div(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"], [\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"])));\n\nexport var LeftResizeHandle = styled.div(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  left: 0;\\n  cursor: ew-resize;\\n\"], [\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"])));\n\nexport var BottomResizeHandle = styled.div(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  width: calc(100% - 40px);\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 20px;\\n  cursor: ns-resize;\\n\"], [\"\\n  width: calc(100% - 40px);\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 20px;\\n  cursor: ns-resize;\\n\"])));\n\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8,templateObject_9, templateObject_10, templateObject_11;\n","export var isSmartPosition = function (position) {\n    return typeof position === 'string';\n};\n","import { minHeight, minWidth, padding } from \"./styled\";\nvar defaultSize = { width: minWidth, height: minHeight };\nexport var getBoundaryCoords = function (coords, size) {\n    if (size === void 0) { size = defaultSize; }\n    var x = coords.x, y = coords.y;\n    var width = size.width, height = size.height;\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var maxX = innerWidth - (width || 0) - padding;\n    var maxY = innerHeight - (height || 0) - padding;\n    return {\n        x: Math.min(Math.max(x, padding), maxX),\n        y: Math.min(Math.max(y, padding), maxY)\n    };\n};\nexport var getCordsFromInitialPosition = function (initialPosition, size) {\n    if (size === void 0) { size = defaultSize; }\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var width = size.width, height = size.height;\n    var xCenter = (innerWidth / 2) - (width / 2);\n    var yCenter = (innerHeight / 2) - (height / 2);\n    switch (initialPosition) {\n        case 'top-left':\n        default:\n            return { x: 10, y: 10 };\n        case 'top-center':\n            return { x: xCenter, y: 10 };\n        case 'bottom-center':\n            return { x: xCenter, y: Infinity };\n        case 'top-right':\n            return { x: Infinity, y: 10 };\n        case 'bottom-left':\n            return { x: 10, y: Infinity };\n        case 'bottom-right':\n            return { x: Infinity, y: Infinity };\n        case 'center':\n            return { x: xCenter, y: yCenter };\n    }\n};\n\nexport var isInView = function(coords, size){\n    var x = coords.x, y = coords.y;\n    var width = size.width, height = size.height;\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var left = x, right = x + width, top = y, bottom = y + height;\n\n    var result = left < innerWidth && right > 0 && bottom > 0 && top < innerHeight\n    return result\n}\n","var Stacker = (function () {\n    function Stacker() {\n    }\n    Stacker.getNextIndex = function (index) {\n        if (index === Stacker.maxIndex) {\n            return index;\n        }\n        Stacker.maxIndex++;\n        return Stacker.maxIndex;\n    };\n     Stacker.updateMaxIndex = function (index) {\n        Stacker.maxIndex = Math.max(Stacker.maxIndex, index)\n    };\n    Stacker.maxIndex = 100;\n    return Stacker;\n}());\nexport { Stacker };\n","// @flow\n\nclass Point {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(point: Point) {\n    return new Point(this.x + point.x, this.y + point.y);\n  }\n\n  substract(point: Point) {\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n}\n\nexport default Point;\n","// @flow\n\nimport React from 'react';\nimport Point from './Point';\n\ntype Props = {\n  startingPoint: Point,\n  startingAnchorOrientation: AnchorPositionType,\n  endingPoint: Point,\n  endingAnchorOrientation: AnchorPositionType,\n  strokeColor: string,\n  arrowLength: number,\n  strokeWidth: number,\n  strokeDasharray?: string,\n  arrowLabel?: ?React$Node,\n  arrowMarkerId: string,\n  noCurves: boolean,\n  offset?: number,\n};\n\nfunction computeEndingArrowDirectionVector(endingAnchorOrientation) {\n  switch (endingAnchorOrientation) {\n    case 'left':\n      return { arrowX: -1, arrowY: 0 };\n    case 'right':\n      return { arrowX: 1, arrowY: 0 };\n    case 'top':\n      return { arrowX: 0, arrowY: -1 };\n    case 'bottom':\n      return { arrowX: 0, arrowY: 1 };\n    default:\n      return { arrowX: 0, arrowY: 0 };\n  }\n}\n\nexport function computeEndingPointAccordingToArrowHead(\n  xArrowHeadEnd: number,\n  yArrowHeadEnd: number,\n  arrowLength: number,\n  strokeWidth: number,\n  endingAnchorOrientation: AnchorPositionType,\n) {\n  const endingVector = computeEndingArrowDirectionVector(endingAnchorOrientation);\n\n  const { arrowX, arrowY } = endingVector;\n\n  const xEnd = xArrowHeadEnd + (arrowX * arrowLength * strokeWidth) / 2;\n  const yEnd = yArrowHeadEnd + (arrowY * arrowLength * strokeWidth) / 2;\n\n  return { xEnd, yEnd };\n}\n\nexport function computeStartingAnchorPosition(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n  startingAnchorOrientation: AnchorPositionType,\n): { xAnchor1: number, yAnchor1: number } {\n  if (startingAnchorOrientation === 'top' || startingAnchorOrientation === 'bottom') {\n    const absFactor = startingAnchorOrientation === 'bottom' ? 1 : -1;\n    return {\n      xAnchor1: xStart,\n      yAnchor1: yStart + (absFactor * Math.abs(yEnd - yStart)) / 2,\n    };\n  }\n  if (startingAnchorOrientation === 'left' || startingAnchorOrientation === 'right') {\n    const absFactor = startingAnchorOrientation === 'right' ? 1 : -1;\n    return {\n      xAnchor1: xStart + (absFactor * Math.abs(xEnd - xStart)) / 2,\n      yAnchor1: yStart,\n    };\n  }\n\n  return { xAnchor1: xStart, yAnchor1: yStart };\n}\n\nexport function computeEndingAnchorPosition(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n  endingAnchorOrientation: AnchorPositionType,\n): { xAnchor2: number, yAnchor2: number } {\n  if (endingAnchorOrientation === 'top' || endingAnchorOrientation === 'bottom') {\n    const absFactor = endingAnchorOrientation === 'bottom' ? 1 : -1;\n    return {\n      xAnchor2: xEnd,\n      yAnchor2: yEnd + (absFactor * Math.abs(yEnd - yStart)) / 2,\n    };\n  }\n  if (endingAnchorOrientation === 'left' || endingAnchorOrientation === 'right') {\n    const absFactor = endingAnchorOrientation === 'right' ? 1 : -1;\n    return {\n      xAnchor2: xEnd + (absFactor * Math.abs(xEnd - xStart)) / 2,\n      yAnchor2: yEnd,\n    };\n  }\n\n  return { xAnchor2: xEnd, yAnchor2: yEnd };\n}\n\nexport function computeLabelDimensions(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n): { xLabel: number, yLabel: number, labelWidth: number, labelHeight: number } {\n  const labelWidth = Math.max(Math.abs(xEnd - xStart), 1);\n  const labelHeight = Math.max(Math.abs(yEnd - yStart), 1);\n\n  const xLabel = xEnd > xStart ? xStart : xEnd;\n  const yLabel = yEnd > yStart ? yStart : yEnd;\n\n  return {\n    xLabel,\n    yLabel,\n    labelWidth,\n    labelHeight,\n  };\n}\n\nfunction computePathString({\n  xStart,\n  yStart,\n  xAnchor1,\n  yAnchor1,\n  xAnchor2,\n  yAnchor2,\n  xEnd,\n  yEnd,\n  noCurves,\n  offset,\n}: {|\n  xStart: number,\n  yStart: number,\n  xAnchor1: number,\n  yAnchor1: number,\n  xAnchor2: number,\n  yAnchor2: number,\n  xEnd: number,\n  yEnd: number,\n  noCurves: boolean,\n  offset?: number,\n|}): string {\n  const curveMarker = noCurves ? '' : 'C';\n\n  if (offset && offset > 0) {\n    const angle = Math.atan2(yAnchor1 - yStart, xAnchor1 - xStart);\n\n    const xOffset = offset * Math.cos(angle);\n    const yOffset = offset * Math.sin(angle);\n\n    xStart = xStart + xOffset;\n    xEnd = xEnd - xOffset;\n\n    yStart = yStart + yOffset;\n    yEnd = yEnd - yOffset;\n  }\n\n  return (\n    `M${xStart},${yStart} ` +\n    `${curveMarker}${xAnchor1},${yAnchor1} ${xAnchor2},${yAnchor2} ` +\n    `${xEnd},${yEnd}`\n  );\n}\n\nconst SvgArrow = ({\n  startingPoint,\n  startingAnchorOrientation,\n  endingPoint,\n  endingAnchorOrientation,\n  strokeColor,\n  arrowLength,\n  strokeWidth,\n  strokeDasharray,\n  arrowLabel,\n  arrowMarkerId,\n  noCurves,\n  offset,\n  onLineSelection,\n}: Props) => {\n  const actualArrowLength = arrowLength * 2;\n\n  const xStart = startingPoint.x;\n  const yStart = startingPoint.y;\n\n  const endingPointWithArrow = computeEndingPointAccordingToArrowHead(\n    endingPoint.x,\n    endingPoint.y,\n    actualArrowLength,\n    strokeWidth,\n    endingAnchorOrientation,\n  );\n  const { xEnd, yEnd } = endingPointWithArrow;\n\n  const startingPosition = computeStartingAnchorPosition(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n    startingAnchorOrientation,\n  );\n  const { xAnchor1, yAnchor1 } = startingPosition;\n\n  const endingPosition = computeEndingAnchorPosition(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n    endingAnchorOrientation,\n  );\n  const { xAnchor2, yAnchor2 } = endingPosition;\n\n  const pathString = computePathString({\n    xStart,\n    yStart,\n    xAnchor1,\n    yAnchor1,\n    xAnchor2,\n    yAnchor2,\n    xEnd,\n    yEnd,\n    noCurves,\n    offset,\n  });\n\n  const { xLabel, yLabel, labelWidth, labelHeight } = computeLabelDimensions(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n  );\n\n  return (\n    <g onDoubleClick={() => onLineSelection()}>\n      <path\n        d={pathString}\n        style={{ fill: 'none', stroke: strokeColor, strokeWidth: strokeWidth, strokeDasharray }}\n        markerEnd={`url(${window.location.href.split('#')[0]}#${arrowMarkerId})`}\n      />\n\n      {arrowLabel && (\n        <foreignObject\n          x={xLabel}\n          y={yLabel}\n          width={labelWidth}\n          height={labelHeight}\n          style={{ overflow: 'visible', pointerEvents: 'none' }}\n        >\n          <div\n            style={{\n              position: 'absolute',\n              left: '50%',\n              top: '50%',\n              transform: 'translateX(-50%) translateY(-50%)',\n              pointerEvents: 'all',\n            }}\n          >\n            <div>{arrowLabel}</div>\n          </div>\n        </foreignObject>\n      )}\n    </g>\n  );\n};\n\nexport default SvgArrow;\n","// @flow\n\nimport React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport Point from './Point';\n\nimport SvgArrow from './SvgArrow';\n\ntype Props = {\n  arrowLength: number,\n  arrowThickness: number,\n  strokeColor: string,\n  strokeWidth: number,\n  strokeDasharray?: string,\n  noCurves?: boolean,\n  children: React$Node,\n  style?: Object,\n  svgContainerStyle?: Object,\n  className?: string,\n  offset?: number,\n};\n\ntype SourceToTargetsArrayType = Array<SourceToTargetType>;\n\n// For typing when munging sourceToTargetsMap\ntype JaggedSourceToTargetsArrayType = Array<SourceToTargetsArrayType>;\n\ntype State = {\n  refs: {\n    [string]: HTMLElement,\n  },\n  sourceToTargetsMap: {\n    [string]: SourceToTargetsArrayType,\n  },\n  observer: ResizeObserver,\n  parent: ?HTMLElement,\n};\n\nconst defaultSvgContainerStyle = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0,\n  background: 'black',\n};\n\nfunction rectToPoint(rect: ClientRect) {\n  return new Point(rect.left, rect.top);\n}\n\nfunction computeCoordinatesFromAnchorPosition(\n  anchorPosition: AnchorPositionType,\n  rect: ClientRect,\n) {\n  switch (anchorPosition) {\n    case 'top':\n      return rectToPoint(rect).add(new Point(rect.width / 2, 0));\n    case 'bottom':\n      return rectToPoint(rect).add(new Point(rect.width / 2, rect.height));\n    case 'left':\n      return rectToPoint(rect).add(new Point(0, rect.height / 2));\n    case 'right':\n      return rectToPoint(rect).add(new Point(rect.width, rect.height / 2));\n    case 'middle':\n      return rectToPoint(rect).add(new Point(rect.width / 2, rect.height / 2));\n    default:\n      return new Point(0, 0);\n  }\n}\n\nexport type ArcherContainerContextType = {\n  registerChild?: (string, HTMLElement) => void,\n  registerTransitions?: (string, Array<SourceToTargetType>) => void,\n  unregisterChild?: string => void,\n  unregisterTransitions?: string => void,\n};\n\nconst ArcherContainerContext = React.createContext<ArcherContainerContextType>({});\n\nexport const ArcherContainerContextProvider = ArcherContainerContext.Provider;\nexport const ArcherContainerContextConsumer = ArcherContainerContext.Consumer;\n\nexport class ArcherContainer extends React.Component<Props, State> {\n  arrowMarkerUniquePrefix: string;\n\n  constructor(props: Props) {\n    super(props);\n\n    const observer = new ResizeObserver(() => {\n      this.refreshScreen();\n    });\n\n    this.state = {\n      refs: {},\n      sourceToTargetsMap: {},\n      observer,\n      parent: null,\n    };\n\n    const arrowMarkerRandomNumber = Math.random()\n      .toString()\n      .slice(2);\n\n    this.arrowMarkerUniquePrefix = `arrow${arrowMarkerRandomNumber}`;\n  }\n\n  static defaultProps = {\n    arrowLength: 10,\n    arrowThickness: 6,\n    strokeColor: '#f00',\n    strokeWidth: 2,\n    svgContainerStyle: {},\n  };\n\n  componentDidMount() {\n    if (window) window.addEventListener('resize', this.refreshScreen);\n  }\n\n  componentWillUnmount() {\n    const { observer } = this.state;\n\n    Object.keys(this.state.refs).map(elementKey => {\n      observer.unobserve(this.state.refs[elementKey]);\n    });\n\n    if (window) window.removeEventListener('resize', this.refreshScreen);\n  }\n\n  refreshScreen = (): void => {\n    this.setState({ ...this.state });\n  };\n\n  storeParent = (ref: ?HTMLElement): void => {\n    if (this.state.parent) return;\n\n    this.setState(currentState => ({ ...currentState, parent: ref }));\n  };\n\n  getRectFromRef = (ref: ?HTMLElement): ?ClientRect => {\n    if (!ref) return null;\n\n    return ref.getBoundingClientRect();\n  };\n\n  getParentCoordinates = (): Point => {\n    const rectp = this.getRectFromRef(this.state.parent);\n\n    if (!rectp) {\n      return new Point(0, 0);\n    }\n    return rectToPoint(rectp);\n  };\n\n  getPointCoordinatesFromAnchorPosition = (\n    position: AnchorPositionType,\n    index: string,\n    parentCoordinates: Point,\n  ): Point => {\n    const rect = this.getRectFromRef(this.state.refs[index]);\n\n    if (!rect) {\n      return null;\n    }\n    const absolutePosition = computeCoordinatesFromAnchorPosition(position, rect);\n\n    var retPos = absolutePosition.substract(parentCoordinates);\n    retPos.x = retPos.x / this.props.scale;\n    retPos.y = retPos.y / this.props.scale;\n\n    return retPos;\n  };\n\n  registerTransitions = (\n    elementId: string,\n    newSourceToTargets: Array<SourceToTargetType>,\n  ): void => {\n    this.setState((prevState: State) => ({\n      sourceToTargetsMap: {\n        ...prevState.sourceToTargetsMap,\n        [elementId]: newSourceToTargets,\n      },\n    }));\n  };\n\n  unregisterTransitions = (elementId: string): void => {\n    this.setState(currentState => {\n      const sourceToTargetsMapCopy = { ...currentState.sourceToTargetsMap };\n      delete sourceToTargetsMapCopy[elementId];\n      return { sourceToTargetsMap: sourceToTargetsMapCopy };\n    });\n  };\n\n  registerChild = (id: string, ref: HTMLElement): void => {\n    if (!this.state.refs[id]) {\n      this.state.observer.observe(ref);\n\n      this.setState((currentState: State) => ({\n        refs: { ...currentState.refs, [id]: ref },\n      }));\n    }\n  };\n\n  unregisterChild = (id: string): void => {\n    this.setState((currentState: State) => {\n      currentState.observer.unobserve(currentState.refs[id]);\n      const newRefs = { ...currentState.refs };\n      delete newRefs[id];\n      return { refs: newRefs };\n    });\n  };\n\n  getSourceToTargets = (): Array<SourceToTargetType> => {\n    const { sourceToTargetsMap } = this.state;\n\n    // Object.values is unavailable in IE11\n    const jaggedSourceToTargets: JaggedSourceToTargetsArrayType = Object.keys(\n      sourceToTargetsMap,\n    ).map((key: string) => sourceToTargetsMap[key]);\n\n    // Flatten\n    return [].concat.apply([], jaggedSourceToTargets);\n  };\n\n  getDist = (x1, y1, x2, y2) => Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  p5NumberMap = (value, in_min, in_max, out_min, out_max) => {\n    return ((value - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n  };\n\n  setRelativeOffsets = (sourceToTargets, anchor, parentCoordinates, id) => {\n    var relevantSourceToTargets = sourceToTargets.filter(\n      data =>\n        (data.source.id === id && data.source.anchor === anchor) ||\n        (data.target.id === id && data.target.anchor === anchor),\n    );\n\n    var otherLocationPosList = [];\n    var otherLocationPosDict = {};\n\n    relevantSourceToTargets.map(data => {\n      if (data.source.id === id) {\n        var otherLocation = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.target.id,\n          parentCoordinates,\n        );\n\n        var location = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.source.id,\n          parentCoordinates,\n        );\n      }\n\n      if (data.target.id === id) {\n        var otherLocation = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.source.id,\n          parentCoordinates,\n        );\n\n        var location = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.target.id,\n          parentCoordinates,\n        );\n      }\n\n      var opposite = -1 * (location.y - otherLocation.y);\n      var adjacent = -1 * (location.x - otherLocation.x);\n      var theta = Math.atan(opposite / adjacent);\n      var thetaDegrees = (theta * 180) / Math.PI;\n\n      if (opposite > 0 && adjacent > 0) {\n      }\n\n      if (opposite < 0 && adjacent > 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 0, -90, 0, 90);\n      } else if (opposite < 0 && adjacent < 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 90, 0, 90, 180);\n      } else if (opposite > 0 && adjacent < 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 0, -90, 180, 270);\n      } else if (opposite > 0 && adjacent > 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 90, 0, 270, 360);\n      }\n\n      if (anchor === 'right' && thetaDegrees >= 270) {\n        thetaDegrees -= 360;\n      }\n\n      var negationFactor;\n\n      if (anchor === 'bottom') {\n        negationFactor = 1;\n        thetaDegrees = (thetaDegrees + 270) % 360;\n      } else if (anchor === 'left') {\n        negationFactor = 1;\n        thetaDegrees = (thetaDegrees + 0) % 360;\n      } else if (anchor === 'top') {\n        thetaDegrees = (thetaDegrees + 90) % 360;\n        negationFactor = -1;\n      } else if (anchor === 'right') {\n        thetaDegrees = (thetaDegrees + 180) % 360;\n        negationFactor = -1;\n      }\n\n      otherLocationPosList.push(thetaDegrees);\n      otherLocationPosDict[thetaDegrees] = data;\n\n      // var negationFactor;\n      // if (anchor === 'top' || anchor === 'right') {\n      //   negationFactor = -1;\n      // } else if (anchor === 'left' || anchor === 'bottom') {\n      //   negationFactor = 1;\n      // }\n\n      otherLocationPosList.sort(function(a, b) {\n        return a - b;\n      });\n\n      otherLocationPosList.map((pos, index) => {\n        var data = otherLocationPosDict[pos];\n        var medianVal = 0.5 * (otherLocationPosList.length - 1);\n        if (data.source.id === id) {\n          data.relativeSourceOffset =\n            (index - medianVal) * this.props.relativeOffsetSize * negationFactor;\n        } else {\n          data.relativeTargetOffset =\n            (index - medianVal) * this.props.relativeOffsetSize * negationFactor;\n        }\n      });\n    });\n  };\n\n  getComputedAnchors = (source, target, parentCoordinates) => {\n    var startingAnchorOrientation = source.anchor;\n    var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n      'middle',\n      source.id,\n      parentCoordinates,\n    );\n\n    var endingAnchorOrientation = target.anchor;\n    var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n      'middle',\n      target.id,\n      parentCoordinates,\n    );\n\n    var xDiff = startingPoint.x - endingPoint.x;\n    var yDiff = startingPoint.y - endingPoint.y;\n\n    var computedSourceAnchor;\n    var computedTargetAnchor;\n\n    if (Math.abs(yDiff) > Math.abs(xDiff)) {\n      if (yDiff > 0) {\n        computedTargetAnchor = 'bottom';\n        computedSourceAnchor = 'top';\n      } else {\n        computedTargetAnchor = 'top';\n        computedSourceAnchor = 'bottom';\n      }\n    } else {\n      if (xDiff < 0) {\n        computedTargetAnchor = 'left';\n        computedSourceAnchor = 'right';\n      } else {\n        computedTargetAnchor = 'right';\n        computedSourceAnchor = 'left';\n      }\n    }\n\n    var newSource = Object.assign({}, source);\n    var newTarget = Object.assign({}, target);\n\n    if (source.anchor === 'middle') {\n      newSource.anchor = computedSourceAnchor;\n    }\n\n    if (target.anchor === 'middle') {\n      newTarget.anchor = computedTargetAnchor;\n    }\n\n    return { source: newSource, target: newTarget };\n  };\n\n  computeArrows = (): React$Node => {\n    const parentCoordinates = this.getParentCoordinates();\n\n    var sourceToTargets = this.getSourceToTargets();\n\n    sourceToTargets = sourceToTargets.filter(data => {\n      var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n        'middle',\n        data.source.id,\n        parentCoordinates,\n      );\n\n      var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n        'middle',\n        data.target.id,\n        parentCoordinates,\n      );\n\n      return startingPoint && endingPoint;\n    });\n\n    sourceToTargets = sourceToTargets.map(data => {\n      var result = this.getComputedAnchors(data.source, data.target, parentCoordinates);\n      data = Object.assign({}, data);\n      data.source = result.source;\n      data.target = result.target;\n      return data;\n    });\n\n    var idDict = {};\n    sourceToTargets.map(data => {\n      idDict[data.source.id] = '';\n      idDict[data.target.id] = '';\n    });\n\n    Object.keys(idDict).map(id => {\n      this.setRelativeOffsets(sourceToTargets, 'left', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'right', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'top', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'bottom', parentCoordinates, id);\n    });\n\n    return sourceToTargets.map(data => {\n      var source = data.source;\n      var target = data.target;\n      var label = data.label;\n      var style = data.style;\n      var relativeSourceOffset = data.relativeSourceOffset;\n      var relativeTargetOffset = data.relativeTargetOffset;\n      const strokeColor = (style && style.strokeColor) || this.props.strokeColor;\n\n      const arrowLength = (style && style.arrowLength) || this.props.arrowLength;\n\n      const strokeWidth = (style && style.strokeWidth) || this.props.strokeWidth;\n\n      const strokeDasharray = (style && style.strokeDasharray) || this.props.strokeDasharray;\n\n      const arrowThickness = (style && style.arrowThickness) || this.props.arrowThickness;\n\n      const noCurves = (style && style.noCurves) || this.props.noCurves;\n\n      const offset = this.props.offset || 0;\n\n      var endingAnchorOrientation = target.anchor;\n      var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n        target.anchor,\n        target.id,\n        parentCoordinates,\n      );\n\n      var startingAnchorOrientation = source.anchor;\n      var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n        source.anchor,\n        source.id,\n        parentCoordinates,\n      );\n\n      if (source.anchor === 'top' || source.anchor === 'bottom') {\n        startingPoint.x += relativeSourceOffset;\n      } else {\n        startingPoint.y += relativeSourceOffset;\n      }\n\n      if (target.anchor === 'top' || target.anchor === 'bottom') {\n        endingPoint.x += relativeTargetOffset;\n      } else {\n        endingPoint.y += relativeTargetOffset;\n      }\n\n      var onLineSelection = this.props.onLineSelection;\n      if (!this.props.onLineSelection) {\n        onLineSelection = () => null;\n      }\n\n      return (\n        <SvgArrow\n          onLineSelection={() => onLineSelection({ source: source, target: target })}\n          key={JSON.stringify({ source, target })}\n          startingPoint={startingPoint}\n          startingAnchorOrientation={startingAnchorOrientation}\n          endingPoint={endingPoint}\n          endingAnchorOrientation={endingAnchorOrientation}\n          strokeColor={strokeColor}\n          arrowLength={arrowLength}\n          strokeWidth={strokeWidth}\n          strokeDasharray={strokeDasharray}\n          arrowLabel={label}\n          arrowThickness={arrowThickness}\n          arrowMarkerId={this.getMarkerId(source, target)}\n          noCurves={!!noCurves}\n          offset={offset}\n        />\n      );\n    });\n  };\n\n  /** Generates an id for an arrow marker\n   * Useful to have one marker per arrow so that each arrow\n   * can have a different color!\n   * */\n  getMarkerId = (source: EntityRelationType, target: EntityRelationType): string => {\n    return `${this.arrowMarkerUniquePrefix}${source.id}${target.id}`;\n  };\n\n  /** Generates all the markers\n   * We want one marker per arrow so that each arrow can have\n   * a different color or size\n   * */\n  generateAllArrowMarkers = (): React$Node => {\n    return this.getSourceToTargets().map(({ source, target, label, style }: SourceToTargetType) => {\n      const strokeColor = (style && style.strokeColor) || this.props.strokeColor;\n\n      const arrowLength = (style && style.arrowLength) || this.props.arrowLength;\n\n      const arrowThickness = (style && style.arrowThickness) || this.props.arrowThickness;\n\n      const arrowPath = `M0,0 L0,${arrowThickness} L${arrowLength - 1},${arrowThickness / 2} z`;\n\n      return (\n        <marker\n          id={this.getMarkerId(source, target)}\n          key={this.getMarkerId(source, target)}\n          markerWidth={arrowLength}\n          markerHeight={arrowThickness}\n          refX=\"0\"\n          refY={arrowThickness / 2}\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path d={arrowPath} fill={strokeColor} />\n        </marker>\n      );\n    });\n  };\n\n  svgContainerStyle = () => ({\n    ...defaultSvgContainerStyle,\n    ...this.props.svgContainerStyle,\n  });\n\n  render() {\n    const SvgArrows = this.computeArrows();\n\n    return (\n      <ArcherContainerContextProvider\n        value={{\n          registerTransitions: this.registerTransitions,\n          unregisterTransitions: this.unregisterTransitions,\n          registerChild: this.registerChild,\n          unregisterChild: this.unregisterChild,\n        }}\n      >\n        <div style={{ ...this.props.style }} className={this.props.className}>\n          <div>\n            <svg\n              viewBox={`${-this.props.left / this.props.scale} ${-this.props.top /\n                this.props.scale} ${window.innerWidth / this.props.scale} ${window.innerHeight /\n                this.props.scale}`}\n              style={{\n                position: 'absolute',\n                top: -this.props.top / this.props.scale,\n                left: -this.props.left / this.props.scale,\n                width: window.innerWidth / this.props.scale,\n                height: window.innerHeight / this.props.scale,\n              }}\n            >\n              <defs>{this.generateAllArrowMarkers()}</defs>\n\n              {SvgArrows}\n            </svg>\n          </div>\n          <div style={{ height: '100%' }} ref={this.storeParent}>\n            {this.props.children}\n          </div>\n        </div>\n      </ArcherContainerContextProvider>\n    );\n  }\n}\n\nexport default ArcherContainer;\n","// @flow\n\nimport React from 'react';\nimport isEqual from 'react-fast-compare';\n\nimport { type ArcherContainerContextType, ArcherContainerContextConsumer } from './ArcherContainer';\n\ntype OuterProps = {\n  id: string,\n  relations: Array<RelationType>,\n  style?: Object,\n  className?: string,\n  children: React$Node,\n};\n\ntype InnerProps = OuterProps & {\n  context: ArcherContainerContextType,\n};\n\nexport class ArcherElementNoContext extends React.Component<InnerProps> {\n  static defaultProps = {\n    relations: [],\n  };\n\n  componentDidUpdate(prevProps: InnerProps) {\n    if (isEqual(prevProps.relations, this.props.relations)) return;\n\n    this.registerTransitions(this.props.relations);\n  }\n\n  componentDidMount() {\n    if (this.props.relations.length === 0) {\n      return;\n    }\n\n    this.registerTransitions(this.props.relations);\n  }\n\n  componentWillUnmount() {\n    this.unregisterChild();\n    this.unregisterTransitions();\n  }\n\n  registerTransitions = (newRelations: Array<RelationType>) => {\n    const newSourceToTarget = this.generateSourceToTarget(newRelations);\n\n    if (!this.props.context.registerTransitions) {\n      throw new Error(\n        `Could not find \"registerTransition\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.registerTransitions(this.props.id, newSourceToTarget);\n  };\n\n  generateSourceToTarget = (relations: Array<RelationType>): Array<SourceToTargetType> => {\n    const { id } = this.props;\n\n    return relations.map(\n      ({ targetId, sourceAnchor, targetAnchor, label, style }: RelationType) => ({\n        source: { id, anchor: sourceAnchor },\n        target: { id: targetId, anchor: targetAnchor },\n        label,\n        style,\n      }),\n    );\n  };\n\n  unregisterTransitions = () => {\n    if (!this.props.context.unregisterTransitions) {\n      throw new Error(\n        `Could not find \"unregisterTransitions\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.unregisterTransitions(this.props.id);\n  };\n\n  onRefUpdate = (ref: ?HTMLElement) => {\n    if (!ref) return;\n    if (!this.props.context.registerChild) {\n      throw new Error(\n        `Could not find \"registerChild\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.registerChild(this.props.id, ref);\n  };\n\n  unregisterChild = () => {\n    if (!this.props.context.unregisterChild) {\n      throw new Error(\n        `Could not find \"unregisterChild\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.unregisterChild(this.props.id);\n  };\n\n  render() {\n    return (\n      <div\n        style={{ ...this.props.style, position: 'relative' }}\n        className={this.props.className}\n        ref={this.onRefUpdate}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst ArcherElementWithContext = (props: OuterProps) => (\n  <ArcherContainerContextConsumer>\n    {context => <ArcherElementNoContext {...props} context={context} />}\n  </ArcherContainerContextConsumer>\n);\n\nexport default ArcherElementWithContext;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Component } from \"react\";\nimport {\n  Wrapper,\n  Header,\n  BottomRightResizeHandle,\n  BottomLeftResizeHandle,\n  RightResizeHandle,\n  BottomResizeHandle,\n  LeftResizeHandle,\n  ContentWrapper,\n  padding,\n  Title,\n  minWidth,\n  minHeight\n} from \"./styled\";\nimport { isSmartPosition } from \"./domain\";\nimport {\n  getCordsFromInitialPosition,\n  getBoundaryCoords,\n  isInView\n} from \"./utils\";\nimport { Stacker } from \"./stacker\";\nimport styled from \"styled-components\";\n\nimport \"./../../../App.scss\";\nimport $ from \"jquery\";\nimport pf, { globals, p5Lib } from \"./../../../globals.js\";\n\nimport ArcherContainer from \"./../../../react-archer/src/ArcherContainer.js\";\nimport ArcherElement from \"./../../../react-archer/src/ArcherElement.js\";\n\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nvar __extends =\n  (this && this.__extends) ||\n  (function() {\n    var extendStatics =\n      Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array &&\n        function(d, b) {\n          d.__proto__ = b;\n        }) ||\n      function(d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n      };\n    return function(d, b) {\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype =\n        b === null\n          ? Object.create(b)\n          : ((__.prototype = b.prototype), new __());\n    };\n  })();\n\nvar Cristal = (function(_super) {\n  __extends(Cristal, _super);\n  function Cristal() {\n    var _this = (_super !== null && _super.apply(this, arguments)) || this;\n\n    if (_this.props.zIndex) {\n      var zIndex = _this.props.zIndex;\n      Stacker.updateMaxIndex(zIndex);\n    } else {\n      var zIndex = Stacker.getNextIndex();\n    }\n\n    _this.state = {\n      x: padding,\n      y: padding,\n      isDragging: false,\n      isResizingX: false,\n      isResizingY: false,\n      isResizingXLeft: false,\n      zIndex: zIndex,\n      downKey: -1,\n      isMoving: false,\n      originalHeight: null,\n      ghostX: 0,\n      ghostY: 0\n    };\n\n    _this.opt = 18;\n    _this.cmd = 91;\n    _this.ctrl = 17;\n    _this.plus = 187;\n    _this.minus = 189;\n    _this.zero = 48;\n    _this.space = 32;\n    _this.onWindowResize = function() {\n      var _a = _this.state,\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n      var size = width && height ? { width: width, height: height } : undefined;\n      var _b = getBoundaryCoords({ x: x, y: y }, size),\n        newX = _b.x,\n        newY = _b.y;\n      _this.setState({\n        x: newX,\n        y: newY\n      });\n    };\n    _this.saveWrapperRef = function(el) {\n      _this.childrenElement = el;\n      if (!_this.childrenElement) return;\n      var initialSize = _this.props.initialSize;\n      var width, height;\n      if (initialSize) {\n        var rect = _this.childrenElement.getBoundingClientRect();\n        if (initialSize.width) {\n          width = initialSize.width;\n        } else {\n          width = rect.width;\n        }\n        if (initialSize.height) {\n          height = initialSize.height;\n        } else {\n          height = rect.height;\n        }\n      } else {\n        var rect = _this.childrenElement.getBoundingClientRect();\n        width = rect.width;\n        height = rect.height;\n      }\n\n      _this.setState({ width: width, height: height, originalHeight: height });\n      _this.setInitialPosition({ width: width, height: height });\n    };\n    _this.setInitialPosition = function(size) {\n      var initialPosition = _this.props.initialPosition;\n\n      if (!initialPosition) return;\n      var cords;\n      if (isSmartPosition(initialPosition)) {\n        cords = getCordsFromInitialPosition(initialPosition, size);\n      } else {\n        cords = initialPosition;\n      }\n      // var _a = getBoundaryCoords(cords, size),\n      //   x = _a.x,\n      //   y = _a.y;\n      _this.setState({ x: cords.x, y: cords.y });\n    };\n    _this.saveHeaderRef = function(el) {\n      _this.headerElement = el;\n    };\n\n    _this.onKeyDown = function(e) {\n      if (\n        _this.state.downKey === _this.cmd ||\n        _this.state.downKey === _this.ctrl\n      ) {\n        if (e.keyCode === _this.zero) {\n          e.preventDefault();\n        } else if (e.keyCode === _this.plus) {\n          e.preventDefault();\n        } else if (e.keyCode === _this.minus) {\n          e.preventDefault();\n        }\n      } else {\n        _this.setState({ downKey: e.keyCode });\n      }\n    };\n\n    _this.onKeyUp = function(e) {\n      if (e.keyCode === _this.state.downKey) {\n        _this.setState({ downKey: -1 });\n      }\n    };\n\n    _this.onMouseDown = function(e) {\n      var isDraggable = _this.props.isDraggable;\n      if (!isDraggable) return;\n\n      _this.setState({\n        isDragging: true\n      });\n    };\n\n    _this.manualResize = function(widthDiff, heightDiff) {\n      var width = _this.state.width,\n        height = _this.state.height;\n\n      _this.setState({ width: width + widthDiff, height: height + heightDiff });\n    };\n\n    _this.manualSetSize = function(width, height) {\n      _this.setState({ width: width, height: height });\n    };\n\n    _this.onWheel = function(e) {\n      if (e.ctrlKey) {\n        e.preventDefault();\n      }\n    };\n\n    _this.getPosition = function(movementX, movementY) {\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n\n      var newX = _this.state.ghostX + movementX;\n      var newY = _this.state.ghostY + movementY;\n\n      this.setState({ ghostX: newX, ghostY: newY });\n      if (_this.props.getSnapMargin) {\n        var snapMargin = _this.props.getSnapMargin();\n      } else {\n        var snapMargin = 0;\n      }\n\n      if (snapMargin === 0) {\n        return { x: newX, y: newY };\n      } else {\n        var roundX = Math.round(newX / snapMargin) * snapMargin;\n        var roundY = Math.round(newY / snapMargin) * snapMargin;\n        return { x: roundX, y: roundY };\n      }\n    };\n\n    _this.getDimensions = function(widthDiff, heightDiff, changeX) {\n      var newWidth = _this.state.ghostX + widthDiff;\n      var newHeight = _this.state.ghostY + heightDiff;\n      var oldAbsX = _this.state.x + _this.state.width;\n      var oldAbsY = _this.state.y + _this.state.height;\n      var newAbsX = _this.state.x + newWidth;\n      var newAbsY = _this.state.y + newHeight;\n\n      if (changeX) {\n        oldAbsX = _this.state.x;\n        newAbsX = _this.state.ghostX - widthDiff;\n      }\n\n      var ghostX = Math.max(newWidth, minWidth);\n      if (changeX) {\n        ghostX = _this.state.ghostX - widthDiff;\n      }\n      var ghostY = Math.max(newHeight, minHeight);\n      var onResize = _this.props.onResize;\n      if (_this.props.getSnapMargin) {\n        var snapMargin = _this.props.getSnapMargin();\n      } else {\n        var snapMargin = 0;\n      }\n      if (snapMargin === 0) {\n        var resizeBlocked = onResize(\n          widthDiff,\n          heightDiff,\n          _this.state.x,\n          false\n        );\n        if (!resizeBlocked) {\n          this.setState({ ghostX: ghostX, ghostY: ghostY });\n          return { widthDiff: widthDiff, heightDiff: heightDiff };\n        }\n      } else {\n        var roundAbsX = Math.round(newAbsX / snapMargin) * snapMargin;\n        var roundAbsY = Math.round(newAbsY / snapMargin) * snapMargin;\n\n        var sendingWidthDiff = 0;\n        var sendingHeightDiff = 0;\n        if (widthDiff != 0) {\n          sendingWidthDiff = roundAbsX - oldAbsX;\n        }\n        if (heightDiff != 0) {\n          sendingHeightDiff = roundAbsY - oldAbsY;\n        }\n\n        if (changeX) {\n          sendingWidthDiff = -sendingWidthDiff;\n        }\n\n        var resizeBlocked = onResize(\n          sendingWidthDiff,\n          sendingHeightDiff,\n          _this.state.x,\n          false\n        );\n\n        if (!resizeBlocked) {\n          this.setState({ ghostX: ghostX, ghostY: ghostY });\n          return { widthDiff: sendingWidthDiff, heightDiff: sendingHeightDiff };\n        }\n      }\n\n      return { widthDiff: 0, heightDiff: 0 };\n    };\n\n    _this.onMouseMove = function(e) {\n      var isResizing = _this.isResizing;\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n      var _a = _this.state,\n        isDragging = _a.isDragging,\n        currentX = _a.x,\n        currentY = _a.y,\n        currentWidth = _a.width,\n        currentHeight = _a.height;\n      var movementX = e.movementX,\n        movementY = e.movementY;\n      var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight;\n\n      if (isDragging) {\n        window.postMessage({ type: \"edited\" }, \"*\");\n        var size =\n          currentWidth && currentHeight\n            ? { width: currentWidth, height: currentHeight }\n            : undefined;\n\n        _this.onStartMove(() => {\n          if (_this.state.downKey === _this.space) {\n            return;\n          }\n          var newPosition = _this.getPosition(\n            movementX / scale,\n            movementY / scale\n          );\n          var newX = newPosition.x;\n          var newY = newPosition.y;\n\n          _this.setState({ x: newX, y: newY });\n        });\n\n        // _this.setState({ x: newX, y: newY }, _this.onStartMove);\n        return;\n      } else if (isResizing) {\n        window.postMessage({ type: \"edited\" }, \"*\");\n        _this.resizeCristal(e);\n      }\n    };\n\n    _this.resizeCristal = function(e) {\n      var isResizing = _this.isResizing;\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n\n      var _a = _this.state,\n        isDragging = _a.isDragging,\n        currentX = _a.x,\n        currentY = _a.y,\n        currentWidth = _a.width,\n        currentHeight = _a.height;\n      var movementX = e.movementX / scale,\n        movementY = e.movementY / scale;\n      var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight;\n      var newX = currentX + movementX;\n      var newY = currentY + movementY;\n      var _c = _this.state,\n        isResizingX = _c.isResizingX,\n        isResizingY = _c.isResizingY,\n        isResizingXLeft = _c.isResizingXLeft;\n\n      var height = currentHeight;\n      var width = currentWidth;\n      var x = currentX;\n\n      var widthDiff = 0;\n      var heightDiff = 0;\n      var changeX = false;\n\n      if (isResizingX) {\n        widthDiff = movementX;\n        // var width = Math.max(newWidth, minWidth);\n      }\n      if (isResizingXLeft) {\n        widthDiff = -movementX;\n        changeX = true;\n\n        // var width = Math.max(newWidth, minWidth);\n        // var x = currentX + movementX;\n      }\n      if (isResizingY) {\n        heightDiff = movementY;\n        // var height = Math.max(newHeight, minHeight);\n      }\n\n      _this.notifyResize(widthDiff, heightDiff, changeX);\n    };\n\n    _this.onStoppedMove = function() {\n      if (this.state.isMoving) {\n        _this.notifyStopMove();\n      }\n\n      _this.setState({ isMoving: false });\n    };\n\n    _this.onStartMove = function(callBack) {\n      _this.notifyMove();\n      if (_this.state.isMoving === false) {\n        _this.setState({ ghostX: _this.state.x, ghostY: _this.state.y }, () => {\n          _this.setState({ isMoving: true }, () => callBack());\n        });\n        _this.notifyStartMove();\n        if (_this.state.downKey === _this.opt) {\n          _this.notifyOptMove();\n        }\n      } else {\n        callBack();\n      }\n    };\n    _this.notifyMove = function() {\n      var onMove = _this.props.onMove;\n      onMove && onMove(_this.state);\n    };\n    _this.notifyZChange = function() {\n      var onZChange = _this.props.onZChange;\n      onZChange && onZChange(_this.state);\n    };\n    _this.notifyResize = function(widthDiff, heightDiff, changeX) {\n      var onResize = _this.props.onResize;\n      // var heightDiff = newHeight - _this.state.height;\n      // var widthDiff = newWidth - _this.state.width;\n      var resizeBlocked = false;\n\n      var dimensions = this.getDimensions(widthDiff, heightDiff, changeX);\n\n      widthDiff = dimensions.widthDiff;\n      heightDiff = dimensions.heightDiff;\n      var newHeight = Math.max(_this.state.height + heightDiff, minHeight);\n      var newWidth = Math.max(_this.state.width + widthDiff, minWidth);\n      var newX = _this.state.x;\n      if (changeX) {\n        newX -= widthDiff;\n      }\n      onResize(widthDiff, heightDiff, _this.state.x, true);\n      _this.setState({ height: newHeight, width: newWidth, x: newX });\n    };\n\n    _this.notifyStartMove = function() {\n      var onStartMove = _this.props.onStartMove;\n      onStartMove && onStartMove(_this.state);\n    };\n    _this.notifyStopMove = function() {\n      var onStopMove = _this.props.onStopMove;\n      onStopMove && onStopMove(_this.state);\n    };\n    _this.notifyOptMove = function() {\n      var onOptMove = _this.props.onOptMove;\n      onOptMove && onOptMove(_this.state);\n    };\n    _this.notifyStartResize = function() {\n      var onStartResize = _this.props.onStartResize;\n      onStartResize && onStartResize(_this.state);\n    };\n    _this.notifyStopResize = function() {\n      var onStopResize = _this.props.onStopResize;\n      onStopResize && onStopResize(_this.state);\n    };\n\n    _this.onMouseUp = function() {\n      _this.onStoppedMove();\n      if (\n        _this.state.isResizingY ||\n        _this.state.isResizingX ||\n        _this.state.isResizingXLeft\n      ) {\n        _this.notifyStopResize();\n      }\n      _this.setState({\n        isDragging: false,\n        isResizingX: false,\n        isResizingXLeft: false,\n        isResizingY: false,\n        mouseIsDown: false\n      });\n    };\n    _this.startFullResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      _this.setState({\n        isResizingX: true,\n        isResizingY: true\n      });\n    };\n    _this.startFullLeftResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      _this.setState({\n        isResizingXLeft: true,\n        isResizingY: true\n      });\n    };\n    _this.startXResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingX: true });\n    };\n    _this.startXLeftResize = function() {\n      _this.setState({ ghostX: _this.state.x, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingXLeft: true });\n    };\n    _this.startYResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingY: true });\n    };\n    _this.renderResizeHandles = function() {\n      var isResizable = _this.props.isResizable;\n\n      if (!isResizable) return;\n\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n      var height = _this.state.height;\n      var width = _this.state.width;\n      var thickness = 5;\n      var color = \"transparent\";\n      return [\n        React.createElement(RightResizeHandle, {\n          key: \"right-resize\",\n          onMouseDown: _this.startXResize,\n          style: {\n            background: color,\n            right: -thickness / 2,\n            width: thickness / scale,\n            bottom: thickness / scale,\n            height: height - 30 - thickness / scale\n          }\n        }),\n        React.createElement(LeftResizeHandle, {\n          key: \"left-resize\",\n          onMouseDown: _this.startXLeftResize,\n          style: {\n            background: color,\n            left: -thickness / 2,\n            width: thickness / scale,\n            bottom: thickness / scale,\n            height: height - 30 - thickness / scale\n          }\n        }),\n        React.createElement(BottomRightResizeHandle, {\n          key: \"bottom-right-resize\",\n          onMouseDown: _this.startFullResize,\n          style: {\n            background: color,\n            right: -thickness / 2,\n            bottom: -thickness / 2,\n            width: thickness / scale,\n            height: thickness / scale\n          }\n        }),\n        React.createElement(BottomLeftResizeHandle, {\n          key: \"bottom-left-resize\",\n          onMouseDown: _this.startFullLeftResize,\n          style: {\n            background: color,\n            left: -thickness / 2,\n            bottom: -thickness / 2,\n            width: thickness / scale,\n            height: thickness / scale\n          }\n        }),\n        React.createElement(BottomResizeHandle, {\n          key: \"bottom-resize\",\n          onMouseDown: _this.startYResize,\n          style: {\n            background: color,\n            bottom: -thickness / 2,\n            height: thickness / scale,\n            left: thickness / scale,\n            width: width - (2 * thickness) / scale\n          }\n        })\n      ];\n    };\n\n    _this.changeZIndex = function() {\n      var zIndex = _this.state.zIndex;\n      _this.setState(\n        {\n          zIndex: Stacker.getNextIndex(zIndex)\n        },\n        _this.notifyZChange\n      );\n    };\n\n    return _this;\n  }\n  Cristal.prototype.componentDidMount = function() {\n    document.addEventListener(\"mousedown\", this.onGlobalMouseDown);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n\n    document.addEventListener(\"wheel\", this.onWheel, { passive: false });\n    var iframeElem = document.getElementById(\"iframe\" + this.props.parentId);\n    if (iframeElem) {\n      iframeElem.addEventListener(\"wheel\", e => console.log(e));\n    }\n\n    this.notifyZChange();\n    // window.addEventListener('resize', this.onWindowResize);\n  };\n  Cristal.prototype.componentWillUnmount = function() {\n    document.removeEventListener(\"mousedown\", this.onGlobalMouseDown);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n    document.removeEventListener(\"wheel\", this.onWheel);\n\n    // window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  Object.defineProperty(Cristal.prototype, \"isResizing\", {\n    get: function() {\n      var _a = this.state,\n        isResizingX = _a.isResizingX,\n        isResizingY = _a.isResizingY,\n        isResizingXLeft = _a.isResizingXLeft;\n      return isResizingX || isResizingY || isResizingXLeft;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  function getLineRelations(_this) {\n    var _a = _this.state,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      isDragging = _a.isDragging,\n      zIndex = _a.zIndex;\n    if (_this.props.lineData) {\n      var lineData = _this.props.lineData;\n    } else {\n      var lineData = [];\n    }\n\n    var lineRelations = lineData.map(line => {\n      var targetAnchor;\n      var sourceAnchor;\n      var sourceX = x + width / 2;\n      var sourceY = y + height / 2;\n      var targetX =\n        parseInt($(\"#vertex_\" + line.end).css(\"left\"), 10) +\n        parseInt($(\"#vertex_\" + line.end).css(\"width\"), 10) / 2;\n      var targetY =\n        parseInt($(\"#vertex_\" + line.end).css(\"top\"), 10) +\n        parseInt($(\"#vertex_\" + line.end).css(\"height\"), 10) / 2;\n\n      var xDiff = sourceX - targetX;\n      var yDiff = sourceY - targetY;\n\n      if (!targetX) {\n        return null;\n      }\n\n      if (Math.abs(yDiff) > Math.abs(xDiff)) {\n        if (yDiff > 0) {\n          targetAnchor = \"bottom\";\n          sourceAnchor = \"top\";\n        } else {\n          targetAnchor = \"top\";\n          sourceAnchor = \"bottom\";\n        }\n      } else {\n        if (xDiff < 0) {\n          targetAnchor = \"left\";\n          sourceAnchor = \"right\";\n        } else {\n          targetAnchor = \"right\";\n          sourceAnchor = \"left\";\n        }\n      }\n\n      line.targetAnchor = targetAnchor;\n      line.sourceAnchor = sourceAnchor;\n      line.targetId = \"line_\" + line.end;\n\n      return line;\n    });\n\n    return lineRelations.filter(line => line);\n  }\n\n  function createIcon(\n    _this,\n    iconType,\n    hiddenFlag = false,\n    classVal = \"\",\n    callBack = null,\n    tooltipText\n  ) {\n    if (hiddenFlag) {\n      return null;\n    }\n\n    var uniqueClass = classVal + _this.props.parentId;\n    var mouseOverCallback = () => {\n      $(\".\" + uniqueClass).css({ opacity: \"1\" });\n    };\n\n    var mouseOutCallback = () => {\n      $(\".\" + uniqueClass).css({ opacity: globals.iconOpacity });\n    };\n    var opacity = globals.iconOpacity;\n    if (!callBack) {\n      mouseOverCallback = () => {};\n      mouseOutCallback = () => {};\n      opacity = opacity * 0.5;\n    }\n\n    var icon = React.createElement(\"img\", {\n      onClick: callBack,\n      style: {\n        opacity: opacity,\n        height: globals.iconSize,\n        width: globals.iconSize\n      },\n      className: \"text-greyIcon m-1 \" + uniqueClass,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n\n    if (!tooltipText) {\n      return icon;\n    }\n    return (\n      <div onMouseOver={mouseOverCallback} onMouseOut={mouseOutCallback}>\n        <OverlayTrigger\n          trigger=\"hover\"\n          placement=\"top\"\n          overlay={\n            <Tooltip id=\"alert\" className=\"picker-style-tooltip\">\n              {tooltipText}\n            </Tooltip>\n          }\n        >\n          {icon}\n        </OverlayTrigger>\n      </div>\n    );\n  }\n\n  Object.defineProperty(Cristal.prototype, \"header\", {\n    get: function() {\n      var _a = this.props,\n        title = _a.title,\n        isDraggable = _a.isDraggable,\n        onClose = _a.onClose,\n        closeHidden = _a.closeHidden,\n        onCopy = _a.onCopy,\n        copyHidden = _a.copyHidden;\n\n      var closeBtn = createIcon(\n        this,\n        globals.DeleteStampIcon,\n        closeHidden,\n        \"mouseOnClose\",\n        onClose,\n        \"delete stamp\"\n      );\n      var copyBtn = createIcon(\n        this,\n        globals.CopyIcon,\n        copyHidden,\n        \"mouseOnCopy\",\n        onCopy,\n        \"copy stamp\"\n      );\n\n      var consoleBtn = createIcon(\n        this,\n        globals.ClearConsoleIcon,\n        !_a.showConsole,\n        \"mouseOnConsole\",\n        _a.onConsole,\n        \"clear console\"\n      );\n      if (_a.onMinimize) {\n        var minimizeBtn = createIcon(\n          this,\n          globals.MinimzeIcon,\n          _a.onMinimize === null,\n          \"mouseOnMinimize\",\n          _a.onMinimize\n        );\n      }\n\n      var titleIcon = null;\n      if (this.props.icon) {\n        var titleIcon = createIcon(this, this.props.icon);\n      }\n\n      var makeBigIcon = createIcon(\n        this,\n        globals.CodeSizeIcon,\n        !_a.showCodeSize,\n        \"mouseOnBig\",\n        _a.onCodeSize,\n        \"toggle text size\"\n      );\n\n      var sideButtons = (\n        <div\n          class=\"row mt-1\"\n          style={{ position: \"absolute\", cursor: \"auto\", right: 18, top: 0 }}\n        >\n          {consoleBtn}\n          {makeBigIcon}\n          {copyBtn}\n          {closeBtn}\n\n          {minimizeBtn}\n        </div>\n      );\n\n      return React.createElement(\n        Header,\n        {\n          className: \"bg-white rounded-top\",\n          isDraggable: isDraggable,\n          ref: this.saveHeaderRef,\n          onMouseDown: this.onMouseDown\n        },\n        titleIcon,\n        sideButtons\n      );\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Cristal.prototype, \"content\", {\n    get: function() {\n      var children = this.props.children;\n      return React.createElement(ContentWrapper, {}, children);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Cristal.prototype.render = function() {\n    var isResizing = this.isResizing;\n    var _a = this.state,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      isDragging = _a.isDragging,\n      zIndex = _a.zIndex;\n    var className = this.props.className;\n    var isActive = isDragging || isResizing;\n    var style = {\n      left: x,\n      top: y,\n      margin: 0,\n      width: width,\n      height: height,\n      zIndex: zIndex,\n      position: \"absolute\",\n      border: this.props.border,\n      outline: this.props.outline\n    };\n\n    var HeaderComponent = this.header;\n    var ContentComponent = this.content;\n    if (this.props.invisible) {\n      return <span />;\n    }\n\n    var relations = [];\n    if (this.props.getLinesOn && this.props.getLinesOn()) {\n      relations = this.props.lineData;\n    }\n    var allContent = (\n      <ArcherElement id={\"line_\" + this.props.parentId} relations={relations}>\n        {HeaderComponent}\n        {ContentComponent}\n      </ArcherElement>\n    );\n\n    var onDoubleClick = () => null;\n    if (this.props.onDoubleClick) {\n      onDoubleClick = this.props.onDoubleClick;\n    }\n\n    var cristalComponent = React.createElement(\n      Wrapper,\n      {\n        id: \"vertex_\" + this.props.parentId,\n        style: style,\n        ref: this.saveWrapperRef,\n        isActive: isActive,\n        className: className + \" rounded \" + this.props.wrapperName,\n        onMouseDown: this.changeZIndex,\n        overflow: \"hidden\",\n        onDoubleClick: onDoubleClick,\n        onMouseOver: this.props.onMouseOver,\n        onMouseOut: this.props.onMouseOut\n      },\n      allContent,\n      this.renderResizeHandles()\n    );\n\n    return cristalComponent;\n  };\n  Cristal.defaultProps = {\n    children: null,\n    isResizable: true,\n    isDraggable: true\n  };\n  return Cristal;\n})(Component);\nexport { Cristal };\n","import * as React from 'react';\nimport { Component } from 'react';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CristalContent = (function (_super) {\n    __extends(CristalContent, _super);\n    function CristalContent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CristalContent.prototype.render = function () {\n        return React.createElement(\"div\", null, \"Custom Content\");\n    };\n    return CristalContent;\n}(Component));\nexport { CristalContent };\n","import * as React from 'react';\nimport { Component } from 'react';\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CristalHeader = (function (_super) {\n    __extends(CristalHeader, _super);\n    function CristalHeader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CristalHeader.prototype.render = function () {\n        return React.createElement(\"div\", null, \"Custom header\");\n    };\n    return CristalHeader;\n}(Component));\nexport { CristalHeader };\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport \"ace-builds/webpack-resolver\";\nimport AceEditor from \"react-ace\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport { Hook, Console, Decode } from \"console-feed\";\n\nvar _ = require(\"lodash\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class StampConsole extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      logs: [],\n      consoleHeight: 100,\n      consoleWidth: 100,\n      lastFreq: 0\n    };\n\n    this.limit = 100;\n    this.receiveMessage = this.receiveMessage.bind(this);\n  }\n\n  receiveMessage(e) {\n    if (e.data.id != this.props.parentId) {\n      return;\n    }\n\n    if (e.data.type === \"error\") {\n      console.log(e);\n      this.props.addErrorLine(e.data.lineno, e.data.message);\n    }\n\n    if (e.data.type === \"debug\") {\n      this.logToConsole(e.data.message, e.data.type);\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.receiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.receiveMessage);\n  }\n\n  // idk what will come of this\n  clearConsole() {\n    this.setState({ logs: [], lastFreq: 0 });\n  }\n\n  autoScollDown() {\n    document.getElementById(\"bottomView\") &&\n      document.getElementById(\"bottomView\").scrollIntoView();\n    var consoleContainer = document.getElementById(\"consoleContainer\");\n\n    if (consoleContainer) {\n      consoleContainer.scrollTop = consoleContainer.scrollHeight;\n    }\n  }\n\n  checkLastLog(log) {\n    var logs = this.state.logs;\n    if (logs.length < 1) {\n      this.setState({ logs: [log], lastFreq: 0 });\n      this.autoScollDown();\n    } else {\n      var lastLog = logs[logs.length - 1];\n\n      if (_.isEqual(lastLog.data, log.data)) {\n        if (this.state.lastFreq >= this.limit) {\n          return;\n        }\n        this.setState({ lastFreq: this.state.lastFreq + 1 });\n      } else {\n        if (this.state.lastFreq > 1) {\n          var freqString = this.state.lastFreq.toString();\n          if (this.state.lastFreq >= this.limit) {\n            freqString += \"+\";\n          }\n          logs.push({\n            method: \"command\",\n            data: [\"(\" + freqString + \")\"]\n          });\n        }\n        logs.push(log);\n        this.setState({ logs: logs, lastFreq: 1 });\n        this.autoScollDown();\n      }\n    }\n  }\n\n  logToConsole(message, method = \"error\") {\n    this.checkLastLog({ method: method, data: [message] });\n  }\n\n  addNewIframeConsole(newConsole) {\n    var p5LogError = `Did you just try to use p5.js's loop() function? If so, you may want to move it into your sketch's setup() function.\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n\n    var p5LogError2 = `Did you just try to use p5.js's noLoop() function? If so, you may want to move it into your sketch's setup() function.\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n    Hook(newConsole, newLogs => {\n      newLogs.map(log => {\n        if (\n          log.method === \"log\" &&\n          log.data[0] != p5LogError &&\n          log.data[0] != p5LogError2\n        ) {\n          this.checkLastLog(log);\n        }\n      });\n    });\n  }\n\n  render() {\n    var renderedLogs = _.cloneDeep(this.state.logs);\n    if (this.state.lastFreq > 1) {\n      var freqString = this.state.lastFreq.toString();\n      if (this.state.lastFreq >= this.limit) {\n        freqString += \"+\";\n      }\n\n      renderedLogs.push({\n        method: \"command\",\n        data: [\"(\" + freqString + \")\"]\n      });\n\n      var consoleContainer = document.getElementById(\"consoleContainer\");\n      if (consoleContainer) {\n        consoleContainer.scrollTop = consoleContainer.scrollHeight;\n      }\n    }\n    if (this.props.invisible) {\n      return <span />;\n    }\n\n    return (\n      <div\n        className={\"border border-borderGrey bg-lightGrey\"}\n        style={{ width: \"100%\", height: \"100%\" }}\n      >\n        <div\n          id=\"consoleContainer\"\n          onMouseOver={() => this.props.setEditorScrolling(true)}\n          onMouseOut={() => this.props.setEditorScrolling(false)}\n          style={{\n            width: \"100%\",\n            maxHeight: \"100%\",\n            overflow: \"hidden\",\n            \"overflow-y\": \"scroll\",\n            \"white-space\": \"nowrap\",\n            position: \"absolute\",\n            bottom: 0,\n            opacity: 1,\n            userSelect: \"text\"\n          }}\n        >\n          <Console\n            styles={{\n              LOG_COLOR: \"black\",\n              LOG_ERROR_BACKGROUND: \"rgba(255, 184, 0, .5)\",\n              LOG_ERROR_BORDER: \"transparent\",\n              LOG_ERROR_COLOR: \"rgb(0,0,0)\",\n              BASE_FONT_FAMILY: \"Inconsolata !important\",\n              BASE_FONT_SIZE: 12,\n              LOG_COMMAND_COLOR: \"rgba(150,150,150)\",\n              BASE_BACKGROUND_COLOR: \"transparent\",\n              LOG_BORDER: \"rgb(225,225,225)\",\n              LOG_COMMAND_ICON: \"\",\n              LOG_ERROR_ICON: \"\",\n              LOG_DEBUG_ICON: \"\",\n              LOG_DEBUG_COLOR: \"rgb(70, 160, 206)\"\n            }}\n            logs={renderedLogs}\n            variant=\"light\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport \"ace-builds/webpack-resolver\";\nimport AceEditor from \"react-ace\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\n\nimport StampConsole from \"./StampConsole.js\";\n\nimport \"./theme-p5.js\";\n\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\nimport Overlay from \"react-bootstrap/Overlay\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nimport { Resizable, ResizableBox } from \"react-resizable\";\nimport Mark from \"mark.js\";\n\nvar mime = require(\"mime-types\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class FunctionStamp extends Component {\n  constructor(props) {\n    super(props);\n    var starterEditorWidth = this.props.starterEditorWidth;\n    if (this.props.isMediaFile) {\n      starterEditorWidth = 0;\n    }\n    var starterArgs = this.props.starterArgs;\n    if (\n      this.props.isIndex ||\n      this.props.isTxtFile ||\n      this.props.isMediaFile ||\n      this.props.isBlob\n    ) {\n      starterArgs = \" \";\n    }\n\n    var starterName = this.props.starterName;\n    if (this.props.isBlob) {\n      starterName = \"\";\n    }\n\n    var starterIframeWidth = this.props.starterIframeWidth;\n    var starterIframeHeight = this.props.starterIframeHeight;\n    if (this.props.isTxtFile || this.props.isBlob) {\n      starterIframeWidth = 0;\n      starterIframeHeight = 0;\n    }\n\n    var lineHighLightingStatus = \"none\";\n\n    this.state = {\n      code: this.props.starterCode,\n      name: starterName,\n      args: starterArgs,\n      iframeDisabled: this.props.iframeDisabled,\n      iframeWidth: starterIframeWidth,\n      iframeHeight: starterIframeHeight,\n      editorHeight: this.props.starterEditorHeight,\n      editorWidth: starterEditorWidth,\n      isSpecialFn: false,\n      editorScrolling: false,\n      errorLines: this.props.errorLines,\n      iframeCode: \"\",\n      editsMade: false,\n      runningBorder: false,\n      resizingIframe: false,\n      x: this.props.initialPosition.x,\n      y: this.props.initialPosition.y,\n      hidden: this.props.initialHidden,\n      looping: true,\n      loopingTransition: \"\",\n      zIndex: this.props.starterZIndex,\n      exportableCode: \"\",\n      codeSize: this.props.starterCodeSize,\n      dataUri: \"\",\n      lineData: [],\n      editorTopShadow: false,\n      editorBottomShadow: false,\n      ghostX: starterIframeWidth,\n      ghostY: starterIframeHeight,\n      iframeDimensTransition: \"\",\n      mediaAssetHeight: null,\n      mediaAssetWidth: null,\n      lineHighLightingStatus: this.props.starterLineHighLightingStatus,\n      identifierMarkers: [],\n\n      mouseOnStamp: false,\n\n      mouseOnTooltip: false\n      // on, off, none\n    };\n\n    this.cristalRef = React.createRef();\n    this.editorRef = React.createRef();\n    this.consoleRef = React.createRef();\n\n    this.updateLooping = this.updateLooping.bind(this);\n  }\n\n  toggleHide(callback) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n    if (this.state.hidden) {\n      this.setState(\n        {\n          hidden: false,\n          iframeHeight: this.state.iframeHeight,\n          zIndex: undefined\n        },\n        callback\n      );\n    } else {\n      this.setState({ hidden: true }, callback);\n    }\n  }\n\n  updateLooping(e) {\n    if (\n      e.data.type != \"loop\" ||\n      e.data.id != this.props.id ||\n      this.props.isIndex ||\n      this.props.isMediaFile ||\n      this.props.isBlob\n    ) {\n      return;\n    }\n\n    if (e.data.message === \"start\") {\n      this.setState({ looping: true, loopingTransition: \"\" });\n    } else if (e.data.message === \"stop\") {\n      this.setState({\n        looping: false,\n        loopingTransition: \"opacity 1s ease-in\"\n      });\n    }\n  }\n\n  componentDidMount() {\n    // this.loadp5Lib()\n\n    this.checkName();\n    this.setDataUri(() => this.props.requestCompile(this.props.id));\n    window.addEventListener(\"message\", this.updateLooping);\n\n    var highlightedLines = this.props.getHighlightedLines();\n    this.setIdentifierMarkers(highlightedLines);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.updateLooping);\n  }\n\n  setDataUri(callback = () => null) {\n    if (this.props.isTxtFile === false) {\n      return;\n    }\n    var mimeType = mime.lookup(this.state.name);\n\n    if (!mimeType || mimeType.split(\"/\").length === 0) {\n      callback();\n      return;\n    }\n    var mimeTypeArr = mimeType.split(\"/\");\n    mimeTypeArr[0] = \"text\";\n    mimeType = mimeTypeArr.join(\"/\");\n\n    var fileObj = new File([this.state.code], this.state.name, {\n      type: mimeType\n    });\n\n    var reader = new FileReader();\n\n    reader.onload = function(e) {\n      this.setState({ dataUri: e.target.result }, callback);\n    };\n\n    reader.onload = reader.onload.bind(this);\n\n    reader.readAsDataURL(fileObj);\n  }\n\n  checkName() {\n    var isSpecialFn = this.state.name in globals.specialFns;\n    this.setState({ isSpecialFn: isSpecialFn });\n  }\n\n  addErrorLine(lineNum, message) {\n    var errorLines = Object.assign({}, this.state.errorLines);\n    errorLines[lineNum] = message;\n\n    this.setState({ errorLines: errorLines }, () =>\n      this.props.setLayerPicker()\n    );\n  }\n\n  setLineData(lineData = []) {\n    this.setState({ lineData: lineData });\n  }\n\n  clearErrorsAndUpdate() {\n    var iframeCode = \"\";\n    var exportableCode = \"\";\n    this.props.setLayerPicker();\n\n    this.setState({ errorLines: {} }, () => {\n      if (this.props.isBlob) {\n        exportableCode = this.props.getExportableCode();\n      } else if (\n        this.props.isTxtFile === false &&\n        this.props.isMediaFile === false\n      ) {\n        iframeCode = this.props.getHTML(this.props.id);\n      }\n      this.props.setLayerPicker();\n\n      if (iframeCode != this.state.iframeCode) {\n        window.postMessage(\n          {\n            type: \"debug\",\n            message: \"Updated code\",\n            id: this.props.id\n          },\n          \"*\"\n        );\n      }\n      this.setState({\n        iframeCode: iframeCode,\n        exportableCode: exportableCode,\n        looping: true,\n        loopingTransition: \"\"\n      });\n    });\n  }\n\n  loadp5Lib() {\n    this.editorRef.current &&\n      this.editorRef.current.editor.completers.push({\n        getCompletions: function(editor, session, pos, prefix, callback) {\n          var completions = [];\n          p5Lib.forEach(function(w) {\n            completions.push({\n              value: w,\n              meta: \"p5.js\"\n            });\n          });\n          callback(null, completions);\n        }\n      });\n  }\n\n  getIframeDimensionFromGhost(movementX, movementY) {\n    var snapMargin = this.props.getSnapMargin();\n    var newX = this.state.ghostX + movementX;\n    var newY = this.state.ghostY + movementY;\n    this.setState({ ghostX: newX, ghostY: newY });\n    var snapMargin = this.props.getSnapMargin();\n\n    if (snapMargin === 0) {\n      return { movementX: movementX, movementY: movementY };\n    } else {\n      var roundX = Math.round(newX / snapMargin) * snapMargin;\n      var roundY = Math.round(newY / snapMargin) * snapMargin;\n      return {\n        movementX: roundX - this.state.iframeWidth,\n        movementY: roundY - this.state.iframeHeight\n      };\n    }\n  }\n\n  updateIframeDimensions(movementX = 0, movementY = 0) {\n    var newDimensions = this.getIframeDimensionFromGhost(movementX, movementY);\n\n    if (newDimensions.movementX === 0 && newDimensions.movementY === 0) {\n      return;\n    }\n\n    movementX = newDimensions.movementX;\n    movementY = newDimensions.movementY;\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    var width = this.state.iframeWidth + movementX;\n    var height = this.state.iframeHeight + movementY;\n    if (width < 30) {\n      movementX = 0;\n      width = 30;\n    }\n    if (height < 30) {\n      movementY = 0;\n      height = 30;\n    }\n\n    this.setState({ iframeWidth: width, iframeHeight: height });\n\n    if (this.props.isMediaFile === false) {\n      movementY = 0;\n    }\n\n    this.cristalRef.current.manualResize(movementX, movementY);\n  }\n\n  setEditorScrolling(isScrolling) {\n    if (isScrolling && this.state.editorScrolling == false) {\n      this.setState({ editorScrolling: true });\n      this.props.disablePan(true);\n    } else if (isScrolling === false && this.state.editorScrolling) {\n      this.setState({ editorScrolling: false });\n      this.props.disablePan(false);\n    }\n  }\n\n  getErrorTooltip(text, forEditor = true) {\n    if (!text) {\n      return <span />;\n    }\n    if (this.props.isBlob || forEditor === false) {\n      var top = 48;\n    } else {\n      var top = globals.fnTitleHeight + 30;\n    }\n    return (\n      <div\n        className=\"rounded-left bg-warningOrange picker p-2\"\n        style={{\n          position: \"absolute\",\n          left: -globals.tooltipWidth,\n          width: globals.tooltipWidth,\n          top: top,\n          cursor: \"text\",\n          userSelect: \"text\",\n          fontSize: 11,\n          font: \"Inconsolata\"\n        }}\n        hidden={!this.state.mouseOnStamp}\n      >\n        {text}\n      </div>\n    );\n  }\n  renderEditor() {\n    var markers = [];\n    for (var i in this.state.errorLines) {\n      if (i != 0) {\n        markers.push({\n          startRow: i - 1,\n          endRow: i - 1,\n          startCol: 0,\n          endCol: 1,\n          type: \"text\",\n          className: \"bg-warningOrange errorMarker\"\n        });\n      }\n    }\n\n    var theme = \"p5\";\n\n    if (this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile) {\n      theme = \"solarized_light\";\n    }\n\n    if (this.props.isTxtFile || this.props.isIndex) {\n      var mimeType = mime.lookup(this.state.name);\n      if (!mimeType || mimeType.split(\"/\").length === 0) {\n        var mode = \"\";\n      } else {\n        var mimeTypeArr = mimeType.split(\"/\");\n        var mode = mimeTypeArr[mimeTypeArr.length - 1];\n      }\n    } else {\n      var mode = \"javascript\";\n    }\n\n    var border = \" border-borderGrey\";\n    if (this.state.editorTopShadow) {\n      border += \" border-top\";\n    } else if (this.state.editorBottomShadow) {\n      border += \" border-bottom\";\n    }\n\n    var errorTooltipText = \"\";\n    Object.keys(this.state.errorLines).map(line => {\n      if (line > 0) {\n        errorTooltipText += this.state.errorLines[line] + ` [line ${line}]\\n`;\n      }\n    });\n\n    // var shadow = \"\";\n\n    // if (this.state.editorBottomShadow && this.state.editorTopShadow) {\n    //   shadow =\n    //     \"inset 0 7px 6px -8px rgba(0, 0, 0, .15), inset 0 -7px 6px -8px rgba(0, 0, 0, .15)\";\n    // } else if (this.state.editorTopShadow) {\n    //   shadow = \"inset 0 7px 6px -8px rgba(0, 0, 0, .15)\";\n    // } else if (this.state.editorBottomShadow) {\n    //   shadow = \"inset 0 -7px 6px -8px rgba(0, 0, 0, .15)\";\n    // }\n\n    return (\n      <div\n        onMouseOut={() => {\n          this.setEditorScrolling(false);\n        }}\n      >\n        {this.getErrorTooltip(errorTooltipText)}\n        <div>\n          <br hidden={this.props.isBlob} />\n          <AceEditor\n            markers={markers.concat(this.state.identifierMarkers)}\n            style={{\n              width: this.state.editorWidth,\n              height: this.state.editorHeight,\n              background: \"transparent\",\n              boxShadow: \"\"\n            }}\n            className={border}\n            mode={mode}\n            theme={theme}\n            onChange={(value, editor) => {\n              this.setState({ code: value });\n              this.onEditsMade();\n            }}\n            name={\"name\" + this.props.id.toString()}\n            onLoad={editor => {\n              this.setEditorShadow(editor.renderer.scrollBar);\n              editor.on(\"change\", (arg, editor) => {\n                this.setEditorShadow(editor.renderer.scrollBar);\n              });\n            }}\n            fontSize={this.state.codeSize}\n            showPrintMargin={false}\n            wrapEnabled={true}\n            showGutter={false}\n            highlightActiveLine={false}\n            value={this.state.code}\n            ref={this.editorRef}\n            onScroll={editor => {\n              this.setEditorScrolling(true);\n              this.setEditorShadow(editor.renderer.scrollBar);\n            }}\n            setOptions={{\n              enableBasicAutocompletion: false,\n              enableLiveAutocompletion: false,\n              enableSnippets: false,\n              showLineNumbers: false,\n              tabSize: 2,\n              hasCssTransforms: true,\n              fontFamily: \"Inconsolata\"\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  setEditorShadow(scrollBar) {\n    var editorTopShadow = false;\n    var editorBottomShadow = false;\n\n    if (scrollBar.scrollTop - 5 > 0) {\n      editorTopShadow = true;\n    }\n\n    if (\n      scrollBar.scrollTop + this.state.editorHeight + 5 <\n      scrollBar.scrollHeight\n    ) {\n      editorBottomShadow = true;\n    }\n\n    this.setState({\n      editorTopShadow: editorTopShadow,\n      editorBottomShadow: editorBottomShadow\n    });\n  }\n\n  stripExtension(name) {\n    var nameArr = name.split(\".\");\n    if (nameArr.length < 2) {\n      return name;\n    } else {\n      nameArr.pop();\n      return nameArr.join(\".\");\n    }\n  }\n\n  getExtension(name) {\n    var nameArr = name.split(\".\");\n    if (nameArr.length < 2) {\n      return \"\";\n    } else {\n      var ext = nameArr.pop();\n      return ext;\n    }\n  }\n\n  addExtension(name, nameWithExtension) {\n    var nameArr = nameWithExtension.split(\".\");\n    if (nameArr.length < 2) {\n      return name;\n    } else {\n      var ext = nameArr.pop();\n      return name + \".\" + ext;\n    }\n  }\n\n  compileCallback() {\n    if (this.state.editsMade) {\n      var compileActions = () => {\n        this.props.requestCompile(this.props.id);\n        window.postMessage({ type: \"edited\" }, \"*\");\n        this.setState({ editsMade: false, runningBorder: true }, () =>\n          setTimeout(() => {\n            this.setState({ runningBorder: false });\n          }, 300)\n        );\n      };\n\n      if (this.props.isTxtFile) {\n        this.setDataUri(compileActions);\n      } else {\n        compileActions();\n      }\n    }\n  }\n\n  onEditsMade() {\n    this.setState({ editsMade: true });\n    window.postMessage({ type: \"edited\" }, \"*\");\n  }\n\n  renderFunctionName() {\n    var displayName = \"\";\n    if (this.state.name != this.props.starterName) {\n      var displayName = this.state.Name;\n    }\n\n    var nameColor = \"blue\";\n    if (this.state.name in globals.builtIns) {\n      nameColor = \"pink\";\n    } else if (this.state.name in globals.listeners) {\n      nameColor = \"pink\";\n    } else if (\n      this.props.isIndex ||\n      this.props.isTxtFile ||\n      this.props.isMediaFile\n    ) {\n      nameColor = \"htmlCssName\";\n    }\n\n    var argsColor = \"greyText\";\n    var namePlaceholder = \"function name...\";\n    if (this.props.isTxtFile) {\n      namePlaceholder = \"file name...\";\n    } else if (this.props.isMediaFile) {\n      namePlaceholder = \"\";\n    }\n\n    var displayName = this.state.name;\n    if (this.props.isMediaFile) {\n      displayName = this.stripExtension(displayName);\n    }\n\n    var nameBackground = \"bg-transparent\";\n    var argsBackground = \"bg-transparent\";\n\n    if (0 in this.state.errorLines) {\n      argsBackground = \"bg-warningOrange\";\n    }\n\n    if (-1 in this.state.errorLines) {\n      nameBackground = \"bg-warningOrange\";\n    }\n\n    // this.state.identifierMarkers.map(mark => {\n    //   if (mark.startRow === -1) {\n    //     if (mark.startCol - \"function \".length < this.state.name.length) {\n    //       // nameBackground = mark.className.split(\" \")[0];\n    //     } else {\n    //       argsBackground = mark.className.split(\" \")[0];\n    //     }\n    //   }\n    // });\n\n    return (\n      <div>\n        {this.getErrorTooltip(this.state.errorLines[0], false)}\n        <p\n          hidden={!this.props.isMediaFile}\n          className={\"text-lightGreyText name\"}\n          style={{ position: \"absolute\", top: 49, left: 19 }}\n        >\n          {this.state.name}\n        </p>\n        <input\n          placeholder={namePlaceholder}\n          disabled={this.props.isIndex}\n          onChange={event => {\n            var newName = event.target.value;\n\n            if (this.props.isMediaFile) {\n              newName = this.addExtension(newName, this.state.name);\n            }\n            this.setState({ name: newName });\n            this.onEditsMade();\n          }}\n          style={{ background: \"transparent\" }}\n          value={displayName}\n          class={\"text-\" + nameColor + \" name \" + nameBackground}\n        />\n\n        <br />\n\n        <input\n          // @cameron styling for arguments field\n          placeholder=\"arguments...\"\n          disabled={\n            this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile\n          }\n          onChange={event => {\n            this.setState({ args: event.target.value });\n            this.onEditsMade();\n          }}\n          style={{ background: \"transparent\" }}\n          value={this.state.args}\n          class={\"text-\" + argsColor + \" args \" + argsBackground}\n        />\n      </div>\n    );\n  }\n\n  renderMediaAsset() {\n    if (!this.props.isMediaFile) {\n      return null;\n    }\n\n    var mimeType = mime.lookup(this.state.name);\n    if (!mimeType) {\n      return;\n    }\n    if (mimeType.startsWith(\"image\")) {\n      if (!this.state.imageWidth) {\n        var img = new Image();\n\n        img.onload = function() {\n          this.setState({ imageWidth: img.width, imageHeight: img.height });\n        };\n\n        img.onload = img.onload.bind(this);\n\n        img.src = this.state.code;\n      }\n\n      return <img src={this.state.code} />;\n    } else if (mimeType.startsWith(\"audio\")) {\n      return (\n        <audio controls>\n          <source src={this.state.code} type={mimeType} />\n        </audio>\n      );\n    } else if (mimeType.startsWith(\"video\")) {\n      return (\n        <video controls>\n          <source src={this.state.code} type={mimeType} />\n        </video>\n      );\n    } else {\n      return (\n        <div\n          className={\"bg-borderGrey pt-5 d-flex justify-content-center\"}\n          style={{\n            width: this.state.iframeWidth,\n            height: this.state.iframeHeight\n          }}\n        >\n          {React.createElement(\"img\", {\n            style: { width: 100, height: 100, opacity: 0.5 },\n            src: globals.MediaAssetIcon\n          })}\n        </div>\n      );\n    }\n  }\n\n  manualIframeResize(width, height) {\n    // this.setState({iframeWidth:dimens.width, iframeHeight:dimens.height, resizingIframe:true}, setTimeout(() =>\n    //       this.setState({resizingIframe:false}), 250))\n\n    setTimeout(() => {\n      this.setState({ iframeDimensTransition: \"\" });\n    }, 1200);\n\n    setTimeout(() => {\n      this.setState({\n        resizingIframe: false,\n        iframeDimensTransition: \"opacity 1s ease-out\"\n      });\n    }, 200);\n\n    this.setState({ resizingIframe: true });\n    this.updateIframeDimensions(\n      width - this.state.iframeWidth,\n      height - this.state.iframeHeight\n    );\n  }\n\n  renderIframe() {\n    var loopingOpacity = 0.0;\n    if (this.state.looping === false) {\n      loopingOpacity = 0.5;\n    }\n\n    if (this.state.resizingIframe) {\n      var iframeDimensOpacity = 0.5;\n    } else {\n      var iframeDimensOpacity = 0;\n    }\n\n    return (\n      <div>\n        <div\n          style={{\n            position: \"absolute\",\n            fontSize: globals.codeSize,\n            opacity: iframeDimensOpacity,\n            top: globals.fnTitleHeight - 5,\n            right: 25,\n            transition: this.state.iframeDimensTransition\n          }}\n          class=\"text-greyText \"\n        >\n          {\"W:\" +\n            Math.floor(this.state.iframeWidth) +\n            \" H:\" +\n            Math.floor(this.state.iframeHeight)}\n        </div>\n        <div\n          style={{\n            transition: this.state.loopingTransition,\n            position: \"absolute\",\n            fontSize: globals.codeSize,\n            opacity: loopingOpacity,\n            top: globals.fnTitleHeight - 5,\n            left: 25 + this.state.editorWidth\n          }}\n          class=\"text-greyText \"\n        >\n          {\"paused\"}\n        </div>\n\n        <Resizable\n          className=\"ml-1 bg-white shadow\"\n          onResize={e => {\n            this.updateIframeDimensions(\n              e.movementX / this.props.getScale(),\n              e.movementY / this.props.getScale()\n            );\n          }}\n          onResizeStart={() => {\n            this.props.onStartMove();\n            this.setState({ resizingIframe: true });\n            this.setState({\n              ghostX: this.state.iframeWidth,\n              ghostY: this.state.iframeHeight\n            });\n          }}\n          onResizeStop={e => {\n            this.setState({\n              ghostX: this.state.iframeWidth,\n              ghostY: this.state.iframeHeight\n            });\n            this.props.onStopMove();\n            this.setState({ resizingIframe: false });\n            var newSize = this.props.getCristalDimens(this.getData());\n            this.cristalRef.current.manualSetSize(\n              newSize.width,\n              newSize.height\n            );\n          }}\n          onMouseOver={this.compileCallback.bind(this)}\n          style={{\n            overflow: \"hidden\",\n            zIndex: 5,\n            border: \"none\"\n          }}\n          handle={\n            <span\n              className=\"react-resizable-handle react-resizable-handle-se\"\n              onDoubleClick={() => {\n                if (this.state.imageWidth) {\n                  this.manualIframeResize(\n                    this.state.imageWidth,\n                    this.state.imageHeight\n                  );\n                } else {\n                  var dimens = this.props.getP5CanvasDimensions();\n                  this.manualIframeResize(dimens.width, dimens.height);\n                }\n              }}\n            />\n          }\n        >\n          <div>\n            <div\n              style={{\n                position: \"absolute\",\n                width: this.state.iframeWidth,\n                height: this.state.iframeHeight,\n                background: \"transparent\"\n              }}\n              hidden={!this.state.iframeDisabled}\n            >\n              {\" \"}\n            </div>\n            <div\n              style={{\n                height: this.state.iframeHeight,\n                width: this.state.iframeWidth,\n                zIndex: -1\n              }}\n            >\n              {this.renderMediaAsset()}\n\n              <iframe\n                ref={iframeElem => {\n                  iframeElem &&\n                    this.consoleRef &&\n                    this.consoleRef.current.addNewIframeConsole(\n                      iframeElem.contentWindow.console\n                    );\n                }}\n                hidden={this.props.isMediaFile}\n                id={\"iframe\" + this.props.id}\n                scrolling=\"no\"\n                style={{\n                  border: \"none\",\n\n                  height: this.state.iframeHeight,\n                  width: this.state.iframeWidth\n                  // pointerEvents:\"none\"\n                }}\n                srcdoc={this.state.iframeCode}\n                sandbox=\"allow-forms allow-modals allow-pointer-lock allow-popups  allow-same-origin allow-scripts\"\n                allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media\"\n              />\n            </div>\n          </div>\n        </Resizable>\n      </div>\n    );\n  }\n\n  setIframeDisabled(status) {\n    this.setState({ iframeDisabled: status });\n  }\n\n  getCopyStampName(name, isFile) {\n    if (!isFile) {\n      return name + \"Copy\";\n    } else {\n      var nameArr = name.split(\".\");\n      if (nameArr.length === 0) {\n        return \"\";\n      }\n      nameArr[0] = nameArr[0] + \"Copy\";\n      return nameArr.join(\".\");\n    }\n  }\n\n  copyAndOpt(isOpt = false) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n    if (this.props.isIndex) {\n      return;\n    }\n\n    var data = this.getData();\n    data.zIndex = undefined;\n\n    var newName = this.getCopyStampName(\n      this.state.name,\n      this.props.isTxtFile || this.props.isMediaFile\n    );\n\n    if (!this.props.isBlob) {\n      if (isOpt) {\n        this.setState({ name: newName }, () => this.checkName());\n      } else {\n        data.name = newName;\n      }\n    }\n\n    if (isOpt) {\n      data.iframeDisabled = true;\n    } else {\n      data.x += globals.copyOffset;\n      data.y += globals.copyOffset;\n    }\n\n    var callback = id => this.props.requestCompile(id);\n    if (isOpt) {\n      callback = id => {\n        this.props.requestCompile(id);\n        this.cristalRef.current.changeZIndex();\n      };\n    }\n    delete data.id;\n    var newName = this.props.addStamp(data, callback);\n  }\n\n  getData() {\n    var name = this.state.name;\n    if (this.props.isBlob) {\n      name = this.props.getFirstLine(this.state.code);\n    }\n\n    var data = {\n      id: this.props.id,\n      name: name,\n      code: this.state.code,\n      args: this.state.args,\n      x: this.state.x,\n      y: this.state.y,\n      editorWidth: this.state.editorWidth,\n      editorHeight: this.state.editorHeight,\n      iframeWidth: this.state.iframeWidth,\n      iframeHeight: this.state.iframeHeight,\n      isIndex: this.props.isIndex,\n      isTxtFile: this.props.isTxtFile,\n      isMediaFile: this.props.isMediaFile,\n      hidden: this.state.hidden,\n      exported: true,\n      zIndex: this.state.zIndex,\n      isBlob: this.props.isBlob,\n      codeSize: this.state.codeSize,\n      icon: this.getIcon(),\n      lineHighLightingStatus: this.state.lineHighLightingStatus\n    };\n\n    return data;\n  }\n\n  resizeEditor(widthDiff, heightDiff, x, change = true) {\n    var height = this.state.editorHeight + heightDiff;\n    var width = this.state.editorWidth + widthDiff;\n\n    if (height < 0 || width < 0) {\n      return true;\n    }\n\n    if (change) {\n      this.setState({\n        editorHeight: height,\n        editorWidth: width,\n        x: x\n      });\n      this.editorRef.current.editor.resize();\n    }\n\n    this.editorRef.current.editor.resize();\n  }\n\n  getIcon() {\n    var icon = globals.FunctionStampIcon;\n    if (this.props.isIndex) {\n      icon = globals.HtmlStampIcon;\n    } else if (this.props.isBlob) {\n      icon = globals.BlobStampIcon;\n    } else if (this.props.isTxtFile) {\n      icon = globals.FileStampIcon;\n    } else if (this.props.isMediaFile) {\n      icon = globals.ImageStampIcon;\n    } else if (this.state.isSpecialFn) {\n      if (globals.specialFns[this.state.name]) {\n        icon = globals.BuiltInStampIcon;\n      } else {\n        icon = globals.ListenerStampIcon;\n      }\n    }\n\n    return icon;\n  }\n\n  getTextPositions(text) {\n    if (this.state.isIndex || this.state.isTxtFile || this.state.isMediaFile) {\n      if (text === this.state.title) {\n        return [{ startRow: -1, endRow: -1, startCol: 0, endCol: text.length }];\n      }\n    }\n    var letters = /^[a-zA-Z]+$/;\n    var lettersNumbers = /^[0-9a-zA-Z]+$/;\n    var positions = [];\n    var curCol = 0;\n    var curRow = 0;\n    var code = this.state.code;\n    if (!this.state.isBlob) {\n      curRow = -1;\n      code = `function ${this.state.name}(${this.state.args}){\\n${this.state.code}\\n}`;\n    }\n\n    for (var i = 0; i < code.length; i++) {\n      if (\n        code.length >= i + text.length &&\n        code.substr(i, text.length) === text &&\n        (i - 1 < 0 || !code[i - 1].match(letters)) &&\n        (i + text.length >= code.length ||\n          !code[i + text.length].match(lettersNumbers))\n      ) {\n        positions.push({\n          startRow: curRow,\n          endRow: curRow,\n          startCol: curCol,\n          endCol: curCol + text.length\n        });\n      }\n\n      if (code[i] === \"\\n\") {\n        curRow += 1;\n        curCol = 0;\n      } else {\n        curCol += 1;\n      }\n    }\n\n    return positions;\n  }\n\n  setIdentifierMarkers(highlightedLines) {\n    var identifierMarkers = [];\n    if (this.state.lineHighLightingStatus === \"on\") {\n      var identifierData = [];\n      Object.values(highlightedLines).map(line => {\n        if (line.start === this.props.id || line.end === this.props.id) {\n          var identifiers = line.labelText\n            .split(\", \")\n            .join(\"()\")\n            .split(\"()\")\n            .filter(text => text != \"\");\n\n          identifiers.map(identifier =>\n            identifierData.push({ identifier: identifier, type: line.type })\n          );\n        }\n      });\n      var identifierMarkers = [];\n      identifierData.map(data => {\n        var textPositions = this.getTextPositions(data.identifier);\n        textPositions.map(pos => {\n          var marker = Object.assign({}, pos);\n\n          marker.className =\n            \"bg-\" + this.getLineClassColor(data.type) + \" referenceMarker\";\n          marker.type = \"text\";\n          identifierMarkers.push(marker);\n        });\n      });\n    }\n    this.setState({ identifierMarkers: identifierMarkers });\n  }\n\n  getLineClassColor(type) {\n    var color = \"\";\n    if (type === \"file\") {\n      color = \"fileLine\";\n    } else if (type === \"js\") {\n      color = \"jsLine\";\n    } else if (type === \"listener\") {\n      color = \"listenerLine\";\n    } else {\n      color = \"systemLine\";\n    }\n    return `${color}`;\n  }\n\n  setLineHighlighted(lineHighLightingStatus, highlightedLines) {\n    this.setState(\n      {\n        lineHighLightingStatus: lineHighLightingStatus\n      },\n      () => {\n        this.setIdentifierMarkers(highlightedLines);\n      }\n    );\n  }\n\n  renderConsole() {\n    return (\n      <div\n        className=\"\"\n        style={{\n          zIndex: 2,\n          position: \"absolute\",\n          top: globals.fnTitleHeight + 38,\n          left: 30 + this.state.editorWidth,\n          width: this.state.iframeWidth - 15,\n          height: this.state.editorHeight\n        }}\n      >\n        <StampConsole\n          ref={this.consoleRef}\n          parentId={this.props.id}\n          addErrorLine={this.addErrorLine.bind(this)}\n          setEditorScrolling={this.setEditorScrolling.bind(this)}\n          invisible={\n            this.props.isBlob || this.props.isMediaFile || this.props.isTxtFile\n          }\n        />\n      </div>\n    );\n  }\n\n  render() {\n    var headerColor = \"bg-white\";\n\n    var border = \"border border-borderGrey\";\n\n    if (Object.keys(this.state.errorLines).length > 0) {\n      border = \"border border-warningOrange\";\n    }\n    if (this.state.runningBorder) {\n      border = \"border border-blue\";\n    }\n\n    // <!-- @cameron little white div thing --> scroll down to style\n\n    var bgColor = \"bg-jsArea\";\n    if (this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile) {\n      bgColor = \"bg-htmlCssArea\";\n    }\n\n    if (this.state.hidden) {\n      return <div></div>;\n    }\n\n    var iframeWidth = this.state.iframeWidth;\n    if (this.props.isTxtFile) {\n      iframeWidth = 0;\n    }\n\n    var initialHeight = this.state.editorHeight + globals.fnTitleHeight + 60;\n    if (this.props.isMediaFile) {\n      initialHeight = this.state.iframeHeight + globals.fnTitleHeight + 35;\n    } else if (this.props.isBlob) {\n      initialHeight = this.state.editorHeight + 60;\n    }\n\n    var cristalOpacity = 1;\n    var shadowSize = \"shadow-sm\";\n    if (this.state.lineHighLightingStatus === \"off\") {\n      cristalOpacity = 0.5;\n    }\n\n    if (this.state.lineHighLightingStatus === \"on\") {\n      shadowSize = \"shadow-lg\";\n    }\n\n    return (\n      <div style={{ opacity: cristalOpacity }}>\n        <Cristal\n          opacity={cristalOpacity}\n          zIndex={this.state.zIndex}\n          onZChange={s => {\n            this.setState({ zIndex: s.zIndex });\n          }}\n          getScale={this.props.getScale}\n          getSnapMargin={this.props.getSnapMargin}\n          initialSize={this.props.getCristalDimens(this.getData())}\n          ref={this.cristalRef}\n          isResizable={!this.props.isMediaFile}\n          onStartResize={() => {\n            this.props.onStartMove();\n            this.setEditorShadow(\n              this.editorRef.current.editor.renderer.scrollBar\n            );\n          }}\n          onStopResize={() => {\n            this.props.onStopMove();\n            this.setEditorShadow(\n              this.editorRef.current.editor.renderer.scrollBar\n            );\n          }}\n          onDoubleClick={() =>\n            this.props.getLinesOn() &&\n            this.props.setDependencyLineHighlightings(this.props.id)\n          }\n          onMouseOver={() => this.setState({ mouseOnStamp: true })}\n          onMouseOut={() => this.setState({ mouseOnStamp: false })}\n          onStartMove={this.props.onStartMove}\n          onStopMove={this.props.onStopMove}\n          onClose={() => this.props.onDelete(this.props.id)}\n          onCopy={() => this.copyAndOpt()}\n          onOptMove={() => this.copyAndOpt(true)}\n          closeHidden={this.props.isIndex}\n          copyHidden={this.props.isIndex}\n          getLinesOn={this.props.getLinesOn}\n          initialPosition={{ x: this.state.x, y: this.state.y }}\n          lineData={this.state.lineData}\n          className={\n            \"stamp \" +\n            shadowSize +\n            \" \" +\n            bgColor +\n            \" \" +\n            border +\n            \" vertex\" +\n            this.props.id\n          }\n          onResize={this.resizeEditor.bind(this)}\n          onMove={s => this.setState({ x: s.x, y: s.y })}\n          icon={this.getIcon()}\n          parentId={this.props.id}\n          showCodeSize={this.props.isBlob}\n          onConsole={() =>\n            this.consoleRef.current && this.consoleRef.current.clearConsole()\n          }\n          showConsole={\n            !this.props.isBlob &&\n            !this.props.isMediaFile &&\n            !this.props.isTxtFile\n          }\n          onCodeSize={() => {\n            window.postMessage({ type: \"edited\" }, \"*\");\n            if (this.state.codeSize === globals.codeSize) {\n              this.setState({ codeSize: globals.bigCodeSize });\n            } else {\n              this.setState({ codeSize: globals.codeSize });\n            }\n          }}\n        >\n          <div onMouseLeave={this.compileCallback.bind(this)}>\n            <div\n              class={headerColor}\n              hidden={this.props.isBlob}\n              style={{\n                position: \"absolute\",\n                top: globals.headerHeight,\n                left: 0,\n                width: \"100%\",\n                height: globals.fnTitleHeight,\n                color: \"transparent\"\n              }}\n            >\n              {\" \"}\n            </div>\n\n            <div class=\"p-2\">\n              <div hidden={this.props.isBlob}>{this.renderFunctionName()}</div>\n\n              <div class=\"row m-0 mt-2\" style={{ flexWrap: \"nowrap\" }}>\n                {this.renderEditor()}\n                {this.renderConsole()}\n                {this.renderIframe()}\n              </div>\n            </div>\n          </div>\n        </Cristal>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport \"ace-builds/webpack-resolver\";\nimport AceEditor from \"react-ace\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport { Hook, Console, Decode } from \"console-feed\";\n\nvar _ = require(\"lodash\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ConsoleStamp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      logs: [],\n      consoleHeight: this.props.starterConsoleHeight,\n      consoleWidth: this.props.starterConsoleWidth,\n      lastFreq: 0,\n      hidden: this.props.initialHidden,\n      x: this.props.initialPosition.x,\n      y: this.props.initialPosition.y,\n      zIndex: -1\n    };\n\n    this.cristalRef = React.createRef();\n    this.limit = 100;\n    this.receiveMessage = this.receiveMessage.bind(this);\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"error\") {\n      return;\n    }\n\n    this.logToConsole(e.data.message);\n\n    var lineNum = e.data.lineno;\n    var message = e.data.message;\n    var id = e.data.id;\n\n    this.props.addErrorLine(lineNum, id);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.receiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.receiveMessage);\n  }\n\n  clearConsole() {\n    this.setState({ logs: [], lastFreq: 0 });\n  }\n\n  getIcon() {\n    return globals.ConsoleStampIcon;\n  }\n\n  toggleHide(callback) {\n    ipc && ipc.send(\"edited\");\n    if (this.state.hidden) {\n      this.setState(\n        {\n          hidden: false,\n          savedIframeHeight: this.state.iframeHeight,\n          iframeHeight: 0\n        },\n        () =>\n          this.setState(\n            { iframeHeight: this.state.savedIframeHeight },\n            callback\n          )\n      );\n    } else {\n      this.setState({ hidden: true }, callback);\n    }\n  }\n  setEditorScrolling(isScrolling) {\n    this.props.disablePan(isScrolling);\n  }\n\n  addNewIframeConsole(newConsole) {\n    var p5LogError = `Did you just try to use p5.js's loop() function? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n\n    var p5LogError2 = `Did you just try to use p5.js's noLoop() function? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n    Hook(newConsole, newLogs => {\n      newLogs.map(log => {\n        if (\n          log.method === \"log\" &&\n          log.data[0] != p5LogError &&\n          log.data[0] != p5LogError2\n        ) {\n          this.checkLastLog(log);\n        }\n      });\n    });\n  }\n\n  checkLastLog(log) {\n    var logs = this.state.logs;\n    if (logs.length < 1) {\n      this.setState({ logs: [log], lastFreq: 0 });\n      var consoleContainer = document.getElementById(\"consoleContainer\");\n      if (consoleContainer) {\n        consoleContainer.scrollTop = consoleContainer.scrollHeight;\n      }\n    } else {\n      var lastLog = logs[logs.length - 1];\n\n      if (_.isEqual(lastLog.data, log.data)) {\n        if (this.state.lastFreq >= this.limit) {\n          return;\n        }\n        this.setState({ lastFreq: this.state.lastFreq + 1 });\n      } else {\n        if (this.state.lastFreq > 1) {\n          var freqString = this.state.lastFreq.toString();\n          if (this.state.lastFreq >= this.limit) {\n            freqString += \"+\";\n          }\n          logs.push({\n            method: \"command\",\n            data: [\"(\" + freqString + \")\"]\n          });\n        }\n        logs.push(log);\n        this.setState({ logs: logs, lastFreq: 1 });\n        var consoleContainer = document.getElementById(\"consoleContainer\");\n        if (consoleContainer) {\n          consoleContainer.scrollTop = consoleContainer.scrollHeight;\n        }\n      }\n    }\n  }\n\n  logToConsole(message, method = \"error\") {\n    this.checkLastLog({ method: method, data: [message] });\n  }\n\n  getData() {\n    var data = {\n      x: this.state.x,\n      y: this.state.y,\n      consoleWidth: this.state.consoleWidth,\n      consoleHeight: this.state.consoleHeight,\n      hidden: this.state.hidden,\n      zIndex: this.state.zIndex\n    };\n\n    return data;\n  }\n\n  resizeConsole(widthDiff, heightDiff, x, change = true) {\n    var height = this.state.consoleWidth + heightDiff;\n    var width = this.state.consoleHeight + widthDiff;\n\n    if (height < 0 || width < 0) {\n      return true;\n    }\n\n    if (change) {\n      this.setState({\n        consoleHeight: height,\n        consoleWidth: width,\n        x: x\n      });\n    }\n  }\n\n  render() {\n    var renderedLogs = _.cloneDeep(this.state.logs);\n    if (this.state.lastFreq > 1) {\n      var freqString = this.state.lastFreq.toString();\n      if (this.state.lastFreq >= this.limit) {\n        freqString += \"+\";\n      }\n\n      renderedLogs.push({\n        method: \"command\",\n        data: [\"(\" + freqString + \")\"]\n      });\n\n      var consoleContainer = document.getElementById(\"consoleContainer\");\n      if (consoleContainer) {\n        consoleContainer.scrollTop = consoleContainer.scrollHeight;\n      }\n    }\n\n    if (this.state.hidden) {\n      return <div></div>;\n    }\n\n    return (\n      <Cristal\n        getLinesOn={this.props.getLinesOn}\n        getSnapMargin={this.props.getSnapMargin}\n        zIndex={this.props.starterZIndex}\n        getScale={this.props.getScale}\n        parentID={this.props.id}\n        ref={this.cristalRef}\n        closeHidden={true}\n        copyHidden={true}\n        onResize={this.resizeConsole.bind(this)}\n        initialPosition={{ x: this.state.x, y: this.state.y }}\n        onMove={s => this.setState({ x: s.x, y: s.y })}\n        onStartResize={this.props.onStartMove.bind(this)}\n        onStopResize={this.props.onStopMove.bind(this)}\n        className=\"stamp bg-lightGrey border border-borderGrey shadow-sm\"\n        icon={this.getIcon()}\n        showClear\n        onZChange={s => this.setState({ zIndex: s.zIndex })}\n        onClear={this.clearConsole.bind(this)}\n        initialSize={{\n          width: this.state.consoleWidth + 22,\n          height: this.state.consoleHeight + 50\n        }}\n      >\n        <div\n          id=\"consoleContainer\"\n          onMouseOver={() => this.setEditorScrolling(true)}\n          onMouseOut={() => this.setEditorScrolling(false)}\n          style={{\n            width: this.state.consoleWidth,\n            height: this.state.consoleHeight,\n            overflow: \"hidden\",\n            \"overflow-y\": \"scroll\",\n            \"white-space\": \"nowrap\"\n          }}\n        >\n          <Console\n            styles={{\n              LOG_COLOR: \"black\",\n              LOG_ERROR_BACKGROUND: \"rgba(255, 184, 0, .5)\",\n              LOG_ERROR_BORDER: \"transparent\",\n              LOG_ERROR_COLOR: \"rgba(102,102,102)\",\n              BASE_FONT_FAMILY: \"Inconsolata\",\n              BASE_FONT_SIZE: 10,\n              LOG_COMMAND_COLOR: \"rgba(150,150,150)\",\n              BASE_BACKGROUND_COLOR: \"transparent\",\n              LOG_BORDER: \"rgb(225,225,225)\",\n              LOG_COMMAND_ICON: \"\"\n            }}\n            logs={renderedLogs}\n            variant=\"light\"\n          />\n        </div>\n      </Cristal>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport ConsoleStamp from \"./ConsoleStamp.js\";\n\nimport { Mutex } from \"async-mutex\";\nimport { Line } from \"react-lineto\";\nimport cheerio from \"cheerio\";\nimport { SteppedLineTo } from \"react-lineto\";\nimport parser from \"./parser.js\";\nimport anim from \"css-animation\";\nimport { Resizable, ResizableBox } from \"react-resizable\";\nimport styled from \"styled-components\";\n\nimport Overlay from \"react-bootstrap/Overlay\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\nimport pf1, {\n  normalFn,\n  starterBlobs,\n  listenerFns,\n  builtInFns,\n  worlds,\n  sampleFile,\n  empty,\n  starter\n} from \"./starterStamps.js\";\n\nvar _ = require(\"lodash\");\n\nvar esprima = require(\"esprima\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ControlBar extends Component {\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.minPickerHeight = 70;\n    this.minJsImporterHeight = 30;\n    this.topBarHeight = 60;\n    this.minWidth = 150;\n    this.minNonSideBarWidth = 30;\n    this.editorRef = React.createRef();\n    this.importButtonHeight = 50;\n    this.spanWidth = 5;\n    this.spanWidthWide = 60;\n    this.receiveMessage = this.receiveMessage.bind(this);\n\n    this.state = {\n      worldDropDowns: [],\n      jsImporterHeight: 110,\n      sideBarWidth: 200,\n      pickerHeight:\n        window.innerHeight -\n        (this.topBarHeight + this.importButtonHeight + 110),\n      pickerScrollEnabled: true,\n      codeHasError: false,\n      code: `\\n// import unstructured Javascript code or individual functions\n\n// like the below, feel free to delete: \nfunction noiseWave() {\n  let noiseScale=0.02;\n  background(0);\n  for (let x=0; x < width; x++) {\n    let noiseVal = noise((mouseX+x)*noiseScale, mouseY*noiseScale);\n    stroke(noiseVal*255);\n    line(x, mouseY+noiseVal*80, x, height);\n  }\n}`\n    };\n  }\n\n  componentDidMount() {\n    this.props.updateControlBarDimensions(\n      this.state.sideBarWidth,\n      this.topBarHeight\n    );\n    window.addEventListener(\"resize\", this.onWindowResize.bind(this));\n    window.addEventListener(\"message\", this.receiveMessage);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onWindowResize);\n    window.removeEventListener(\"message\", this.receiveMessage);\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"worlds\") {\n      return;\n    }\n\n    this.setWorldDropDowns();\n  }\n\n  onWindowResize(e) {\n    this.setState({\n      pickerHeight:\n        window.innerHeight -\n        (this.topBarHeight +\n          this.importButtonHeight +\n          this.state.jsImporterHeight)\n    });\n    if (this.state.sideBarWidth > window.innerWidth - this.minNonSideBarWidth) {\n      this.setState({\n        sideBarWidth: window.innerWidth - this.minNonSideBarWidth\n      });\n    }\n  }\n\n  renderSideBar() {\n    return (\n      <div\n        class=\"bg-white border border-borderGrey shadow-sm\"\n        onMouseOver={() => {\n          this.props.disablePan(true);\n          this.props.disableZoom(true);\n        }}\n        onMouseOut={() => {\n          this.props.disablePan(false);\n          this.props.disableZoom(false);\n        }}\n        style={{\n          position: \"absolute\",\n          top: this.topBarHeight,\n          left: 0,\n          height: window.innerHeight - this.topBarHeight,\n\n          zIndex: 1000000000000000000\n        }}\n      >\n        <Resizable\n          width={this.state.sideBarWidth}\n          onResize={e => {\n            var newWidth = this.state.sideBarWidth + e.movementX;\n            if (\n              newWidth > this.minWidth &&\n              newWidth <= window.innerWidth - this.minNonSideBarWidth\n            ) {\n              this.setState({ sideBarWidth: newWidth }, () =>\n                this.editorRef.current.editor.resize()\n              );\n            }\n          }}\n          onResizeStop={e =>\n            this.props.updateControlBarDimensions(\n              this.state.sideBarWidth,\n              this.topBarHeight\n            )\n          }\n          height={window.innerHeight - this.topBarHeight}\n          axis=\"x\"\n          handle={this.renderSideBarResizeHandle()}\n        >\n          <div>\n            {this.renderLayerPicker()}\n            {this.renderJsImporter()}\n            {this.renderImportButton()}\n          </div>\n        </Resizable>\n      </div>\n    );\n  }\n\n  parseCode() {\n    try {\n      this.props.addRawJavascript(this.state.code);\n      this.setState({ code: \"\" });\n    } catch (e) {\n      this.setState({ codeHasError: true });\n    }\n  }\n  renderJsImporter() {\n    return (\n      <div\n        class=\"bg-jsArea\"\n        style={{\n          width: this.state.sideBarWidth,\n          height:\n            window.innerHeight - (this.state.pickerHeight + this.topBarHeight)\n        }}\n      >\n        <AceEditor\n          style={{\n            width: this.state.sideBarWidth,\n            height:\n              window.innerHeight -\n              (this.state.pickerHeight +\n                this.topBarHeight +\n                this.importButtonHeight),\n            background: \"transparent\",\n            fontFamily: \"Inconsolata\"\n          }}\n          mode=\"javascript\"\n          theme=\"p5\"\n          onChange={value =>\n            this.setState({ code: value, codeHasError: false })\n          }\n          name={\"jsImporter\"}\n          fontSize={globals.codeSize}\n          showPrintMargin={false}\n          wrapEnabled={true}\n          showGutter={false}\n          highlightActiveLine={false}\n          onMouseOver={() => this.props.disablePan(true)}\n          onMouseOut={() => this.props.disablePan(false)}\n          value={this.state.code}\n          ref={this.editorRef}\n          setOptions={{\n            tabSize: 2,\n            hasCssTransforms: true\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderImportButton() {\n    var text = \"import javascript\";\n    var color = \"grey\";\n    if (this.state.codeHasError) {\n      text = \"syntax error\";\n      color = \"warningOrangeDark\";\n    }\n\n    return (\n      <div\n        class=\"p-2\"\n        style={{ position: \"absolute\", bottom: -2, left: -5, width: \"100%\" }}\n      >\n        <button\n          class={\n            \"btn btn-block shadow-sm m-1 bg-\" + color + \" border-borderGrey\"\n          }\n          style={{\n            fontSize: globals.buttonTextSize\n          }}\n          onClick={this.parseCode.bind(this)}\n          disabled={this.state.codeHasError}\n        >\n          {text}\n        </button>\n      </div>\n    );\n  }\n\n  getDraggableClass(snapshot, hasError) {\n    var className;\n    if (snapshot.isDragging) {\n      className = \"border border-lightGreyText\";\n    } else {\n      className = \"border-bottom border-borderGrey\";\n    }\n\n    if (hasError) {\n      if (snapshot.isDragging) {\n        className += \" bg-warningOrange\";\n      } else {\n        className = \"border-bottom border-white bg-warningOrange\";\n      }\n    } else {\n      className += \" bg-white\";\n    }\n\n    return className;\n  }\n\n  renderPicker(item) {\n    if (item.status) {\n      var iconType = item.toggleOnIcon;\n      var iconNameCallback = () =>\n        centerCallback(this.state.sideBarWidth, this.topBarHeight);\n    } else {\n      var iconType = item.toggleOffIcon;\n      var iconNameCallback = null;\n    }\n\n    var overalOpacity = 1;\n    var centerCallback = item.centerCallback;\n\n    if (item.status === false && item.icon != globals.EmptyIcon) {\n      overalOpacity = 0.5;\n      centerCallback = () => null;\n    }\n\n    if (!item.centerCallback) {\n      centerCallback = () => null;\n      iconNameCallback = null;\n    }\n\n    if (item.icon === globals.EmptyIcon) {\n      var iconType = item.toggleOnIcon;\n      if (item.status === false) {\n        var iconType = item.toggleOffIcon;\n      }\n    }\n\n    return (\n      <div\n        style={{ opacity: overalOpacity, width: this.state.sideBarWidth }}\n        class=\"d-flex justify-content-between p-1 pl-2 pr-3\"\n      >\n        <div\n          clas=\"row\"\n          style={{ overflow: \"hidden\", cursor: \"auto\" }}\n          onClick={() =>\n            centerCallback(this.state.sideBarWidth, this.topBarHeight)\n          }\n        >\n          {this.createIcon(\n            \"type\" + item.id.toString(),\n            item.icon,\n            iconNameCallback,\n            item.name\n          )}\n        </div>\n        <div style={{ cursor: \"auto\" }}>\n          {this.createIcon(\n            \"hide\" + item.id.toString(),\n            iconType,\n            item.hideCallback\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderPickers(provided, snapshot) {\n    var pickers = [];\n    var overflowY = \"hidden\";\n    if (this.state.pickerScrollEnabled) {\n      overflowY = \"scroll\";\n    }\n\n    this.props.pickerData.map((item, index) => {\n      if (item.isSetting) {\n        pickers.push(this.renderSettingsPicker(item));\n        return;\n      }\n\n      pickers.push(\n        <Draggable draggableId={item.id.toString()} index={index}>\n          {(provided, snapshot) => (\n            <div\n              class={this.getDraggableClass(snapshot, item.hasError)}\n              ref={provided.innerRef}\n              {...provided.draggableProps}\n              {...provided.dragHandleProps}\n            >\n              {this.renderPicker(item)}\n            </div>\n          )}\n        </Draggable>\n      );\n    });\n\n    return (\n      <div\n        className=\" bg-white\"\n        style={{\n          \"overflow-y\": overflowY,\n          width: this.state.sideBarWidth,\n          flexGrow: 1\n        }}\n        ref={provided.innerRef}\n        {...provided.droppableProps}\n      >\n        {pickers}\n        {provided.placeholder}\n        <br />\n        <br />\n      </div>\n    );\n  }\n\n  renderSettingsPicker(item) {\n    return (\n      <div class=\"border-bottom border-borderGrey bg-grey\">\n        {this.renderPicker(item)}\n      </div>\n    );\n  }\n\n  renderSettingsPickers() {\n    var pickers = this.props.settingsPicker.map(item =>\n      this.renderSettingsPicker(item)\n    );\n\n    return (\n      <div\n        class=\"bg-white  border-bottom border-borderGrey shadow-sm\"\n        style={{ zIndex: 2 }}\n      >\n        {pickers}\n      </div>\n    );\n  }\n\n  renderLayerPicker() {\n    return (\n      <Resizable\n        width={this.state.sideBarWidth}\n        onResize={e => {\n          var newHeight = this.state.pickerHeight + e.movementY;\n          if (\n            newHeight > this.minPickerHeight &&\n            newHeight <\n              window.innerHeight -\n                (this.topBarHeight +\n                  this.minJsImporterHeight +\n                  +this.importButtonHeight)\n          ) {\n            this.setState(\n              {\n                pickerHeight: this.state.pickerHeight + e.movementY,\n                jsImporterHeight: this.state.jsImporterHeight - e.movementY\n              },\n              () => this.editorRef.current.editor.resize()\n            );\n          }\n        }}\n        onResizeStart={() => this.setState({ pickerScrollEnabled: false })}\n        onResizeStop={() => this.setState({ pickerScrollEnabled: true })}\n        height={this.state.pickerHeight}\n        axis=\"y\"\n        handle={this.renderPickerResizeHandle()}\n      >\n        <div\n          style={{\n            overflow: \"hidden\",\n            flexFlow: \"column\",\n            display: \"flex\",\n            height: this.state.pickerHeight\n          }}\n        >\n          {this.renderSettingsPickers()}\n          <DragDropContext onDragEnd={this.props.onDragEnd}>\n            <Droppable droppableId=\"droppable\">\n              {this.renderPickers.bind(this)}\n            </Droppable>\n          </DragDropContext>\n        </div>\n      </Resizable>\n    );\n  }\n\n  createIcon(uniqueClass, iconType, hideCallback = null, text) {\n    var mouseOverCallback = () => {\n      $(\".\" + uniqueClass + \"Icon\").css({ opacity: \"1\" });\n      $(\".\" + uniqueClass + \"Text\")\n        .removeClass(\"text-greyText\")\n        .addClass(\"text-greyIcon\");\n    };\n\n    var mouseOutCallback = () => {\n      $(\".\" + uniqueClass + \"Icon\").css({ opacity: globals.iconOpacity });\n      $(\".\" + uniqueClass + \"Text\")\n        .addClass(\"text-greyText\")\n        .removeClass(\"text-greyIcon\");\n    };\n    if (!hideCallback) {\n      mouseOverCallback = () => {};\n      mouseOutCallback = () => {};\n    }\n    if (text) {\n      return (\n        <div onMouseOver={mouseOverCallback} onMouseOut={mouseOutCallback}>\n          {React.createElement(\"img\", {\n            style: {\n              height: globals.iconSize,\n              opacity: globals.iconOpacity,\n              width: globals.iconSize\n            },\n            className: \" m-1 text-greyIcon \" + uniqueClass + \"Icon\",\n            onClick: hideCallback,\n            src: iconType\n          })}\n          <b class={\"text-greyText picker ml-1 \" + uniqueClass + \"Text\"}>\n            {text}\n          </b>\n        </div>\n      );\n    }\n\n    return React.createElement(\"img\", {\n      style: {\n        height: globals.iconSize,\n        opacity: globals.iconOpacity,\n        width: globals.iconSize\n      },\n      className: \" m-1 text-greyIcon \" + uniqueClass + \"Icon\",\n      onClick: hideCallback,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n  }\n\n  renderSideBarResizeHandle() {\n    return (\n      <div\n        style={{\n          width: 10,\n          cursor: \"ew-resize\",\n          height: \"100%\",\n          right: 0,\n          top: 0,\n          position: \"absolute\",\n          background: \"transparent\",\n          color: \"transparent\"\n        }}\n      >\n        hi\n      </div>\n    );\n  }\n\n  renderPickerResizeHandle() {\n    return (\n      <span\n        className=\"border-bottom border-borderGrey border-top bg-grey\"\n        style={{\n          width: \"100%\",\n          cursor: \"ns-resize\",\n          height: 15,\n          right: 0,\n          bottom: 0,\n          position: \"absolute\",\n          background: \"transparent\"\n        }}\n      />\n    );\n  }\n\n  renderTopBar() {\n    return (\n      <div\n        class=\"bg-white border border-borderGrey shadow-sm row justify-content-between\"\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 15,\n          height: this.topBarHeight + 2,\n          width: \"100%\",\n          zIndex: 1000000000000000001\n        }}\n        onMouseOver={() => {\n          this.props.disablePan(true);\n          this.props.disableZoom(true);\n        }}\n        onMouseOut={() => {\n          this.props.disablePan(false);\n          this.props.disableZoom(false);\n        }}\n      >\n        <span hidden={!ipc} />\n        <div class=\"row pl-5\" hidden={ipc}>\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.UploadIcon}\n            uniqueClass=\"upload\"\n            iconCallback={() => {\n              this.props.modalManagerRef.current.requestUpload();\n            }}\n            tooltipText=\"upload sketch\"\n            alignLeft\n          />\n          <span style={{ width: this.spanWidthWide }} />\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.DownloadIcon}\n            uniqueClass=\"download\"\n            iconCallback={() => {\n              this.props.modalManagerRef.current.requestDownload();\n            }}\n            tooltipText=\"download sketch\"\n          />\n        </div>\n\n        <div class=\"row\">\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.FunctionStampIcon}\n            uniqueClass=\"basic\"\n            iconCallback={() =>\n              this.props.addStamp(normalFn, id => {\n                this.props.requestCompile(id);\n                window.postMessage({ type: \"edited\" }, \"*\");\n              })\n            }\n            dropDownData={builtInFns\n              .map(data => ({\n                name: data.name,\n                icon: globals.BuiltInStampIcon,\n                callback: () =>\n                  this.props.addStamp(data, id => {\n                    this.props.requestCompile(id);\n                    window.postMessage({ type: \"edited\" }, \"*\");\n                  })\n              }))\n              .concat([{}])\n              .concat(\n                listenerFns.map(data => ({\n                  name: data.name,\n                  icon: globals.ListenerStampIcon,\n                  callback: () =>\n                    this.props.addStamp(data, id => {\n                      this.props.requestCompile(id);\n                      window.postMessage({ type: \"edited\" }, \"*\");\n                    })\n                }))\n              )}\n            tooltipText=\"function\"\n          />\n          <span style={{ width: this.spanWidth }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.BlobStampIcon}\n            uniqueClass=\"varStamp\"\n            iconCallback={() =>\n              this.props.addStamp(starterBlobs[0].data, id => {\n                this.props.requestCompile(id);\n                window.postMessage({ type: \"edited\" }, \"*\");\n              })\n            }\n            dropDownData={starterBlobs.map(starterBlob => ({\n              name: starterBlob.name,\n              icon: globals.BlobStampIcon,\n              callback: () =>\n                this.props.addStamp(starterBlob.data, id => {\n                  this.props.requestCompile(id);\n                  window.postMessage({ type: \"edited\" }, \"*\");\n                })\n            }))}\n            tooltipText=\"global\"\n          />\n          <span style={{ width: this.spanWidth }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.FileStampIcon}\n            uniqueClass=\"fileStamp\"\n            iconCallback={() =>\n              this.props.modalManagerRef.current.requestFileUpload(\"text\")\n            }\n            tooltipText=\"file\"\n            dropDownData={[\n              {\n                name: \"upload files\",\n                icon: globals.FileStampIcon,\n                callback: () =>\n                  this.props.modalManagerRef.current.requestFileUpload(\"text\")\n              },\n              {\n                name: \"new file\",\n                icon: globals.FileStampIcon,\n                callback: () =>\n                  this.props.addStamp(sampleFile, id => {\n                    this.props.requestCompile(id);\n                    window.postMessage({ type: \"edited\" }, \"*\");\n                  })\n              }\n            ]}\n          />\n\n          <span style={{ width: this.spanWidth }} />\n          <TopButton\n            iconType={globals.ImageStampIcon}\n            uniqueClass=\"imageStamp\"\n            iconCallback={() =>\n              this.props.modalManagerRef.current.requestFileUpload()\n            }\n            tooltipText=\"media\"\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n          />\n\n          <span style={{ width: this.spanWidthWide }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.ClearConsoleIcon}\n            uniqueClass=\"undoDelete\"\n            iconCallback={() => this.props.undoDelete()}\n            dropDownData={this.props.deletedStamps\n              .map((stampData, index) => ({\n                name: stampData.name,\n                icon: stampData.icon,\n                callback: () => this.props.undoDelete(index)\n              }))\n              .reverse()}\n            tooltipText=\"undo delete\"\n            disabled={this.props.deletedStamps.length === 0}\n          />\n        </div>\n\n        <span hidden={true} />\n        <div className=\"pr-5 row\">\n          <TopButton\n            iconType={globals.WorldsIcon}\n            uniqueClass=\"worlds\"\n            iconCallback={null}\n            dropDownData={this.state.worldDropDowns}\n            tooltipText=\"examples...\"\n            alignRight\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  setWorldDropDowns() {\n    var dropDownData = [\n      {\n        name: \"publish current sketch\",\n        callback: () => this.props.modalManagerRef.current.requestPublish(),\n        icon: globals.UploadIcon\n      }\n    ];\n\n    dropDownData.push({\n      name: \"get current example info\",\n      callback: () => this.props.modalManagerRef.current.requestPublishInfo(),\n      icon: globals.InfoIcon\n    });\n\n    if (ipc) {\n      this.setState({ worldDropDowns: dropDownData });\n      return;\n    }\n    dropDownData.push({});\n\n    this.props.modalManagerRef.current.getWorldNamesAndKeys(allWorlds => {\n      allWorlds.map(item => {\n        dropDownData.push({\n          name: item.name,\n          callback: () => {\n            window.open(\n              this.props.modalManagerRef.current.worldKeyToUrl(item.key),\n              \"_blank\"\n            );\n\n            // this.props.modalManagerRef.current.getWorldObject(item.key, true,\n            //  (so) => this.props.modalManagerRef.current.loadWithOverwriteProtection(so))\n          }\n        });\n        this.setState({ worldDropDowns: dropDownData });\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderSideBar()}\n        {this.renderTopBar()}\n      </div>\n    );\n  }\n}\n\nclass TopButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { down: false, mouseOverDropDown: false };\n    this.topBarHeight = 60;\n  }\n\n  onMouseDown() {\n    if (this.state.mouseOverDropDown === false) {\n      this.props.disablePan(false);\n\n      this.props.disableZoom(false);\n      this.setState({ down: false });\n    }\n  }\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.onMouseDown.bind(this));\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.onMouseDown);\n  }\n\n  createTopButtonIcon(\n    iconType,\n    callback,\n    givenUniqueClass,\n    size,\n    dropDownIcon = false,\n    disabled\n  ) {\n    var uniqueClass = givenUniqueClass;\n    var mouseOverCallback = () => {\n      this.setState({ mouseOverDropDown: true }, () =>\n        $(\".\" + uniqueClass).css({ opacity: \"1\" })\n      );\n    };\n\n    var mouseOutCallback = () => {\n      this.setState(\n        { mouseOverDropDown: false },\n\n        () => {\n          if (\n            this.state.down === false ||\n            (iconType != globals.ExpandMoreIcon && this.props.iconCallback)\n          ) {\n            $(\".\" + uniqueClass).css({ opacity: globals.iconOpacity });\n          }\n        }\n      );\n    };\n\n    if (!callback && dropDownIcon === false) {\n      callback = () => this.setState({ down: !this.state.down });\n      uniqueClass += \"expand\";\n    }\n\n    if (dropDownIcon) {\n      mouseOverCallback = () => null;\n      mouseOutCallback = () => null;\n    }\n\n    if (this.props.disabled) {\n      mouseOverCallback = () => null;\n      // mouseOutCallback = () => null;\n      callback = () => null;\n    }\n\n    return React.createElement(\"img\", {\n      style: { opacity: globals.iconOpacity, height: size, width: size },\n      className: \" text-greyIcon \" + uniqueClass,\n      onClick: callback,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n  }\n\n  getUniqueID() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  }\n\n  renderDropDowns() {\n    if (this.state.down === false) {\n      return null;\n    }\n\n    var dropDowns = this.props.dropDownData.map(data => {\n      var oneWordName = \"\";\n      if (data.name) {\n        oneWordName = this.getUniqueID();\n      } else {\n        return (\n          <div>\n            <div style={{ height: 5, color: \"transparent\", width: \"100%\" }}>\n              hi\n            </div>\n            <div\n              className=\"border-top border-borderGrey\"\n              style={{ height: 5, color: \"transparent\", width: \"100%\" }}\n            >\n              hi\n            </div>\n          </div>\n        );\n      }\n      return (\n        <div\n          class={\n            this.props.uniqueClass +\n            oneWordName +\n            \" picker text-greyText p-1 pl-3 pr-3\"\n          }\n          onMouseOver={() => {\n            if (!data.name) {\n              return;\n            }\n            this.setState({ mouseOverDropDown: true });\n            $(\".\" + this.props.uniqueClass + oneWordName).css({\n              background: \"rgb(240, 240, 240)\"\n            });\n          }}\n          onMouseOut={() => {\n            if (!data.name) {\n              return;\n            }\n            this.setState({ mouseOverDropDown: false });\n            $(\".\" + this.props.uniqueClass + oneWordName).css({\n              background: \"transparent\"\n            });\n          }}\n          onClick={() => {\n            if (!data.name) {\n              return;\n            }\n            data.callback();\n            this.setState({ down: false });\n          }}\n        >\n          <a className=\"mr-2\" hidden={!data.name || !data.icon}>\n            {this.createTopButtonIcon(\n              data.icon,\n              undefined,\n              \"dropDown\",\n              12,\n              true,\n              this.props.disabled\n            )}\n          </a>\n          {data.name}\n        </div>\n      );\n    });\n\n    var right = \"default\";\n    if (this.props.alignRight) {\n      right = 0;\n    }\n\n    var dropDownHeight = window.innerHeight - this.topBarHeight;\n\n    return (\n      <div\n        class=\"bg-white border border-borderGrey rounded mt-2 justify-content-left\"\n        style={{\n          position: \"absolute\",\n          right: right,\n          \"overflow-y\": \"scroll\",\n          maxHeight: dropDownHeight\n        }}\n      >\n        {dropDowns}\n      </div>\n    );\n  }\n\n  renderTooltip() {\n    // if (this.props.alignRight) {\n    //   return (\n    //     <div\n    //       class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n    //       style={{\n    //         opacity: \"1\",\n    //         position: \"absolute\",\n    //         right: 20,\n    //         top: 5,\n    //         transition: \"all .2s ease-out\"\n    //       }}\n    //     >\n    //       {this.props.tooltipText}\n    //     </div>\n    //   );\n    // }\n\n    // if (this.props.alignLeft) {\n    //   return (\n    //     <div\n    //       class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n    //       style={{\n    //         opacity: \"1\",\n    //         position: \"absolute\",\n    //         left: 20,\n    //         top: 5\n    //       }}\n    //     >\n    //       {this.props.tooltipText}\n    //     </div>\n    //   );\n    // }\n\n    var offset = \"-140px\";\n    if (this.props.dropDownData) {\n      var offset = \"-133px\";\n    }\n    return (\n      <div style={{ position: \"absolute\", top: 5 }}>\n        <div style={{ position: \"absolute\", width: 300, left: offset }}>\n          <div\n            class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n            style={{\n              opacity: \"1\",\n              textAlign: \"center\"\n            }}\n          >\n            {this.props.tooltipText}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  render() {\n    if (this.state.down) {\n      $(\".\" + this.props.uniqueClass + \"expand\").css({\n        opacity: \"1\"\n      });\n    } else {\n      $(\".\" + this.props.uniqueClass + \"expand\").css({\n        opacity: \".5\"\n      });\n    }\n\n    var expandButton = null;\n    if (this.props.dropDownData) {\n      expandButton = this.createTopButtonIcon(\n        globals.ExpandMoreIcon,\n        () => this.setState({ down: !this.state.down }),\n        this.props.uniqueClass + \"expand\",\n        16,\n        false,\n        this.props.disabled\n      );\n    }\n\n    var opacity = 1;\n    if (this.props.disabled) {\n      opacity = opacity * 0.5;\n    }\n\n    return (\n      <div class=\"m-3 mt-4\" style={{ opacity: opacity }}>\n        {this.renderTooltip()}\n        <div>\n          {this.createTopButtonIcon(\n            this.props.iconType,\n            this.props.iconCallback,\n            this.props.uniqueClass,\n            20,\n            false,\n            this.props.disabled\n          )}\n\n          {expandButton}\n        </div>\n\n        {this.renderDropDowns()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport { saveAs } from \"file-saver\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport Stamp from \"./Stamp.js\";\nimport ModalManager from \"./ModalManager.js\";\nimport ConsoleStamp from \"./ConsoleStamp.js\";\nimport ControlBar from \"./ControlBar.js\";\n\nimport ArcherContainer from \"./react-archer/src/ArcherContainer.js\";\nimport ArcherElement from \"./react-archer/src/ArcherElement.js\";\n\nimport { Mutex } from \"async-mutex\";\nimport { Line } from \"react-lineto\";\nimport cheerio from \"cheerio\";\nimport { SteppedLineTo } from \"react-lineto\";\nimport parser from \"./parser.js\";\nimport anim from \"css-animation\";\nimport { Resizable, ResizableBox } from \"react-resizable\";\nimport styled from \"styled-components\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport LZUTF8 from \"lzutf8\";\n\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\n\nimport pf1, { starter, stamperHeader } from \"./starterStamps.js\";\n\nvar _ = require(\"lodash\");\nvar mime = require(\"mime-types\");\n\nvar esprima = require(\"esprima\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class View extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      compiledBefore: false,\n      stampRefs: {},\n      stampElems: {},\n      scale: 1,\n      counter: 0,\n      htmlID: -1,\n\n      setupExists: true,\n\n      htmlAsksForJs: true,\n      lines: [],\n      lineData: [],\n      traversalGraph: {},\n\n      numToggles: 0,\n      originX: 0,\n      originY: 0,\n      scale: 1,\n      pickerData: [],\n      sideBarWidth: 0,\n      topBarHeight: 0,\n      zoomDisabled: false,\n      mouseWheelTimeout: null,\n      mouseIsDown: false,\n      downKey: -1,\n      panDisabled: false,\n      stampOrder: [],\n      isMoving: false,\n      worldKey: null,\n      worldPublishTime: null,\n      worldEdited: false,\n\n      snapToGrid: false,\n      linseOn: false,\n\n      settingsPicker: [],\n      lineData: [],\n      deletedStamps: [],\n      actualLinesOn: false,\n\n      highlightedLines: {}\n    };\n    this.counterMutex = new Mutex();\n\n    this.modalManagerRef = React.createRef();\n\n    this.onWheel = this.onWheel.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.gridSize = 50;\n    this.newStampMarginVariance = 100;\n    this.newStampMargin = 20;\n    this.space = 32;\n    this.cmd = 91;\n    this.ctrl = 17;\n    this.plus = 187;\n    this.minus = 189;\n    this.zero = 48;\n    this.g = 71;\n    this.l = 76;\n    this.shft = 16;\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"wheel\", this.onWheel);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n    document.addEventListener(\"mousedown\", this.onMouseDown);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n\n    var centerX = window.innerWidth / 2 + this.state.topBarHeight;\n    var centerY = window.innerHeight / 2 + this.state.sideBarWidth;\n\n    ipc &&\n      ipc.on(\"zoomIn\", () => {\n        this.zoom(this.state.scale * 2, centerX, centerY);\n      });\n\n    ipc &&\n      ipc.on(\"zoomOut\", () => {\n        this.zoom(this.state.scale * 0.5, centerX, centerY);\n      });\n\n    ipc &&\n      ipc.on(\"zoomActual\", () => {\n        this.zoom(1, centerX, centerY);\n      });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"wheel\", this.onWheel);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n    document.removeEventListener(\"mousedown\", this.onMouseDown);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === this.space) {\n      document.body.style.cursor = \"grab\";\n    }\n\n    var centerX = window.innerWidth / 2 + this.state.topBarHeight;\n    var centerY = window.innerHeight / 2 + this.state.sideBarWidth;\n    if (this.state.downKey === this.cmd || this.state.downKey === this.ctrl) {\n      if (e.keyCode === this.zero) {\n        e.preventDefault();\n        this.zoom(1, centerX, centerY);\n      } else if (e.keyCode === this.plus) {\n        e.preventDefault();\n        this.zoom(this.state.scale * 2, centerX, centerY);\n      } else if (e.keyCode === this.minus) {\n        e.preventDefault();\n        this.zoom(this.state.scale * 0.5, centerX, centerY);\n      }\n    } else if (this.state.downKey === this.shft) {\n      if (e.keyCode === this.g) {\n        var snapToGrid = this.state.snapToGrid;\n        this.setState({ snapToGrid: !snapToGrid }, () => this.setLayerPicker());\n      } else if (e.keyCode === this.l) {\n        this.toggleLinesOn();\n      }\n    } else {\n      this.setState({ downKey: e.keyCode });\n    }\n  }\n\n  onKeyUp(e) {\n    document.body.style.cursor = \"auto\";\n    if (e.keyCode === this.state.downKey) {\n      this.setState({ downKey: -1 });\n    }\n  }\n  onMouseDown() {\n    this.setState({ mouseIsDown: true });\n  }\n\n  onMouseUp() {\n    this.setState({ mouseIsDown: false });\n  }\n\n  onMouseMove(e) {\n    if (this.state.mouseIsDown && this.state.downKey == this.space) {\n      this.pan(e.movementX, e.movementY);\n    }\n  }\n\n  onWheel(e) {\n    var newTimeOut = setTimeout(s => this.onStopMove(), 250);\n    if (this.state.mouseWheelTimeout) {\n      clearTimeout(this.state.mouseWheelTimeout);\n    } else {\n      this.onStartMove();\n    }\n\n    this.setState({ mouseWheelTimeout: newTimeOut });\n\n    if (e.ctrlKey) {\n      this.zoom(this.state.scale - e.deltaY * 0.01, e.clientX, e.clientY);\n    } else {\n      this.pan(-e.deltaX, -e.deltaY);\n    }\n  }\n\n  pan(changeX, changeY) {\n    if (this.state.panDisabled) {\n      return;\n    }\n\n    var a = this.state,\n      currentX = a.originX,\n      currentY = a.originY;\n    var newX = currentX + changeX;\n    var newY = currentY + changeY;\n    this.setState({ originX: newX, originY: newY });\n  }\n\n  zoom(newScale, mouseX, mouseY, callback = () => null) {\n    if (this.state.zoomDisabled) {\n      return;\n    }\n\n    var scale = this.state.scale,\n      x = this.state.originX,\n      y = this.state.originY;\n\n    if (newScale < 0.1) {\n      return;\n    }\n\n    var curDistX = mouseX - x,\n      curDistY = mouseY - y;\n\n    var unScaledDistX = curDistX / scale,\n      unScaledDistY = curDistY / scale;\n\n    var scaledDistX = unScaledDistX * newScale,\n      scaledDistY = unScaledDistY * newScale;\n\n    var newOriginX = mouseX,\n      newOriginY = mouseY;\n\n    var newX = newOriginX - scaledDistX,\n      newY = newOriginY - scaledDistY;\n\n    this.setState({ scale: newScale }, () =>\n      this.setState({ originX: newX, originY: newY }, () => callback())\n    );\n  }\n\n  updateControlBarDimensions(sideBarWidth, topBarHeight) {\n    this.setState({ sideBarWidth: sideBarWidth, topBarHeight: topBarHeight });\n  }\n\n  recompileIfEnoughStamps(numFns) {\n    if (this.state.stampOrder.length === numFns) {\n      this.requestCompile();\n    }\n  }\n\n  loadStamperObject(stamperObject) {\n    this.setState(\n      {\n        stampRefs: {},\n\n        stampElems: {},\n\n        counter: 0,\n        htmlID: -1,\n        scale: 1,\n\n        originX: 0,\n        originY: 0,\n        compiledBefore: false,\n        stampOrder: [],\n\n        worldKey: null,\n        worldEdited: false,\n        worldPublishTime: null,\n        highlightedLines: {},\n\n        snapToGrid: false,\n        linesOn: false,\n        deletedStamps: []\n      },\n      () => {\n        if (!stamperObject.highlightedLines) {\n          stamperObject.highlightedLines = {};\n        }\n        this.setState(\n          {\n            scale: stamperObject.scale,\n            originX: stamperObject.originX,\n            originY: stamperObject.originY,\n\n            worldKey: stamperObject.worldKey,\n            worldEdited: stamperObject.worldEdited == true,\n            worldPublishTime: stamperObject.worldPublishTime,\n            highlightedLines: stamperObject.highlightedLines,\n\n            snapToGrid: stamperObject.snapToGrid == true,\n            linesOn: stamperObject.linesOn == true\n          },\n          () => {\n            var callback = () =>\n              this.recompileIfEnoughStamps(stamperObject.stamps.length);\n\n            var stampData = stamperObject.stamps;\n            if (stamperObject.stamps.length > 0 && !stamperObject.stamps[0].x) {\n              stampData = this.getAutoLayout(\n                stamperObject.stamps,\n                stamperObject.js\n              );\n            }\n\n            stampData.map(data => this.addStamp(data, callback));\n          }\n        );\n      }\n    );\n  }\n\n  addRawJavascript(rawJS) {\n    var stamperObject = parser.jsToStamps(rawJS);\n    var curNumStamps = this.getNumStamps();\n\n    var callback = () => {\n      window.postMessage({ type: \"edited\" }, \"*\");\n      this.recompileIfEnoughStamps(\n        stamperObject.stamps.length + curNumStamps.stamps\n      );\n    };\n\n    var stampData = this.getAutoLayout(\n      stamperObject.stamps,\n      this.getExportableCode() + \"\\n\" + rawJS\n    );\n\n    stampData.map(data => this.addStamp(data, callback));\n  }\n\n  getAutoLayout(stampsData, rawJS) {\n    if (!rawJS) {\n      rawJS = \"\";\n    }\n    var xPos = this.setInitialPosition(\"x\");\n    var yPos = this.setInitialPosition(\"y\");\n\n    var initialXPos = xPos;\n    var maxHeight = -1;\n    var layoutedStampsData = [];\n\n    for (var i = 0; i < stampsData.length; i++) {\n      var data = stampsData[i];\n      data = this.getFilledInStampData(data);\n      var iframeDimens = this.getP5CanvasDimensions(rawJS);\n      data.iframeWidth = iframeDimens.width;\n      data.iframeHeight = iframeDimens.height;\n\n      if (!data.isBlob && !data.isTxtFile) {\n        data.editorHeight = Math.max(\n          data.editorHeight,\n          data.iframeHeight - globals.brHeight\n        );\n      }\n      var cristalDimens = this.getCristalDimens(data);\n\n      data.x = xPos;\n      data.y = yPos;\n\n      var absoluteEndPoint =\n        xPos + cristalDimens.width + globals.autoLayoutMargin;\n      var endPointRelativeToScreen =\n        (absoluteEndPoint - this.state.originX) * this.state.scale;\n\n      if (endPointRelativeToScreen >= window.innerWidth) {\n        xPos = initialXPos;\n        yPos = yPos + maxHeight + globals.autoLayoutMargin;\n        maxHeight = -1;\n        data.x = xPos;\n        data.y = yPos;\n      }\n\n      xPos += cristalDimens.width + globals.autoLayoutMargin;\n      maxHeight = Math.max(maxHeight, cristalDimens.height);\n\n      layoutedStampsData.push(data);\n    }\n\n    return layoutedStampsData;\n  }\n\n  getIframeErrorCallBack(ranges, offset = 0) {\n    var strRanges = JSON.stringify(ranges);\n    return `\n\nwindow.onerror = function (message, url, lineno, colno) {\n  logToConsole(message, lineno)\n}\n\n\nfunction logToConsole(message, lineno){\n\n      var adjLineNum = -1\n      var stampId\n      var ranges = ${strRanges}\n\n      ranges.map(range => {\n        var start = range.start\n        var end = range.end\n        var id = range.id\n        var isFN = range.isFN\n        var isInRange = start + ${offset} < lineno + 1 && lineno -1 < end + ${offset}\n        \n        if(isInRange){\n          adjLineNum = lineno - start - ${offset} + 1\n          stampId = id\n          if(range.isFn){\n            adjLineNum -= 2\n          }\n        }\n      })\n      if(stampId){\n      window.parent.postMessage({type:\"error\", message:message, lineno:adjLineNum, id:stampId}, '*')\n      }\n    }`;\n  }\n\n  getP5CanvasDimensions(code = this.getExportableCode()) {\n    var defaultDimens = { width: 100, height: 100 };\n    var createCanvasStart = code.indexOf(\"createCanvas(\");\n    if (createCanvasStart < 0) {\n      return defaultDimens;\n    }\n\n    var start = createCanvasStart + \"createCanvas(\".length;\n\n    var end = code.indexOf(\")\", start);\n    if (end < 0) {\n      return defaultDimens;\n    }\n\n    var paramsArr = code.substr(start, end - start).split(\",\");\n    if (paramsArr.length != 2) {\n      return defaultDimens;\n    }\n\n    var width = Number(paramsArr[0]);\n    var height = Number(paramsArr[1]);\n    if (!width || !height) {\n      return defaultDimens;\n    }\n\n    return { width: width, height: height };\n  }\n\n  loadAssets(htmlCode) {\n    this.state.stampOrder.map(id => {\n      var item = this.state.stampRefs[id];\n      var name = item.current.state.name;\n      var code = item.current.state.code;\n      if (item.current.props.isTxtFile) {\n        code = item.current.state.dataUri;\n      }\n      if (item.current.props.isTxtFile || item.current.props.isMediaFile) {\n        htmlCode = htmlCode\n          .split(`'${name}'`)\n          .join(`\"${code}\"`)\n          .split(\"`\" + name + \"`\")\n          .join(`\"${code}\"`)\n          .split(`\"${name}\"`)\n          .join(`\"${code}\"`);\n      }\n    });\n\n    return htmlCode;\n  }\n\n  getHTML(id) {\n    if (this.state.htmlID in this.state.stampRefs === false) {\n      return \"\";\n    }\n\n    if (id === this.state.htmlID) {\n      var runnableCode = \"\";\n      var ranges = [];\n    } else {\n      var codeData = this.getRunnableCode(id);\n\n      var runnableCode = codeData.runnableCode;\n\n      var ranges = codeData.ranges;\n    }\n\n    var htmlStamp = this.state.stampRefs[this.state.htmlID];\n\n    var html = htmlStamp.current.state.code;\n\n    const parser = cheerio.load(html, { withStartIndices: true });\n\n    var jsBlockStr =\n      \"<script type='text/javascript'>\" + runnableCode + \"</script>\";\n\n    var jsSelector = '[src=\"sketch.js\"]';\n\n    var jsBlock = parser(jsBlockStr);\n\n    // const start = parser(jsSelector).get(0).startIndex;\n\n    var htmlAsksForJs = parser(jsSelector).length > 0;\n    if (htmlAsksForJs === false) {\n      window.postMessage(\n        {\n          type: \"error\",\n          message:\n            \"Stamper Error: Your index.html is missing a div for sketch.js. Make sure you're linking to sketch.js and not another sketch file.\",\n          id: this.state.htmlID,\n          lineno: 1\n        },\n        \"*\"\n      );\n\n      this.setState({ htmlAsksForJs: htmlAsksForJs });\n    } else if (htmlAsksForJs === true && this.state.htmlAsksForJs === false) {\n      this.setState({ htmlAsksForJs: htmlAsksForJs });\n    }\n\n    parser(\"head\").prepend(\n      \"<script class='errorListener' >\" +\n        this.getIframeErrorCallBack(ranges, 0, id) +\n        \"</script>\"\n    );\n\n    var htmlStr = parser.html();\n    var linesToJs = 0;\n    for (var i = 0; i < htmlStr.length; i++) {\n      if (htmlStr[i] === \"\\n\") {\n        linesToJs += 1;\n      }\n      if (htmlStr.substr(i, \"sketch.js\".length) === \"sketch.js\") {\n        break;\n      }\n    }\n\n    parser(\".errorListener\").replaceWith(\n      `<script class='errorListener'>` +\n        this.getIframeErrorCallBack(ranges, linesToJs, id) +\n        \"</script>\"\n    );\n    parser(jsSelector).replaceWith(jsBlock);\n\n    var html = parser.html();\n    html = this.loadAssets(html);\n\n    return html;\n  }\n\n  setInitialPosition(dimension) {\n    if (dimension === \"x\") {\n      return (\n        (-this.state.originX + this.state.sideBarWidth) / this.state.scale +\n        50 +\n        Math.random() * this.newStampMarginVariance\n      );\n    } else if (dimension === \"y\") {\n      // Math.random() * this.newStampMarginVariance ) * this.state.scale\n      return (\n        (-this.state.originY + this.state.topBarHeight) / this.state.scale +\n        50 +\n        Math.random() * this.newStampMarginVariance\n      );\n    }\n  }\n\n  getUniqueID() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  }\n\n  getFilledInStampData(data) {\n    var defaults = {\n      name: \"sketch\",\n      code: \"rect(50, 50, 50, 50)\",\n      args: \"x=mouseX, y=mouseY\",\n      x: this.setInitialPosition(\"x\"),\n      y: this.setInitialPosition(\"y\"),\n      iframeDisabled: false,\n      editorWidth: globals.defaultEditorWidth,\n      editorHeight: globals.defaultEditorHeight - globals.brHeight,\n      iframeWidth: globals.defaultIframeWidth,\n      iframeHeight: globals.defaultIframeHeight,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      isBlob: false,\n      hidden: false,\n      zIndex: undefined,\n      codeSize: globals.codeSize,\n      lineHighLightingStatus: \"none\",\n      id: this.getUniqueID()\n    };\n\n    if (\n      !data.iframeWidth &&\n      !data.iframeHeight &&\n      !data.isIndex &&\n      !data.isTxtFile &&\n      !data.isMediaFile\n    ) {\n      if (data.isBlob) {\n        var seenCode = data.code.toString();\n      } else {\n        var seenCode = `function ${data.name.toString()}(${data.args.toString()}){\\n  ${data.code.toString()}\\n}`;\n      }\n\n      var iframeDimens = this.getP5CanvasDimensions(\n        this.getExportableCode() + \"\\n\" + seenCode\n      );\n      data.iframeWidth = iframeDimens.width;\n      data.iframeHeight = iframeDimens.height;\n    }\n\n    Object.keys(defaults).map(setting => {\n      if (setting in data) {\n        defaults[setting] = data[setting];\n      }\n    });\n\n    return defaults;\n  }\n\n  addStamp(data, callback = () => null) {\n    data = this.getFilledInStampData(data);\n\n    ///\n\n    var ref = React.createRef();\n\n    var elem = (\n      <Stamp\n        ref={ref}\n        setDependencyLineHighlightings={this.setDependencyLineHighlightings.bind(\n          this\n        )}\n        unHighlightAllLines={this.unHighlightAllLines.bind(this)}\n        isIndex={data.isIndex}\n        isTxtFile={data.isTxtFile}\n        isMediaFile={data.isMediaFile}\n        isBlob={data.isBlob}\n        getExportableCode={this.getExportableCode.bind(this)}\n        starterZIndex={data.zIndex}\n        starterCode={data.code}\n        starterArgs={data.args}\n        starterName={data.name}\n        errorLines={{}}\n        getCristalDimens={this.getCristalDimens.bind(this)}\n        setLineData={this.setLineData.bind(this)}\n        starterEditorWidth={data.editorWidth}\n        starterEditorHeight={data.editorHeight}\n        initialPosition={{ x: data.x, y: data.y }}\n        starterCodeSize={data.codeSize}\n        getFirstLine={this.getFirstLine.bind(this)}\n        id={data.id}\n        getHighlightedLines={this.getHighlightedLines.bind(this)}\n        starterLineHighLightingStatus={data.lineHighLightingStatus}\n        getP5CanvasDimensions={this.getP5CanvasDimensions.bind(this)}\n        setLayerPicker={this.setLayerPicker.bind(this)}\n        deleteFrame={this.deleteFrame}\n        initialHidden={data.hidden}\n        onStartMove={this.onStartMove.bind(this)}\n        onStopMove={this.onStopMove.bind(this)}\n        addStamp={this.addStamp.bind(this)}\n        onDelete={this.onDelete.bind(this)}\n        starterIframeWidth={data.iframeWidth}\n        starterIframeHeight={data.iframeHeight}\n        checkAllNames={this.checkAllNames.bind(this)}\n        disablePan={this.disablePan.bind(this)}\n        iframeDisabled={data.iframeDisabled}\n        requestCompile={this.requestCompile.bind(this)}\n        getHTML={this.getHTML.bind(this)}\n        getScale={this.getScale.bind(this)}\n        getLinesOn={() => this.state.linesOn}\n        getSnapMargin={this.getSnapMargin.bind(this)}\n        starterConsoleVisible={data.consoleVisible}\n      />\n    );\n\n    if (data.isIndex) {\n      this.setState({ htmlID: data.id });\n    }\n\n    this.addStampToState(ref, elem, data.id, callback);\n  }\n\n  async addStampToState(ref, elem, id, callback) {\n    const release = await this.counterMutex.acquire();\n    var stampRefs = Object.assign({}, this.state.stampRefs);\n    var stampElems = Object.assign({}, this.state.stampElems);\n    var stampOrder = Object.assign([], this.state.stampOrder);\n    stampRefs[id] = ref;\n    stampElems[id] = elem;\n    stampOrder.push(id);\n\n    this.setState(\n      {\n        stampRefs: stampRefs,\n        stampElems: stampElems,\n\n        stampOrder: stampOrder\n      },\n      () => {\n        release();\n        callback(id);\n      }\n    );\n  }\n\n  checkForSetup() {\n    var newSetupExists = false;\n    var stampRefs = Object.values(this.state.stampRefs);\n    for (var i = 0; i < stampRefs.length; i++) {\n      var stampRef = stampRefs[i].current;\n\n      if (stampRef.state.name === \"setup\") {\n        newSetupExists = true;\n      }\n    }\n\n    this.setState({ setupExists: newSetupExists });\n\n    return newSetupExists;\n  }\n\n  getFileDict() {\n    var fileDict = {};\n    fileDict[\"sketch.js\"] = { content: this.getExportableCode(), type: \"text\" };\n    var stamperObject = this.getStamperObject();\n\n    stamperObject.js = fileDict[\"sketch.js\"].content;\n\n    fileDict[\"stamper.js\"] = {\n      content: stamperHeader + JSON.stringify(stamperObject),\n      type: \"text\"\n    };\n\n    this.state.stampOrder.map(id => {\n      var item = this.state.stampRefs[id];\n      var code = item.current.state.code;\n      var name = item.current.state.name;\n      if (item.current.props.isTxtFile || item.current.props.isIndex) {\n        fileDict[name] = { content: code, type: \"text\" };\n      } else if (item.current.props.isMediaFile) {\n        fileDict[name] = { content: code, type: \"media\" };\n      }\n    });\n    return fileDict;\n  }\n\n  setLineData(callback = () => null) {\n    var lineData = this.getLineData();\n    this.setState({ lineData: lineData }, () => {\n      this.supplyLineData();\n      callback();\n    });\n  }\n\n  supplyLineData() {\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      var stampRef = stamp.current;\n      stampRef.setLineData(\n        this.state.lineData.filter(line => line.start === id)\n      );\n    });\n  }\n\n  compileSingleStamp(id) {\n    var stamp = this.state.stampRefs[id];\n    var stampRef = stamp.current;\n    if (stampRef) {\n      stampRef.clearErrorsAndUpdate();\n    }\n  }\n\n  lineDataToGraph(lineData, reversed = false) {\n    var graph = {};\n\n    lineData.map(line => {\n      if (!(line.start in graph)) {\n        graph[line.start] = [];\n      }\n\n      if (!(line.end in graph)) {\n        graph[line.end] = [];\n      }\n      if (reversed) {\n        graph[line.end].push(line.start);\n      } else {\n        graph[line.start].push(line.end);\n      }\n    });\n\n    return graph;\n  }\n\n  requestCompile(id) {\n    this.setLineData(() => {\n      this.state.stampOrder.map(id => {\n        this.compileSingleStamp(id);\n      });\n    });\n    this.checkAllNames();\n  }\n\n  disablePan(status) {\n    this.setState({ panDisabled: status });\n  }\n\n  disableZoom(status) {\n    this.setState({ zoomDisabled: status });\n  }\n\n  checkAllNames() {\n    var nameDict = {};\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (!stamp || !stamp.current) {\n        return;\n      }\n      if (stamp.current.props.isBlob) {\n        return;\n      }\n      if (stamp.current) {\n        var name = stamp.current.state.name;\n        if (!(name in nameDict)) {\n          nameDict[name] = 0;\n        }\n        nameDict[name] += 1;\n      }\n    });\n    var duplicateNamedStamps = {};\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (!stamp || !stamp.current) {\n        return;\n      }\n      if (stamp.current.props.isBlob) {\n        return;\n      }\n\n      if (stamp.current.props.isTxtFile || stamp.current.props.isMediaFile) {\n        var mimeType = mime.lookup(stamp.current.state.name);\n\n        if (stamp.current.stripExtension(stamp.current.state.name) === \"\") {\n          window.postMessage(\n            {\n              type: \"error\",\n              message: `Stamper Error: File names cannot be blank.`,\n              lineno: 0,\n              id: stamp.current.props.id\n            },\n            \"*\"\n          );\n        }\n\n        if (!mimeType) {\n          window.postMessage(\n            {\n              type: \"error\",\n              message: `Stamper Error: The file extension '.${\n                stamp.current.state.name.split(\".\")[\n                  stamp.current.state.name.split(\".\").length - 1\n                ]\n              }' is invalid.`,\n              lineno: 0,\n              id: stamp.current.props.id\n            },\n            \"*\"\n          );\n        }\n      }\n      if (stamp.current) {\n        var stampRef = stamp.current;\n        var name = stamp.current.state.name;\n        if (nameDict[name] > 1) {\n          window.postMessage(\n            {\n              type: \"error\",\n              message: `Stamper Error: Multiple Stamps shouldn't have the same name. Consider channging one of your \"${name}\"s to something else.`,\n              lineno: 0,\n              id: stamp.current.props.id\n            },\n            \"*\"\n          );\n        }\n      }\n    });\n  }\n\n  getExportableCode() {\n    var runnableCode = [];\n    var ranges = [];\n    var curLine = 1;\n    var code;\n\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (\n        stamp.current.props.isTxtFile ||\n        stamp.current.props.isIndex ||\n        stamp.current.props.isMediaFile\n      ) {\n        return;\n      }\n\n      if (stamp.current.props.isBlob) {\n        var code = \"\\n\" + stamp.current.state.code + \"\\n\";\n        curLine = this.addCodeBlock(\n          code,\n          stamp.current.props.id,\n          runnableCode,\n          ranges,\n          curLine,\n          false\n        );\n      } else {\n        var state = stamp.current.state;\n        var contents = state.code.split(\"\\n\").join(\"\\n  \");\n\n        var code = `function ${state.name}(${state.args}){\\n  ${contents}\\n}`;\n        curLine = this.addCodeBlock(\n          code,\n          stamp.current.props.id,\n          runnableCode,\n          ranges,\n          curLine,\n          true\n        );\n      }\n    });\n\n    return runnableCode.join(\"\\n\");\n  }\n\n  getNumLines(code) {\n    var numLines = 0;\n    for (var i = 0; i < code.length; i++) {\n      if (code[i] === \"\\n\") {\n        numLines += 1;\n      }\n    }\n\n    return numLines;\n  }\n\n  addCodeBlock(code, id, runnableCode, ranges, curLine, isFn) {\n    code = code + \"\\n\";\n    var start = curLine;\n    var end = curLine + this.getNumLines(code) - 1;\n    runnableCode.push(code);\n    ranges.push({\n      start: start,\n      end: end,\n      id: id,\n      isFn: isFn,\n      code: code.split(\"\\n\")\n    });\n    return end + 1;\n  }\n\n  // setLines() {\n  //   var lines = [];\n  //   var borderColorInt = 205 + 15 - 15 * this.state.scale;\n  //   var style = {\n  //     borderColor: `rgb(${borderColorInt}, ${borderColorInt}, ${borderColorInt})`,\n  //     borderWidth: 1\n  //   };\n\n  //   this.state.lineData.map(singleLineData => {\n  //     lines.push(\n  //       <SteppedLineTo\n  //         {...style}\n  //         from={\"vertex\" + singleLineData[0]}\n  //         to={\"vertex\" + singleLineData[1]}\n  //         orientation=\"v\"\n  //       />\n  //     );\n  //   });\n\n  //   this.setState({ lines: lines });\n  // }\n\n  addBlobToVariableClusters(code, variableClusters) {\n    try {\n      variableClusters.push(parser.getVariables(code));\n    } catch (e) {\n      code.split(\"\\n\\n\").map(codePg => {\n        try {\n          variableClusters.push(parser.getVariables(codePg));\n        } catch (e) {\n          codePg.split(\"\\n\").map(codeLine => {\n            try {\n              variableClusters.push(parser.getVariables(codeLine));\n            } catch (e) {\n              codeLine.split(/[^A-Za-z\\s]/).map(codeSentance => {\n                try {\n                  variableClusters.push(parser.getVariables(codeSentance));\n                } catch (e) {\n                  variableClusters.push(parser.getVariables(\"\"));\n                }\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n\n  getJSLineData() {\n    var declaredDict = {};\n    var undeclaredArr = [];\n    var lineData = [];\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      var variableClusters = [];\n      if (!stampRef) {\n        return;\n      }\n      var state = stampRef.state;\n      if (\n        stampRef.props.isMediaFile ||\n        stampRef.props.isTxtFile ||\n        stampRef.props.isIndex\n      ) {\n        return;\n      } else if (stampRef.props.isBlob) {\n        var code = state.code;\n        this.addBlobToVariableClusters(code, variableClusters);\n      } else {\n        var code = `function ${state.name}(${state.args}){\\n${state.code}\\n}`;\n        try {\n          variableClusters.push(parser.getVariables(code));\n        } catch (e) {\n          try {\n            var code = `function ${state.name}(${state.args}){}`;\n            variableClusters.push(parser.getVariables(code));\n          } catch (e) {\n            variableClusters.push(parser.getVariables(\"\"));\n          }\n        }\n      }\n\n      variableClusters.map(variableCluster => {\n        variableCluster.declared.map(variable => (declaredDict[variable] = id));\n        variableCluster.undeclared.map(variable => {\n          var noWhiteSpace = code.replace(/\\s/g, \"\");\n          var varEndIndex = noWhiteSpace.indexOf(variable) + variable.length;\n\n          if (\n            noWhiteSpace.length > varEndIndex &&\n            noWhiteSpace[varEndIndex] === \"(\"\n          ) {\n            variable += \"()\";\n          }\n\n          undeclaredArr.push({ variable: variable, id: id });\n        });\n      });\n    });\n\n    var lineDict = {};\n\n    undeclaredArr.map(undeclaredItem => {\n      var variable = undeclaredItem.variable;\n      var usingID = undeclaredItem.id;\n      var declaringID = declaredDict[variable.split(\"()\").join(\"\")];\n\n      if (declaringID && usingID) {\n        if (!(usingID + \"_\" + declaringID in lineDict)) {\n          lineDict[usingID + \"_\" + declaringID] = [];\n        }\n        lineDict[usingID + \"_\" + declaringID].push(variable);\n      }\n    });\n\n    var lineData = Object.keys(lineDict).map(lineKey => {\n      return this.getLineRelation(\n        lineKey.split(\"_\")[1],\n        lineKey.split(\"_\")[0],\n        \"js\",\n        lineDict[lineKey].join(\", \")\n      );\n    });\n\n    return lineData;\n  }\n\n  isFnStamp(id) {\n    var props = this.state.stampRefs[id].current.props;\n    return (\n      !props.isBlob && !props.isMediaFile && !props.isTxtFile && !props.isIndex\n    );\n  }\n\n  getListenerLineData() {\n    var listenerIDs = [];\n    var lineData = [];\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return lineData;\n      }\n      if (this.isListener(stampRef.state.name)) {\n        listenerIDs.push(stampRef.props.id);\n      }\n    });\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return lineData;\n      }\n      if (\n        this.isListener(stampRef.state.name) ||\n        !this.isFnStamp(id) ||\n        stampRef.state.name === \"setup\" ||\n        stampRef.state.name === \"preload\"\n      ) {\n        return lineData;\n      }\n      listenerIDs.map(listenerID => {\n        lineData.push(this.getLineRelation(listenerID, id, \"listener\"));\n      });\n    });\n\n    return lineData;\n  }\n\n  getSetupLineData() {\n    var lineData = [];\n    var setupID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      if (!this.state.stampRefs[id] || !this.state.stampRefs[id].current) {\n        return lineData;\n      }\n      var stampRef = this.state.stampRefs[id].current;\n\n      if (stampRef.state.name === \"setup\") {\n        setupID = id;\n      }\n    }\n\n    if (setupID) {\n      this.state.stampOrder.map(id => {\n        if (\n          this.isFnStamp(id) &&\n          setupID != id &&\n          this.state.stampRefs[id].current.state.name != \"preload\"\n        ) {\n          lineData.push(this.getLineRelation(setupID, id, \"setup\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  getPreloadLineData() {\n    var lineData = [];\n    var preloadID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return;\n      }\n      if (stampRef.state.name === \"preload\") {\n        preloadID = id;\n      }\n    }\n\n    if (preloadID) {\n      this.state.stampOrder.map(id => {\n        if (this.isFnStamp(id) && preloadID != id) {\n          lineData.push(this.getLineRelation(preloadID, id, \"preload\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  getIndexLineData() {\n    var lineData = [];\n    var indexID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return;\n      }\n      if (stampRef.props.isIndex) {\n        indexID = id;\n      }\n    }\n\n    if (indexID) {\n      if (\n        !this.fileIsReferenced(\n          this.state.stampRefs[indexID].current.state.code,\n          \"sketch.js\"\n        )\n      ) {\n        return [];\n      }\n      this.state.stampOrder.map(id => {\n        if (this.isFnStamp(id)) {\n          lineData.push(this.getLineRelation(indexID, id, \"index\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  fileIsReferenced(code, fileName) {\n    return (\n      code.includes(`'${fileName}'`) ||\n      code.includes(`\"${fileName}\"`) ||\n      code.includes(\"`\" + fileName + \"`\")\n    );\n  }\n\n  getLineLabel(text, type, isHighlighted) {\n    var backgroundColor = \"transparent\";\n    var textColor = this.getLineColor(type, 0.9);\n    if (isHighlighted) {\n      backgroundColor = this.getLineColor(type, 1);\n      textColor = \"white\";\n    }\n    var label = (\n      <div\n        className={\"name rounded p-2\"}\n        style={{\n          transform: \"scale(\" + 0.8 + \")\",\n          color: textColor,\n          backgroundColor: backgroundColor,\n          cursor: \"default\",\n          userSelect: \"none\"\n        }}\n      >\n        {text}\n      </div>\n    );\n\n    return label;\n  }\n\n  getLineColor(type, opacity) {\n    if (type === \"file\") {\n      return \"rgba(140,154, 53, \" + opacity + \")\";\n    } else if (type === \"js\") {\n      return \"rgba(70,160,206, \" + opacity + \")\";\n    } else if (type === \"listener\") {\n      return \"rgba(218,16,96, \" + opacity + \")\";\n    } else {\n      return \"rgba(170,170,170, \" + opacity + \")\";\n    }\n  }\n\n  getLineStyle(type, isHighlighted) {\n    var colorOpacity = 0.15;\n    if (isHighlighted) {\n      colorOpacity = 1;\n    }\n    var strokeColor = this.getLineColor(type, colorOpacity);\n    var style = {\n      strokeColor: strokeColor,\n      strokeWidth: 5,\n      arrowLength: 4,\n      arrowThickness: 4\n    };\n    return style;\n  }\n\n  getLineRelation(start, end, type, labelText) {\n    var isHighlighted = start + \"_\" + end in this.state.highlightedLines;\n\n    if (!labelText) {\n      labelText = type;\n    }\n    return {\n      end: end,\n      start: start,\n      type: type,\n      label: this.getLineLabel(labelText, type, isHighlighted),\n      style: this.getLineStyle(type, isHighlighted),\n      labelText: labelText\n    };\n  }\n\n  getFileLineData() {\n    var fileIdDict = {};\n    var lineData = [];\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return;\n      }\n      if (\n        stampRef.props.isMediaFile ||\n        stampRef.props.isTxtFile ||\n        stampRef.props.isIndex\n      ) {\n        fileIdDict[stampRef.state.name] = id;\n      }\n    });\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (!stampRef) {\n        return;\n      }\n      Object.keys(fileIdDict).map(fileName => {\n        if (this.fileIsReferenced(stampRef.state.code, fileName)) {\n          lineData.push(\n            this.getLineRelation(fileIdDict[fileName], id, \"file\", fileName)\n          );\n        }\n      });\n    });\n\n    return lineData;\n  }\n\n  fillInHighlightedLineData(highlightedLines) {\n    this.state.lineData.map(line => {\n      var lineId = line.start + \"_\" + line.end;\n      if (lineId in highlightedLines) {\n        highlightedLines[lineId] = line;\n      }\n    });\n  }\n\n  setDependencyLineHighlightings(id) {\n    var graph = this.lineDataToGraph(this.state.lineData);\n\n    var highlightedLines = {};\n    graph[id] &&\n      graph[id].map(otherID => {\n        highlightedLines[id + \"_\" + otherID] = \"\";\n      });\n\n    this.fillInHighlightedLineData(highlightedLines);\n\n    this.setState({ highlightedLines: highlightedLines }, () => {\n      this.setLineData();\n\n      this.state.stampOrder.map(id => {\n        this.state.stampRefs[id].current.setLineHighlighted(\n          \"off\",\n          highlightedLines\n        );\n      });\n      this.state.stampRefs[id].current.setLineHighlighted(\n        \"on\",\n        highlightedLines\n      );\n      graph[id] &&\n        graph[id].map(otherID => {\n          this.state.stampRefs[otherID].current.setLineHighlighted(\n            \"on\",\n            highlightedLines\n          );\n        });\n    });\n  }\n\n  onLineSelection(sourceAndTarget) {\n    var startStampId = sourceAndTarget.source.id.split(\"_\").pop();\n    var endStampId = sourceAndTarget.target.id.split(\"_\").pop();\n\n    var lineName = startStampId + \"_\" + endStampId;\n    var highlightedLines = {};\n    highlightedLines[lineName] = \"\";\n\n    this.fillInHighlightedLineData(highlightedLines);\n\n    this.setState({ highlightedLines: highlightedLines }, () => {\n      this.setLineData();\n      this.state.stampOrder.map(id => {\n        this.state.stampRefs[id].current.setLineHighlighted(\n          \"off\",\n          highlightedLines\n        );\n      });\n      this.state.stampRefs[startStampId].current.setLineHighlighted(\n        \"on\",\n        highlightedLines\n      );\n      this.state.stampRefs[endStampId].current.setLineHighlighted(\n        \"on\",\n        highlightedLines\n      );\n    });\n  }\n\n  unHighlightAllLines() {\n    this.state.stampOrder.map(id => {\n      this.state.stampRefs[id].current.setLineHighlighted(\"none\", {});\n    });\n\n    this.setState({ highlightedLines: {} }, () => this.setLineData());\n  }\n\n  getLineData() {\n    var lineData = [];\n\n    lineData = lineData.concat(this.getJSLineData());\n\n    lineData = lineData.concat(this.getListenerLineData());\n\n    lineData = lineData.concat(this.getSetupLineData());\n\n    lineData = lineData.concat(this.getIndexLineData());\n    lineData = lineData.concat(this.getPreloadLineData());\n\n    lineData = lineData.concat(this.getFileLineData());\n\n    var lineDict = {};\n\n    lineData = lineData.filter(line => line);\n\n    lineData = lineData.filter(line => {\n      var lineKey = line.start + \"_\" + line.end;\n      if (lineKey in lineDict === false) {\n        lineDict[lineKey] = 0;\n      }\n      lineDict[lineKey] += 1;\n\n      return lineDict[lineKey] === 1 && line.start != line.end;\n    });\n\n    var relativeOffsetUnit = 10;\n\n    lineData.map(line => {\n      line.targetAnchor = \"middle\";\n      line.sourceAnchor = \"middle\";\n      line.targetId = \"line_\" + line.end;\n    });\n\n    return lineData;\n  }\n\n  getInfluencingStamps(id, graph, seen) {\n    seen[id] = \"\";\n    graph[id] &&\n      graph[id].map(otherID => {\n        if (!(otherID in seen)) {\n          this.getInfluencingStamps(otherID, graph, seen);\n        }\n      });\n  }\n\n  getRunnableCode(overalID) {\n    var runnableCode = [];\n    var ranges = [];\n    var curLine = 1;\n    var code;\n\n    var lineGraph = this.lineDataToGraph(this.state.lineData, true);\n\n    var influencingStamps = {};\n    this.getInfluencingStamps(overalID, lineGraph, influencingStamps);\n\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n\n      if (\n        stamp.current.state.name != \"draw\" &&\n        stamp.current.props.isTxtFile === false &&\n        stamp.current.props.isMediaFile === false &&\n        stamp.current.props.isIndex === false &&\n        !(\n          this.isListener(stamp.current.state.name) &&\n          this.isListener(this.state.stampRefs[overalID].current.state.name)\n        ) &&\n        !(\n          this.isListener(stamp.current.state.name) &&\n          (this.state.stampRefs[overalID].current.state.name === \"setup\" ||\n            this.state.stampRefs[overalID].current.state.name === \"preload\")\n        ) &&\n        (id in influencingStamps ||\n          stamp.current.state.name ===\n            this.state.stampRefs[overalID].current.state.name)\n      ) {\n        var state = stamp.current.state;\n        if (stamp.current.props.isBlob) {\n          var code = state.code;\n\n          curLine = this.addCodeBlock(\n            code,\n            stamp.current.props.id,\n            runnableCode,\n            ranges,\n            curLine,\n            false\n          );\n        } else {\n          var code = `function ${state.name}\\n(${state.args}){\\n${state.code}\\n}`;\n          curLine = this.addCodeBlock(\n            code,\n            stamp.current.props.id,\n            runnableCode,\n            ranges,\n            curLine,\n            true\n          );\n        }\n      }\n    });\n\n    if (\n      overalID in this.state.stampRefs == false ||\n      this.state.stampRefs[overalID].current === null\n    ) {\n      return { ranges: ranges, runnableCode: runnableCode.join(\"\") };\n    }\n\n    var stampRef = this.state.stampRefs[overalID].current;\n    var state = stampRef.state;\n    if (state.name === \"draw\" || this.isListener(state.name)) {\n      var fullFun = `function ${state.name}\\n(${state.args}){\\n${state.code}\\n}`;\n      curLine = this.addCodeBlock(\n        fullFun,\n        overalID,\n        runnableCode,\n        ranges,\n        curLine,\n        true\n      );\n    } else if (state.name === \"setup\" || state.name === \"preload\") {\n      // do nothing\n    } else {\n      code = `function draw\\n(){\\n${state.name}()\\n}`;\n      curLine = this.addCodeBlock(\n        code,\n        stampRef.props.id,\n        runnableCode,\n        ranges,\n        curLine,\n        false\n      );\n    }\n\n    runnableCode = this.setLoopingControl(\n      overalID,\n      runnableCode.join(\"\"),\n      state.name\n    );\n\n    return { ranges: ranges, runnableCode: runnableCode };\n  }\n\n  setLoopingControl(id, runnableCode) {\n    var loopingVar = \"_isLooping\";\n\n    var loopingCallbacks = `\\n\nvar _isLooping = true\\n\nwindow.parent.postMessage({type:\"loop\", message:\"stop\", id:\"${id}\"}, '*')\nvar _userSetLoop = true\nvar _stopLooping = setTimeout(() => {\n noLoop() \n}, 1000)\n\ndocument.addEventListener('mouseenter', () => {\nclearTimeout(_stopLooping)\nwindow.parent.postMessage({type:\"loop\", message:\"start\", id:\"${id}\"}, '*')\nif(_isLooping){\n\nloop()\n}\n\n});\n\ndocument.addEventListener('mouseleave', () => {\n  window.parent.postMessage({type:\"loop\", message:\"stop\", id:\"${id}\"}, '*')\n_stopLooping =setTimeout(() => {\n noLoop() \n}, 1000)\n});\n\n`;\n\n    runnableCode = runnableCode\n      .split(\"noLoop()\")\n      .join(`noLoop(); _isLooping = false`);\n\n    runnableCode = runnableCode\n      .split(\"loop()\")\n      .join(`loop(); _isLooping = true`);\n\n    runnableCode = runnableCode + loopingCallbacks;\n\n    return runnableCode;\n  }\n\n  isListener(name) {\n    return name in globals.specialFns && globals.specialFns[name] === false;\n  }\n\n  async onDelete(id) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    if (id in this.state.stampRefs) {\n      const release = await this.counterMutex.acquire();\n\n      var stampRefs = Object.assign({}, this.state.stampRefs);\n      var stampElems = Object.assign({}, this.state.stampElems);\n      var deletedStamps = Object.assign([], this.state.deletedStamps);\n      var stampData = stampRefs[id].current.getData();\n      deletedStamps.push(stampData);\n      delete stampRefs[id];\n      stampElems[id] = <span hidden={true} />;\n\n      var stampOrder = Object.assign([], this.state.stampOrder);\n      stampOrder.splice(stampOrder.indexOf(id), 1);\n      this.setState(\n        {\n          stampRefs: stampRefs,\n          stampElems: stampElems,\n          stampOrder: stampOrder,\n          deletedStamps: deletedStamps\n        },\n        () => this.requestCompile(id)\n      );\n      release();\n    }\n  }\n\n  undoDelete(position = this.state.deletedStamps.length - 1) {\n    if (this.state.deletedStamps.length <= position || position < 0) {\n      return;\n    }\n    var deletedStamps = Object.assign([], this.state.deletedStamps);\n\n    var stampData = deletedStamps[position];\n    deletedStamps.splice(position, 1);\n\n    this.setState({ deletedStamps: deletedStamps });\n\n    this.addStamp(stampData, id => {\n      this.requestCompile(id);\n      window.postMessage({ type: \"edited\" }, \"*\");\n    });\n  }\n\n  getStamperObject(id) {\n    var data = {\n      stamps: [],\n      scale: this.state.scale,\n      originX: this.state.originX,\n      originY: this.state.originY,\n      worldKey: this.state.worldKey,\n      worldEdited: this.state.worldEdited,\n      worldPublishTime: this.state.worldPublishTime,\n      snapToGrid: this.state.snapToGrid,\n      linesOn: this.state.linesOn,\n      js: this.getExportableCode(),\n      highlightedLines: this.state.highlightedLines\n    };\n    this.state.stampOrder.map(stampID => {\n      if (stampID != id) {\n        var stamp = this.state.stampRefs[stampID];\n        data.stamps.push(stamp.current.getData());\n      }\n    });\n\n    return data;\n  }\n\n  onStartMove() {\n    this.setState({ isMoving: true });\n    var stampRefs = this.state.stampRefs;\n    for (var i in stampRefs) {\n      var stamp = stampRefs[i].current;\n\n      stamp.setIframeDisabled(true);\n    }\n  }\n\n  onStopMove() {\n    this.setState({ mouseWheelTimeout: null, isMoving: false });\n    var stampRefs = this.state.stampRefs;\n    for (var i in stampRefs) {\n      var stamp = stampRefs[i].current;\n      stamp.setIframeDisabled(false);\n    }\n  }\n\n  centerOnStamp(id, xOff, yOff) {\n    var stampRef = this.state.stampRefs[id].current;\n\n    if (stampRef) {\n      var cristalRef = stampRef.cristalRef.current;\n      if (cristalRef) {\n        var x = this.state.originX + cristalRef.state.x * this.state.scale,\n          y = this.state.originY + cristalRef.state.y * this.state.scale,\n          width = cristalRef.state.width,\n          height = cristalRef.state.height;\n\n        var newX =\n          (window.innerWidth - xOff) / 2 +\n          xOff -\n          (width / 2) * this.state.scale;\n        var newY =\n          (window.innerHeight - yOff) / 2 +\n          yOff -\n          (height / 2) * this.state.scale;\n\n        this.manualPan(newX - x, newY - y);\n        cristalRef.changeZIndex();\n      }\n    }\n  }\n\n  manualPan(xDiff, yDiff) {\n    $(\".allStamps\").css({ transition: \"all .5s ease\" });\n\n    setTimeout(() => {\n      $(\".allStamps\").css({ transition: \"\" });\n    }, 500);\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n    this.setState({\n      originX: this.state.originX + xDiff,\n      originY: this.state.originY + yDiff\n    });\n  }\n\n  toggleHide(stampRef) {\n    stampRef.toggleHide(() => {\n      this.setLayerPicker();\n    });\n  }\n\n  getFirstLine(text) {\n    var firstN = text.length;\n\n    for (var i = 0; i < text.length; i++) {\n      if (text[i] === \"\\n\") {\n        if (firstN === text.length) {\n          firstN = i;\n        }\n      }\n    }\n\n    if (firstN === 0) {\n      return \" \";\n    }\n\n    var dots = \"\";\n    if (firstN > 15) {\n      firstN = 15;\n      dots = \"...\";\n    }\n\n    return text.substr(0, firstN) + dots;\n  }\n\n  getScale() {\n    return this.state.scale;\n  }\n\n  getSnapMargin() {\n    if (this.state.snapToGrid) {\n      return this.calcSnapMargin();\n    } else {\n      return 0;\n    }\n  }\n\n  onDragEnd(result) {\n    if (!result.destination) {\n      return;\n    }\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    var stampOrder = Object.assign([], this.state.stampOrder);\n\n    const [removed] = stampOrder.splice(result.source.index, 1);\n    stampOrder.splice(result.destination.index, 0, removed);\n\n    this.setState({ stampOrder: [] }, () => {\n      this.setLayerPicker();\n      this.setState({ stampOrder: stampOrder }, () => this.setLayerPicker());\n    });\n  }\n  calcSnapMargin() {\n    var snapMargin = Math.max(Math.round(1 / this.state.scale) * 20, 5);\n    return 20;\n  }\n\n  renderGridLines() {\n    if (this.state.snapToGrid === false) {\n      return null;\n    }\n\n    var gridLines = [];\n\n    var borderWidth = Math.max(Math.round(1 / this.state.scale), 0.5);\n    var snapMargin = this.calcSnapMargin();\n\n    var roundedScale = Math.round(1 / this.state.scale);\n\n    var actualOriginX = -this.state.originX;\n\n    // var x0 = -Math.round(this.state.originX /snapMargin)*snapMargin\n    // var y0 = -Math.round(this.state.originY/snapMargin)*snapMargin\n\n    var x0 = -this.state.originX / this.state.scale;\n    var y0 = -this.state.originY / this.state.scale;\n\n    var roundedX0 = Math.round(x0 / snapMargin) * snapMargin;\n    var roundedY0 = Math.round(y0 / snapMargin) * snapMargin;\n\n    var width = window.innerWidth / this.state.scale;\n    var height = window.innerHeight / this.state.scale;\n\n    var x = roundedX0;\n\n    while (x < width + x0) {\n      gridLines.push(\n        <span\n          className=\"border-borderLightGrey\"\n          style={{\n            position: \"absolute\",\n            top: roundedY0,\n            height: height,\n            width: 10,\n            left: x,\n            background: \"transparent\",\n            borderLeft: borderWidth + \"px solid\"\n          }}\n        />\n      );\n      x += snapMargin;\n    }\n\n    var y = roundedY0;\n\n    while (y < height + y0) {\n      gridLines.push(\n        <span\n          className=\"border-borderLightGrey\"\n          style={{\n            position: \"absolute\",\n            top: y,\n            height: 10,\n            width: width,\n            left: roundedX0,\n            background: \"transparent\",\n            borderTop: borderWidth + \"px solid\"\n          }}\n        />\n      );\n      y += snapMargin;\n    }\n\n    return gridLines;\n  }\n\n  toggleLinesOn() {\n    this.setState({ linesOn: !this.state.linesOn }, () => {\n      this.setLayerPicker();\n    });\n\n    this.unHighlightAllLines();\n  }\n\n  setSettingsPicker() {\n    var pickerData = [];\n\n    pickerData.push({\n      name: \"lines  (⬆L)\",\n      status: this.state.linesOn,\n      icon: globals.LinesIcon,\n\n      hideCallback: () => {\n        this.toggleLinesOn();\n      },\n\n      id: this.getUniqueID(),\n      isSetting: true,\n      toggleOnIcon: globals.SettingOnIcon,\n      toggleOffIcon: globals.SettingOffIcon\n    });\n\n    pickerData.push({\n      name: \"snap to grid (⬆G)\",\n      status: this.state.snapToGrid,\n      icon: globals.GridIcon,\n\n      hideCallback: () => {\n        this.setState({ snapToGrid: !this.state.snapToGrid }, () =>\n          this.setLayerPicker()\n        );\n      },\n      id: this.getUniqueID(),\n      isSetting: true,\n      toggleOnIcon: globals.SettingOnIcon,\n      toggleOffIcon: globals.SettingOffIcon\n    });\n\n    this.setState({ settingsPicker: pickerData });\n  }\n\n  setLayerPicker() {\n    this.setSettingsPicker();\n\n    var pickerData = [];\n\n    this.state.stampOrder.map(id => {\n      if (id in this.state.stampRefs) {\n        var stampRef = this.state.stampRefs[id].current;\n        if (!stampRef) {\n          return;\n        }\n        if (stampRef.props.isBlob) {\n          var name = this.getFirstLine(stampRef.state.code);\n        } else {\n          var name = stampRef.state.name;\n        }\n      }\n\n      // name += \"_\" + id;\n\n      pickerData.push({\n        name: name,\n        icon: stampRef.getIcon(),\n        status: !stampRef.state.hidden,\n        centerCallback: (xOff, yOff) =>\n          this.centerOnStamp(stampRef.props.id, xOff, yOff),\n        hideCallback: () => this.toggleHide(stampRef),\n        id: stampRef.props.id,\n        isConsole: false,\n        hasError: Object.keys(stampRef.state.errorLines).length > 0,\n        toggleOnIcon: globals.VisibilityIcon,\n        toggleOffIcon: globals.VisibilityOffIcon\n      });\n    });\n\n    this.setState({ pickerData: pickerData });\n  }\n\n  getNumStamps() {\n    return {\n      stamps: this.state.stampOrder.length\n    };\n  }\n\n  getWorldData() {\n    return {\n      worldKey: this.state.worldKey,\n      worldPublishTime: this.state.worldPublishTime,\n      worldEdited: this.state.worldEdited\n    };\n  }\n\n  getHighlightedLines() {\n    return this.state.highlightedLines;\n  }\n\n  // getMaxCoords() {\n  //   var coords = this.state.stampOrder.map(key => {\n  //     var stampRef = this.state.stampRefs[key].current;\n  //     if (!stampRef) {\n  //       return { x: 0, y: 0 };\n  //     }\n  //     return {\n  //       x: stampRef.state.x + stampRef.getSize().width,\n  //       y: stampRef.state.y + stampRef.getSize().height\n  //     };\n  //   });\n  //   coords.push({ x: 0, y: 0 });\n\n  //   return coords.reduce((maxCoords, coords) => {\n  //     return {\n  //       x: Math.max(maxCoords.x, coords.x),\n  //       y: Math.max(maxCoords.y, coords.y)\n  //     };\n  //   });\n  //          // <div  style={{width:this.getMaxCoords().x,height:this.getMaxCoords().y, background:\"black\" }} >hi</div>\n  // }\n\n  getCristalDimens(data) {\n    var iframeWidth = data.iframeWidth;\n    if (data.isTxtFile || data.isBlob) {\n      iframeWidth = 0;\n    }\n\n    var initialHeight = data.editorHeight + globals.fnTitleHeight + 60;\n    if (data.isMediaFile) {\n      initialHeight = data.iframeHeight + globals.fnTitleHeight + 40;\n    } else if (data.isBlob) {\n      initialHeight = data.editorHeight + 80;\n    }\n\n    return {\n      width: iframeWidth + data.editorWidth + 42,\n      height: initialHeight\n    };\n  }\n\n  render() {\n    // var maxCoords = this.getMaxCoords();\n\n    return (\n      <div>\n        <div\n          class=\"row bg-grey\"\n          style={{ height: \"100vh\" }}\n          onMouseUp={() =>\n            this.state.linesOn &&\n            !this.state.isMoving &&\n            this.unHighlightAllLines()\n          }\n        >\n          <div\n            className=\"allStamps\"\n            style={{\n              position: \"absolute\",\n              left: this.state.originX,\n              top: this.state.originY,\n              transform: \"scale(\" + this.state.scale + \")\"\n            }}\n          >\n            <div>{this.renderGridLines()}</div>\n            <ArcherContainer\n              onLineSelection={this.onLineSelection.bind(this)}\n              scale={this.state.scale}\n              top={this.state.originY}\n              left={this.state.originX}\n              relativeOffsetSize={25}\n            >\n              {Object.values(this.state.stampElems)}\n\n              <Cristal invisible></Cristal>\n            </ArcherContainer>\n          </div>\n        </div>\n\n        <ControlBar\n          getNumStamps={this.getNumStamps.bind(this)}\n          requestCompile={this.requestCompile.bind(this)}\n          pickerData={this.state.pickerData}\n          addStamp={this.addStamp.bind(this)}\n          disablePan={this.disablePan.bind(this)}\n          disableZoom={this.disableZoom.bind(this)}\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          updateControlBarDimensions={this.updateControlBarDimensions.bind(\n            this\n          )}\n          ref={this.controlBarRef}\n          modalManagerRef={this.modalManagerRef}\n          onDragEnd={this.onDragEnd.bind(this)}\n          recompileIfEnoughStamps={this.recompileIfEnoughStamps.bind(this)}\n          getWorldData={this.getWorldData.bind(this)}\n          settingsPicker={this.state.settingsPicker}\n          deletedStamps={this.state.deletedStamps}\n          undoDelete={this.undoDelete.bind(this)}\n          addRawJavascript={this.addRawJavascript.bind(this)}\n        />\n\n        <ModalManager\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          ref={this.modalManagerRef}\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          getStamperObject={this.getStamperObject.bind(this)}\n          getFileDict={this.getFileDict.bind(this)}\n          addStamp={this.addStamp.bind(this)}\n          requestCompile={this.requestCompile.bind(this)}\n          getWorldData={this.getWorldData.bind(this)}\n          setWorldData={(data, callback) => this.setState(data, callback)}\n        />\n      </div>\n    );\n  }\n}\n","import \"./App.scss\";\n\nimport React, { Component, useState } from \"react\";\n\nimport View from \"./View.js\";\n\n\n\nexport default class App extends Component {\n\n  render() {\n    return (\n      <div>\n        <View />\n      </div>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/box.310d8273.svg\";","module.exports = __webpack_public_path__ + \"static/media/file.5bd43cb8.svg\";","module.exports = __webpack_public_path__ + \"static/media/tool.d68b9b61.svg\";","module.exports = __webpack_public_path__ + \"static/media/bell.86facacc.svg\";","module.exports = __webpack_public_path__ + \"static/media/image.117a6d3e.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-down.c66b213d.svg\";","module.exports = __webpack_public_path__ + \"static/media/download.ce2002cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload.14dd1331.svg\";","module.exports = __webpack_public_path__ + \"static/media/archive.97582ec6.svg\";","module.exports = __webpack_public_path__ + \"static/media/message-square.42f61b6c.svg\";","module.exports = __webpack_public_path__ + \"static/media/info.47197c1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/star.ac8ea213.svg\";","import pf, { globals, p5Lib } from \"./globals.js\";\n\nvar asciiArt =\n  \"   ____    __    ____      ____    ______ ______           ____    ____    ____       \\n  /\\\\  _\\\\  _\\\\ \\\\ _/\\\\__ \\\\    /\\\\  _`\\\\ /\\\\__  _/\\\\  _  \\\\  /'\\\\_/`\\\\/\\\\  _`\\\\ /\\\\  _`\\\\ /\\\\  _`\\\\     \\n  \\\\ \\\\ \\\\/ /\\\\_` ' \\\\/_/\\\\ \\\\   \\\\ \\\\,\\\\L\\\\_\\\\/_/\\\\ \\\\\\\\ \\\\ \\\\L\\\\ \\\\/\\\\      \\\\ \\\\ \\\\L\\\\ \\\\ \\\\ \\\\L\\\\_\\\\ \\\\ \\\\L\\\\ \\\\   \\n   \\\\ \\\\ \\\\ \\\\/_>   <_ \\\\ \\\\ \\\\   \\\\/_\\\\__ \\\\  \\\\ \\\\ \\\\\\\\ \\\\  __ \\\\ \\\\ \\\\__\\\\ \\\\ \\\\ ,__/\\\\ \\\\  _\\\\L\\\\ \\\\ ,  /   \\n    \\\\ \\\\ \\\\_ /\\\\_, ,_\\\\ \\\\_\\\\ \\\\    /\\\\ \\\\L\\\\ \\\\ \\\\ \\\\ \\\\\\\\ \\\\ \\\\/\\\\ \\\\ \\\\ \\\\_/\\\\ \\\\ \\\\ \\\\/  \\\\ \\\\ \\\\L\\\\ \\\\ \\\\ \\\\\\\\ \\\\  \\n     \\\\ \\\\___\\\\/_/\\\\_\\\\/ /\\\\___\\\\   \\\\ `\\\\____\\\\ \\\\ \\\\_\\\\\\\\ \\\\_\\\\ \\\\_\\\\ \\\\_\\\\\\\\ \\\\_\\\\ \\\\_\\\\   \\\\ \\\\____/\\\\ \\\\_\\\\ \\\\_\\\\\\n      \\\\/___/  \\\\/_/  \\\\/___/    \\\\/_____/  \\\\/_/ \\\\/_/\\\\/_/\\\\/_/ \\\\/_/\\\\/_/    \\\\/___/  \\\\/_/\\\\/ /\";\n\nexport const stamperHeader = `/*\n${asciiArt}\n\n\nHello and welcome to your Stamper metadata file! \nThis file keeps track of all of the info Stamper needs about your stamps. \n\nDon't worry, it won't affect your sketch if you run it on any other IDE.\n\nPlease DON'T MODIFY ANY OF THE INFORMATION BELOW or else your project may behave unexpectantly in Stamper.\nHowever, if your project is acting strangely, delete this file and reopen your project. \nYou'll lose your stamps' formatting but keep all of the code.\n\nHappy Stamping :)\n\n*/\n\n`;\n\nexport const builtInFns = [\n  {\n    name: \"draw\",\n    args: \"\",\n    code: `colorMode(RGB, 255, 255, 255, 1);\nbackground(0, 0, 0, .01);\nstroke(255);\nstrokeWeight(1)\n\nif (mouseIsPressed) {\n  line(mouseX, mouseY, pmouseX, pmouseY);\n}`\n  },\n  {\n    name: \"setup\",\n    args: \"\",\n    code: `createCanvas(${globals.defaultIframeWidth},${globals.defaultIframeHeight})\nbackground(100);`\n  },\n  { name: \"preload\", args: \"\", code: \"img = loadImage('YOUR IMAGE');\" }\n];\n\nvar keyPressCode = `fill(\"black\")\ntextSize(50);\n\n// display last key pressed.\ntext(key + ' ' + keyCode, 20, 70);`;\n\nvar mousePressCode = `fill('black')\n\n// display last clicked location\ntext(mouseX + ', ' + mouseY, mouseX + 10, mouseY - 10)\nrectMode(CENTER)\nrect(mouseX, mouseY, 1, 20)\nrect(mouseX, mouseY, 20, 1)`;\n\nexport const listenerFns = [\n  {\n    name: \"keyPressed\",\n    args: \"\",\n    code: `background('yellow')\\n` + keyPressCode\n  },\n  {\n    name: \"keyReleased\",\n    args: \"\",\n    code: `background('springgreen')\\n` + keyPressCode\n  },\n  {\n    name: \"keyTyped\",\n    args: \"\",\n    code: `background('cyan')\\n` + keyPressCode\n  },\n  {},\n  {\n    name: \"mousePressed\",\n    args: \"\",\n    code: `background('yellow')\\n` + mousePressCode\n  },\n  {\n    name: \"mouseReleased\",\n    args: \"\",\n    code: `background('springgreen')\\n` + mousePressCode\n  },\n  {\n    name: \"mouseClicked\",\n    args: \"\",\n    code: `background('cyan')\\n` + mousePressCode\n  },\n  {\n    name: \"doubleClicked\",\n    args: \"\",\n    code: `background('cyan')\\n` + mousePressCode\n  },\n  {},\n  {\n    name: \"mouseMoved\",\n    args: \"\",\n    code: `background(0, 10)\nstrokeWeight(0)\nfill(255)\nsize = 2*random(0, width)/3\nellipse(width/2,height/2,size, size)`\n  },\n\n  {\n    name: \"mouseDragged\",\n    args: \"\",\n    code: `background(0, 10)\nstrokeWeight(0)\nfill(255)\nsize = 2*random(0, width)/3\nellipse(width/2,height/2,size, size)`\n  },\n  {},\n  {\n    name: \"mouseWheel\",\n    args: \"\",\n    code: `background('yellow')\nstrokeWeight(1)\nstroke(\"black\")\nvar y = random(0, height)\nline(0, y, width, y)`\n  }\n];\n\nexport const normalFn = {\n  name: \"blueCircle\",\n  args: \"posX=mouseX, posY=mouseY\",\n  code: `strokeWeight(1)\nstroke(\"black\")\nfill('lightblue')\nellipse(posX, posY, 30, 30)`\n};\n\nexport const starterBlobs = [\n  {\n    name: \"global variable\",\n    data: { code: \"var global1 = 1\", isBlob: true }\n  },\n  {\n    name: \"comment\",\n    data: {\n      code: `/*\\n  comment here\\n*/`,\n      codeSize: globals.bigCodeSize,\n      isBlob: true\n    }\n  },\n  {\n    name: \"class\",\n    data: {\n      code: `class Jitter {\n  constructor() {\n    this.x = random(width);\n    this.y = random(height);\n    this.diameter = random(10, 30);\n    this.speed = 1;\n  }\n\n  move() {\n    this.x += random(-this.speed, this.speed);\n    this.y += random(-this.speed, this.speed);\n  }\n\n  display() {\n    ellipse(this.x, this.y, this.diameter, this.diameter);\n  }\n}`,\n      isBlob: true\n    }\n  }\n];\n\nexport const sampleFile = {\n  name: \"sample.js\",\n  code: \"// put some code to import into your js in here\",\n  isTxtFile: true\n};\n\nexport const varBlob = { code: \"var global1 = 1\", isBlob: true };\n\nexport default function DefaultExportPlaceholder() {\n  return null;\n}\n\nexport const empty = {\n  stamps: [\n    {\n      name: \"style.css\",\n      code: \"\\nhtml, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 268.53419986245996,\n      y: 177.7984650004281,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: 642,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 309.13872819066705,\n      y: 148.12237211435783,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: 641,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 1,\n  console: {\n    x: 303.0271580940204,\n    y: 206.71662152101146,\n    consoleWidth: 225,\n    consoleHeight: 200,\n    hidden: true,\n    zIndex: 640\n  },\n  originX: 0,\n  originY: 0,\n\n  worldKey: \"empty\",\n  compressedJs: \"\"\n};\n\nvar starter2 = {\n  stamps: [\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 1551.2140684066003,\n      y: 526.1806151153287,\n      editorWidth: 225,\n      editorHeight: 176.29205282888586,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"style.css\",\n      code: \"html, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 1551.6900090741035,\n      y: 889.4753177293393,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code:\n        '/* READ ME\\n\\n    Welcome to Stamper!\\n    \\n    What you have before you is a p5.js sketch formatted in artboard-like items called Stamps. \\n    \\n    You can think of these big Stamps titled \"setup\", \"draw\", and \"sizeDot\" as functions. They can call one another and use global variables.\\n    \\n    You can also import file and media Stamps in the bar above and use the console Stamp to debug your code.\\n    \\n    Anything in p5.js should work in Stamper. You can upload existing p5 sketches to Stamper or download this Sketch and open it up somewhere else. \\n    \\n    Happy stamping, we\\'re excited to see what you make! \\n    \\n    - Maayan & Cam\\n    \\n*/',\n      args: \" \",\n      x: 702.0843016558624,\n      y: 526.3886604608753,\n      editorWidth: 224.2321933879481,\n      editorHeight: 627.8573293703668,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 632,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"var xPos = 0\\nvar maxSize = 20\",\n      args: \" \",\n      x: 1025.2197591789836,\n      y: 526.1831709984822,\n      editorWidth: 120.72506930849877,\n      editorHeight: 174.63795191901036,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 627,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code: \"createCanvas(200, 200)\\nbackground(175, 112, 248)\\nnoStroke()\",\n      args: \"\",\n      x: 1216.6046212636682,\n      y: 526.1050713082992,\n      editorWidth: 187.33684948280245,\n      editorHeight: 75.20212084900183,\n      iframeWidth: 47.18718026609529,\n      iframeHeight: 84.26214854159208,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 630,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nvar size = random(0, maxSize)\\n\\n// set the opacity\\nvar opacity = map(size, \\n    0, maxSize, \\n    0, 255)\\n\\n// draw a dot   \\nfill(255, opacity);\\nellipse(x,y,size, size);\\n\\n\",\n      args: \"x=mouseX, y=mouseY\",\n      x: 1025.1123055679532,\n      y: 789.7862113698332,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200.4613444482518,\n      iframeHeight: 199.7524142951453,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 579,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"draw\",\n      code:\n        \"// update xPos and background\\nbackground(175, 112, 248, 10)\\nxPos = (xPos +2) % width\\n\\n// draw a row of dots\\nfor(var i = 0; \\n    i < height/maxSize; \\n    i++){\\n      sizeDot(xPos, i*maxSize )\\n}\\n\",\n      args: \"\",\n      x: 1025.3740565788173,\n      y: 1153.6991713934658,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 580,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 0.7838764402270318,\n  console: {\n    x: 700.0778726617857,\n    y: 1240.2239882058916,\n    consoleWidth: 244.781440843727,\n    consoleHeight: 199.19044002384612,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: -257.2010372715673,\n  originY: -311.9703251082989,\n  worldKey: \"starter\",\n  compressedJs:\n    \"ԗ䪈ੈ吔ℂ㔔ᐔ†တᗙⶌ㛶欩Ǒ幀却ザ尙⹄᱑䘰疡䋨⁹㞺䠚మ晒̓ᖙ廤旅࠴峈త܃⥳⧌䃦步㨱娈್眦欋凑䫈⁩㜐ᡜ二⛶ஓႵ壒步ဴ崙ⶮ㈆ᬋㆱ䫉䙥㦗㆘ᢠ喖箩ƍ䋜⁴㐴定損癢Σ↕曊⁢㒳燋␎䚗☡沉曊瑵㠑ଈь䜦ஹࢰ䃂滄઴庙⢍睂ᄃ׌䃌畮ㆺᩛ淎㋢ʣ↕玊埄㰐ᯛ䲤ؖ獻冡䫥䔶㪹奈೭䛶ጋめ泂物ケᬙ⹥漠қֱ曞⁩㚸ᯜ亄٦䭦ᄑ䡀浥㈴塺\\u0013㚞 憔䃄慲ူ墛滘戬⋶ၙ䛞湳㞶ᥱ䖜䀖ጣᖉ櫏搁₹࠘淬䙜宒ֹ珈Ā㏢ᑹ怫چ箫㆐䃮潲㗢ձ⢌圢睈ɱ櫠汯ゲ࠙⼍᜷☡旀毎Ƌ㊹竀㦤۷ᄃᆽ滝䔬㨴ᩜ搊㱒⼨ʡ廠敮ဴ崈ຮȇ᭻㖕滐敲㊐ᥛ๬廀೺ↅ惠礠㧢Ꮪⷌ狂λᒟࡌ硣㓲{⺍爇ᬫᒁ濐ȩ㚰嫙␹㏢椂㖅䋲慮ဓࠐ氭屡䅑㰨ᐔ੶スࠞ਍眲ǩÃਚ浡㰩婞䲤ϒƑ䀨ᐕ栁昐㥀㻅ʗ塑䛤敡㨲僘ⷎ昗᥁䣀恘′᠘ੂ䐄ئଛ⶝擞畮㈔్暥䈃উ䢰䁤㐸戎ᮛ橮䜦筛ᒠ刔緌⯳ԏϖ死嗍䪰Ⱐ㳣ʖ㢭㋲礃ᶕ峊牡㨲䠘␎☖猣㶷੨ਠ爁ೱⅤϜ㣉⃀姐¿戹㆏湬坎⠐ᦽ惂捩㨼燎ᣡ戃椃㖅恑䑆ᙢఱ9⑜悙䣔殔哤ż䠘␌䛷✰օ䳒汬ᐙ്▙ւ䧘⢀䃊汬㒸᳙┏ˇ䥦ᦋࠍ䔛戁笀⃘䔞《炼幀異㉲;粠᥮‑Ψʭ笁㆖ࠌ㲠ᠼ⦱璀冊ࠫᤔ䠉␎皖⎣⏀Ÿ牯㯲ùⲍ睇ἠ̅廤⣤婹@玾䀇嶤䁸⁨㊴姚຅繰࢖⡬噗攀埣z‸唆箙め剕䜮ၲ$⾸䞧桐耂老\"\n};\nvar particles = {\n  stamps: [\n    {\n      name: \"style.css\",\n      code: \"\\nhtml, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 2487.723154997192,\n      y: 454.1828386163433,\n      editorWidth: 155.2851590781397,\n      editorHeight: 108.88644457518404,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 2926.0613195853425,\n      y: 460.660255253893,\n      editorWidth: 331.9915568373324,\n      editorHeight: 267.30348833629085,\n      iframeWidth: 225,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code:\n        \"// nothing much to see here\\ncreateCanvas(300,300) // this won't alter the window size\\nbackground(backgroundFade)\\nnoStroke()\",\n      args: \"\",\n      x: 1922.4727804881593,\n      y: -28.839556505847952,\n      editorWidth: 300,\n      editorHeight: 95.77622017221594,\n      iframeWidth: 229.2823664771775,\n      iframeHeight: 125.05858664939339,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"basicDot\",\n      code: \"fill(255);\\nellipse(x, y, 10, 10)\",\n      args: \"x=mouseX, y=mouseY\",\n      x: -59.00091994708015,\n      y: 619.609814794894,\n      editorWidth: 181.2419711791158,\n      editorHeight: 111.52588114745845,\n      iframeWidth: 134.907702273812,\n      iframeHeight: 130.38322448430927,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 101,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"speedColorDot\",\n      code:\n        \"if(!speed){\\n  speed = random(0, .01)\\n}\\n\\n// set the opacity and color based on the speed the dots are moving\\nvar opacity = max(100, speed *100 * 255)\\nvar colorOff = speed *100\\nfill(150 - colorOff*40, 100+ colorOff*80, 255, opacity);\\nellipse(x,y,5, 5);\\n\",\n      args: \"x = mouseX, y=mouseY\",\n      x: 329.9599253794122,\n      y: 976.0473944121347,\n      editorWidth: 296.7340422149467,\n      editorHeight: 176.59932474664424,\n      iframeWidth: 169.71609003165736,\n      iframeHeight: 195.90489555790055,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 102,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"getPosition\",\n      code:\n        \"\\n if(angle === 0){\\n  lastFaderX = faderX\\n  faderX = faderX*.97 + .03* mouseX / width;\\n  speed = abs(faderX - lastFaderX)\\n  randomSeed(actRandomSeed); \\n }\\n var randomX = random(0,width);\\n  var randomY = random(0,height);\\n  var circleX = width / 2 + cos(angle) * 100;\\n  var circleY = height / 2 + sin(angle) * 100;\\n  var x = lerp(randomX,circleX,faderX);\\n  var y = lerp(randomY,circleY,faderX);\\n  if(mouseIsPressed){\\n     background(backgroundFade, 10)\\n  var angle = map(mouseX, 0, width, 0,7)\\n  var circleX = width / 2 + cos(angle) * 100;\\n  var circleY = height / 2 + sin(angle) * 100;\\n  basicDot(circleX, circleY) \\n  }\\n\\n  \\n  return {x:x, y:y}\\n  \",\n      args: \"angle\",\n      x: 1307.5816569518977,\n      y: 677.5063472275517,\n      editorWidth: 379.21463817319534,\n      editorHeight: 376.8484971084752,\n      iframeWidth: 289.3981629416132,\n      iframeHeight: 292.2735384641079,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 103,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"drawFadedParticles\",\n      code:\n        \"background(backgroundFade, 20);\\n\\nfor (var i = 0; i < count; i++) {\\n  var angle = i*360/count\\n  \\n  // mix and match dot functions here!\\n  pos = getPosition(angle)\\n  basicDot(pos.x, pos.y)\\n}\",\n      args: \"\",\n      x: 655.2944910006604,\n      y: -49.9258150353464,\n      editorWidth: 309.7943589626219,\n      editorHeight: 146.47663811577075,\n      iframeWidth: 297.3456070084918,\n      iframeHeight: 298.4895813984271,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 104,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"speedDot\",\n      code:\n        \"\\nif(!speed){\\n  speed = random(0, .01)\\n}\\n\\n// set the opacity based on the speed the dots are moving\\nvar opacity = max(100, speed *100 * 255)\\nfill(150, 100, 255,opacity);\\nellipse(x,y,10, 10);\\n\\n\",\n      args: \"x = mouseX, y=mouseY\",\n      x: -159.95756973196586,\n      y: 906.1192916260952,\n      editorWidth: 308.7544796011597,\n      editorHeight: 185.16405770099925,\n      iframeWidth: 116.75259491582909,\n      iframeHeight: 204.18278884948927,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 105,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nnoStroke()\\nvar size = random(0, 10)\\n\\n// use it to draw the dot\\nfill(86,186,255, size*.1 *255);\\nellipse(x,y,size, size);\",\n      args: \"x = mouseX, y=mouseY\",\n      x: 327.8196574329079,\n      y: 620.3268102451857,\n      editorWidth: 199.66994116856335,\n      editorHeight: 179.9979040763115,\n      iframeWidth: 91.90910563176772,\n      iframeHeight: 206.14265666314918,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 106,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"drawParticles\",\n      code:\n        \"\\nbackground(40);\\n\\nfor (var i = 0; i < count; i++) {\\n  var angle = i*360/count\\n  pos = getPosition(angle)\\n  \\n  // mix and match dot functions here!\\n  sizeDot(pos.x, pos.y)\\n  speedColorDot(pos.x, pos.y)\\n}\",\n      args: \"\",\n      x: -6.737551201596916,\n      y: -46.19936428968789,\n      editorWidth: 300,\n      editorHeight: 193.4799063003186,\n      iframeWidth: 308.1860599190181,\n      iframeHeight: 294.830608250465,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 133,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"// the particle pattern\",\n      args: \" \",\n      x: -101.36309304052276,\n      y: -164.3449970916704,\n      editorWidth: 561.388125203422,\n      editorHeight: 39.624291076671355,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 123,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code: \"// different types of dots, mouse over the canvases to see them\",\n      args: \" \",\n      x: -389.8061630364864,\n      y: 495.0560125150731,\n      editorWidth: 959.3106635538155,\n      editorHeight: 49.88002660116602,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 124,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code:\n        \"// a helper function to get the particle pattern, mouse over the canvas while pressing your mouse down to visualize what it does\",\n      args: \" \",\n      x: 967.2439576737161,\n      y: 522.8690319916844,\n      editorWidth: 955.2083693440158,\n      editorHeight: 62.18690923055951,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 125,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code:\n        \"// globals\\n\\nvar actRandomSeed = 0;\\nvar count = 300;\\nvar faderX = 0\\nvar backgroundFade = 40\\nvar lastFaderX\\nvar speed\\nvar angleUnit = (360 / count);\",\n      args: \" \",\n      x: 1662.564205981018,\n      y: -101.65610389740152,\n      editorWidth: 190.13049921671842,\n      editorHeight: 183.20458841959572,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"// setup stuff\",\n      args: \" \",\n      x: 1929.8952193556572,\n      y: -153.45214631512889,\n      editorWidth: 341.91538497923824,\n      editorHeight: 35.52199686687362,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: true,\n      codeSize: 28\n    }\n  ],\n  scale: 0.40940849184989847,\n  console: {\n    x: 2406.431838044327,\n    y: 726.7041236433164,\n    consoleWidth: 398.5547609288658,\n    consoleHeight: 312.41625580738497,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: 450.0090809071319,\n  originY: 189.64858810122308,\n\n  worldKey: \"particles\",\n  compressedJs:\n    '㌺官溍ᛶ焃䶕棪瀨ᒽ䊈Ѕ狲ͳ㷑僒湧ံ嵘洄݆礃䶕䩀桥㤲䊈Ќ㜦⬋冕ۂ湶ス䨌昆˃ᦁ䂧ࡨ瑨㒹䠝淭扷℃ֱ棊爠㨴᥈໭ᛦ⍻岁曒竄ḱᡘ浬眦箫㦐冔୆ゲ᥊⅄Ȇ獺䷑擞步ᐔ䊟⅁⺐Ӌঅ曒捄㞺ਞޭ囷⮛ᕠ塀秆Ԭ祀ᗌ暖捡⃈橪⤻Ԑ࠙ⶍ䚗Λᒡ灘⁹ᘐౌᢀ䳤箛䆕䫈䍯㘷岱⪄ϒڪ妥䱐⇅ᗢ䎈ᣆ爃椃䦅峈潭ᐘଈ׆̞ 姴ᑀ⃦᳙⺜倏᭻䆅䛒瑹ူ宙Ќ㱆传̍䫈⁯㝢䟱䥘䂦⍻凌䃂牥ံ寝䴭晰儁Ǚ䋥䤿Ẑ᭘⼅̓Ɓ㌜晔㄰᠐ઈᲀຼ㥞ᕹỌ映ụ䣺\"㌓⦁·ቆ⨴犀䌌չ℣䆁㌑ᩙ䡲瞀偞▆勂ܰ՛娂䅧㊺ᐛ湭᱀慃ֹ付日㤀⒭ᙬらô空‰抋䠈ඌ᜷✠މ撰‽ဳㅂ㢣ౠ幈储屲㜠ᖐ஌٥⹰ಉ¼䃮楤㨴㤀ွ‘̋ৌ冎㬭斮㤀≄๰೪䶕䫈⡡ㆺᒲ⇅Ꮎ⠅ΐ͗攁ᱣ਱ྸ悢䆁㌕埊í昑噳ѭٖ䬻⇓ᙈ捩㤱嬙㢈籓焁㲀摁搁〹秀⌄ʮ​䭀憈哆◣䱜洽\\u0014亁䞐Լ汥㤸ਹ怖ዌ㮑㎘ȅ欀䗲祥▜㥒朸哒昨犀園⹪ܦ⮛侤ֺ⃻Ǎ㦀桙ڎ㠏嫂烆▬ଈ؅习ࠆဨ澔⯿㿀⏟瀑睈ၗ໌Ⳉᾔ祀㵝9㘸ᗉ䫨畲㜐Ởݜ䁁䇓朐㷞˖㈹ᡝ粀໶⊃׉棒捬㊹禁↟】䆑䎘غ†㌷岈Ԝ䀌⍉ô䁠㬠㒐༈౭睖玡沁剖⬩ၢቻ䀨ڒ写壀徊⓪S䯋損嚗䜨ს嫂瑣㑲Ĉ␝\\n᎟ᐖC䔩㠷峈޾〸佰ѭ惞献㰖ㄋ●᱁寯䠔ᇺԃ羂䆿悠満☿簓秾Ӽ笂㼺๐⚗᠓௰ӄ玃ù怵Ỡࠓ◩䯺āភ䠙沭晗ጋ冔䃃最穴Ʋ嵠櫞々漐㇚Ě猁䷱䣮圶⤃◓䠎䧤Ĵ㨀‽\\f凁墰扰㘬犂挱ࣥ⋣ँ⯈ඤ礬戎熈攧㼐ᗷ㰊珜ʼ᩿䂫ῠ⫎栕㏴ӽ缂擷䂲㴀ᠿ\\u0015⾜ӕ椇叨࠹⁙ギ⡃冔䃡最粐ᰘ⺎䙗፰⬘㛈楦㌲岙ⷎ䈇⏋䆕晀潦犁ᵋ᳀Ểͻ宜ᅄ揥ѥᥜ紁๷⍃ᖷຆ愠㐲嬜ಮ⺐צ႑俎ˡ栻痖␎皆両ថૣ搉⤼寝⹘犦⍻引⓬楳㪰嬹Hݶ䌋厐ђ摯㊹秀ႌ盆笓ֱ昔૥É笁嫜倜ب徔̸‽မ礁⏸䄞䠺瓃ਟ渄崐཈ژ憎债̔ῊŴ挴㤀㨪囦丢咠晬〠៣ᤊ❼瀉㜨⢸䃦瑵㌳ʂ䀀耀'\n};\nvar starter1 = {\n  stamps: [\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 1551.2140684066003,\n      y: 526.1806151153287,\n      editorWidth: 225,\n      editorHeight: 176.29205282888586,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"style.css\",\n      code: \"html, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 1551.6900090741035,\n      y: 889.4753177293393,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code:\n        '/* READ ME\\n\\n    Welcome to Stamper!\\n    \\n    What you have before you is a p5.js sketch formatted in artboard-like items called Stamps. \\n    \\n    You can think of these big Stamps titled \"setup\", \"draw\", and \"sizeDot\" as functions. They can call one another and use global variables.\\n    \\n    You can also import file and media Stamps in the bar above and use the console Stamp to debug your code.\\n    \\n    Anything in p5.js should work in Stamper. You can upload existing p5 sketches to Stamper or download this Sketch and open it up somewhere else. \\n    \\n    Happy stamping, we\\'re excited to see what you make! \\n    \\n    - Maayan & Cam\\n    \\n*/',\n      args: \" \",\n      x: 702.0843016558624,\n      y: 526.3886604608753,\n      editorWidth: 224.2321933879481,\n      editorHeight: 627.8573293703668,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 632,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"var xPos = 0\\nvar maxSize = 20\",\n      args: \" \",\n      x: 1025.2197591789836,\n      y: 526.1831709984822,\n      editorWidth: 120.72506930849877,\n      editorHeight: 174.63795191901036,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 627,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code: \"createCanvas(200, 200)\\nbackground(175, 112, 248)\\nnoStroke()\",\n      args: \"\",\n      x: 1216.6046212636682,\n      y: 526.1050713082992,\n      editorWidth: 187.33684948280245,\n      editorHeight: 75.20212084900183,\n      iframeWidth: 47.18718026609529,\n      iframeHeight: 84.26214854159208,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 630,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nvar size = random(0, maxSize)\\n\\n// set the opacity\\nvar opacity = map(size, \\n    0, maxSize, \\n    0, 255)\\n\\n// draw a dot   \\nfill(255, opacity);\\nellipse(x,y,size, size);\\n\\n\",\n      args: \"x=mouseX, y=mouseY\",\n      x: 1025.1123055679532,\n      y: 789.7862113698332,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200.4613444482518,\n      iframeHeight: 199.7524142951453,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 579,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"draw\",\n      code:\n        \"// update xPos and background\\nbackground(175, 112, 248, 10)\\nxPos = (xPos +2) % width\\n\\n// draw a row of dots\\nfor(var i = 0; \\n    i < height/maxSize; \\n    i++){\\n      sizeDot(xPos, i*maxSize )\\n}\\n\",\n      args: \"\",\n      x: 1025.3740565788173,\n      y: 1153.6991713934658,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 580,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 0.7838764402270318,\n  console: {\n    x: 700.0778726617857,\n    y: 1240.2239882058916,\n    consoleWidth: 244.781440843727,\n    consoleHeight: 199.19044002384612,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: -257.2010372715673,\n  originY: -311.9703251082989,\n  compressedJs:\n    \"ԗ䪈ੈ吔ℂ㔔ᐔ†တᗙⶌ㛶欩Ǒ幀却ザ尙⹄᱑䘰疡䋨⁹㞺䠚మ晒̓ᖙ廤旅࠴峈త܃⥳⧌䃦步㨱娈್眦欋凑䫈⁩㜐ᡜ二⛶ஓႵ壒步ဴ崙ⶮ㈆ᬋㆱ䫉䙥㦗㆘ᢠ喖箩ƍ䋜⁴㐴定損癢Σ↕曊⁢㒳燋␎䚗☡沉曊瑵㠑ଈь䜦ஹࢰ䃂滄઴庙⢍睂ᄃ׌䃌畮ㆺᩛ淎㋢ʣ↕玊埄㰐ᯛ䲤ؖ獻冡䫥䔶㪹奈೭䛶ጋめ泂物ケᬙ⹥漠қֱ曞⁩㚸ᯜ亄٦䭦ᄑ䡀浥㈴塺\\u0013㚞 憔䃄慲ူ墛滘戬⋶ၙ䛞湳㞶ᥱ䖜䀖ጣᖉ櫏搁₹࠘淬䙜宒ֹ珈Ā㏢ᑹ怫چ箫㆐䃮潲㗢ձ⢌圢睈ɱ櫠汯ゲ࠙⼍᜷☡旀毎Ƌ㊹竀㦤۷ᄃᆽ滝䔬㨴ᩜ搊㱒⼨ʡ廠敮ဴ崈ຮȇ᭻㖕滐敲㊐ᥛ๬廀೺ↅ惠礠㧢Ꮪⷌ狂λᒟࡌ硣㓲{⺍爇ᬫᒁ濐ȩ㚰嫙␹㏢椂㖅䋲慮ဓࠐ氭屡䅑㰨ᐔ੶スࠞ਍眲ǩÃਚ浡㰩婞䲤ϒƑ䀨ᐕ栁昐㥀㻅ʗ塑䛤敡㨲僘ⷎ昗᥁䣀恘′᠘ੂ䐄ئଛ⶝擞畮㈔్暥䈃উ䢰䁤㐸戎ᮛ橮䜦筛ᒠ刔緌⯳ԏϖ死嗍䪰Ⱐ㳣ʖ㢭㋲礃ᶕ峊牡㨲䠘␎☖猣㶷੨ਠ爁ೱⅤϜ㣉⃀姐¿戹㆏湬坎⠐ᦽ惂捩㨼燎ᣡ戃椃㖅恑䑆ᙢఱ9⑜悙䣔殔哤ż䠘␌䛷✰օ䳒汬ᐙ്▙ւ䧘⢀䃊汬㒸᳙┏ˇ䥦ᦋࠍ䔛戁笀⃘䔞《炼幀異㉲;粠᥮‑Ψʭ笁㆖ࠌ㲠ᠼ⦱璀冊ࠫᤔ䠉␎皖⎣⏀Ÿ牯㯲ùⲍ睇ἠ̅廤⣤婹@玾䀇嶤䁸⁨㊴姚຅繰࢖⡬噗攀埣z‸唆箙め剕䜮ၲ$⾸䞧桐耂老\"\n};\n\nexport const starter = starter1;\n\nexport const worlds = [\n  { name: \"starter\", data: starter2 },\n  { name: \"empty\", data: empty },\n  { name: \"particles\", data: particles }\n];\n","import GridIcon from \"./icons/grid.svg\";\nimport LinesIcon from \"./icons/git-commit.svg\";\nimport ConsoleStampIcon from \"./icons/message-circle.svg\";\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport HtmlStampIcon from \"./icons/layout.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport BlobStampIcon from \"./icons/globe.svg\";\nimport MediaAssetIcon from \"./icons/layers-light.svg\";\nimport DeleteStampIcon from \"./icons/trash.svg\";\nimport CopyIcon from \"./icons/copy.svg\";\nimport ClearConsoleIcon from \"./icons/rotate-ccw.svg\";\nimport CodeSizeIcon from \"./icons/type.svg\";\nimport MinimzeIcon from \"@material-ui/icons/MinimizeOutlined\";\n\nimport ExpandLessIcon from \"./icons/chevron-up.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport SettingOnIcon from \"./icons/check-square.svg\";\nimport SettingOffIcon from \"./icons/square.svg\";\n\nimport VisibilityIcon from \"./icons/eye.svg\";\nimport VisibilityOffIcon from \"./icons/eye-off.svg\";\nimport EmptyIcon from \"./icons/empty.svg\";\n\nexport const globals = {\n  tooltipWidth: 200,\n  SettingOnIcon: SettingOnIcon,\n  SettingOffIcon: SettingOffIcon,\n  ExpandLessIcon: ExpandLessIcon,\n  EmptyIcon: EmptyIcon,\n  GridIcon: GridIcon,\n  LinesIcon: LinesIcon,\n  ConsoleStampIcon: ConsoleStampIcon,\n  FunctionStampIcon: FunctionStampIcon,\n  FileStampIcon: FileStampIcon,\n  HtmlStampIcon: HtmlStampIcon,\n  BuiltInStampIcon: BuiltInStampIcon,\n  ListenerStampIcon: ListenerStampIcon,\n  ImageStampIcon: ImageStampIcon,\n  BlobStampIcon: BlobStampIcon,\n  MediaAssetIcon: MediaAssetIcon,\n  DeleteStampIcon: DeleteStampIcon,\n  CopyIcon: CopyIcon,\n  ClearConsoleIcon: ClearConsoleIcon,\n  ExpandMoreIcon: ExpandMoreIcon,\n  DownloadIcon: DownloadIcon,\n  UploadIcon: UploadIcon,\n  WorldsIcon: WorldsIcon,\n  GlobalVarIcon: GlobalVarIcon,\n  CommentIcon: CommentIcon,\n  InfoIcon: InfoIcon,\n  PermanentWorldIcon: PermanentWorldIcon,\n  CodeSizeIcon: CodeSizeIcon,\n  MinimzeIcon: MinimzeIcon,\n  VisibilityIcon: VisibilityIcon,\n  VisibilityOffIcon: VisibilityOffIcon,\n  defaultEditorWidth: 200,\n  defaultVarEditorHeight: 205,\n  defaultIframeHeight: 200,\n  defaultEditorHeight: 225,\n  defaultIframeWidth: 200,\n  iframeMargin: 0,\n  headerHeight: 30,\n  brHeight: 25,\n  codeSize: 14,\n  buttonTextSize: 12,\n  bigCodeSize: 28,\n  fnTitleHeight: 100,\n  copyOffset: 35,\n  iconOpacity: 0.5,\n  iconSize: 15,\n  iconTransition: \"all .3s ease\",\n  borderTransition: \"border .3s ease-out\",\n  autoLayoutMargin: 20,\n\n  listeners: {\n    windowResized: false,\n    deviceMoved: false,\n    deviceTurned: false,\n    deviceShaken: false,\n\n    keyPressed: false,\n    keyReleased: false,\n    keyTyped: false,\n\n    mouseMoved: false,\n    mouseDragged: false,\n\n    mousePressed: false,\n    mouseReleased: false,\n    mouseClicked: false,\n    doubleClicked: false,\n\n    mouseWheel: false\n  },\n\n  builtIns: {\n    draw: true,\n    preload: true,\n    setup: true\n  },\n\n  specialFns: {\n    draw: true,\n    preload: true,\n    setup: true,\n\n    windowResized: false,\n    deviceMoved: false,\n    deviceTurned: false,\n    deviceShaken: false,\n\n    keyPressed: false,\n    keyReleased: false,\n    keyTyped: false,\n\n    mouseMoved: false,\n    mouseDragged: false,\n\n    mousePressed: false,\n    mouseReleased: false,\n    mouseClicked: false,\n    doubleClicked: false,\n\n    mouseWheel: false\n  },\n\n  fnStampWidth: 557,\n  fnStampHeight: 318\n};\n\nexport const p5Lib = [\n  \"abs()\",\n  \"acos()\",\n  \"alpha(color)\",\n  \"ambient(color)\",\n  \"ambientLight(r,g,b)\",\n  \"append(array,value)\",\n  \"applyMatrix(n00,n01,n02,n03,n10,n11,n12,n13,n20,n21,n22,n23,n30,n31,n32,n33)\",\n  \"arc(x,y,width,start,stop)\",\n  \"arrayCopy(src,dst,(length))\",\n  \"asin()\",\n  \"atan()\",\n  \"atan2()\",\n  \"background(color)\",\n  \"beginCamera()\",\n  \"beginContour()\",\n  \"beginRaw(renderer,filename)\",\n  \"beginRecord(renderer,filename)\",\n  \"beginShape()\",\n  \"bezier(x1,y1,x2,y2,x3,y3,x4,y4)\",\n  \"bezierDetail(detail)\",\n  \"bezierPoint(a,b,c,d,t)\",\n  \"bezierTangent(a,b,c,d,t)\",\n  \"bezierVertex(x2,y2,x3,y3,x4,y4)\",\n  \"binary(value,(digits))\",\n  \"blend(sx,sy,sw,sh,dx,dy,dw,dh,mode)\",\n  \"blendMode(mode)\",\n  \"blue(color)\",\n  \"boolean(value)\",\n  \"box(size)\",\n  \"brightness(color)\",\n  \"byte(value)\",\n  \"camera(eyeX,eyeY,eyeZ,centerX,centerY,centerZ,upX,upY,upZ)\",\n  \"ceil()\",\n  \"char(value)\",\n  \"clear()\",\n  \"color(color)\",\n  \"colorMode(mode)\",\n  \"concat(a,b)\",\n  \"constrain()\",\n  \"copy(sx,sy,sw,sh,dx,dy,dw,dh)\",\n  \"cos()\",\n  \"createFont(name,size)\",\n  \"createGraphics(w,h)\",\n  \"createImage(w,h,format)\",\n  \"createInput(filename)\",\n  \"createOutput(filename)\",\n  \"createReader(filename)\",\n  \"createShape(kind,parameters)\",\n  \"createWriter(filename)\",\n  \"cursor(img)\",\n  \"curve(x1,y1,x2,y2,x3,y3,x4,y4)\",\n  \"curveDetail(detail)\",\n  \"curvePoint(a,b,c,d,t)\",\n  \"curveTangent(a,b,c,d,t)\",\n  \"curveTightness(tightness)\",\n  \"curveVertex(x,y)\",\n  \"day()\",\n  \"degrees()\",\n  \"directionalLight(r,g,b,nx,ny,nz)\",\n  \"displayDensity()\",\n  \"dist()\",\n  \"ellipse(x,y,width,height)\",\n  \"ellipseMode(mode)\",\n  \"emissive(color)\",\n  \"endCamera()\",\n  \"endContour()\",\n  \"endRaw()\",\n  \"endRecord()\",\n  \"endShape()\",\n  \"exp()\",\n  \"expand(list,(newSize))\",\n  \"fill(color)\",\n  \"filter(shader)\",\n  \"float(value)\",\n  \"floor()\",\n  \"frameRate(fps)\",\n  \"frustum(left,right,bottom,top,near,far)\",\n  \"fullScreen(renderer)\",\n  \"get(x,y)\",\n  \"green(color)\",\n  \"hex(value,(digits))\",\n  \"hour()\",\n  \"hue(color)\",\n  \"image(image,x,y)\",\n  \"imageMode(mode)\",\n  \"int(value)\",\n  \"join(list,seperator)\",\n  \"launch(args)\",\n  \"lerp()\",\n  \"lerpColor(color1,color2,amount)\",\n  \"lightFalloff(constant,linear,quadratic)\",\n  \"lights()\",\n  \"lightSpecular(r,g,b)\",\n  \"line(x1,y1,x2,y2)\",\n  \"loadBytes(filename)\",\n  \"loadFont(filename)\",\n  \"loadImage(filename)\",\n  \"loadPixels()\",\n  \"loadShader(fragFilename,(vertFilename))\",\n  \"loadShape(filename)\",\n  \"loadStrings(filename)\",\n  \"loadTable(filename,(options))\",\n  \"loadXML(filename)\",\n  \"log()\",\n  \"mag()\",\n  \"map()\",\n  \"match(string,regexp)\",\n  \"matchAll(string,regexp)\",\n  \"max()\",\n  \"millis()\",\n  \"min()\",\n  \"minute()\",\n  \"modelX(x,y,z)\",\n  \"modelY(x,y,z)\",\n  \"modelZ(x,y,z)\",\n  \"month()\",\n  \"nf(num,digits)\",\n  \"nfc(num,(right))\",\n  \"nfp(num,(digits))\",\n  \"nfs(num,digits)\",\n  \"noCursor()\",\n  \"noCursor()\",\n  \"noFill()\",\n  \"noise()\",\n  \"noiseDetail()\",\n  \"noiseSeed()\",\n  \"noLights()\",\n  \"norm()\",\n  \"normal(nx,ny,nz)\",\n  \"noSmooth()\",\n  \"noStroke()\",\n  \"noTint()\",\n  \"ortho(left,right,bottom,top)\",\n  \"parseXML(string,(options))\",\n  \"perspective(fovy,aspect,zNear,zFar)\",\n  \"pixelDensity(density)\",\n  \"point(x,y)\",\n  \"pointLight(r,g,b,x,y,z)\",\n  \"popMatrix()\",\n  \"pow()\",\n  \"print(variables)\",\n  \"printArray(array)\",\n  \"printCamera()\",\n  \"println(variables)\",\n  \"printMatrix()\",\n  \"printProjection()\",\n  \"pushMatrix()\",\n  \"quad(x,y,x2,y2,x3,y3,x4,y4)\",\n  \"quadraticVertex(x,y,x2,y2)\",\n  \"radians()\",\n  \"random()\",\n  \"randomGaussian()\",\n  \"randomSeed()\",\n  \"rect(x,y,width,height)\",\n  \"rectMode(mode)\",\n  \"red(color)\",\n  \"requestImage(filename)\",\n  \"resetMatrix()\",\n  \"resetShader()\",\n  \"reverse(list)\",\n  \"rotate(angle)\",\n  \"rotateX(angle)\",\n  \"rotateY(angle)\",\n  \"rotateZ(angle)\",\n  \"round()\",\n  \"saturation(color)\",\n  \"save(filename)\",\n  \"saveBytes(filename,data)\",\n  \"saveFrame(filename####)\",\n  \"saveStream(target,source)\",\n  \"saveStrings(filename,data)\",\n  \"saveTable(table,filename,(options))\",\n  \"saveXML(xml,filename,(options))\",\n  \"scale(s)\",\n  \"screenX(x,y)\",\n  \"screenY(x,y)\",\n  \"screenZ(x,y)\",\n  \"second()\",\n  \"selectFolder(prompt,callback)\",\n  \"selectInput(prompt,callback)\",\n  \"selectOutput(prompt,callback)\",\n  \"set(x,y,color)\",\n  \"shader(shader)\",\n  \"shape(shape,x,y)\",\n  \"shapeMode(mode)\",\n  \"shearX(angle)\",\n  \"shearY(angle)\",\n  \"shininess(shine)\",\n  \"shorten(list)\",\n  \"sin()\",\n  \"size(width,height,renderer)\",\n  \"smooth()\",\n  \"sort(list,(count))\",\n  \"specular(color)\",\n  \"sphere(radius)\",\n  \"sphereDetail(res)\",\n  \"splice(list,value,index)\",\n  \"split(value,digits)\",\n  \"splitTokes(value,(delim))\",\n  \"spotLight(r,g,b,x,y,z,nx,ny,nz,angle,concentration)\",\n  \"sq()\",\n  \"sqrt()\",\n  \"string(value)\",\n  \"stroke(color)\",\n  \"strokeCap(cap)\",\n  \"strokeJoin(join)\",\n  \"strokeWeight(weight)\",\n  \"subset(list,start,(count))\",\n  \"tan()\",\n  \"text(string,x,y)\",\n  \"textAlign(alignX,(alignY))\",\n  \"textAscent()\",\n  \"textDescent()\",\n  \"textFont(font,(size))\",\n  \"textLeading(leading)\",\n  \"textMode(mode)\",\n  \"textSize(size)\",\n  \"texture(image)\",\n  \"textureMode(mode)\",\n  \"textureWrap(wrap)\",\n  \"textWidth(string)\",\n  \"tint(color)\",\n  \"translate(x,y)\",\n  \"triangle(x1,y1,x2,y2,x3,y3)\",\n  \"trim(string)\",\n  \"unbinary(value)\",\n  \"unhex(value)\",\n  \"updatePixels()\",\n  \"vertex(x,y)\",\n  \"year()\",\n  \"HALF_PI\",\n  \"PI\",\n  \"QUARTER_PI\",\n  \"TAU\",\n  \"TWO_PI\",\n  \"frameCount\",\n  \"deltaTime\",\n  \"focused\",\n  \"displayWidth\",\n  \"displayHeight\",\n  \"windowWidth\",\n  \"windowHeight\",\n  \"width\",\n  \"height\",\n  \"disableFriendlyErrors\",\n  \"p5.Element\",\n  \"VIDEO\",\n  \"AUDIO\",\n  \"p5.MediaElement\",\n  \"p5.File\",\n  \"p5.Graphics\",\n  \"p5.TypedDict\",\n  \"p5.NumberDict\",\n  \"deviceOrientation\",\n  \"accelerationX\",\n  \"accelerationY\",\n  \"accelerationZ\",\n  \"pAccelerationX\",\n  \"pAccelerationY\",\n  \"pAccelerationZ\",\n  \"rotationX\",\n  \"rotationY\",\n  \"rotationZ\",\n  \"pRotationX\",\n  \"pRotationY\",\n  \"pRotationZ\",\n  \"turnAxis\",\n  \"keyIsPressed\",\n  \"key\",\n  \"keyCode\",\n  \"movedX\",\n  \"movedY\",\n  \"mouseX\",\n  \"mouseY\",\n  \"pmouseX\",\n  \"pmouseY\",\n  \"winMouseX\",\n  \"winMouseY\",\n  \"pwinMouseX\",\n  \"pwinMouseY\",\n  \"mouseButton\",\n  \"mouseIsPressed\",\n  \"DEGREES\",\n  \"RADIANS\",\n  \"CORNER\",\n  \"CORNERS\",\n  \"CENTER\",\n  \"RADIUS\",\n  \"exitPointerLock()\",\n  \"angleMode(mode)\",\n  \"touches\",\n  \"touchStarted(fxn)\",\n  \"touchMoved(fxn)\",\n  \"touchEnded(fxn)\",\n  \"saveCanvas(selectedCanvas, [filename], [extension])\",\n  \"saveCanvas([filename], [extension])\",\n  \"saveFrames(filename, extension, duration, framerate, [callback])\",\n  \"pixels\",\n  \"loadJSON(path, [jsonpOptions], [datatype], [callback], [errorCallback])\",\n  \"loadJSON(path, datatype, [callback], [errorCallback])\",\n  \"loadJSON(path, callback, [errorCallback])\",\n  \"httpGet(path, [datatype], [data], [callback], [errorCallback])\",\n  \"httpGet(path, data, [callback], [errorCallback])\",\n  \"httpGet(path, callback, [errorCallback])\",\n  \"httpPost(path, [datatype], [data], [callback], [errorCallback])\",\n  \"httpPost(path, data, [callback], [errorCallback])\",\n  \"httpPost(path, callback, [errorCallback])\",\n  \"httpDo(path, [method], [datatype], [data], [callback], [errorCallback])\",\n  \"httpDo(path, options, [callback], [errorCallback])\",\n  \"saveJSON(json, filename, [optimize])\",\n  \"createVector([x], [y], [z])\",\n  \"textStyle(theStyle)\",\n  \"orbitControl([sensitivityX], [sensitivityY], [sensitivityZ])\",\n  \"debugMode()\",\n  \"debugMode(mode)\",\n  \"debugMode(mode, [gridSize], [gridDivisions], [xOff], [yOff], [zOff])\",\n  \"debugMode(mode, [axesSize], [xOff], [yOff], [zOff])\",\n  \"debugMode([gridSize], [gridDivisions], [gridXOff], [gridYOff], [gridZOff], [axesSize], [axesXOff], [axesYOff], [axesZOff])\",\n  \"noDebugMode()\",\n  \"specularColor(v1, v2, v3)\",\n  \"specularColor(value)\",\n  \"specularColor(gray)\",\n  \"specularColor(values)\",\n  \"specularColor(color)\",\n  \"createShader(vertSrc, fragSrc)\",\n  \"normalMaterial()\",\n  \"ambientMaterial(v1, [v2], [v3], [a])\",\n  \"ambientMaterial(color)\",\n  \"emissiveMaterial(v1, [v2], [v3], [a])\",\n  \"emissiveMaterial(color)\",\n  \"specularMaterial(v1, [v2], [v3], [a])\",\n  \"specularMaterial(color)\",\n  \"createCamera()\",\n  \"setCamera(cam)\"\n];\n\nexport default function DefaultExportPlaceholder() {\n  return null;\n}\n","var esprima = require(\"esprima\");\nvar _ = require(\"lodash\");\nconst log = require(\"electron-log\");\n\n// function printQ(q){\n//   var str = \"\"\n//   q.map(data => {\n//     if(data[0] === null){\n//       str +=  \"null\" + \",\"\n//     }else{\n//       str +=  data[0].toString() + \",\"\n//     }\n\n//   })\n// }\n\n//////////////////////////////////// jsToStamps\n\nfunction jsToStamps(rawCode) {\n  try {\n    var program = esprima.parseScript(rawCode, {\n      range: true,\n      comment: true,\n      tolerant: true,\n      loc: true\n    });\n  } catch (error) {\n    console.log(error);\n    throw \"parsing failed\";\n  }\n\n  var body = _.cloneDeep(program.body);\n\n  insertComments(body, program.comments);\n\n  var stamperObject = { stamps: [] };\n\n  fillStampArrays(body, stamperObject.stamps, rawCode);\n\n  return stamperObject;\n}\n\nfunction fillStampArrays(body, fnStamps, rawCode) {\n  var lastBlobLine = 0;\n  for (var i = 0; i < body.length; i++) {\n    var item = body[i];\n    if (item.type === \"FunctionDeclaration\") {\n      addFn(fnStamps, item, rawCode);\n    } else if (item.type === \"Block\" || item.type === \"Line\") {\n      lastBlobLine = addBlob(fnStamps, item, rawCode, lastBlobLine, true);\n    } else {\n      lastBlobLine = addBlob(fnStamps, item, rawCode, lastBlobLine, false);\n    }\n  }\n\n  // for (var i = 0; i < tempBlobStamps.length; i++) {\n  //   var blobStamp = tempBlobStamps[i];\n  //   if (blobStamp.code != \"\") {\n  //     blobStamps.push(blobStamp);\n  //   }\n  // }\n}\n\nfunction insertComments(body, comments) {\n  for (var i = 0; i < comments.length; i++) {\n    var comment = comments[i];\n    var pos = getPos(body, comment);\n\n    if (pos >= 0) {\n      body.splice(pos, 0, comment);\n    }\n  }\n}\n\nfunction getPos(body, comment) {\n  for (var i = 0; i < body.length; i++) {\n    var item = body[i];\n    if (item.range[0] < comment.range[0] && comment.range[1] < item.range[1]) {\n      return -1;\n    }\n    if (comment.range[1] < item.range[0]) {\n      return i;\n    }\n  }\n  return body.length;\n}\n\nfunction addBlob(stamps, item, rawCode, lastBlobLine, isComment) {\n  if (isComment) {\n    if (item.type === \"Block\") {\n      var code = \"/*\" + item.value + \"*/\";\n    } else {\n      var code = \"// \" + item.value;\n    }\n  } else {\n    var code = rawCode.substr(item.range[0], item.range[1] - item.range[0]);\n  }\n\n  var lineDiff = item.loc.start.line - lastBlobLine;\n\n  if (stamps.length === 0) {\n    stamps.push({ code: code, isBlob: true });\n  } else if (!stamps[stamps.length - 1].isBlob) {\n    stamps.push({ code: code, isBlob: true });\n  } else if (lineDiff > 1) {\n    stamps.push({ code: code, isBlob: true });\n  } else if (lineDiff === 0) {\n    var lastStamp = stamps[stamps.length - 1];\n    lastStamp.code += code;\n  } else if (lineDiff === 1) {\n    var lastStamp = stamps[stamps.length - 1];\n    lastStamp.code += \"\\n\" + code;\n  }\n\n  // if (stamps.length === 0) {\n  //   stamps.push({ code: \"\", isBlob:true });\n  // }\n\n  // var lastStamp = stamps[stamps.length - 1];\n  // if(lastStamp.isBlob === false){\n\n  // }\n\n  // var lineDiff = item.loc.start.line - lastBlobLine;\n  // if (lineDiff == 0) {\n  //   lastStamp.code += code;\n  // } else if (lineDiff === 1) {\n  //   lastStamp.code += \"\\n\" + code;\n  // } else {\n  //   stamps.push({ code: code, isBlob:true });\n  // }\n\n  return item.loc.end.line;\n}\n\nfunction addFn(fnStamps, item, rawCode) {\n  var range = item.range;\n  var name = item.id.name;\n\n  var args = \"\";\n  if (item.params.length >= 1) {\n    var argStart = item.params[0].range[0];\n    var argEnd = item.params[item.params.length - 1].range[1];\n    var args = rawCode.substr(argStart, argEnd - argStart);\n  }\n\n  var start = item.body.range[0] + 1;\n  var end = item.body.range[1] - 1;\n  var code = rawCode.substr(start, end - start);\n  fnStamps.push({ code: code, name: name, args: args });\n}\n\nexports.jsToStamps = jsToStamps;\n\n//////////////////////////////////// getVariables\n\nfunction isDeclaration(typeName) {\n  return typeName.includes(\"Declaration\") || typeName.includes(\"Declarator\");\n}\n\nfunction getVariables(rawCode) {\n  try {\n    var fullDict = esprima.parseScript(rawCode);\n  } catch (error) {\n    // throw error i guess\n    throw \"parsing error\";\n  }\n\n  var declared = {};\n  var undeclared = {};\n\n  var q = [[null, fullDict, 0, null]];\n\n  while (q.length > 0) {\n    var cur = q.shift();\n\n    var key = cur[0];\n    var val = cur[1];\n    var pVal = cur[3];\n    var lvl = cur[2];\n\n    if (val === null) {\n      continue;\n    }\n\n    if (key && val && pVal) {\n      if (\n        key === \"id\" &&\n        val.type === \"Identifier\" &&\n        isDeclaration(pVal.type) &&\n        val.name in declared === false\n      ) {\n        declared[val.name] = [pVal.type, lvl];\n      }\n    }\n\n    if (key && key === \"name\") {\n      if (val in declared === false) {\n        undeclared[val] = lvl;\n      }\n    }\n\n    if (val instanceof Array) {\n      val.map(newVal => q.push([null, newVal, lvl + 1, val]));\n    } else if (val instanceof Object) {\n      Object.keys(val).map(newKey => {\n        q.push([newKey, val[newKey], lvl + 1, val]);\n      });\n    } else {\n      // let it die\n    }\n  }\n\n  var result = { declared: [], undeclared: [] };\n  Object.keys(declared).map(name => {\n    if (declared[name][1] === 3 && declared[name][0].includes(\"Declaration\")) {\n      result.declared.push(name);\n    } else if (\n      declared[name][1] === 5 &&\n      declared[name][0].includes(\"Declarator\")\n    ) {\n      result.declared.push(name);\n    }\n  });\n\n  var relevantUndeclared = {};\n  Object.keys(undeclared).map(name => {\n    result.undeclared.push(name);\n  });\n\n  return result;\n}\n\nexports.getVariables = getVariables;\n","module.exports = __webpack_public_path__ + \"static/media/code.d7ef8adb.svg\";","module.exports = __webpack_public_path__ + \"static/media/grid.0ed55763.svg\";","module.exports = __webpack_public_path__ + \"static/media/git-commit.00746f95.svg\";","module.exports = __webpack_public_path__ + \"static/media/message-circle.ebbe6d9a.svg\";","module.exports = __webpack_public_path__ + \"static/media/layout.8a437d55.svg\";","module.exports = __webpack_public_path__ + \"static/media/layers-light.76db5efc.svg\";","module.exports = __webpack_public_path__ + \"static/media/trash.e6887622.svg\";","module.exports = __webpack_public_path__ + \"static/media/copy.745449c2.svg\";","module.exports = __webpack_public_path__ + \"static/media/rotate-ccw.7260812b.svg\";","module.exports = __webpack_public_path__ + \"static/media/type.3950b751.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-up.90f47098.svg\";","module.exports = __webpack_public_path__ + \"static/media/check-square.75b12164.svg\";","module.exports = __webpack_public_path__ + \"static/media/square.e3aa28b6.svg\";","module.exports = __webpack_public_path__ + \"static/media/eye.62517b9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/eye-off.c68b9e9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/empty.43d9eb10.svg\";","import \"./App.scss\";\nimport $ from \"jquery\";\nimport React, { Component, useState } from \"react\";\nimport { saveAs } from \"file-saver\";\nimport parser from \"./parser.js\";\nimport LZUTF8 from \"lzutf8\";\nimport JSZip from \"jszip\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\nimport PublishModal from \"./PublishModal.js\";\n\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport BlobStampIcon from \"./icons/code.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport pf1, {\n  normalFn,\n  commentBlob,\n  varBlob,\n  listenerFns,\n  builtInFns,\n  worlds,\n  starter,\n  empty,\n  stamperHeader\n} from \"./starterStamps.js\";\nvar GitHub = require(\"github-api\");\nconst { detect } = require(\"detect-browser\");\nvar deepEqual = require(\"deep-equal\");\nconst browser = detect();\nvar mime = require(\"mime-types\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ModalManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalButtons: [],\n      modalVisible: !ipc && browser && browser.name != \"chrome\",\n      modalHeader: \"Use Chrome please!\",\n      modalContent:\n        \"Right now, the web version of Stamper is only supported in Google Chrome.\",\n      saveInterval: null,\n      cdnLibs: false,\n      askedAboutCdn: false,\n      inputElem: null,\n      miniInputElem: null,\n      publishInfoVisible: false,\n      onlineWorldDict: null,\n      lastWorldCheck: -1,\n      publishModal: null\n      // can be unsubmitted, success, failure, loading\n    };\n    this.protectAgainstClosed = this.protectAgainstClosed.bind(this);\n    this.receiveMessage = this.receiveMessage.bind(this);\n    this.domain = \"https://p5stamper.com\";\n    this.oauthToken = \"65c5d1e11f91a9e1e565f0c2ca8248e9fc1d587c\";\n    this.githubUsername = \"p5stamper\";\n    this.receiveFiles = this.receiveFiles.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n    this.hidePublishInfoModal = this.hidePublishInfoModal.bind(this);\n    this.sendSaveData = this.sendSaveData.bind(this);\n    this.libs = {\n      \"p5.js\": \"https://cdn.jsdelivr.net/npm/p5\",\n      \"p5.min.js\": \"https://cdn.jsdelivr.net/npm/p5\",\n      \"p5.dom.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.js\",\n      \"p5.dom.min.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\",\n      \"p5.sound.js\":\n        \"p5.sound.jshttps://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.js\",\n      \"p5.sound.min.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\",\n      \"p5.accessibility.js\":\n        \"https://cdn.jsdelivr.net/gh/processing/p5.accessibility@0.2.0/dist/p5.accessibility.js\",\n      \"p5.accessibility.min.js\":\n        \"https://cdn.jsdelivr.net/gh/processing/p5.accessibility@0.2.0/dist/p5.accessibility.js\"\n    };\n  }\n\n  getUrlWorldKey() {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    return urlParams.get(\"e\");\n  }\n\n  loadInitialStamperObject() {\n    if (ipc) {\n      this.props.loadStamperObject(starter);\n      return;\n    } else {\n      var urlWorldKey = this.getUrlWorldKey();\n\n      if (urlWorldKey) {\n        try {\n          this.getWorldObject(urlWorldKey, true, stamperObject => {\n            if (stamperObject) {\n              this.props.loadStamperObject(stamperObject);\n            } else {\n              this.loadStoredStamperObject();\n            }\n          });\n          return;\n        } catch (error) {\n          this.loadStoredStamperObject();\n          return;\n        }\n      }\n    }\n\n    this.loadStoredStamperObject();\n  }\n\n  loadStoredStamperObject() {\n    var stored = localStorage.getItem(\"storedStamper\");\n\n    if (stored === null) {\n      this.props.loadStamperObject(starter);\n      return;\n    }\n\n    try {\n      var stamperObject = JSON.parse(\n        LZUTF8.decompress(stored, {\n          inputEncoding: \"StorageBinaryString\"\n        })\n      );\n      this.props.loadStamperObject(stamperObject);\n      return;\n    } catch (error) {\n      this.props.loadStamperObject(starter);\n      return;\n    }\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"edited\") {\n      return;\n    }\n    this.props.setWorldData({ worldEdited: true });\n\n    ipc && ipc.send(\"edited\");\n  }\n\n  requestOnlineWorldCheck() {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    var date = new Date();\n\n    repo.listCommits({}, (error, result, request) => {\n      if (error) {\n        window.postMessage({ type: \"worlds\" }, \"*\");\n        this.setState({ lastWorldCheck: date.getTime() });\n        return;\n      }\n\n      this.getWorldPublishTime(\"\", time => {\n        if (time >= this.state.lastWorldCheck) {\n          console.log(\"UPDATING WORLDS\");\n          window.postMessage({ type: \"worlds\" }, \"*\");\n        }\n        this.setState({ lastWorldCheck: date.getTime() });\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.requestOnlineWorldCheck();\n\n    window.addEventListener(\"message\", this.receiveMessage);\n\n    this.loadInitialStamperObject();\n    let saveInterval = setInterval(this.sendSaveData.bind(this), 180000);\n    this.setState({ saveInterval: saveInterval });\n    // ipc &&\n    //   ipc.on(\"requestUpload\", event => {\n    //     this.requestUpload();\n    //     var buttons = [];\n    //     buttons.push({\n    //       text: \"open\",\n    //       color: \"outline-primary\",\n    //       callback: () => {\n    //         this.requestUpload();\n    //       }\n    //     });\n\n    //     this.setState({\n    //       modalVisible: true,\n    //       modalHeader: \"Please select a p5.js sketch folder.\",\n    //       modalContent:\n    //         \"It must have an index.html and sketch.js in the root. It doesn't need to have been created in Stamper.\",\n    //       modalButtons: buttons\n    //     });\n    //   });\n\n    ipc &&\n      ipc.on(\"openDirectory\", (event, data) => {\n        var fileObjs = [];\n        data.rawFileList.map(fileInfo => {\n          var mimeType = mime.lookup(fileInfo.name);\n          var fileObj = new File([fileInfo.buffer], fileInfo.name, {\n            type: mimeType\n          });\n          fileObjs.push(fileObj);\n        });\n\n        this.checkAndOpenFiles(fileObjs, data.path);\n      });\n\n    ipc &&\n      ipc.on(\"exteriorChanges\", event => {\n        var buttons = [];\n\n        buttons.push({\n          text: \"re-open sketch\",\n          color: \"outline-primary\",\n          callback: () => {\n            this.requestUpload();\n          }\n        });\n\n        this.setState({\n          modalVisible: true,\n          modalHeader:\n            \"The directory that your sketch was saved in has changed.\",\n          modalContent:\n            \"Please re-specify where you want your sketch to be saved.\",\n          modalButtons: buttons\n        });\n      });\n\n    ipc &&\n      ipc.on(\"requestSave\", (event, rawCode) => {\n        this.sendSaveData();\n      });\n\n    ipc &&\n      ipc.on(\"openWorld\", (event, data) => {\n        if (data.worldKey) {\n          this.getWorldObject(\n            data.worldKey,\n            true,\n            stamperObject =>\n              stamperObject && this.props.loadStamperObject(stamperObject)\n          );\n        } else {\n          this.props.loadStamperObject(starter);\n        }\n      });\n\n    ipc &&\n      ipc.on(\"getWorlds\", (event, data) => {\n        this.getWorldNamesAndKeys(\n          allWorlds => ipc && ipc.send(\"sendWorlds\", allWorlds)\n        );\n      });\n\n    this.createInputElement();\n\n    // window.addEventListener(\"beforeunload\", function (e){\n    //   this.sendSaveData()\n    //   localStorage.setItem(\"e\", JSON.stringify(e))\n    // });\n\n    //     window.addEventListener('beforeunload', function (e) {\n    //   // Cancel the event\n    //   // this.sendSaveData()\n    //   // if(this.props.getWorldData().worldEdited){\n    //   e.preventDefault();\n    //   // Chrome requires returnValue to be set\n    //   e.returnValue = '';\n    //   // }\n\n    // });\n\n    // window.onbeforeunload = null;\n\n    window.addEventListener(\"beforeunload\", this.sendSaveData);\n\n    // window.onbeforeunload = confirmExit;\n    // function confirmExit() {\n    //     return \"You have attempted to leave this page. Are you sure?\";\n    // }\n  }\n\n  protectAgainstClosed(e) {\n    console.log(\"PROTECTING\");\n    //     console.log(e)\n    // e.preventDefault()\n\n    //     var zip = new JSZip();\n    //  zip.file(\"file\", JSON.stringify(e), { base64: true });\n\n    //     zip.generateAsync({ type: \"blob\" }).then(function(content) {\n    //       saveAs(content, \"stamper_sketch.zip\");\n    //     });\n\n    var message = \"You have not filled out the form yet\";\n    e.returnValue = message;\n\n    return \"You have not filled out the form yet\";\n  }\n\n  getWorldNamesAndKeys(callback = () => null) {\n    var allWorlds = [];\n    worlds.map(item => allWorlds.push({ key: item.name, name: item.name }));\n\n    this.getOnlineWorlds(onlineWorlds => {\n      if (onlineWorlds.length > 0) {\n        allWorlds.push({});\n      }\n\n      allWorlds = allWorlds.concat(onlineWorlds);\n      callback(allWorlds);\n    });\n  }\n\n  deleteInputElement() {\n    this.state.inputElem.removeEventListener(\"change\", this.receiveFiles);\n    document.getElementById(\"root\").removeChild(this.state.inputElem);\n  }\n\n  createInputElement() {\n    var inputElem = document.createElement(\"input\", {\n      id: \"sketchInput\",\n      type: \"file\",\n      webkitdirectory: \"true\",\n      multiple: \"true\"\n    });\n    var idAttr = document.createAttribute(\"id\");\n    idAttr.value = \"sketchInput\";\n    inputElem.setAttributeNode(idAttr);\n\n    var typeAttr = document.createAttribute(\"type\");\n    typeAttr.value = \"file\";\n    inputElem.setAttributeNode(typeAttr);\n\n    var multipleAttr = document.createAttribute(\"multiple\");\n    multipleAttr.value = \"true\";\n    inputElem.setAttributeNode(multipleAttr);\n\n    var directoryAttr = document.createAttribute(\"webkitdirectory\");\n    directoryAttr.value = \"true\";\n    inputElem.setAttributeNode(directoryAttr);\n\n    var styleAttr = document.createAttribute(\"hidden\");\n    styleAttr.value = \"true\";\n    inputElem.setAttributeNode(styleAttr);\n\n    inputElem.addEventListener(\"change\", this.receiveFiles);\n\n    document.getElementById(\"root\").appendChild(inputElem);\n\n    this.setState({ inputElem: inputElem });\n  }\n\n  createMiniImputElem(fileType, callback) {\n    if (fileType === \"text\") {\n      var accept = \"text/*\";\n    } else {\n      var accept = \"\";\n    }\n\n    var miniInputElem = (\n      <input\n        type=\"file\"\n        hidden={true}\n        id=\"miniInput\"\n        accept={accept}\n        multiple\n        onChange={e => this.uploadMini(e, fileType)}\n      />\n    );\n\n    this.setState({ miniInputElem: null }, () =>\n      this.setState({ miniInputElem: miniInputElem }, () => callback())\n    );\n  }\n\n  componentWillUnmout() {\n    window.removeEventListener(\"message\", this.receiveMessage);\n    window.removeEventListener(\"beforeunload\", this.sendSaveData);\n    this.state.inputElem.removeEventListener(\"change\", this.receiveFiles);\n    clearInterval(this.state.saveInterval);\n    this.setState({ saveInterval: null });\n  }\n\n  requestFileUpload(type) {\n    this.createMiniImputElem(type, () =>\n      document.getElementById(\"miniInput\").click()\n    );\n  }\n\n  requestUpload() {\n    document\n      .getElementById(\"sketchInput\")\n      .dispatchEvent(new MouseEvent(\"click\"));\n    document.body.onfocus = () => {\n      document.body.onfocus = null;\n      this.hideModal();\n    };\n  }\n\n  readFile(file, fileDict, callback) {\n    var reader = new FileReader();\n    if (file.webkitRelativePath != \"\") {\n      var nameArr = file.webkitRelativePath.split(\"/\");\n      var fileName = \"\";\n      if (nameArr.length > 0) {\n        fileName = nameArr.slice(1, nameArr.length).join(\"/\");\n      }\n    } else {\n      fileName = file.name;\n    }\n\n    if (this.state.cdnLibs && file.name in this.libs) {\n      fileDict[fileName] = {};\n      return;\n    }\n\n    if (file.type.startsWith(\"text\") || file.type.startsWith(\"application\")) {\n      var fileType = \"text\";\n    } else {\n      var fileType = \"media\";\n    }\n\n    reader.onload = function(e) {\n      console.log(e.target.result);\n      fileDict[fileName] = {\n        content: e.target.result,\n        type: fileType,\n        path: file.path\n      };\n      callback();\n    };\n\n    try {\n      if (fileType === \"text\") {\n        reader.readAsText(file);\n      } else {\n        reader.readAsDataURL(file);\n      }\n    } catch {\n      fileDict[fileName] = {};\n      this.setState({\n        modalVisible: true,\n        modalHeader:\n          \"Oh no! It looks like we had trouble reading one of your files.\",\n        modalContent: \"Check that your files are properly configured.\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n    }\n  }\n\n  uploadMini(e, fileType) {\n    var files = Object.assign([], e.target.files);\n\n    files.map(file => {\n      var reader = new FileReader();\n\n      var callback = imgData =>\n        this.props.addStamp(imgData, id => {\n          this.props.requestCompile(id);\n          window.postMessage({ type: \"edited\" }, \"*\");\n        });\n\n      reader.onload = e => {\n        var data = {\n          code: e.target.result,\n          name: file.name,\n          isMediaFile: fileType != \"text\",\n          isTxtFile: fileType === \"text\"\n        };\n        callback(data);\n      };\n\n      reader.onload.bind(this);\n\n      if (file.type.startsWith(\"text\")) {\n        if (!fileType) {\n          this.setState({\n            modalVisible: true,\n            modalHeader: `${file.name} failed to upload.`,\n            modalContent: \"You can't upload text files as a media asset\",\n            modalButtons: [\n              {\n                text: \"ok\",\n                color: \"outline-secondary\",\n                callback: this.hideModal\n              }\n            ]\n          });\n        } else {\n          reader.readAsText(file);\n        }\n      } else {\n        reader.readAsDataURL(file);\n      }\n    });\n  }\n\n  readFiles(files, path) {\n    var fileDict = {};\n    var callback = () => {\n      if (Object.keys(fileDict).length === files.length) {\n        this.stampifyFiles(fileDict, path);\n      }\n    };\n    for (var i = 0; i < files.length; i++) {\n      this.readFile(files[i], fileDict, () => callback());\n    }\n\n    if (files.length === 0) {\n      callback();\n    }\n  }\n\n  receiveFiles(e) {\n    this.checkAndOpenFiles(e.target.files);\n  }\n  checkAndOpenFiles(initialFiles, path) {\n    var askedAboutCdn = false;\n    this.setState({ askedAboutCdn: askedAboutCdn });\n\n    var files = [];\n    var containsLib = false;\n    for (var i = 0; i < initialFiles.length; i++) {\n      var usingName = initialFiles[i].name.split(\"/\").pop();\n      if (usingName in this.libs) {\n        containsLib = true;\n      }\n      if (usingName.startsWith(\".\") === false) {\n        files.push(initialFiles[i]);\n      }\n    }\n\n    this.deleteInputElement();\n    this.createInputElement();\n\n    if (containsLib && askedAboutCdn === false) {\n      var buttons = [];\n      buttons.push({\n        text: \"no\",\n        color: \"outline-secondary\",\n        callback: () => {\n          this.setState({ cdnLibs: false }, () => this.readFiles(files));\n          this.hideModal();\n        }\n      });\n      buttons.push({\n        text: \"yes\",\n        color: \"outline-primary\",\n        callback: () => {\n          this.setState({ cdnLibs: true }, () => this.readFiles(files));\n          this.hideModal();\n        }\n      });\n\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"Would you like to import p5's core libraries via CDN?\",\n        modalContent:\n          \"The libraries are currently stored in large files in your sketch. This may cause Stamper to run slowly. Importing them via CDN won't cause them to behave differently but will speed up Stamper.\",\n        modalButtons: buttons\n      });\n    } else {\n      this.readFiles(files, path);\n    }\n  }\n\n  loadWithOverwriteProtection(newWorldStamper) {\n    var buttons = [];\n    buttons.push({\n      text: \"cancel\",\n      color: \"outline-secondary\",\n      callback: this.hideModal\n    });\n    buttons.push({\n      text: \"yes\",\n      color: \"outline-primary\",\n      callback: () => {\n        this.props.loadStamperObject(newWorldStamper);\n        this.hideModal();\n        this.props.setWorldData({ worldEdited: false });\n      }\n    });\n    if (!ipc) {\n      buttons.push({\n        text: \"yes, but download my current sketch first\",\n        color: \"outline-primary\",\n        callback: () => {\n          this.requestDownload();\n          this.props.loadStamperObject(newWorldStamper);\n          this.hideModal();\n          this.props.setWorldData({ worldEdited: false });\n        }\n      });\n    }\n\n    if (!this.props.getWorldData().worldEdited) {\n      this.props.loadStamperObject(newWorldStamper);\n      this.props.setWorldData({ worldEdited: false });\n    } else {\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"This will overwrite your current work\",\n        modalContent: \"Would you like to load the example anyways?\",\n        modalButtons: buttons\n      });\n    }\n  }\n\n  sendSaveData() {\n    console.log(\"SAVING\");\n    this.requestOnlineWorldCheck();\n    var stamperObject = this.props.getStamperObject();\n    var compressedStamperObj = LZUTF8.compress(JSON.stringify(stamperObject), {\n      outputEncoding: \"StorageBinaryString\"\n    });\n\n    !ipc && localStorage.setItem(\"storedStamper\", compressedStamperObj);\n\n    ipc && ipc.send(\"save\", this.props.getFileDict());\n  }\n\n  requestDownload() {\n    var fileDict = this.props.getFileDict();\n\n    var zip = new JSZip();\n    Object.keys(fileDict).map(name => {\n      if (fileDict[name].type === \"media\") {\n        var uri = fileDict[name].content;\n\n        var idx = uri.indexOf(\"base64,\") + \"base64,\".length;\n        var content = uri.substring(idx);\n\n        zip.file(name, content, { base64: true });\n      } else {\n        zip.file(name, fileDict[name].content);\n      }\n    });\n\n    zip.generateAsync({ type: \"blob\" }).then(function(content) {\n      saveAs(content, \"stamper_sketch.zip\");\n    });\n  }\n\n  updateStamperObject(js, stamperObject) {\n    if (stamperObject === undefined) {\n      var oldJs = undefined;\n    } else {\n      var oldJs = stamperObject.js;\n    }\n\n    if (oldJs === js) {\n      return stamperObject;\n    }\n\n    try {\n      var newStamperObject = parser.jsToStamps(js);\n      newStamperObject.js = js;\n    } catch (e) {\n      throw \"Syntax error in Javascript\";\n    }\n\n    newStamperObject.console = { hidden: true };\n    newStamperObject.scale = 0.7;\n    newStamperObject.originX = 0;\n    newStamperObject.originY = 0;\n    newStamperObject.imgs = [];\n\n    return newStamperObject;\n  }\n\n  replaceFilesWithCDN(indexContent) {\n    Object.keys(this.libs).map(libName => {\n      indexContent = indexContent\n        .replace(`\"${libName}\"`, `\"${this.libs[libName]}\"`)\n        .replace(`'${libName}'`, `'${this.libs[libName]}'`)\n        .replace(\"`\" + libName + \"`\", \"`\" + this.libs[libName] + \"`\");\n    });\n\n    return indexContent;\n  }\n\n  stampifyFiles(fileDict, path) {\n    if (\n      \"index.html\" in fileDict === false ||\n      \"sketch.js\" in fileDict === false\n    ) {\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"Oh no! It looks like you're missing some files.\",\n        modalContent:\n          \"Stamper sketchs must have an 'index.html' file and a 'sketch.js' file.\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n      return;\n    }\n\n    if (this.state.cdnLibs) {\n      fileDict[\"index.html\"].content = this.replaceFilesWithCDN(\n        fileDict[\"index.html\"].content\n      );\n    }\n\n    var stamperObject = undefined;\n    if (\"stamper.js\" in fileDict) {\n      var stamperFileContent = fileDict[\"stamper.js\"].content;\n      stamperObject = JSON.parse(\n        stamperFileContent.substring(\n          stamperFileContent.indexOf(\"{\"),\n          stamperFileContent.length\n        )\n      );\n    }\n\n    try {\n      stamperObject = this.updateStamperObject(\n        fileDict[\"sketch.js\"].content,\n        stamperObject\n      );\n    } catch (e) {\n      this.setState({\n        modalVisible: true,\n        modalHeader:\n          \"Oh no! It looks like your sketch file has a few syntax errors.\",\n        modalContent:\n          \"We can't parse javascript with syntax errors into Stamper land :(\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n      return;\n    }\n\n    var fnData = [];\n\n    stamperObject.stamps.map(singleFnData => {\n      if (this.state.cdnLibs && singleFnData.name in this.libs) {\n        // pass\n      } else if (\n        !singleFnData.isTxtFile &&\n        !singleFnData.isMediaFile &&\n        !singleFnData.isIndex\n      ) {\n        fnData.push(singleFnData);\n      } else if (singleFnData.name in fileDict) {\n        singleFnData.code = fileDict[singleFnData.name].content;\n        fileDict[singleFnData.name].transferred = true;\n        fnData.push(singleFnData);\n      }\n    });\n\n    Object.keys(fileDict).map(name => {\n      if (this.state.cdnLibs && name in this.libs) {\n        // pass\n      } else if (\n        name === \"sketch.js\" ||\n        name === \"stamper.js\" ||\n        fileDict[name].transferred ||\n        Object.keys(fileDict[name]) === 0\n      ) {\n        // pass\n      } else if (name === \"index.html\") {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isIndex: true,\n          hidden: true\n        });\n      } else if (fileDict[name].type === \"media\") {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isMediaFile: true,\n          hidden: true\n        });\n      } else {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isTxtFile: true,\n          hidden: true\n        });\n      }\n    });\n\n    stamperObject.stamps = fnData;\n    this.props.loadStamperObject(stamperObject);\n    ipc &&\n      ipc.send(\"updatePath\", {\n        fileDict: fileDict,\n        path: path\n      });\n  }\n\n  worldKeyToUrl(key) {\n    return this.domain + \"/?e=\" + key;\n  }\n\n  worldKeyToFileName(key) {\n    return key + \".json\";\n  }\n\n  worldFileNameToKey(fileName) {\n    if (!fileName) {\n      return \"\";\n    }\n    if (fileName.endsWith(\".json\")) {\n      return fileName.substring(0, fileName.length - \".json\".length);\n    } else {\n      throw \"improperly configured filename\";\n    }\n  }\n\n  worldKeyToNameAuthor(key) {\n    if (!key) {\n      return { name: \"\", author: \"\" };\n    }\n    var keyArr = key\n      .split(\"_\")\n      .join(\" \")\n      .split(\"~\");\n\n    if (keyArr.length === 2) {\n      return { name: keyArr[0], author: keyArr[1] };\n    } else if (keyArr.length === 1) {\n      return { name: keyArr[0] };\n    } else {\n      throw \"improperly configured key\";\n    }\n  }\n\n  worldNameAuthorToKey(name, author) {\n    var key = name + \"~\" + author;\n\n    return key.split(\" \").join(\"_\");\n  }\n\n  hideModal() {\n    this.setState({ modalVisible: false });\n  }\n\n  requestPublish() {\n    var worldData = this.props.getWorldData();\n    var localWorldAuthor = localStorage.getItem(\"localWorldAuthor\");\n\n    var publishModalName = \"\";\n    if (worldData.worldKey) {\n      publishModalName = this.worldKeyToNameAuthor(worldData.worldKey).name;\n    }\n\n    var publishModalAuthor = \"\";\n    if (localWorldAuthor) {\n      publishModalAuthor = localWorldAuthor;\n    }\n\n    var publishModal = (\n      <PublishModal\n        publishModalName={publishModalName}\n        publishModalAuthor={publishModalAuthor}\n        checkPublishWorldName={this.checkPublishWorldName.bind(this)}\n        renderLinkForm={this.renderLinkForm.bind(this)}\n        publishWorld={this.publishWorld.bind(this)}\n        hidePublishModal={this.hidePublishModal.bind(this)}\n      />\n    );\n\n    this.setState({ publishModal: publishModal });\n  }\n\n  requestPublishInfo() {\n    this.setState({ publishInfoVisible: true });\n  }\n\n  checkPublishWorldName(name, author) {\n    var key = this.worldNameAuthorToKey(name, author);\n\n    return key in this.state.onlineWorldDict;\n  }\n\n  publishWorld(name, author, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n\n    var publishDate = new Date();\n\n    var key = this.worldNameAuthorToKey(name, author);\n    var fileName = this.worldKeyToFileName(key);\n    this.props.setWorldData(\n      { worldKey: key, worldPublishTime: publishDate.toString() },\n      () => {\n        repo.writeFile(\n          \"master\",\n          fileName,\n          JSON.stringify(this.props.getStamperObject()),\n          \"commited new world\",\n          {},\n          (error, result, request) => {\n            if (error) {\n              console.log(error);\n\n              callback(error);\n              return;\n            }\n            localStorage.setItem(\"localWorldAuthor\", author);\n            window.history.pushState({}, null, this.worldKeyToUrl(key));\n\n            // window.location.search = $.param({ e: key });\n            callback();\n          }\n        );\n      }\n    );\n  }\n\n  getOnlineWorlds(callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    repo.getContents(\"master\", \"\", false, (error, result, request) => {\n      var onlineWorldTimeArr = [];\n      var onlineWorldTimeDict = {};\n\n      var timeCallback = (time, fileName) => {\n        var key = this.worldFileNameToKey(fileName);\n        onlineWorldTimeArr.push(time);\n        onlineWorldTimeDict[time] = key;\n        if (onlineWorldTimeArr.length === result.length) {\n          onlineWorldTimeArr.sort().reverse();\n          var onlineWorlds = [];\n          var onlineWorldDict = {};\n          onlineWorldTimeArr.map(time => {\n            if (time >= 0 && time in onlineWorldTimeDict) {\n              var key = onlineWorldTimeDict[time];\n              var name =\n                this.worldKeyToNameAuthor(key).name +\n                \" by \" +\n                this.worldKeyToNameAuthor(key).author;\n              onlineWorlds.push({ name: name, key: key });\n              onlineWorldDict[key] = \"\";\n            }\n          });\n          this.setState({ onlineWorldDict: onlineWorldDict }, () =>\n            callback(onlineWorlds)\n          );\n        }\n      };\n\n      if (result.length === 0) {\n        this.setState({ onlineWorldDict: {} }, () => callback([]));\n      }\n      result.map(item => {\n        this.getWorldPublishTime(item.name, time =>\n          timeCallback(time, item.name)\n        );\n      });\n    });\n  }\n\n  getWorldObject(key, modalizeErrors, callback) {\n    console.log(\"GETTING WORLD OBJECT\");\n    if (!key) {\n      callback(undefined);\n    }\n\n    for (var i = 0; i < worlds.length; i++) {\n      if (key === worlds[i].name) {\n        callback(worlds[i].data);\n        return;\n      }\n    }\n    this.getOnlineWorldObject(key, modalizeErrors, callback);\n  }\n\n  getWorldPublishTime(fileName, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    repo.listCommits({ path: fileName }, (error, result, request) => {\n      if (error) {\n        callback(-1, fileName);\n      } else if (result.length === 0) {\n        callback(-1, fileName);\n      } else {\n        var dateString = result[0].commit.committer.date;\n        var dateObj = new Date(dateString);\n        var timeNum = dateObj.getTime();\n        callback(timeNum);\n      }\n    });\n  }\n\n  getOnlineWorldObject(key, modalizeErrors, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n\n    repo.getContents(\n      \"master\",\n      this.worldKeyToFileName(key),\n      false,\n      (error, result, request) => {\n        if (error) {\n          modalizeErrors &&\n            this.setState({\n              modalVisible: true,\n              modalHeader: `Oh no! It looks like '${\n                this.worldKeyToNameAuthor(key).name\n              } by ${\n                this.worldKeyToNameAuthor(key).author\n              }' doesn't exist in our example list yet.`,\n              modalContent:\n                \"Our server may not be fully updated, try again in a few minutes.\",\n              modalButtons: [\n                {\n                  text: \"ok\",\n                  color: \"outline-secondary\",\n                  callback: this.hideModal\n                }\n              ]\n            });\n          callback(undefined);\n          return;\n        }\n\n        var bufContent = new Buffer(result.content, \"base64\");\n        var stringContent = new TextDecoder(\"utf-8\").decode(bufContent);\n        try {\n          callback(JSON.parse(stringContent));\n        } catch (error) {\n          console.log(error);\n\n          modalizeErrors &&\n            this.setState({\n              modalVisible: true,\n              modalHeader: `Oh no! It looks like there were issues loading '${\n                this.worldKeyToNameAuthor(key).name\n              }'.`,\n              modalContent: \"The example may be corrupted.\",\n              modalButtons: [\n                {\n                  text: \"ok\",\n                  color: \"outline-secondary\",\n                  callback: this.hideModal\n                }\n              ]\n            });\n        }\n      }\n    );\n  }\n\n  hidePublishModal() {\n    this.setState({ publishModal: null });\n  }\n\n  hidePublishInfoModal() {\n    this.setState({ publishInfoVisible: false });\n  }\n\n  renderLinkForm() {\n    return (\n      <input\n        class=\"picker picker form-control form-control-sm mt-1 mb-1\"\n        value={this.worldKeyToUrl(this.props.getWorldData().worldKey)}\n      />\n    );\n  }\n\n  renderPublishInfoModal() {\n    var worldData = this.props.getWorldData();\n\n    var title = \"You aren't working in a published sketch.\";\n\n    if (worldData.worldKey) {\n      var nameAuthorDict = this.worldKeyToNameAuthor(worldData.worldKey);\n      if (nameAuthorDict.author) {\n        title = `${nameAuthorDict.name} by ${nameAuthorDict.author}`;\n      } else {\n        title = `${nameAuthorDict.name}`;\n      }\n    }\n\n    return (\n      <Modal\n        show={this.state.publishInfoVisible}\n        style={{ zIndex: 2000000000000000001 }}\n        centered\n        onHide={this.hidePublishInfoModal}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className=\"name\">{title}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div>\n            <div hidden={!worldData.worldKey}>\n              {this.renderLinkForm()}\n              <div\n                class=\"ml-1 picker text-greyText\"\n                hidden={!worldData.worldPublishTime}\n              >\n                {\"published \" + worldData.worldPublishTime}\n              </div>\n              <div\n                class=\"ml-1 picker text-primary\"\n                hidden={!this.props.getWorldData().worldEdited}\n              >\n                {\n                  \"the sketch you have now is an edited version of what's published\"\n                }\n              </div>\n            </div>\n            <div hidden={worldData.worldKey} class=\"picker\">\n              {\"Publish this sketch to see it's published info\"}\n            </div>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant={\"outline-secondary\"}\n            size=\"sm\"\n            onClick={this.hidePublishInfoModal}\n          >\n            {\"ok\"}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  render() {\n    var buttonElems = this.state.modalButtons.map(btnData => (\n      <Button variant={btnData.color} size=\"sm\" onClick={btnData.callback}>\n        {btnData.text}\n      </Button>\n    ));\n    return (\n      <div>\n        {this.state.miniInputElem}\n        <Modal\n          show={this.state.modalVisible}\n          style={{ zIndex: 2000000000000000001 }}\n          centered\n          onHide={this.hideModal}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title className=\"name\">{this.state.modalHeader}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body className=\"picker\">{this.state.modalContent} </Modal.Body>\n          <Modal.Footer hidden={buttonElems.length === 0}>\n            {buttonElems}\n          </Modal.Footer>\n        </Modal>\n\n        {this.state.publishModal}\n        {this.renderPublishInfoModal()}\n      </div>\n    );\n  }\n}\n","import \"./App.scss\";\nimport $ from \"jquery\";\nimport React, { Component, useState } from \"react\";\nimport { saveAs } from \"file-saver\";\nimport parser from \"./parser.js\";\nimport LZUTF8 from \"lzutf8\";\nimport JSZip from \"jszip\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\n\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport BlobStampIcon from \"./icons/code.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport pf1, {\n  normalFn,\n  commentBlob,\n  varBlob,\n  listenerFns,\n  builtInFns,\n  worlds,\n  starter,\n  empty,\n  stamperHeader\n} from \"./starterStamps.js\";\nvar GitHub = require(\"github-api\");\nconst { detect } = require(\"detect-browser\");\nvar deepEqual = require(\"deep-equal\");\nconst browser = detect();\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ModalManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      publishVisible: true,\n      publishModalName: this.props.publishModalName,\n      publishModalAuthor: this.props.publishModalAuthor,\n      publishNameAuthorExists: false,\n      publishModalMode: \"unsubmitted\"\n      // can be unsubmitted, success, failure, loading\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      publishNameAuthorExists: this.props.checkPublishWorldName(\n        this.state.publishModalName,\n        this.state.publishModalAuthor\n      )\n    });\n  }\n\n  componentWillUnmout() {}\n\n  render() {\n    return (\n      <Modal\n        show={this.state.publishVisible}\n        style={{ zIndex: 2000000000000000001 }}\n        centered\n        onHide={this.props.hidePublishModal}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className=\"name\">{\"Publish current sketch\"}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div class=\"picker \">\n            {\n              \"This will add your sketch to the examples list and give you a link to share it with.\"\n            }\n            <div class=\"row picker p-2\">\n              <input\n                placeholder=\"name\"\n                class=\" m-1 form-control form-control-sm\"\n                style={{ width: 150 }}\n                value={this.state.publishModalName}\n                onChange={e => {\n                  this.setState(\n                    {\n                      publishModalName: e.target.value\n                        .split(\"_\")\n                        .join(\" \")\n                        .split(\"~\")\n                        .join(\" \"),\n\n                      publishModalMode: \"unsubmitted\"\n                    },\n                    () =>\n                      this.setState({\n                        publishNameAuthorExists: this.props.checkPublishWorldName(\n                          this.state.publishModalName,\n                          this.state.publishModalAuthor\n                        )\n                      })\n                  );\n                }}\n              />\n              <div class=\" picker m-2\">{\"by\"}</div>\n              <input\n                placeholder=\"author (you)\"\n                class=\" m-1 form-control form-control-sm\"\n                style={{ width: 150 }}\n                value={this.state.publishModalAuthor}\n                onChange={e => {\n                  this.setState(\n                    {\n                      publishModalAuthor: e.target.value\n                        .split(\"_\")\n                        .join(\" \")\n                        .split(\"~\")\n                        .join(\" \"),\n                      publishModalMode: \"unsubmitted\"\n                    },\n                    () =>\n                      this.setState({\n                        publishNameAuthorExists: this.props.checkPublishWorldName(\n                          this.state.publishModalName,\n                          this.state.publishModalAuthor\n                        )\n                      })\n                  );\n                }}\n              />\n            </div>\n            <div class=\"mt-2\">\n              <div\n                hidden={this.state.publishModalMode != \"loading\"}\n                class=\"picker text-greyText\"\n                style={{ fontStyle: \"italic\" }}\n              >\n                {\"loading...\"}\n              </div>\n              <div\n                hidden={this.state.publishModalMode != \"failure\"}\n                class=\"picker text-warningOrangeDark\"\n              >\n                {\n                  \"Oh no! There was an error publishing your sketch. If you recently published a sketch with the same name and author, we may still be processing it. Please try again in another minute or so.\"\n                }\n              </div>\n              <div\n                hidden={\n                  !this.state.publishNameAuthorExists ||\n                  this.state.publishModalMode !== \"unsubmitted\"\n                }\n                class=\"picker text-warningOrangeDark\"\n              >\n                {\n                  \"An example with this name and author already exists. If you publish, you'll overwrite that example (please don't do this if this isn't your example to overwrite).\"\n                }\n              </div>\n              <div hidden={this.state.publishModalMode != \"success\"}>\n                <div class=\"picker text-primary\">\n                  Congrats! Your sketch was successfully published (it will take\n                  several minutes for it to show up in the examples list).\n                  Access it at:\n                </div>\n                {this.props.renderLinkForm()}\n              </div>\n            </div>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant={\"outline-secondary\"}\n            size=\"sm\"\n            onClick={this.props.hidePublishModal}\n          >\n            {this.state.publishModalMode === \"unsubmitted\" ? \"cancel\" : \"done\"}\n          </Button>\n          <Button\n            disabled={\n              !this.state.publishModalName ||\n              !this.state.publishModalAuthor ||\n              this.state.publishModalLoading\n            }\n            variant={\"outline-primary\"}\n            size=\"sm\"\n            onClick={() => {\n              this.setState({ publishModalMode: \"loading\" });\n              this.props.publishWorld(\n                this.state.publishModalName,\n                this.state.publishModalAuthor,\n                error => {\n                  if (error) {\n                    this.setState({ publishModalMode: \"failure\" });\n                  } else {\n                    this.setState({ publishModalMode: \"success\" });\n                  }\n                }\n              );\n            }}\n          >\n            {\"publish\"}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/globe.50d70b6d.svg\";","import ace from \"ace-builds\"\nace.define(\"ace/theme/p5\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-p5\";\nexports.cssText = \".ace-p5 .ace_gutter {\\\n\tbackground: #F5F8FC;\\\n\tcolor: #333 !important;\\\n}\\\n\\\n.ace-p5 .ace_identifier {\\\n\tcolor: #000000;\\\n}\\\n.ace-p5 .ace_print-margin {\\\n\twidth: 1px;\\\n\tbackground: #F5F8FC;\\\n}\\\n\\\n.ace-p5 {\\\n\tbackground-color: #F5F8FC;\\\n\tcolor: #586E75\\\n}\\\n\\\n.ace-p5 .ace_cursor {\\\n\tcolor: #000000\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_selection {\\\n\tbackground: rgb(181, 213, 255)\\\n}\\\n\\\n.ace-p5.ace_multiselect .ace_selection.ace_start {\\\n\tbox-shadow: 0 0 3px 0px #FDF6E3;\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_step {\\\n\tbackground: rgb(255, 255, 0)\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_bracket {\\\n\tmargin: -1px 0 0 -1px;\\\n\tborder: 1px solid rgba(147, 161, 161, 0.50)\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_active-line {\\\n\tbackground: #EEE8D5\\\n}\\\n\\\n.ace-p5 .ace_gutter-active-line {\\\n\tbackground-color : #EDE5C1\\\n}\\\n.ace-p5 .ace_marker-layer .ace_selected-word {\\\n\tborder: 1px solid #7f9390\\\n}\\\n\\\n.ace-p5 .ace_invisible {\\\n\tcolor: rgba(147, 161, 161, 0.50)\\\n}\\\n\\\n.ace-p5 .ace_keyword  {\\\n\tcolor: #00A1D3\\\n}\\\n\\\n.ace-p5 .ace_keyword.ace_operator {\\\n\tcolor: #A67F59\\\n}\\\n.ace-p5 .ace_meta,\\\n.ace-p5 .ace_support.ace_class,\\\n.ace-p5 .ace_support.ace_type {\\\n\tcolor: #859900\\\n}\\\n\\\n.ace-p5 .ace_paren{\\\n\tcolor: #666\\\n}\\\n.ace-p5 .ace_constant.ace_character,\\\n.ace-p5 .ace_constant.ace_other {\\\n\tcolor: #CB4B16\\\n}\\\n.ace-p5 .ace_constant.ace_language {\\\n\tcolor: #B58900\\\n}\\\n.ace-p5 .ace_constant.ace_numeric {\\\n\tcolor: #dc3787\\\n}\\\n.ace-p5 .ace_fold {\\\n\tbackground-color: #268BD2;\\\n\tborder-color: #586E75\\\n}\\\n.ace-p5 .ace_function, {\\\n\tcolor: #00a1d3 !important\\\n}\\\n.ace-p5 .ace_entity.ace_name.ace_function,\\\n.ace-p5 .ace_entity.ace_name.ace_tag,\\\n.ace-p5 .ace_support.ace_function,\\\n.ace-p5 .ace_variable,\\\n.ace-p5 .ace_variable.ace_language {\\\n\tcolor: #00a1d3 !important\\\n}\\\n.ace-p5 .ace_storage {\\\n\tcolor: #704f21 !important\\\n}\\\n.ace-p5 .ace_string {\\\ncolor: #00a1d3 !important;\\\n}\\\n.ace-p5 .ace_string.ace_regexp {\\\ncolor: #D30102\\\n}\\\n.ace-p5 .ace_comment,\\\n.ace-p5 .ace_entity.ace_other.ace_attribute-name {\\\ncolor: #a0a0a0\\\n}\\\n.ace-p5 .ace_indent-guide {\\\nbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHjy8NJ/AAjgA5fzQUmBAAAAAElFTkSuQmCC) right repeat-y\\\n}\"\n;\n\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});                (function() {\n                    ace.require([\"ace/theme/p5\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],"sourceRoot":""}