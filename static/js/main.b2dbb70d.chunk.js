(window.webpackJsonpStamper=window.webpackJsonpStamper||[]).push([[0],{1072:function(e,t){},1074:function(e,t){},1087:function(e,t,n){},1089:function(e,t,n){"use strict";n.r(t);var i,a,s,r,o,l,c,d,h,u,p,m=n(0),f=n.n(m),g=n(75),v=n.n(g),b=(n(188),n(46)),y=n.n(b),S=n(13),x=n(17),w=n(18),k=n(20),C=n(19),E=n(21),O=n(10),H=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},z=60,D=60,M=10,R=O.a.div(i||(i=H(["\n  ","\n position: fixed;\n  display: inline-flex;\n  flex-direction: column;\n  background: white;\n  min-width: ","px;\n  min-height: ","px;\n  user-select: none;\n"],["\n  ","\n  position: fixed;\n  display: inline-flex;\n  flex-direction: column;\n  background: white;\n  min-width: ","px;\n  min-height: ","px;\n  user-select: none;\n"])),(function(e){return e.isActive?"\n      \n    ":"opacity: 1;"}),z,D),j=O.a.div(a||(a=H(["\n  height: 30px;\n  border-bottom: 1px solid rgb(215,215,215);\n  cursor: ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: ","px;\n"],["\n  height: 30px;\n  border-bottom: 1px solid #ccc;\n  cursor: ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: ","px;\n"])),(function(e){return e.isDraggable?"-webkit-grab":"default"}),M),I=O.a.div(s||(s=H(["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n"],["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n"]))),W=O.a.div(p||(p=H(["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  cursor: nesw-resize;\n"],["\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n"]))),L=O.a.div(r||(r=H([" \n  padding: ","px;\n"],["\n  padding: ","px;\n"])),M),B=(O.a.img(o||(o=H(["\n  position: relative;\n  width: 15px;\n  height: 15px;\n margin-left:12px;\n  opacity: 0.3;\n  cursor: auto;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &:before, &:after {\n    position: absolute;\n    right: 60px;\n    content: ' ';\n    height: 21px;\n    width: 2px;\n    background-color: #333;\n  }\n\n  &:before {\n    transform: rotate(45deg);\n  }\n\n  &:after {\n    transform: rotate(-45deg);\n  }\n"],["\n  position: relative;\n  width: 20px;\n  height: 20px;\n  opacity: 0.3;\n  cursor: pointer;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &:before, &:after {\n    position: absolute;\n    right: 30px;\n    content: ' ';\n    height: 21px;\n    width: 2px;\n    background-color: #333;\n  }\n\n  &:before {\n    transform: rotate(45deg);\n  }\n\n  &:after {\n    transform: rotate(-45deg);\n  }\n"]))),O.a.img(h||(h=H(["\n  position: relative;\n  width: 17px;\n  height: 17px;\n  opacity: 0.3;\n  cursor: auto;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &:before, &:after {\n    position: absolute;\n    right: 40px;\n    content: ' ';\n    height: 21px;\n    width: 2px;\n    background-color: #FF0000;\n  }\n\n  &:before {\n    transform: rotate(45deg);\n  }\n\n  &:after {\n    transform: rotate(-45deg);\n  }\n"],["\n  position: relative;\n  width: 20px;\n  height: 20px;\n  opacity: 0.3;\n  cursor: pointer;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &:before, &:after {\n    position: absolute;\n    right: 40px;\n    content: ' ';\n    height: 21px;\n    width: 2px;\n    background-color: #333;\n  }\n\n  &:before {\n    transform: rotate(45deg);\n  }\n\n  &:after {\n    transform: rotate(-45deg);\n  }\n"]))),O.a.div(l||(l=H(["\n  white-space: nowrap;\n  max-width: calc(100% - 25px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n"],["\n  white-space: nowrap;\n  max-width: calc(100% - 25px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),O.a.div(c||(c=H(["\n  width: 20px;\n  height: calc(100% - 50px);\n  position: absolute;\n  bottom: 20px;\n  right: 0;\n  cursor: ew-resize;\n"],["\n  width: 20px;\n  height: calc(100% - 50px);\n  position: absolute;\n  bottom: 20px;\n  right: 0;\n  cursor: ew-resize;\n"])))),F=O.a.div(u||(u=H(["\n  width: 20px;\n  height: calc(100% - 50px);\n  position: absolute;\n  bottom: 20px;\n  left: 0;\n  cursor: ew-resize;\n"],["\n  width: 20px;\n  height: calc(100% - 50px);\n  position: absolute;\n  bottom: 20px;\n  right: 0;\n  cursor: ew-resize;\n"]))),A=O.a.div(d||(d=H(["\n  width: calc(100% - 40px);\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  left: 20px;\n  cursor: ns-resize;\n"],["\n  width: calc(100% - 40px);\n  height: 20px;\n  position: absolute;\n  bottom: 0;\n  left: 20px;\n  cursor: ns-resize;\n"]))),Y=function(e){return"string"===typeof e},X={width:z,height:D},_=function(e,t){void 0===t&&(t=X);var n=e.x,i=e.y,a=t.width,s=t.height,r=window.innerWidth,o=window.innerHeight,l=r-(a||0)-M,c=o-(s||0)-M;return{x:Math.min(Math.max(n,M),l),y:Math.min(Math.max(i,M),c)}},P=function(e,t){void 0===t&&(t=X);var n=window.innerWidth,i=window.innerHeight,a=n/2-t.width/2,s=i/2-t.height/2;switch(e){case"top-left":default:return{x:10,y:10};case"top-center":return{x:a,y:10};case"bottom-center":return{x:a,y:1/0};case"top-right":return{x:1/0,y:10};case"bottom-left":return{x:10,y:1/0};case"bottom-right":return{x:1/0,y:1/0};case"center":return{x:a,y:s}}},T=function(){function e(){}return e.getNextIndex=function(t){return t===e.maxIndex?t:(e.maxIndex++,e.maxIndex)},e.maxIndex=100,e}(),N=n(304),q=n.n(N),G=n(306),Z=n.n(G),U=n(307),J=n.n(U),V=n(308),K=n.n(V),Q=n(3),$=n.n(Q),ee={defaultEditorWidth:300,defaultVarEditorHeight:60,defaultEditorHeight:200,defaultIframeWidth:225,iframeMargin:8,headerHeight:30,brHeight:25,codeSize:12,bigCodeSize:24,fnTitleHeight:90,copyOffset:17,iconTransition:"all .3s ease",borderTransition:"border .3s ease-out",specialFns:{draw:!0,preload:!0,setup:!0,windowResized:!1,deviceMoved:!1,deviceTurned:!1,deviceShaken:!1,keyPressed:!1,keyReleased:!1,keyTyped:!1,keyIsDown:!1,mouseMoved:!1,mouseDragged:!1,mousePressed:!1,mouseReleased:!1,mouseClicked:!1,doubleClicked:!1,mouseWheel:!1},fnStampWidth:557,fnStampHeight:318},te=["abs()","acos()","alpha(color)","ambient(color)","ambientLight(r,g,b)","append(array,value)","applyMatrix(n00,n01,n02,n03,n10,n11,n12,n13,n20,n21,n22,n23,n30,n31,n32,n33)","arc(x,y,width,start,stop)","arrayCopy(src,dst,(length))","asin()","atan()","atan2()","background(color)","beginCamera()","beginContour()","beginRaw(renderer,filename)","beginRecord(renderer,filename)","beginShape()","bezier(x1,y1,x2,y2,x3,y3,x4,y4)","bezierDetail(detail)","bezierPoint(a,b,c,d,t)","bezierTangent(a,b,c,d,t)","bezierVertex(x2,y2,x3,y3,x4,y4)","binary(value,(digits))","blend(sx,sy,sw,sh,dx,dy,dw,dh,mode)","blendMode(mode)","blue(color)","boolean(value)","box(size)","brightness(color)","byte(value)","camera(eyeX,eyeY,eyeZ,centerX,centerY,centerZ,upX,upY,upZ)","ceil()","char(value)","clear()","color(color)","colorMode(mode)","concat(a,b)","constrain()","copy(sx,sy,sw,sh,dx,dy,dw,dh)","cos()","createFont(name,size)","createGraphics(w,h)","createImage(w,h,format)","createInput(filename)","createOutput(filename)","createReader(filename)","createShape(kind,parameters)","createWriter(filename)","cursor(img)","curve(x1,y1,x2,y2,x3,y3,x4,y4)","curveDetail(detail)","curvePoint(a,b,c,d,t)","curveTangent(a,b,c,d,t)","curveTightness(tightness)","curveVertex(x,y)","day()","degrees()","directionalLight(r,g,b,nx,ny,nz)","displayDensity()","dist()","ellipse(x,y,width,height)","ellipseMode(mode)","emissive(color)","endCamera()","endContour()","endRaw()","endRecord()","endShape()","exp()","expand(list,(newSize))","fill(color)","filter(shader)","float(value)","floor()","frameRate(fps)","frustum(left,right,bottom,top,near,far)","fullScreen(renderer)","get(x,y)","green(color)","hex(value,(digits))","hour()","hue(color)","image(image,x,y)","imageMode(mode)","int(value)","join(list,seperator)","launch(args)","lerp()","lerpColor(color1,color2,amount)","lightFalloff(constant,linear,quadratic)","lights()","lightSpecular(r,g,b)","line(x1,y1,x2,y2)","loadBytes(filename)","loadFont(filename)","loadImage(filename)","loadPixels()","loadShader(fragFilename,(vertFilename))","loadShape(filename)","loadStrings(filename)","loadTable(filename,(options))","loadXML(filename)","log()","mag()","map()","match(string,regexp)","matchAll(string,regexp)","max()","millis()","min()","minute()","modelX(x,y,z)","modelY(x,y,z)","modelZ(x,y,z)","month()","nf(num,digits)","nfc(num,(right))","nfp(num,(digits))","nfs(num,digits)","noCursor()","noCursor()","noFill()","noise()","noiseDetail()","noiseSeed()","noLights()","norm()","normal(nx,ny,nz)","noSmooth()","noStroke()","noTint()","ortho(left,right,bottom,top)","parseXML(string,(options))","perspective(fovy,aspect,zNear,zFar)","pixelDensity(density)","point(x,y)","pointLight(r,g,b,x,y,z)","popMatrix()","pow()","print(variables)","printArray(array)","printCamera()","println(variables)","printMatrix()","printProjection()","pushMatrix()","quad(x,y,x2,y2,x3,y3,x4,y4)","quadraticVertex(x,y,x2,y2)","radians()","random()","randomGaussian()","randomSeed()","rect(x,y,width,height)","rectMode(mode)","red(color)","requestImage(filename)","resetMatrix()","resetShader()","reverse(list)","rotate(angle)","rotateX(angle)","rotateY(angle)","rotateZ(angle)","round()","saturation(color)","save(filename)","saveBytes(filename,data)","saveFrame(filename####)","saveStream(target,source)","saveStrings(filename,data)","saveTable(table,filename,(options))","saveXML(xml,filename,(options))","scale(s)","screenX(x,y)","screenY(x,y)","screenZ(x,y)","second()","selectFolder(prompt,callback)","selectInput(prompt,callback)","selectOutput(prompt,callback)","set(x,y,color)","shader(shader)","shape(shape,x,y)","shapeMode(mode)","shearX(angle)","shearY(angle)","shininess(shine)","shorten(list)","sin()","size(width,height,renderer)","smooth()","sort(list,(count))","specular(color)","sphere(radius)","sphereDetail(res)","splice(list,value,index)","split(value,digits)","splitTokes(value,(delim))","spotLight(r,g,b,x,y,z,nx,ny,nz,angle,concentration)","sq()","sqrt()","string(value)","stroke(color)","strokeCap(cap)","strokeJoin(join)","strokeWeight(weight)","subset(list,start,(count))","tan()","text(string,x,y)","textAlign(alignX,(alignY))","textAscent()","textDescent()","textFont(font,(size))","textLeading(leading)","textMode(mode)","textSize(size)","texture(image)","textureMode(mode)","textureWrap(wrap)","textWidth(string)","tint(color)","translate(x,y)","triangle(x1,y1,x2,y2,x3,y3)","trim(string)","unbinary(value)","unhex(value)","updatePixels()","vertex(x,y)","year()","HALF_PI","PI","QUARTER_PI","TAU","TWO_PI","frameCount","deltaTime","focused","displayWidth","displayHeight","windowWidth","windowHeight","width","height","disableFriendlyErrors","p5.Element","VIDEO","AUDIO","p5.MediaElement","p5.File","p5.Graphics","p5.TypedDict","p5.NumberDict","deviceOrientation","accelerationX","accelerationY","accelerationZ","pAccelerationX","pAccelerationY","pAccelerationZ","rotationX","rotationY","rotationZ","pRotationX","pRotationY","pRotationZ","turnAxis","keyIsPressed","key","keyCode","movedX","movedY","mouseX","mouseY","pmouseX","pmouseY","winMouseX","winMouseY","pwinMouseX","pwinMouseY","mouseButton","mouseIsPressed","DEGREES","RADIANS","CORNER","CORNERS","CENTER","RADIUS","exitPointerLock()","angleMode(mode)","touches","touchStarted(fxn)","touchMoved(fxn)","touchEnded(fxn)","saveCanvas(selectedCanvas, [filename], [extension])","saveCanvas([filename], [extension])","saveFrames(filename, extension, duration, framerate, [callback])","pixels","loadJSON(path, [jsonpOptions], [datatype], [callback], [errorCallback])","loadJSON(path, datatype, [callback], [errorCallback])","loadJSON(path, callback, [errorCallback])","httpGet(path, [datatype], [data], [callback], [errorCallback])","httpGet(path, data, [callback], [errorCallback])","httpGet(path, callback, [errorCallback])","httpPost(path, [datatype], [data], [callback], [errorCallback])","httpPost(path, data, [callback], [errorCallback])","httpPost(path, callback, [errorCallback])","httpDo(path, [method], [datatype], [data], [callback], [errorCallback])","httpDo(path, options, [callback], [errorCallback])","saveJSON(json, filename, [optimize])","createVector([x], [y], [z])","textStyle(theStyle)","orbitControl([sensitivityX], [sensitivityY], [sensitivityZ])","debugMode()","debugMode(mode)","debugMode(mode, [gridSize], [gridDivisions], [xOff], [yOff], [zOff])","debugMode(mode, [axesSize], [xOff], [yOff], [zOff])","debugMode([gridSize], [gridDivisions], [gridXOff], [gridYOff], [gridZOff], [axesSize], [axesXOff], [axesYOff], [axesZOff])","noDebugMode()","specularColor(v1, v2, v3)","specularColor(value)","specularColor(gray)","specularColor(values)","specularColor(color)","createShader(vertSrc, fragSrc)","normalMaterial()","ambientMaterial(v1, [v2], [v3], [a])","ambientMaterial(color)","emissiveMaterial(v1, [v2], [v3], [a])","emissiveMaterial(color)","specularMaterial(v1, [v2], [v3], [a])","specularMaterial(color)","createCamera()","setCamera(cam)"];if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)var ne=window.require("electron").ipcRenderer;else ne=!1;var ie=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={x:M,y:M,isDragging:!1,isResizingX:!1,isResizingY:!1,isResizingXLeft:!1,zIndex:T.getNextIndex(),downKey:-1,isMoving:!1,mouseIsDown:!1,scale:1,panDisabled:!1,originalHeight:null,mouseWheelTimeout:null,zoomDisabled:!1},t.space=32,t.opt=18,t.cmd=91,t.plus=187,t.minus=189,t.zero=48,t.onWindowResize=function(){var e=t.state,n=e.x,i=e.y,a=e.width,s=e.height,r=_({x:n,y:i},a&&s?{width:a,height:s}:void 0),o=r.x,l=r.y;t.setState({x:o,y:l})},t.saveWrapperRef=function(e){if(t.childrenElement=e,t.childrenElement){var n,i,a=t.props.initialSize;if(a)n=a.width,i=a.height;else{var s=t.childrenElement.getBoundingClientRect();n=s.width,i=s.height}t.props.initialScale&&t.setState({scale:t.props.initialScale}),t.setState({width:n,height:i,originalHeight:i}),t.setInitialPosition({width:n,height:i})}},t.setInitialPosition=function(e){var n,i=t.props.initialPosition;i&&(n=Y(i)?P(i,e):i,t.setState({x:n.x,y:n.y}))},t.saveHeaderRef=function(e){t.headerElement=e},t.onKeyDown=function(e){e.keyCode===t.space&&(document.body.style.cursor="grab"),t.state.downKey===t.cmd?e.keyCode===t.zero?(e.preventDefault(),t.zoom(1,window.innerWidth/2,window.innerHeight/2,!0)):e.keyCode===t.plus?(e.preventDefault(),t.zoom(2*t.state.scale,window.innerWidth/2,window.innerWidth/2,!0)):e.keyCode===t.minus&&(e.preventDefault(),t.zoom(.5*t.state.scale,window.innerWidth/2,window.innerWidth/2,!0)):t.setState({downKey:e.keyCode})},t.onKeyUp=function(e){t.setState({downKey:-1}),document.body.style.cursor="auto"},t.onMouseDown=function(){t.props.isDraggable&&t.setState({isDragging:!0})},t.disablePan=function(e){t.setState({panDisabled:e})},t.disableZoom=function(e){t.setState({zoomDisabled:e})},t.setPos=function(e,n){t.setState({x:this.state.x+e,y:this.state.y+n})},t.pan=function(e,n){if(!t.state.panDisabled){ne&&ne.send("edited");var i=t.state,a=i.x+e,s=i.y+n;t.setState({x:a,y:s},(function(){return t.onStartMove(!0)}))}},t.manualResize=function(e,n){var i=t.state.width;t.state.height,t.state.originalHeight;t.setState({width:i+e})},t.zoom=function(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!t.state.zoomDisabled){ne&&ne.send("edited");var r=t.state.scale,o=t.state.x,l=t.state.y;t.state.width,t.state.height;if(!(e<.1)){var c=n-o,d=i-l,h=c/r,u=d/r,p=h*e,m=u*e;if(s)var f=window.innerWidth/2,g=window.innerHeight/2;else f=n,g=i;var v=f-p,b=g-m;a?t.setState({scale:e},(function(){return t.setState({x:v,y:b},(function(){return t.notifyStopMove()}))})):t.setState({scale:e},(function(){return t.setState({x:v,y:b},(function(){return t.onStartMove(!0)}))}))}}},t.onWheel=function(e){t.state.mouseWheelTimeout&&clearTimeout(t.state.mouseWheelTimeout);var n=setTimeout(t.onStoppedMove.bind(t),250);if(t.setState({mouseWheelTimeout:n}),e.ctrlKey)e.preventDefault(),t.zoom(t.state.scale-.01*e.deltaY,e.clientX,e.clientY);else{if(t.props.panDisabled)return;t.pan(-e.deltaX,-e.deltaY)}},t.onGlobalMouseDown=function(e){t.setState({mouseIsDown:!0})},t.onMouseMove=function(e){var n=t.isResizing,i=t.state,a=i.isDragging,s=i.x,r=i.y,o=i.width,l=i.height,c=e.movementX,d=e.movementY,h=(window.innerWidth,window.innerHeight,s+c),u=r+d;if(t.state.downKey===t.space&&t.state.mouseIsDown)t.pan(e.movementX,e.movementY);else if(a){ne&&ne.send("edited");var p=_({x:h,y:u},o&&l?{width:o,height:l}:void 0);p.x,p.y;t.setState({x:h,y:u},t.onStartMove)}else n&&(ne&&ne.send("edited"),t.resizeCristal(e))},t.resizeCristal=function(e){t.isResizing;var n=t.state.scale,i=t.state,a=(i.isDragging,i.x),s=(i.y,i.width),r=i.height,o=e.movementX/n,l=e.movementY/n,c=(window.innerWidth,window.innerHeight,t.state),d=c.isResizingX,h=c.isResizingY,u=c.isResizingXLeft,p=r,m=s,f=a;if(d){var g=(s||0)+o;m=Math.max(g,z)}if(u)g=(s||0)-o,m=Math.max(g,z),f=a+e.movementX;if(h){var v=(r||0)+l;p=Math.max(v,D)}t.notifyResize(m,p,f)},t.onStoppedMove=function(){this.state.isMoving&&t.notifyStopMove(),t.setState({isMoving:!1})},t.onStartMove=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.notifyMove(),!1===t.state.isMoving&&(t.notifyStartMove(),t.state.downKey===t.opt&&!1===e&&t.notifyOptMove()),t.setState({isMoving:!0})},t.notifyMove=function(){var e=t.props.onMove;e&&e(t.state)},t.notifyResize=function(e,n,i){var a=t.props.onResize,s=n-t.state.height,r=e-t.state.width,o=!1;if(a)o=a(r,s);o||t.setState({height:n,width:e,x:i})},t.notifyStartMove=function(){var e=t.props.onStartMove;e&&e(t.state)},t.notifyStopMove=function(){var e=t.props.onStopMove;e&&e(t.state)},t.notifyOptMove=function(){var e=t.props.onOptMove;e&&e(t.state)},t.notifyStartResize=function(){var e=t.props.onStartResize;e&&e(t.state)},t.notifyStopResize=function(){var e=t.props.onStopResize;e&&e(t.state)},t.onMouseUp=function(){t.onStoppedMove(),(t.state.isResizingY||t.state.isResizingX||t.state.isResizingXLeft)&&t.notifyStopResize(),t.setState({isDragging:!1,isResizingX:!1,isResizingXLeft:!1,isResizingY:!1,mouseIsDown:!1})},t.startFullResize=function(){t.notifyStartResize(),t.setState({isResizingX:!0,isResizingY:!0})},t.startFullLeftResize=function(){t.notifyStartResize(),t.setState({isResizingXLeft:!0,isResizingY:!0})},t.startXResize=function(){return t.notifyStartResize(),t.setState({isResizingX:!0})},t.startXLeftResize=function(){return t.notifyStartResize(),t.setState({isResizingXLeft:!0})},t.startYResize=function(){return t.notifyStartResize(),t.setState({isResizingY:!0})},t.renderResizeHandles=function(){if(t.props.isResizable){var e=t.state.scale,n=t.state.height,i=t.state.width;return[m.createElement(B,{key:"right-resize",onMouseDown:t.startXResize,style:{width:20/e,bottom:20/e,height:n-30-20/e}}),m.createElement(F,{key:"left-resize",onMouseDown:t.startXLeftResize,style:{width:20/e,bottom:20/e,height:n-30-20/e}}),m.createElement(I,{key:"bottom-right-resize",onMouseDown:t.startFullResize,style:{width:20/e,height:20/e}}),m.createElement(W,{key:"bottom-left-resize",onMouseDown:t.startFullLeftResize,style:{width:20/e,height:20/e}}),m.createElement(A,{key:"bottom-resize",onMouseDown:t.startYResize,style:{height:20/e,left:20/e,width:i-40/e}})]}},t.changeZIndex=function(){var e=t.state.zIndex;t.setState({zIndex:T.getNextIndex(e)})},t}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n)return null;var s=i+e.props.parentID.toString(),r=function(){$()("."+s).css({opacity:"1"})},o=function(){$()("."+s).css({opacity:".5"})},l=".5";return a||(r=function(){},o=function(){},l=".3"),m.createElement(t,{onClick:a,style:{opacity:l,height:18,width:18},className:"text-greyText m-1 "+s,onMouseOver:r,onMouseOut:o})}return ie(t,e),t.prototype.componentDidMount=function(){var e=this;document.addEventListener("mousedown",this.onGlobalMouseDown),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("wheel",this.onWheel,{passive:!1}),ne&&ne.on("zoomIn",(function(){e.zoom(2*e.state.scale,window.innerWidth/2,window.innerHeight/2,!0)})),ne&&ne.on("zoomOut",(function(){e.zoom(.5*e.state.scale,window.innerWidth/2,window.innerHeight/2,!0)})),ne&&ne.on("zoomActual",(function(){e.zoom(1,window.innerWidth/2,window.innerHeight/2,!0)}))},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onGlobalMouseDown),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("wheel",this.onWheel)},Object.defineProperty(t.prototype,"isResizing",{get:function(){var e=this.state,t=e.isResizingX,n=e.isResizingY,i=e.isResizingXLeft;return t||n||i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){var e=this.props,t=(e.title,e.isDraggable),i=e.onClose,a=e.closeHidden,s=e.onCopy,r=e.copyHidden,o=n(this,q.a,a,"mouseOnClose",i),l=n(this,Z.a,r,"mouseOnCopy",s),c=n(this,J.a,!e.showClear,"mousOnClear",e.onClear);if(e.onMinimize)var d=n(this,K.a,null===e.onMinimize,"mouseOnMinimize",e.onMinimize);var h=null;if(this.props.icon)h=n(this,this.props.icon);var u=n(this,e.makeBigIcon,!e.showMakeBig,"mouseOnBig",e.onMakeBig),p=m.createElement("div",{class:"row",style:{position:"absolute",cursor:"auto",right:18,top:0}},u,l,o,c,d);return m.createElement(j,{className:"bg-white rounded-top",isDraggable:t,ref:this.saveHeaderRef,onMouseDown:this.onMouseDown},h,p)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){var e=this.props.children;return m.createElement(L,{},e)},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.isResizing,t=this.state,n=t.x,i=t.y,a=t.width,s=t.height,r=t.isDragging,o=t.zIndex,l=t.scale,c=this.props.className,d=r||e,h={left:n,top:i,width:a,height:s,zIndex:o,transform:"scale("+l.toString()+")",transformOrigin:"top left",border:this.props.border,outline:this.props.outline},u=this.header,p=this.content;return this.props.headerHidden&&(u=null),g.createPortal(m.createElement(R,{style:h,ref:this.saveWrapperRef,isActive:d,className:c+" rounded "+this.props.wrapperName,onMouseDown:this.changeZIndex},m.createElement("div",null,u),p,this.renderResizeHandles()),document.body)},t.defaultProps={children:null,isResizable:!0,isDraggable:!0},t}(m.Component),se=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),re=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}se(t,e),t.prototype.render=function(){return m.createElement("div",null,"Custom Content")}}(m.Component),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),oe=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}re(t,e),t.prototype.render=function(){return m.createElement("div",null,"Custom header")}}(m.Component),n(179)),le=(n(119),n(35)),ce=n.n(le),de=n(114),he=n.n(de),ue=n(310),pe=n.n(ue),me=n(309),fe=n.n(me),ge=n(115),ve=n.n(ge),be=n(116),ye=n.n(be),Se=(n(737),n(739),n(120),n(121),n(122),n(123),n(124),n(59));if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)var xe=window.require("electron").ipcRenderer;else xe=!1;var we=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(k.a)(this,Object(C.a)(t).call(this,e))).state={code:n.props.starterCode,name:n.props.starterName,args:n.props.starterArgs,iframeDisabled:n.props.iframeDisabled,iframeWidth:n.props.starterIframeWidth,iframeHeight:ee.defaultEditorHeight,editorHeight:ee.defaultEditorHeight,editorWidth:n.props.starterEditorWidth,editorHidden:!1,isSpecialFn:!1,editorScrolling:!1,errorLines:n.props.errorLines,iframeCode:"",editsMade:!1,runningBorder:!1,doubleClickActive:!1,resizingIframe:!1,x:n.props.initialPosition.x,y:n.props.initialPosition.y,originX:n.props.initialOriginX,originY:n.props.initialOriginY,scale:n.props.initialScale,hidden:n.props.initialHidden},n.cristalRef=f.a.createRef(),n.editorRef=f.a.createRef(),n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"toggleHide",value:function(e,t,n,i){if(this.state.hidden){var a=t-(this.state.originX-this.state.x)/this.state.scale*e,s=n-(this.state.originY-this.state.y)/this.state.scale*e;this.setState({hidden:!1,scale:e,x:a,y:s},i)}else this.setState({hidden:!0,originX:t,originY:n,scale:e},i)}},{key:"componentDidMount",value:function(){var e=this;this.loadp5Lib(),this.setState({editorHeight:this.props.starterEditorHeight,iframeHeight:this.props.starterIframeHeight},(function(){return e.props.requestCompile(e.props.id)})),this.checkName()}},{key:"checkName",value:function(){var e=this.state.name in ee.specialFns;this.setState({isSpecialFn:e})}},{key:"addErrorLine",value:function(e){var t=this.state.errorLines;t[e]="",this.setState({errorLines:t})}},{key:"clearErrorsAndUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.state.errorLines;n={};this.setState({errorLines:n},(function(){e.setState({iframeCode:e.props.getHTML(e.props.id)});for(var n=0;n<t.length;n++)e.addErrorLine(t[n])}))}},{key:"loadp5Lib",value:function(){this.editorRef.current&&this.editorRef.current.editor.completers.push({getCompletions:function(e,t,n,i,a){var s=[];te.forEach((function(e){s.push({value:e,meta:"p5.js"})})),a(null,s)}})}},{key:"updateIframeDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;xe&&xe.send("edited");var n=this.props.getScale(),i=this.state.iframeWidth+e/n,a=this.state.iframeHeight+t/n;i<30&&(e=0,i=30),a<30&&(t=0,a=30),this.setState({iframeWidth:i,iframeHeight:a}),this.cristalRef.current.manualResize(e/n,t/n)}},{key:"setEditorScrolling",value:function(e){e&&0==this.state.editorScrolling?(this.setState({editorScrolling:!0}),this.props.disablePan(!0)):!1===e&&this.state.editorScrolling&&(this.setState({editorScrolling:!1}),this.props.disablePan(!1))}},{key:"renderEditor",value:function(){var e=this,t=[];for(var n in this.state.errorLines)0!=n&&t.push({startRow:n-1,endRow:n,type:"background",className:"bg-warningOrange marker"});var i="p5",a="javascript";return(this.props.isHtml||this.props.isCss)&&(i="solarized_light"),this.props.isCss?a="css":this.props.isHtml&&(a="html"),f.a.createElement("div",{onMouseOut:function(){e.setEditorScrolling(!1)},hidden:this.state.editorHidden},f.a.createElement("br",null),f.a.createElement(ce.a,{markers:t,style:{width:this.state.editorWidth,height:this.state.editorHeight,background:"transparent"},mode:a,theme:i,onChange:function(t){e.setState({code:t,editsMade:!0}),xe&&xe.send("edited")},name:"name"+this.props.id.toString(),fontSize:ee.codeSize,showPrintMargin:!1,wrapEnabled:!0,showGutter:!1,highlightActiveLine:!1,value:this.state.code,ref:this.editorRef,onScroll:function(){return e.setEditorScrolling(!0)},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2,hasCssTransforms:!0}}))}},{key:"compileCallback",value:function(){var e=this;this.state.editsMade&&(this.props.requestCompile(this.props.id),this.setState({editsMade:!1,runningBorder:!0},(function(){return setTimeout((function(){e.setState({runningBorder:!1})}),300)})))}},{key:"renderFunctionName",value:function(){var e=this;if(this.state.name!=this.props.starterName)this.state.Name;var t="blue";this.state.isSpecialFn?t="pink":(this.props.isHtml||this.props.isCss)&&(t="htmlCssName");return f.a.createElement("div",null,f.a.createElement("input",{placeholder:"function name...",disabled:this.props.isHtml||this.props.isCss,onChange:function(t){e.setState({name:t.target.value,editsMade:!0},(function(){return e.checkName()})),xe&&xe.send("edited")},style:{background:"transparent"},value:this.state.name,class:"text-"+t+" name"}),f.a.createElement("br",null),f.a.createElement("input",{placeholder:"arguments...",disabled:this.props.isHtml||this.props.isCss,onChange:function(t){e.setState({args:t.target.value,editsMade:!0}),xe&&xe.send("edited")},style:{background:"transparent"},value:this.state.args,class:"text-greyText args"}))}},{key:"renderIframe",value:function(){var e=this;return f.a.createElement("div",{hidden:this.props.isCss},f.a.createElement("div",{hidden:!1===this.state.resizingIframe,style:{position:"absolute",fontSize:ee.codeSize,opacity:.5,top:80,right:25},class:"text-greyText "},"W:"+Math.floor(this.state.iframeWidth)+" H:"+Math.floor(this.state.iframeHeight)),f.a.createElement(Se.Resizable,{className:"ml-1 bg-white shadow",onResize:function(t){e.updateIframeDimensions(t.movementX,t.movementY)},onResizeStart:function(){e.props.onStartMove(),e.setState({resizingIframe:!0})},onResizeStop:function(t){e.props.onStopMove(),e.setState({resizingIframe:!1})},width:this.state.iframeHeight,height:this.state.iframeWidth,style:{overflow:"hidden",zIndex:5}},f.a.createElement("div",{onMouseOver:this.compileCallback.bind(this)},f.a.createElement("div",{style:{position:"absolute",width:this.state.iframeWidth,height:this.state.iframeHeight,color:"transparent",background:"transparent"},hidden:!this.state.iframeDisabled}," "),f.a.createElement("iframe",{ref:function(t){t&&e.props.addNewIframeConsole(t.contentWindow.console)},scrolling:"no",style:{border:"none",height:this.state.iframeHeight+ee.iframeMargin,width:this.state.iframeWidth+ee.iframeMargin,margin:"-"+ee.iframeMargin.toString()+"px"},srcdoc:this.state.iframeCode,sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups  allow-same-origin allow-scripts",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media"}))))}},{key:"setIframeDisabled",value:function(e){this.setState({iframeDisabled:e})}},{key:"copyAndOpt",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.props.isCss&&!this.props.isHtml){var n=this.getData(),i=!1,a=!1,s=!1;t?s=!0:(i=!0,a=!0);var r=function(){return null};t&&(r=function(){return e.cristalRef.current.changeZIndex()});var o=this.props.addStamp(n,i,a,s,r);t&&this.setState({name:o},(function(){return e.checkName()}))}}},{key:"getData",value:function(){return{name:this.state.name,code:this.state.code,args:this.state.args,x:this.state.x,y:this.state.y,editorWidth:this.state.editorWidth,editorHeight:this.state.editorHeight,iframeWidth:this.state.iframeWidth,iframeHeight:this.state.iframeHeight,isHtml:this.props.isHtml,isCss:this.props.isCss,originX:this.state.originX,originY:this.state.originY,scale:this.state.scale,hidden:this.state.hidden}}},{key:"resizeEditor",value:function(e,t){var n=this.state.editorHeight+t,i=this.state.editorWidth+e;if(n<0||i<0)return!0;this.setState({editorHeight:n,editorWidth:i}),this.editorRef.current.editor.resize()}},{key:"getIcon",value:function(){var e=he.a;return this.props.isHtml?e=fe.a:this.props.isCss?e=pe.a:this.state.isSpecialFn&&(e=ee.specialFns[this.state.name]?ve.a:ye.a),e}},{key:"render",value:function(){var e=this,t="bg-white";0 in this.state.errorLines&&(t="bg-warningOrange");var n="border border-borderGrey";Object.keys(this.state.errorLines).length>0&&(n="border border-warningOrange"),this.state.runningBorder&&(n="border border-blue");var i="bg-jsArea";return(this.props.isHtml||this.props.isCss)&&(i="bg-htmlCssArea"),this.state.hidden?f.a.createElement("div",null):f.a.createElement("div",null,f.a.createElement(ae,{ref:this.cristalRef,isResizable:!0,onStartMove:this.props.onStartMove,onStopMove:this.props.onStopMove,onClose:function(){return e.props.onDelete(e.props.id)},onCopy:function(){return e.copyAndOpt()},onOptMove:function(){return e.copyAndOpt(!0)},closeHidden:this.props.isHtml||this.props.isCss,copyHidden:this.props.isHtml||this.props.isCss,initialPosition:{x:this.state.x,y:this.state.y},initialScale:this.state.scale,className:"stamp shadow-sm "+i+" "+n+" vertex"+this.props.id,onResize:this.resizeEditor.bind(this),onStartResize:this.props.onStartMove,onStopResize:this.props.onStopMove,onMove:function(t){return e.setState({x:t.x,y:t.y})},icon:this.getIcon(),parentID:this.props.id},f.a.createElement("div",{onMouseLeave:this.compileCallback.bind(this)},f.a.createElement("div",{class:t,style:{position:"absolute",top:ee.headerHeight,left:0,width:"100%",height:ee.fnTitleHeight,color:"transparent"}}," "),f.a.createElement("div",{class:"p-2"},this.renderFunctionName(),f.a.createElement("div",{class:"row m-0 "},this.renderEditor(),this.renderIframe())))))}}]),t}(m.Component),ke=n(186),Ce=n(312),Ee=n.n(Ce),Oe=n(88);if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)window.require("electron").ipcRenderer;else;var He=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(k.a)(this,Object(C.a)(t).call(this,e))).state={logs:[],consoleHeight:n.props.starterConsoleHeight,consoleWidth:n.props.starterConsoleWidth,lastFreq:0,originX:n.props.initialOriginX,originY:n.props.initialOriginY,scale:n.props.initialScale,hidden:n.props.initialHidden,x:n.props.initialPosition.x,y:n.props.initialPosition.y},n.cristalRef=f.a.createRef(),n.limit=100,n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",(function(t){e.logToConsole(t.data.message);var n=t.data.lineno,i=(t.data.message,t.data.id);e.props.addErrorLine(n,i)}))}},{key:"clearConsole",value:function(){this.setState({logs:[],lastFreq:0})}},{key:"getIcon",value:function(){return Ee.a}},{key:"toggleHide",value:function(e,t,n,i){if(this.state.hidden){var a=t-(this.state.originX-this.state.x)/this.state.scale*e,s=n-(this.state.originY-this.state.y)/this.state.scale*e;this.setState({hidden:!1,scale:e,x:a,y:s},i)}else this.setState({hidden:!0,originX:t,originY:n,scale:e},i)}},{key:"setEditorScrolling",value:function(e){this.props.disablePan(e)}},{key:"addNewIframeConsole",value:function(e){var t=this;Object(ke.Hook)(e,(function(e){e.map((function(e){"log"===e.method&&t.checkLastLog(e)}))}))}},{key:"checkLastLog",value:function(e){var t=this.state.logs;if(t.length<1){this.setState({logs:[e],lastFreq:0}),(a=document.getElementById("consoleContainer"))&&(a.scrollTop=a.scrollHeight)}else{var n=t[t.length-1];if(Oe.isEqual(n.data,e.data)){if(this.state.lastFreq>=this.limit)return;this.setState({lastFreq:this.state.lastFreq+1})}else{if(this.state.lastFreq>1){var i=this.state.lastFreq.toString();this.state.lastFreq>=this.limit&&(i+="+"),t.push({method:"command",data:["("+i+")"]})}var a;t.push(e),this.setState({logs:t,lastFreq:1}),(a=document.getElementById("consoleContainer"))&&(a.scrollTop=a.scrollHeight)}}}},{key:"logToConsole",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";this.checkLastLog({method:t,data:[e]})}},{key:"getData",value:function(){return{x:this.state.x,y:this.state.y,consoleWidth:this.state.consoleWidth,consoleHeight:this.state.consoleHeight,originX:this.state.originX,originY:this.state.originY,scale:this.state.scale,hidden:this.state.hidden}}},{key:"resizeConsole",value:function(e,t){var n=this.state.consoleHeight,i=this.state.consoleWidth;this.setState({consoleHeight:n+t,consoleWidth:i+e})}},{key:"render",value:function(){var e=this,t=Oe.cloneDeep(this.state.logs);if(this.state.lastFreq>1){var n=this.state.lastFreq.toString();this.state.lastFreq>=this.limit&&(n+="+"),t.push({method:"command",data:["("+n+")"]});var i=document.getElementById("consoleContainer");i&&(i.scrollTop=i.scrollHeight)}return this.state.hidden?f.a.createElement("div",null):f.a.createElement(ae,{parentID:this.props.id,ref:this.cristalRef,initialScale:this.state.scale,closeHidden:!0,copyHidden:!0,onResize:this.resizeConsole.bind(this),initialPosition:{x:this.state.x,y:this.state.y},onMove:function(t){return e.setState({x:t.x,y:t.y})},className:"stamp bg-lightGrey border border-borderGrey shadow-sm",icon:this.getIcon(),showClear:!0,onClear:this.clearConsole.bind(this)},f.a.createElement("div",{id:"consoleContainer",onMouseOver:function(){return e.setEditorScrolling(!0)},onMouseOut:function(){return e.setEditorScrolling(!1)},style:{width:this.state.consoleWidth,height:this.state.consoleHeight,overflow:"hidden","overflow-y":"scroll","white-space":"nowrap"}},f.a.createElement(ke.Console,{styles:{LOG_COLOR:"black",LOG_ERROR_BACKGROUND:"rgba(255, 184, 0, .5)",LOG_ERROR_BORDER:"transparent",LOG_ERROR_COLOR:"rgba(102,102,102)",BASE_FONT_FAMILY:"Roboto Mono",BASE_FONT_SIZE:10,LOG_COMMAND_COLOR:"rgba(150,150,150)",BASE_BACKGROUND_COLOR:"transparent",LOG_BORDER:"rgb(225,225,225)",LOG_COMMAND_ICON:""},logs:t,variant:"light"})))}}]),t}(m.Component),ze=n(117),De=n.n(ze),Me=n(313),Re=n.n(Me);if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)var je=window.require("electron").ipcRenderer;else je=!1;var Ie=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(k.a)(this,Object(C.a)(t).call(this,e))).state={code:n.props.starterCode,editorScrolling:!1,editorHeight:n.props.starterEditorHeight,editorWidth:n.props.starterEditorWidth,errorLines:n.props.errorLines,exportableCode:"",editsMade:"",runningBorder:!1,x:n.props.initialPosition.x,y:n.props.initialPosition.y,originX:n.props.initialOriginX,originY:n.props.initialOriginY,scale:n.props.initialScale,hidden:n.props.initialHidden,codeSize:n.props.starterCodeSize},n.cristalRef=f.a.createRef(),n.editorRef=f.a.createRef(),n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadp5Lib(),this.setState({exportableCode:""},(function(){return e.props.requestCompile(e.props.id)}))}},{key:"setEditorScrolling",value:function(e){e&&0==this.state.editorScrolling?(this.setState({editorScrolling:!0}),this.props.disablePan(!0)):!1===e&&this.state.editorScrolling&&(this.setState({editorScrolling:!1}),this.props.disablePan(!1))}},{key:"mouseOutCallback",value:function(){var e=this;this.state.editsMade&&(this.props.requestCompile(this.props.id),this.setState({editsMade:!1,runningBorder:!0},(function(){return setTimeout((function(){return e.setState({runningBorder:!1})}),100)})))}},{key:"toggleHide",value:function(e,t,n,i){if(this.state.hidden){var a=t-(this.state.originX-this.state.x)/this.state.scale*e,s=n-(this.state.originY-this.state.y)/this.state.scale*e;this.setState({hidden:!1,scale:e,x:a,y:s},i)}else this.setState({hidden:!0,originX:t,originY:n,scale:e},i)}},{key:"renderEditor",value:function(){var e=this,t=[];for(var n in this.state.errorLines)0!=n&&t.push({startRow:n-1,endRow:n,type:"background",className:"bg-warningOrange marker"});return f.a.createElement("div",{onMouseOut:function(){e.setEditorScrolling(!1)}},f.a.createElement(ce.a,{style:{width:this.state.editorWidth,height:this.state.editorHeight},mode:"javascript",theme:"p5",onChange:function(t){e.setState({code:t}),je&&je.send("edited"),e.setState({editsMade:!0})},markers:t,name:"name"+this.props.id.toString(),fontSize:this.state.codeSize,showPrintMargin:!1,wrapEnabled:!0,showGutter:!1,onScroll:function(){return e.setEditorScrolling(!0)},highlightActiveLine:!1,value:this.state.code,ref:this.editorRef,className:"bg-jsArea",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2,hasCssTransforms:!0}}))}},{key:"copyAndOpt",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getData(),i=!1;!1===t&&(i=!0);var a=function(){return null};t&&(a=function(){return e.cristalRef.current.changeZIndex()}),this.props.addStamp(n,i,a)}},{key:"addErrorLine",value:function(e){var t=this.state.errorLines;t[e]="",this.setState({errorLines:t})}},{key:"clearErrorsAndUpdate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.state.errorLines;if(e)i={};this.setState({errorLines:i},(function(){t.setState({exportableCode:t.props.getExportableCode()});for(var e=0;e<n.length;e++)t.addErrorLine(n[e])}))}},{key:"getData",value:function(){return{code:this.state.code,editorWidth:this.state.editorWidth,editorHeight:this.state.editorHeight,x:this.state.x,y:this.state.y,originX:this.state.originX,originY:this.state.originY,scale:this.state.scale,hidden:this.state.hidden,codeSize:this.state.codeSize}}},{key:"resizeEditor",value:function(e,t){var n=this.state.editorHeight,i=this.state.editorWidth;this.setState({editorHeight:n+t,editorWidth:i+e}),this.editorRef.current.editor.resize()}},{key:"getIcon",value:function(){return De.a}},{key:"loadp5Lib",value:function(){this.editorRef.current&&this.editorRef.current.editor.completers.push({getCompletions:function(e,t,n,i,a){var s=[];te.forEach((function(e){s.push({value:e,meta:"p5.js"})})),a(null,s)}})}},{key:"compileCallback",value:function(){var e=this;this.state.editsMade&&(this.props.requestCompile(this.props.id),this.setState({editsMade:!1,runningBorder:!0},(function(){return setTimeout((function(){e.setState({runningBorder:!1})}),300)})))}},{key:"render",value:function(){var e=this,t="border border-borderGrey";return Object.keys(this.state.errorLines).length>0&&(t="border border-warningOrange"),this.state.runningBorder&&(t="border border-blue"),this.state.hidden?f.a.createElement("div",null):f.a.createElement("div",null,f.a.createElement(ae,{parentID:this.props.id,ref:this.cristalRef,onResize:this.resizeEditor.bind(this),isResizable:!0,onStartMove:this.props.onStartMove,onStopMove:this.props.onStopMove,onClose:function(){return e.props.onDelete(e.props.id)},onCopy:function(){return e.copyAndOpt()},onOptMove:function(){return e.copyAndOpt(!0)},initialPosition:{x:this.state.x,y:this.state.y},onMove:function(t){return e.setState({x:t.x,y:t.y})},initialScale:this.state.scale,className:"stamp shadow-sm bg-jsArea "+t+" vertex"+this.props.id,title:"Anything",icon:this.getIcon(),makeBigIcon:Re.a,showMakeBig:!0,onMakeBig:function(){e.state.codeSize===ee.codeSize?e.setState({codeSize:ee.bigCodeSize}):e.setState({codeSize:ee.codeSize})}},f.a.createElement("div",{class:"row m-0",onMouseLeave:this.compileCallback.bind(this)},this.renderEditor())))}}]),t}(m.Component),We=n(180),Le=n(74),Be=n(181),Fe=n.n(Be),Ae=n(76),Ye=n.n(Ae),Xe=n(182),_e=n.n(Xe),Pe=n(183),Te=n.n(Pe),Ne=n(187),qe=n.n(Ne),Ge=n(314),Ze=n.n(Ge),Ue=n(315),Je=n.n(Ue),Ve=[{name:"draw",args:"",code:"background(220)"},{name:"setup",args:"",code:"background(220)"},{name:"preload",args:"",code:"background(220)"}],Ke=[{name:"mousePressed",args:"",code:"background(220)"},{name:"keyPressed",args:"",code:"background(220)"}],Qe={name:"draw",args:"",code:"background(220)"},$e={code:"background(220)"},et={code:"background(220)"};var tt=[{name:"world1",data:{blobs:[],console:{consoleHeight:60,consoleWidth:200,hidden:!1,originX:0,originY:0,scale:1,x:432.20689210502405,y:192.56105311996302},fns:[{args:"",code:'\n\n\nnoFill();\nselect("head").html(loadFromGoogleFonts("Orbitron"), true)\ncreateCanvas(500, 300)\n',editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"setup",originX:0,originY:0,scale:1,x:413.402263673433,y:212.66083156349194},{args:"",code:"\n\nreturn \"<link href='https://fonts.googleapis.com/css?family=\" + name + \"' rel='stylesheet'>\"\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"loadFromGoogleFonts",originX:0,originY:0,scale:1,x:431.7677342051545,y:216.67825096520846},{args:"",code:"\n\nstrokeWeight(1); // Default\nline(20, 20, 80, 20);\nstrokeWeight(4); // Thicker\nline(20, 40, 80, 40);\nstrokeWeight(10); // Beastly\nline(20, 70, 80, 70); \n\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"draw5",originX:0,originY:0,scale:1,x:369.25400545500753,y:242.734389253467},{args:"",code:"\n\nbezier(85,20, 10, 10, 90, 90, 15, 80)\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"draw6",originX:0,originY:0,scale:1,x:355.66516706321306,y:233.51016452177277},{args:"",code:"\n\nbezier(85, 20, 10, 10, 90, 90, 15, 80);\nlet steps = 6;\nfill(255);\nfor (let i = 0; i <= steps; i++) {\n  let t = i / steps;\n  // Get the location of the point\n  let x = bezierPoint(85, 10, 90, 15, t);\n  let y = bezierPoint(20, 10, 90, 80, t);\n  // Get the tangent point\n  let tx = bezierTangent(85, 10, 90, 15, t);\n  let ty = bezierTangent(20, 10, 90, 80, t)\n  // Calculate an angle from the tangent points\n  let a = atan2(ty, tx);\n  a += PI;\n  stroke(255, 102, 0);\n  line(x, y, cos(a) * 30 + x, sin(a) * 30 + y);\n  // The following line of code makes a line\n  // inverse of the above line\n  //line(x, y, cos(a)*-30 + x, sin(a)*-30 + y);\n  stroke(0);\n  ellipse(x, y, 5, 5);\n}\n\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"draw7",originX:0,originY:0,scale:1,x:394.095938811217,y:216.5665413323938},{args:"x=mouseX, y=mouseY",code:'\n\nnoStroke()\nfill("red")\nellipse(x, y, 50, 50)\n\n\n\n',editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"myEllipse",originX:0,originY:0,scale:1,x:382.38102683871557,y:164.58666457764454},{args:"x=mouseX, y=mouseY",code:'\n\nmyEllipse(x, y, 50, 50)\nnoFill()\nstroke("black")\nellipse(x, y, 25, 25)\n\n',editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"sketch16",originX:0,originY:0,scale:1,x:425.48793255067324,y:186.7253054428621},{args:"x=millis() % width, y=mouseY",code:'\n\nmyEllipse(x, y, 50, 50)\nnoFill()\nstroke("black")\nellipse(x, y, 25, 25)\n\n',editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"sketch1618",originX:0,originY:0,scale:1,x:407.50608779753236,y:204.8902952275766},{args:"",code:"\n\nbezier(85, 20, 10, 10, 90, 90, 15, 80);\nlet steps = 6;\nfill(255);\nfor (let i = 0; i <= steps; i++) {\n  let t = i / steps;\n  // Get the location of the point\n  let x = bezierPoint(85, 10, 90, 15, t);\n  let y = bezierPoint(20, 10, 90, 80, t);\n  // Get the tangent point\n  let tx = bezierTangent(85, 10, 90, 15, t);\n  let ty = bezierTangent(20, 10, 90, 80, t)\n  // Calculate an angle from the tangent points\n  let a = atan2(ty, tx);\n  a += PI;\n  stroke(255, 102, 0);\n  line(x, y, cos(a) * 30 + x, sin(a) * 30 + y);\n  // The following line of code makes a line\n  // inverse of the above line\n  //line(x, y, cos(a)*-30 + x, sin(a)*-30 + y);\n  stroke(0);\n  ellipse(x, y, 5, 5);\n}\n\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"draw713",originX:0,originY:0,scale:1,x:366.09948270581486,y:244.89195937970564},{args:"",code:"\n\nfill(200,0,0)\nnoStroke()\ntextFont('Orbitron')\nbackground(200,200,0)\ntextSize(mouseX)  \ntext(\"RECO\", 20, mouseY)\n\n",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!1,name:"draw",originX:0,originY:0,scale:1,x:437.181727443347,y:242.75820592253484},{args:" ",code:"\nhtml, body {\n  margin: 0;\n  padding: 0;\n}",editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!0,isHtml:!1,name:"style.css",originX:0,originY:0,scale:1,x:433.3010431096784,y:214.18218448445614},{args:" ",code:'<html>\n  <head>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js"><\/script>\n    <link rel="stylesheet" type="text/css" href="style.css">\n  </head>\n  <body>\n    <script src=\'sketch.js\'><\/script>\n  </body>\n</html>\n',editorHeight:175,editorWidth:300,hidden:!1,iframeHeight:200,iframeWidth:225,isCss:!1,isHtml:!0,name:"index.html",originX:0,originY:0,scale:1,x:380.77750274233944,y:193.77745260465605}],scale:1,originX:0,originY:0,compressedJs:"\u333a\u5b98\u6e8d\u16f6\u7103\u4d95\u68ea\u7028\u14bd\u4282\u4141\u26e6\u7a33\u25b1\u5850\u293b\u0539\u595b\u0cac\u3742\u4113\u2195\u42c8\u2229\u1734\u1d1b\u2d85\u06c6\u7b0b\u1119\u64de\u6d47\u37b7\u59db\u0ca8\u66f6\u73a3\u4ca0\u449e\u7262\u34ba\u1c9b\u6dc4\u2292\u6103\u51c9\u6aca\u290a\u31b9\u1958\u2e8c\u5436\u0b73\u5985\u6650\u3530\u1816\u080c\u6606\u0290\u5053\u742b\u12e9\u544a\u7280\u209c\u4cae\u4757\u1371\x88\u78d8\u696e\u3590\u1a1c\u4cac\u63d2\u3b43\u51d1\u60e6\u3a2f\u17b3\u3109\u65cc\u7c53\u1b0b\u41a5\u665c\u636f\u3697\u58dc\u6e67\u7666\u0b6b\u25b1\u727a\u2220\u1590\u1b98\u2dac\u5202\u5901\u089c\u40e4\u656c\u1e93\u5cdd\u0f2d\u4657\u1b43\u1595\u684e\u3e22\u7680\u2099\u0e4c\u1773\u2e33\u51cd\u68e4\u6f6b\u32ab\u595a\u2ced\u0742\u4189\u24ec\u405e\u2f20\u2232\u5998\u2ead\u4740\u5363\u25b9\u4a50\u3230\u1610\u3101\u0718\u508e\u2008\u7730\u6469\u4632\u2a34\u1a58\u6d6c\u572c\u5191\u531c\u6469\u5132\u1898\u318c\u684c\u5617\u1ba3\u31e7\u1466\u37c7\u199b\u7108\u215e\u100b\u01b7\u1802\u60c4\u657a\u34b2\u5c8a\u0706\u52cc\u21a1\u471c\u0873\u4704\u189a\u7111\u1dc0\u16fc\u21e9\u5f40\u7bca\xd3\u6b9f\u0ec2\u4d8c\u5742\u039b\u5195\u60e6\u203d\u101b\u0ec2\u4cdc\u4021\u3991\u54d4\u5276\u0a66\u37b9\u080a\u1883\u7692\u01e9\xc0\u7640\u6920\u1e1e\u718a\u6764\u0692\u5959\u2481\u7614\u2020\u6210\u1d08\u07a4\u0692\u017e\u1c70\u1441\u6400\u79a3\u7106\u0d0c\u5206\u637b\u0d87\u4a01\u1b6f\u3362\u441c\u0ded\u16e7\u2639\u61e0\u407a\u20e6S\u5431\u02dc\u500a\u6740\u0293\u4801\u2074\u14e2\u1371\u054f\u1cf2\u5740\u034b\u0855\u6401\u2463\u0ab2\u6eee\u4616\u733b\u15b9\u699a\u6f74\u6538\u1531\u43fb\u3727\u2653\u4f20\u5ba4\u75c6\u3a21\u585b\u0c6e\u56c6\u0ba3\u1481\u42dc\u2061\u3733\u5b19\u240c\u6726\u7b6f\u4802\u10e7\u475c\u3090\u0f48\u0c2e\u4616\u7191\u21d1\u7258\u2074\u3c62\u5d58\u2405\u33d2\u0282\u2710\u17cc\u0244\u7200\u61b1\u0e26\u22c2\u0720\u06a0\u4041\u6502\u1f3c\u0b08\u0f25\u4206\u1b7b\u4ca1\u4252\u202a\u1019\u4c08\u0564\u0782\u6103\u4da5\u5d96\u1179\u7400\u43d5\u0d0c\u5206\u337b\u31b1\u5eee\u696e\u33e2\u50791\u0636\u7b23\u1481\u5ac2\u6b65\u3990\u1871\u22b8\u62d6\u4b73\u5995\u64e7\u4522\u7200\u2ed8\u2c4d\u7766\u2e50\u7f45\u7c54\u2dce\u3ee3\u4431\u4f9c\u700c\u1f30\u02e5\u4ad8\u6c69\u3839\u720f\u46a5\u420e\u2012\u79f7\u5c05\u776d\u3ca2\u7209\u47ad\u56f7\u2b9b\u1560\u5840\u79c6\u052c\u7940\u5a0d\u66f5\u1e32\u50a7\u4c05\u2422\u3932\u5908\u4521\u2cf5\u6186\u1010\u53c8\u04e2\u662e\u5cda\u6cae\u4636\u4189\u5b61\u3996\u7dcd\u23f4\u0149\u5ce0\u3d62\u4113\u09b1\u42c6\u6bd1\u3b19\u3900\u6c86\u5c47\u369b\u50c4\u7188\u7669\u3636\u1a5c\u6505\u1202\u2903\u5da5\u48e8\u68ff@\u3fc0\u101f\u7008\u0758\u102c\u6267\u7f04\u06ff\u4103\u3fe0\u40df\u7820\u37fc\u081b\u7f04\u06ff\u4103\u3fe0\u40df\u7820\u37fc\u081b\u7f04\u06ea\u5d7f\u6081\u5ff0\u206f\u7c10\u1bfe\u040d\u7f82\u037f\u6081\u5ff0\u206f\u7c10\u1bfe\u040d\u7f82\u037d\u2081\u5e40\u15e7\u180a\u73cc\u0282\u1818\u0b0c\u059c\u5031\u0748\u1011\u68ca\u7874\u7204\u13ca\u04fd\x89\u4139\u2429\u44c2\u636b\u33b9\u1bdd\u2dcc\u4c53\u2629\u6318\u56a6\u697a\u3294\u3980\u7f85\u1202\u0628\u4ca0\u44a4\u4543\u2791\u3980\u6258\u51b5\u4f30\u0d0c\u8002\u8001"}}],nt=(n(88),n(176),n(302),function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(k.a)(this,Object(C.a)(t).call(this,e))).editorRef=f.a.createRef(),n.minPickerHeight=30,n.minJsImporterHeight=30,n.topBarHeight=60,n.minWidth=150,n.minNonSideBarWidth=30,n.editorRef=f.a.createRef(),n.importButtonHeight=50,n.state={jsImporterHeight:110,sideBarWidth:200,pickerHeight:window.innerHeight-(n.topBarHeight+n.importButtonHeight+110),pickerScrollEnabled:!0,codeHasError:!1,code:"\n// import unstructured Javascript code or individual functions\n\n// like the below, feel free to delete: \nfunction noiseWave() {\n\xa0\xa0let noiseScale=0.02;\n\xa0\xa0background(0);\n\xa0\xa0for (let x=0; x < width; x++) {\n\xa0\xa0\xa0\xa0let noiseVal = noise((mouseX+x)*noiseScale, mouseY*noiseScale);\n\xa0\xa0\xa0\xa0stroke(noiseVal*255);\n\xa0\xa0\xa0\xa0line(x, mouseY+noiseVal*80, x, height);\n\xa0\xa0}\n}"},n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.updateControlBarDimensions(this.state.sideBarWidth,this.topBarHeight),window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function(e){this.setState({pickerHeight:window.innerHeight-(this.topBarHeight+this.importButtonHeight+this.state.jsImporterHeight)}),this.state.sideBarWidth>window.innerWidth-this.minNonSideBarWidth&&this.setState({sideBarWidth:window.innerWidth-this.minNonSideBarWidth})}},{key:"renderSideBar",value:function(){var e=this;return f.a.createElement("div",{class:"bg-white border border-borderGrey shadow-sm",onMouseOver:function(){e.props.disablePan(!0),e.props.disableZoom(!0)},onMouseOut:function(){e.props.disablePan(!1),e.props.disableZoom(!1)},style:{position:"absolute",top:this.topBarHeight,left:0,height:window.innerHeight-this.topBarHeight,zIndex:1e18}},f.a.createElement(Se.Resizable,{width:this.state.sideBarWidth,onResize:function(t){var n=e.state.sideBarWidth+t.movementX;n>e.minWidth&&n<=window.innerWidth-e.minNonSideBarWidth&&e.setState({sideBarWidth:n},(function(){return e.editorRef.current.editor.resize()}))},onResizeStop:function(t){return e.props.updateControlBarDimensions(e.state.sideBarWidth,e.topBarHeight)},height:window.innerHeight-this.topBarHeight,axis:"x",handle:this.renderSideBarResizeHandle()},f.a.createElement("div",null,this.renderLayerPicker(),this.renderJsImporter(),this.renderImportButton())))}},{key:"parseCode",value:function(){var e=this;try{var t=Ye.a.jsToStamps(this.state.code);t.fns.map((function(t){e.props.addFnStamp(t)})),t.blobs.map((function(t){e.props.addBlobStamp(t)})),this.setState({code:""})}catch(n){this.setState({codeHasError:!0})}}},{key:"renderJsImporter",value:function(){var e=this;return f.a.createElement("div",{class:"bg-jsArea",style:{width:this.state.sideBarWidth,height:window.innerHeight-(this.state.pickerHeight+this.topBarHeight)}},f.a.createElement(ce.a,{style:{width:this.state.sideBarWidth,height:window.innerHeight-(this.state.pickerHeight+this.topBarHeight+this.importButtonHeight),background:"transparent"},mode:"javascript",theme:"p5",onChange:function(t){return e.setState({code:t,codeHasError:!1})},name:"jsImporter",fontSize:ee.codeSize,showPrintMargin:!1,wrapEnabled:!0,showGutter:!1,highlightActiveLine:!1,onMouseOver:function(){return e.props.disablePan(!0)},onMouseOut:function(){return e.props.disablePan(!1)},value:this.state.code,ref:this.editorRef,setOptions:{tabSize:2,hasCssTransforms:!0}}))}},{key:"renderImportButton",value:function(){var e="Import Javascript",t="grey";return this.state.codeHasError&&(e="Syntax Error",t="warningOrangeDark"),f.a.createElement("div",{class:"p-2",style:{position:"absolute",bottom:-2,left:-5,width:"100%"}},f.a.createElement("button",{class:"btn btn-block shadow-sm m-1 bg-"+t+" border-borderGrey",style:{fontSize:ee.codeSize},onClick:this.parseCode.bind(this),disabled:this.state.codeHasError},e))}},{key:"renderLayerPicker",value:function(){var e=this,t=[];this.props.pickerData.map((function(n){if(n.status)var i=_e.a;else i=Te.a;var a=1,s=n.centerCallback;!1===n.status&&(a=.5,s=function(){return null}),n.name?t.push(f.a.createElement("div",{class:"border-bottom border-borderGrey"},f.a.createElement("div",{style:{opacity:a},class:"d-flex justify-content-between p-1 pl-2 pr-3"},f.a.createElement("div",{clas:"row border-bottom",style:{overflow:"hidden"}},e.createIcon("type"+n.id.toString(),n.icon,18,null,.3),f.a.createElement("b",{class:"text-greyText picker ml-1",onClick:function(){return s(e.state.sideBarWidth,e.topBarHeight)}},n.name)),e.createIcon("hide"+n.id.toString(),i,18,n.hideCallback,.5)))):t.push(f.a.createElement("br",null))}));var n="hidden";return this.state.pickerScrollEnabled&&(n="scroll"),f.a.createElement(Se.Resizable,{width:this.state.sideBarWidth,onResize:function(t){var n=e.state.pickerHeight+t.movementY;n>e.minPickerHeight&&n<window.innerHeight-(e.topBarHeight+e.minJsImporterHeight+ +e.importButtonHeight)&&e.setState({pickerHeight:e.state.pickerHeight+t.movementY,jsImporterHeight:e.state.jsImporterHeight-t.movementY},(function(){return e.editorRef.current.editor.resize()}))},onResizeStart:function(){return e.setState({pickerScrollEnabled:!1})},onResizeStop:function(){return e.setState({pickerScrollEnabled:!0})},height:this.state.pickerHeight,axis:"y",handle:this.renderPickerResizeHandle()},f.a.createElement("div",null,f.a.createElement("div",{className:" bg-white",style:{overflow:"hidden","overflow-y":n,width:this.state.sideBarWidth,height:this.state.pickerHeight}},t)))}},{key:"createIcon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.3,s=function(){$()("."+e).css({opacity:"1"})},r=function(){$()("."+e).css({opacity:a})};return i||(s=function(){},r=function(){}),f.a.createElement(t,{style:{opacity:a,height:n,width:n},className:" m-1 text-greyText "+e,onClick:i,onMouseOver:s,onMouseOut:r})}},{key:"renderSideBarResizeHandle",value:function(){return f.a.createElement("div",{style:{width:10,cursor:"ew-resize",height:"100%",right:0,top:0,position:"absolute",background:"transparent",color:"transparent"}},"hi")}},{key:"renderPickerResizeHandle",value:function(){return f.a.createElement("div",{className:"border-bottom border-borderGrey border-top bg-grey",style:{width:"100%",cursor:"ns-resize",height:15,right:0,bottom:0,position:"absolute",background:"transparent",color:"transparent"}},"hi")}},{key:"renderTopBar",value:function(){var e=this;return f.a.createElement("div",{class:"bg-white border border-borderGrey shadow-sm row justify-content-between",style:{position:"absolute",top:0,left:15,height:this.topBarHeight+2,width:"100%",zIndex:1e18}},f.a.createElement(it,{iconType:Ze.a,uniqueClass:"download",iconCallback:function(){var t=e.props.getFileData().js,n=new Blob([t],{type:"text/plain;charset=utf-8"});Object(oe.saveAs)(n,"sketch.js")},tooltipText:"download javascript",alignLeft:!0}),f.a.createElement("div",{class:"row"},f.a.createElement(it,{iconType:he.a,uniqueClass:"basic",iconCallback:function(){return e.props.addFnStamp(Qe)},tooltipText:"new function stamp"}),f.a.createElement(it,{iconType:ve.a,uniqueClass:"builtIn",iconCallback:null,dropDownData:Ve.map((function(t){return{name:t.name,callback:function(){return e.props.addFnStamp(t)}}})),tooltipText:"new built in function"}),f.a.createElement(it,{iconType:ye.a,uniqueClass:"listenerFns",iconCallback:null,dropDownData:Ke.map((function(t){return{name:t.name,callback:function(){return e.props.addFnStamp(t)}}})),tooltipText:"new listener"}),f.a.createElement(it,{iconType:De.a,uniqueClass:"anything",iconCallback:function(){return e.props.addBlobStamp(et)},dropDownData:[{name:"variable",callback:function(){return e.props.addBlobStamp(et)}},{name:"comment",callback:function(){return e.props.addBlobStamp($e)}}],tooltipText:"new anything stamp"})),f.a.createElement(it,{iconType:Je.a,uniqueClass:"worlds",iconCallback:null,dropDownData:tt.map((function(t){return{name:t.name,callback:function(){return e.props.loadStamperFile(t.data)}}})),tooltipText:"add new world",alignRight:!0}))}},{key:"render",value:function(){return f.a.createElement("div",null,this.renderSideBar(),this.renderTopBar())}}]),t}(m.Component)),it=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(k.a)(this,Object(C.a)(t).call(this,e))).state={down:!1,mouseOverDropDown:!1},n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"onMouseDown",value:function(){!1===this.state.mouseOverDropDown&&this.setState({down:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onMouseDown.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onMouseDown)}},{key:"createIcon",value:function(e,t,n,i){var a=this,s=n;return t||(t=function(){return a.setState({down:!a.state.down})},s+="expand"),f.a.createElement(e,{style:{opacity:".5",height:i,width:i},className:" text-greyText "+s,onClick:t,onMouseOver:function(){a.setState({mouseOverDropDown:!0},(function(){return $()("."+s).css({opacity:"1"})}))},onMouseOut:function(){a.setState({mouseOverDropDown:!1},(function(){(!1===a.state.down||e!=qe.a&&a.props.iconCallback)&&$()("."+s).css({opacity:".5"})}))}})}},{key:"renderDropDowns",value:function(){var e=this;if(!1===this.state.down)return null;var t=this.props.dropDownData.map((function(t){return f.a.createElement("div",{class:e.props.uniqueClass+t.name+" picker text-greyText p-2 pl-3 pr-3",onMouseOver:function(){e.setState({mouseOverDropDown:!0}),$()("."+e.props.uniqueClass+t.name).css({background:"rgb(240, 240, 240)"})},onMouseOut:function(){e.setState({mouseOverDropDown:!1}),$()("."+e.props.uniqueClass+t.name).css({background:"transparent"})},onClick:function(){t.callback(),e.setState({down:!1})}},t.name)})),n="default";return this.props.alignRight&&(n=0),f.a.createElement("div",{class:"bg-white border border-borderGrey rounded mt-2",style:{position:"absolute",right:n}},t)}},{key:"renderTooltip",value:function(){if(this.props.alignRight)return f.a.createElement("div",{class:"picker text-greyText tooltip"+this.props.uniqueClass,style:{opacity:"0",position:"absolute",right:15,top:5,transition:"all .2s ease-out"}},this.props.tooltipText);if(this.props.alignLeft)return f.a.createElement("div",{class:"picker text-greyText tooltip"+this.props.uniqueClass,style:{opacity:"0",position:"absolute",left:15,top:5,transition:"all .2s ease-out"}},this.props.tooltipText);var e="-135px";if(this.props.dropDownData)e="-130px";return f.a.createElement("div",{style:{position:"absolute",top:5}},f.a.createElement("div",{style:{position:"absolute",width:300,left:e}},f.a.createElement("div",{class:"picker text-greyText tooltip"+this.props.uniqueClass,style:{opacity:"0",textAlign:"center",transition:"all .2s ease-out"}},this.props.tooltipText)))}},{key:"render",value:function(){var e=this;this.state.down?$()("."+this.props.uniqueClass+"expand").css({opacity:"1"}):$()("."+this.props.uniqueClass+"expand").css({opacity:".5"});var t=null;return this.props.dropDownData&&(t=this.createIcon(qe.a,(function(){return e.setState({down:!e.state.down})}),this.props.uniqueClass+"expand",20)),f.a.createElement("div",{class:"m-3 mt-4"},this.renderTooltip(),f.a.createElement("div",{onMouseOver:function(){return $()(".tooltip"+e.props.uniqueClass).css({opacity:".5"})},onMouseOut:function(){return $()(".tooltip"+e.props.uniqueClass).css({opacity:"0"})}},this.createIcon(this.props.iconType,this.props.iconCallback,this.props.uniqueClass,22),t),this.renderDropDowns())}}]),t}(m.Component);n(88),n(176);if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)var at=window.require("electron").ipcRenderer;else at=!1;var st=n(302),rt=function(e){function t(e){var n,i;return Object(x.a)(this,t),(i=Object(k.a)(this,Object(C.a)(t).call(this,e))).state=(n={fnStamps:{},scale:1,counter:0,blobStamps:{},htmlID:-1,cssID:-1,consoleStamp:null,setupExists:!0,htmlAsksForCss:!0,htmlAsksForJs:!0,lines:[],lineData:[],traversalGraph:{},consoleId:-1,numToggles:0,originX:0,originY:0},Object(S.a)(n,"scale",1),Object(S.a)(n,"originCristal",null),Object(S.a)(n,"pickerData",[]),Object(S.a)(n,"sideBarWidth",0),Object(S.a)(n,"topBarHeight",0),n),i.counterMutex=new We.Mutex,i.aceRef=f.a.createRef(),i.newStampMarginVariance=100,i.newStampMargin=20,at&&at.on("writeToView",(function(e,t){return i.loadStamperFile(t.stamper)})),at&&at.on("requestSave",(function(e,t){i.sendSaveData()})),i}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.loadStamperFile(st.getSetup()),document.addEventListener("mousedown",this.onGlobalMouseDown)}},{key:"updateControlBarDimensions",value:function(e,t){console.log(e,t),this.setState({sideBarWidth:e,topBarHeight:t})}},{key:"loadStamperFile",value:function(e){var t=this;this.setState({fnStamps:{},blobStamps:{},counter:0,htmlID:-1,cssID:-1,scale:1,consoleStamp:null,consoleId:-1,originX:0,originY:0,originCristal:null},(function(){console.log(e),t.setState({scale:e.scale,originX:e.originX,originY:e.originY},(function(){t.addConsoleStamp(e.console),e.fns.map((function(e){return t.addFnStamp(e)})),e.blobs.map((function(e){return t.addBlobStamp(e)})),t.setOriginCristal()}))}))}},{key:"getIframeErrorCallBack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=JSON.stringify(e);return"\n  // window.addEventListener('error', function(e) { \n  //   console.log(\"addEventListener\")\n  //     logToConsole(e.message, e.lineno)\n  //   }, false);\n\nwindow.onerror = function (message, url, lineno, colno) {\n\n  logToConsole(message, lineno)\n}\n\nfunction logToConsole(message, lineno){\n\n      var adjLineNum = -1\n      var stampId = -1\n      var ranges = ".concat(n,"\n\n      ranges.map(range => {\n        var start = range.start\n        var end = range.end\n        var id = range.id\n        var isFN = range.isFN\n        var isInRange = start + ").concat(t," < lineno + 1 && lineno -1 < end + ").concat(t,"\n\n        \n        if(isInRange){\n          adjLineNum = lineno - start - ").concat(t," + 1\n          stampId = id\n          if(range.isFn){\n            adjLineNum -= 1\n          }\n        }\n      })\n\n      window.parent.postMessage({type:\"error\", message:message, lineno:adjLineNum, id:stampId}, '*')\n\n    }")}},{key:"getHTML",value:function(e){if(this.state.htmlID in this.state.fnStamps===!1||this.state.cssID in this.state.fnStamps===!1)return"";if(e===this.state.htmlID||e===this.state.cssID)var t="",n=[];else{var i=this.getRunnableCode(e);t=i.runnableCode,n=i.ranges}var a=this.state.fnStamps[this.state.htmlID],s=this.state.fnStamps[this.state.cssID],r=a.ref.current.state.code,o=Fe.a.load(r,{withStartIndices:!0}),l="<script type='text/javascript'>"+t+"<\/script>",c="<style>"+s.ref.current.state.runnableInnerCode+"</style>",d=o(l),h=o(c),u=o('[href="style.css"]').length>0;!1===u&&!0===this.state.htmlAsksForCss?(this.state.consoleStamp.ref.current.logToConsole("Stamper Error: Your index.html is missing a div for style.css. Make sure you're linking to style.css and not another stylesheet."),this.state.fnStamps[this.state.htmlID].ref.current.addErrorLine(-1),this.setState({htmlAsksForCss:u})):!0===u&&!1===this.state.htmlAsksForCss&&this.setState({htmlAsksForCss:u});var p=o('[src="sketch.js"]').length>0;!1===p&&!0===this.state.htmlAsksForJs?(this.state.consoleStamp.ref.current.logToConsole("Stamper Error: Your index.html is missing a div for sketch.js. Make sure you're linking to sketch.js and not another sketch file."),this.state.fnStamps[this.state.htmlID].ref.current.addErrorLine(-1),this.setState({htmlAsksForJs:p})):!0===p&&!1===this.state.htmlAsksForJs&&this.setState({htmlAsksForJs:p}),o('[href="style.css"]').replaceWith(h),o("head").prepend("<script class='errorListener' >"+this.getIframeErrorCallBack(n)+"<\/script>");for(var m=o.html(),f=0,g=0;g<m.length&&("\n"===m[g]&&(f+=1),"sketch.js"!==m.substr(g,"sketch.js".length));g++);return o(".errorListener").replaceWith("<script class='errorListener' >"+this.getIframeErrorCallBack(n,f)+"<\/script>"),o('[src="sketch.js"]').replaceWith(d),o.html()}},{key:"addErrorLine",value:function(e,t){t in this.state.fnStamps?this.state.fnStamps[t].ref.current.addErrorLine(e):t in this.state.blobStamps&&this.state.blobStamps[t].ref.current.addErrorLine(e)}},{key:"manualZoom",value:function(e,t,n){1!==this.state.scale&&(Object.values(this.state.fnStamps).map((function(i){return i.ref.current.cristalRef.current.zoom(e,t,n)})),Object.values(this.state.blobStamps).map((function(i){return i.ref.current.cristalRef.current.zoom(e,t,n)})),this.state.console.ref.current.zoom(e,t,n),this.cristalRef.current.zoom(e,t,n),this.setState({scale:e}))}},{key:"setInitialPosition",value:function(e){return"x"===e?this.state.sideBarWidth+this.newStampMargin+Math.random()*this.newStampMarginVariance:"y"===e?this.state.topBarHeight+this.newStampMargin+Math.random()*this.newStampMarginVariance:void 0}},{key:"addConsoleStamp",value:function(e){var t={x:this.setInitialPosition("x"),y:this.setInitialPosition("y"),consoleWidth:2*ee.defaultEditorWidth/3,consoleHeight:ee.defaultVarEditorHeight,hidden:!1,originX:0,originY:0};Object.keys(t).map((function(n){n in e&&(t[n]=e[n])})),e=t,this.createConsoleStamp(e)}},{key:"createConsoleStamp",value:function(e){var t,n,i,a,s,r,o,l,c,d;return y.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return n=e.x,i=e.y,a=e.consoleWidth,s=e.consoleHeight,h.next=3,y.a.awrap(this.counterMutex.acquire());case 3:r=h.sent,o=this.state.counter,this.setState({counter:o+1},r()),l=f.a.createRef(),c=f.a.createElement(He,(t={initialScale:this.state.scale,ref:l,initialPosition:{x:n,y:i},id:o,onStartMove:this.onStartMove.bind(this),onStopMove:this.onStopMove.bind(this)},Object(S.a)(t,"initialScale",this.state.scale),Object(S.a)(t,"disablePan",this.disablePan.bind(this)),Object(S.a)(t,"starterConsoleWidth",a),Object(S.a)(t,"starterConsoleHeight",s),Object(S.a)(t,"addErrorLine",this.addErrorLine.bind(this)),Object(S.a)(t,"initialHidden",e.hidden),Object(S.a)(t,"initialOriginX",e.originX),Object(S.a)(t,"initialOriginY",e.originY),t)),d={elem:c,ref:l},this.setState({consoleStamp:d,consoleId:o});case 10:case"end":return h.stop()}}),null,this)}},{key:"addFnStamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return null},s={name:"sketch",code:"rect(50, 50, 50, 50)",args:"x=mouseX, y=mouseY",x:this.setInitialPosition("x"),y:this.setInitialPosition("y"),iframeDisabled:!1,editorWidth:ee.defaultEditorWidth,editorHeight:ee.defaultEditorHeight-ee.brHeight,iframeWidth:ee.defaultIframeWidth,iframeHeight:ee.defaultEditorHeight,isHtml:!1,isCss:!1,hidden:!1,originX:0,originY:0};Object.keys(s).map((function(t){t in e&&(s[t]=e[t])})),e=s,n&&(e.x+=2*ee.copyOffset*this.state.scale,e.y+=2*ee.copyOffset*this.state.scale);var r=e.name+(this.state.counter+1).toString();return t&&(e.name=r),e.iframeDisabled=i,this.createFnStamp(e,a),this.refreshBlobStamps(this.state.blobStamps),r}},{key:"createFnStamp",value:function(e,t){var n,i,a,s,r,o,l,c,d,h,u,p,m,g,v,b,S,x,w=this;return y.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:return n=e.name,i=e.code,a=e.args,a=e.args,s=e.x,r=e.y,o=e.iframeDisabled,l=e.editorWidth,c=e.editorHeight,d=e.iframeWidth,h=e.iframeHeight,u=e.isHtml,p=e.isCss,m=e.hidden,k.next=3,y.a.awrap(this.counterMutex.acquire());case 3:g=k.sent,v=this.state.counter,this.setState({counter:v+1},g()),b=this.state.fnStamps,S=f.a.createRef(),x=f.a.createElement(we,{ref:S,isHtml:u,isCss:p,starterCode:i,starterArgs:a,starterName:n,errorLines:{},starterEditorWidth:l,starterEditorHeight:c,initialPosition:{x:s,y:r},id:v,deleteFrame:this.deleteFrame,initialHidden:m,initialOriginX:e.originX,initialOriginY:e.originY,onStartMove:this.onStartMove.bind(this),onStopMove:this.onStopMove.bind(this),addStamp:this.addFnStamp.bind(this),onDelete:this.onDelete.bind(this),initialScale:this.state.scale,starterIframeWidth:d,starterIframeHeight:h,checkAllNames:this.checkAllNames.bind(this),disablePan:this.disablePan.bind(this),iframeDisabled:o,requestCompile:this.requestCompile.bind(this),getHTML:this.getHTML.bind(this),getScale:function(){return w.state.scale},addNewIframeConsole:this.addNewIframeConsole.bind(this)}),b[v]={elem:x,ref:S},this.setState({fnStamps:b},t),u?this.setState({htmlID:v}):p&&this.setState({cssID:v});case 12:case"end":return k.stop()}}),null,this)}},{key:"addNewIframeConsole",value:function(e){null!==this.state.consoleStamp&&this.state.consoleStamp.ref.current.addNewIframeConsole(e)}},{key:"addBlobStamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},i={code:"var z = 10",x:this.setInitialPosition("x"),y:this.setInitialPosition("y"),editorWidth:2*ee.defaultEditorWidth/3,editorHeight:ee.defaultVarEditorHeight,hidden:!1,originX:0,originY:0,codeSize:ee.codeSize};Object.keys(i).map((function(t){t in e&&(i[t]=e[t])})),e=i,t&&(e.x+=2*ee.copyOffset*this.state.scale,e.y+=2*ee.copyOffset*this.state.scale),this.createBlobStamp(e,n)}},{key:"createBlobStamp",value:function(e,t){var n,i,a,s,r,o,l,c,d,h,u;return y.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return n=e.x,i=e.y,a=e.code,s=e.editorWidth,r=e.editorHeight,e.errorLines,o=e.hidden,p.next=3,y.a.awrap(this.counterMutex.acquire());case 3:l=p.sent,c=this.state.counter,this.setState({counter:c+1},l()),d=this.state.blobStamps,h=f.a.createRef(),u=f.a.createElement(Ie,{ref:h,starterCode:a,errorLines:{},initialPosition:{x:n,y:i},id:c,starterCodeSize:e.codeSize,deleteFrame:this.deleteFrame,initialHidden:o,initialOriginX:e.originX,initialOriginY:e.originY,onStartMove:this.onStartMove.bind(this),onStopMove:this.onStopMove.bind(this),addStamp:this.addBlobStamp.bind(this),onDelete:this.onDelete.bind(this),initialScale:this.state.scale,disablePan:this.disablePan.bind(this),starterEditorWidth:s,starterEditorHeight:r,requestCompile:this.requestCompile.bind(this),getExportableCode:this.getExportableCode.bind(this)}),d[c]={elem:u,ref:h},this.setState({blobStamps:d},t);case 11:case"end":return p.stop()}}),null,this)}},{key:"getFileData",value:function(){if(this.state.htmlID in this.state.fnStamps!==!1&&this.state.cssID in this.state.fnStamps!==!1){var e=this.state.fnStamps[this.state.htmlID],t=this.state.fnStamps[this.state.cssID];return{html:e.ref.current.state.code,stamper:this.getAllData(),css:t.ref.current.state.code,js:this.getExportableCode()}}}},{key:"sendSaveData",value:function(){var e=this.getFileData();e&&at&&at.send("save",e)}},{key:"checkForSetup",value:function(){for(var e=!1,t=Object.values(this.state.fnStamps),n=0;n<t.length;n++){"setup"===t[n].ref.current.state.name&&(e=!0)}return this.state.setupExists&&!1===e&&this.state.consoleStamp.ref.current.logToConsole("Stamper Error: You don't have a setup. This will constrain your canvas to a default width and height."),this.setState({setupExists:e}),e}},{key:"requestCompile",value:function(e){this.state.consoleStamp.ref.current.logToConsole("Updated code","debug"),this.setLayerPicker();var t=this.checkAllNames();this.checkForSetup(),this.sendSaveData(),Object.values(this.state.fnStamps).map((function(e){var n=e.ref.current;if(n){var i=[];n.props.id in t&&!1===n.props.isCss&&!1===n.props.isHtml&&i.push(0),n.clearErrorsAndUpdate(i)}})),Object.values(this.state.blobStamps).map((function(e){var n=e.ref.current;if(n){var i=[];n.props.id in t&&!1===n.props.isCss&&!1===n.props.isHtml&&i.push(0),n.clearErrorsAndUpdate(i)}}))}},{key:"compileStamp",value:function(e,t,n,i){var a=this;if(!(e in t)){if(t[e]="",e in this.state.fnStamps)var s=this.state.fnStamps[e].ref.current;else{if(!(e in this.state.blobStamps))return;s=this.state.blobStamps[e].ref.current}if(s){var r=[];if(s.props.id in i&&!1===s.props.isCss&&!1===s.props.isHtml&&r.push(0),s.clearErrorsAndUpdate(r),e in n===!1)return;n[e].map((function(e){return a.compileStamp(e,t,n,i)}))}}}},{key:"setOriginCristal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=f.a.createElement(ae,{parentID:-1,panDisabled:t,className:" bg-grey",closeHidden:!0,headerHidden:!0,copyHidden:!0,isResizable:!1,initialPosition:{x:this.state.originX,y:this.state.originY},initialScale:this.state.scale,onStopMove:function(t){return e.setState({originX:t.x,originY:t.y,scale:t.scale})}});this.setState({originCristal:n})}},{key:"disablePan",value:function(e){this.setOriginCristal(e),Object.values(this.state.fnStamps).map((function(t){var n=t.ref.current.cristalRef;n.current&&n.current.disablePan(e)})),Object.values(this.state.blobStamps).map((function(t){var n=t.ref.current.cristalRef;n.current&&n.current.disablePan(e)}));var t=this.state.consoleStamp.ref.current.cristalRef;t.current&&t.current.disablePan(e)}},{key:"disableZoom",value:function(e){this.setOriginCristal(e),Object.values(this.state.fnStamps).map((function(t){var n=t.ref.current.cristalRef;n.current&&n.current.disableZoom(e)})),Object.values(this.state.blobStamps).map((function(t){var n=t.ref.current.cristalRef;n.current&&n.current.disableZoom(e)}));var t=this.state.consoleStamp.ref.current.cristalRef;t.current&&t.current.disableZoom(e)}},{key:"checkAllNames",value:function(){var e=this,t={};Object.values(this.state.fnStamps).map((function(e){if(e.ref.current){var n=e.ref.current.state.name;n in t||(t[n]=0),t[n]+=1}}));var n={};return Object.values(this.state.fnStamps).map((function(i){if(i.ref.current){i.ref.current;var a=i.ref.current.state.name;t[a]>1&&(n[i.ref.current.props.id]="",e.state.consoleStamp.ref.current.logToConsole("Stamper Error: Multiple functions shouldn't have the same name. Consider channging one of your ".concat(a,"s to something else.")))}})),n}},{key:"getExportableCode",value:function(){var e=this,t=null;return Object.values(this.state.fnStamps).map((function(n){"draw"===n.ref.current.state.name&&(t=e.getRunnableCode(n.ref.current.props.id))})),t?t.runnableCode:(Object.values(this.state.fnStamps).map((function(n){"setup"===n.ref.current.state.name&&(t=e.getRunnableCode(n.ref.current.props.id))})),t?t.runnableCode:(Object.values(this.state.fnStamps).map((function(n){!1===n.ref.current.props.isHtml&&!1===n.ref.current.props.isCss&&(t=e.getRunnableCode(n.ref.current.props.id))})),t?t.runnableCode:""))}},{key:"getNumLines",value:function(e){for(var t=0,n=0;n<e.length;n++)"\n"===e[n]&&(t+=1);return t}},{key:"addCodeBlock",value:function(e,t,n,i,a,s){e=e.trim()+"\n";var r=a,o=a+this.getNumLines(e)-1;return n.push(e),i.push({start:r,end:o,id:t,isFn:s}),o+1}},{key:"setLines",value:function(){var e=[],t=220-15*this.state.scale,n={borderColor:"rgb(".concat(t,", ").concat(t,", ").concat(t,")"),borderWidth:1};this.state.lineData.map((function(t){e.push(f.a.createElement(Le.SteppedLineTo,Object.assign({},n,{from:"vertex"+t[0],to:"vertex"+t[1],orientation:"v"})))})),this.setState({lines:e})}},{key:"setLineData",value:function(){var e=this,t={},n=[],i=[],a=-1,s={};return Object.keys(this.state.blobStamps).map((function(i){var a=e.state.blobStamps[i].ref.current.state.code,s=Ye.a.getIdentifiers(a);s&&(s.declared.map((function(e){return t[e]=i})),s.undeclared.map((function(e){return n.push([e,i])})))})),Object.keys(this.state.fnStamps).map((function(i){var s=e.state.fnStamps[i].ref.current;"setup"===s.state.name&&(a=i);var r=s.state,o="function ".concat(r.name,"(").concat(r.args,"){\n").concat(r.code,"\n}"),l=Ye.a.getIdentifiers(o);l&&(l.declared.map((function(e){return t[e]=i})),l.undeclared.map((function(e){return n.push([e,i])})))})),n.map((function(e){var n=e[0],a=e[1],r=t[n];r&&a&&(i.push([a,r]),r in s===!1&&(s[r]=[]),s[r].push(a))})),Object.keys(this.state.fnStamps).map((function(t){t!=e.state.htmlID&&t!=e.state.cssID&&t!=a&&(i.push([t,a]),a in s===!1&&(s[a]=[]),s[a].push(t))})),this.setState({lineData:i},(function(){return e.setLines()})),Object.keys(this.state.fnStamps).map((function(t){t!=e.state.htmlID&&t!=e.state.cssID&&(e.state.htmlID in s===!1&&(s[e.state.htmlID]=[]),s[e.state.htmlID].push(t))})),s[this.state.cssID]=[this.state.htmlID],s}},{key:"getRunnableCode",value:function(e){var t,n=this,i=[],a=[],s=1;if(Object.values(this.state.blobStamps).map((function(e){t=e.ref.current.state.code,s=n.addCodeBlock(t,e.ref.current.props.id,i,a,s,!1)})),Object.values(this.state.fnStamps).map((function(e){if("draw"!=e.ref.current.state.name&&!1===e.ref.current.props.isCss&&!1===e.ref.current.props.isHtml){var r=e.ref.current.state;t="function ".concat(r.name,"(").concat(r.args,"){\n").concat(r.code,"\n}"),s=n.addCodeBlock(t,e.ref.current.props.id,i,a,s,!0)}})),e in this.state.fnStamps==0||null===this.state.fnStamps[e].ref.current)return i.join("");var r=this.state.fnStamps[e].ref.current,o=r.state;if("draw"===o.name){var l="function ".concat(o.name,"(").concat(o.args,"){\n").concat(o.code,"\n}");s=this.addCodeBlock(l,r.props.id,i,a,s,!0)}else"setup"===o.name||(t="function draw(){\n".concat(o.name,"()\n}"),s=this.addCodeBlock(t,-1,i,a,s,!1));return{ranges:a,runnableCode:i.join("")}}},{key:"onDelete",value:function(e){var t=this.state.fnStamps,n=this.state.blobStamps;e in t?(at&&at.send("edited"),delete t[e]):e in n&&(at&&at.send("edited"),delete n[e]),this.refreshFnStamps(t),this.refreshBlobStamps(n)}},{key:"refreshConsoleStamp",value:function(e){var t=this,n=e.ref.current.getData();this.setState({consoleStamp:null},(function(){return t.addConsoleStamp(n)}))}},{key:"getAllData",value:function(){var e={fns:[],blobs:[],scale:this.state.scale,console:this.state.consoleStamp.ref.current.getData(),originX:this.state.originX,originY:this.state.originY};return Object.values(this.state.fnStamps).map((function(t){return e.fns.push(t.ref.current.getData())})),Object.values(this.state.blobStamps).map((function(t){return e.blobs.push(t.ref.current.getData())})),e}},{key:"refreshFnStamps",value:function(e){var t=this,n=[];for(var i in e){var a=e[i].ref.current.getData();n.push(a)}this.setState({fnStamps:{}},(function(){return n.map((function(e){return t.addFnStamp(e)}))}))}},{key:"refreshBlobStamps",value:function(e){var t=this,n=[];for(var i in e){var a=e[i].ref.current.getData();n.push(a)}this.setState({blobStamps:{}},(function(){return n.map((function(e){return t.createBlobStamp(e)}))}))}},{key:"onStartMove",value:function(){var e=this.state.fnStamps;for(var t in e){e[t].ref.current.setIframeDisabled(!0)}this.setState({lines:[]})}},{key:"onStopMove",value:function(e){var t=this.state.fnStamps;for(var n in t){t[n].ref.current.setIframeDisabled(!1)}this.setLines()}},{key:"centerOnStamp",value:function(e,t,n){var i;if(e in this.state.fnStamps?i=this.state.fnStamps[e].ref.current:e in this.state.blobStamps?i=this.state.blobStamps[e].ref.current:this.state.consoleStamp.ref.current&&e===this.state.consoleStamp.ref.current.props.id&&(i=this.state.consoleStamp.ref.current),i){var a=i.cristalRef.current;if(a){var s=a.state.x,r=a.state.y,o=a.state.width,l=a.state.height,c=(window.innerWidth-t)/2+t-o/2*this.state.scale,d=(window.innerHeight-n)/2+n-l/2*this.state.scale;this.manualPan(c-s,d-r),a.changeZIndex()}}}},{key:"manualPan",value:function(e,t){var n=this,i=$()(".stamp").css("transition");$()(".stamp").css({transition:"all .5s ease"}),setTimeout((function(){return $()(".stamp").css({transition:i})}),500),this.setState({originX:this.state.originX+e,originY:this.state.originY+t,originCristal:null},(function(){return n.setOriginCristal()})),Object.values(this.state.fnStamps).map((function(n){var i=n.ref.current.cristalRef;i.current&&i.current.setPos(e,t)})),Object.values(this.state.blobStamps).map((function(n){var i=n.ref.current.cristalRef;i.current&&i.current.setPos(e,t)}));var a=this.state.consoleStamp.ref.current.cristalRef;a.current&&a.current.setPos(e,t)}},{key:"toggleHide",value:function(e){var t=this;e.toggleHide(this.state.scale,this.state.originX,this.state.originY,(function(){return t.setLayerPicker()}))}},{key:"getFirstLine",value:function(e){for(var t=0;t<e.length;t++)if("\n"===e[t])return 0===t?" ":e.substr(0,t);return e.substr(0,Math.min(e.length,15))}},{key:"setLayerPicker",value:function(){var e=this,t=[];if(this.state.consoleStamp&&this.state.consoleStamp.ref.current){var n=this.state.consoleStamp.ref.current;t.push({name:"console",status:!n.state.hidden,icon:n.getIcon(),centerCallback:function(t,i){return e.centerOnStamp(n.props.id,t,i)},hideCallback:function(){return e.toggleHide(n)},id:n.props.id})}var i=Object.keys(this.state.fnStamps),a=Object.keys(this.state.blobStamps);i.concat(a).map((function(n){if(n in e.state.fnStamps){if(!(a=e.state.fnStamps[n].ref.current))return;var i=a.state.name}else if(n in e.state.blobStamps){var a;if(!(a=e.state.blobStamps[n].ref.current))return;i=e.getFirstLine(a.state.code)}t.push({name:i,icon:a.getIcon(),status:!a.state.hidden,centerCallback:function(t,n){return e.centerOnStamp(a.props.id,t,n)},hideCallback:function(){return e.toggleHide(a)},id:a.props.id})})),this.setState({pickerData:t})}},{key:"render",value:function(){if(this.state.consoleStamp)var e=this.state.consoleStamp.elem;else e=null;var t=[];return Object.values(this.state.fnStamps).map((function(e){return t.push(e.elem)})),Object.values(this.state.blobStamps).map((function(e){return t.push(e.elem)})),f.a.createElement("div",null,f.a.createElement("div",{class:"row bg-grey",style:{height:"100vh"}},t,e,this.state.lines),this.state.originCristal,f.a.createElement(nt,{pickerData:this.state.pickerData,addBlobStamp:this.addBlobStamp.bind(this),addFnStamp:this.addFnStamp.bind(this),disablePan:this.disablePan.bind(this),disableZoom:this.disableZoom.bind(this),loadStamperFile:this.loadStamperFile.bind(this),getFileData:this.getFileData.bind(this),updateControlBarDimensions:this.updateControlBarDimensions.bind(this)}))}}]),t}(m.Component);var ot=function(){return document.title="Stamper",f.a.createElement("div",null,f.a.createElement(rt,null))};n(1087);v.a.render(f.a.createElement(ot,null),document.getElementById("root"))},188:function(e,t,n){},302:function(e,t){var n={fns:[{name:"style.css",args:" ",code:"\nhtml, body {\n  margin: 0;\n  padding: 0;\n}",isCss:!0,x:800,y:140,hidden:!0},{name:"index.html",args:" ",code:'<html>\n  <head>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js"><\/script>\n    <link rel="stylesheet" type="text/css" href="style.css">\n  </head>\n  <body>\n    <script src=\'sketch.js\'><\/script>\n  </body>\n</html>\n',isHtml:!0,x:220,y:140,hidden:!0},{name:"setup",args:"",code:"createCanvas(400, 400)",x:220,y:480},{name:"draw",args:"",code:"background(220)",x:800,y:480}],blobs:[],scale:1,console:{x:220,y:15,hidden:!0},originX:0,originY:0};t.getSetup=function(){return n}},321:function(e,t,n){e.exports=n(1089)},737:function(e,t,n){"use strict";(function(e){var t=n(58),i=n.n(t);i.a.define("ace/theme/p5",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-p5",t.cssText=".ace-p5 .ace_gutter {\tbackground: #F5F8FC;\tcolor: #333 !important;}.ace-p5 .ace_identifier {\tcolor: #000000;}.ace-p5 .ace_print-margin {\twidth: 1px;\tbackground: #F5F8FC;}.ace-p5 {\tbackground-color: #F5F8FC;\tcolor: #586E75}.ace-p5 .ace_cursor {\tcolor: #000000}.ace-p5 .ace_marker-layer .ace_selection {\tbackground: rgb(181, 213, 255)}.ace-p5.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px #FDF6E3;}.ace-p5 .ace_marker-layer .ace_step {\tbackground: rgb(255, 255, 0)}.ace-p5 .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid rgba(147, 161, 161, 0.50)}.ace-p5 .ace_marker-layer .ace_active-line {\tbackground: #EEE8D5}.ace-p5 .ace_gutter-active-line {\tbackground-color : #EDE5C1}.ace-p5 .ace_marker-layer .ace_selected-word {\tborder: 1px solid #7f9390}.ace-p5 .ace_invisible {\tcolor: rgba(147, 161, 161, 0.50)}.ace-p5 .ace_keyword  {\tcolor: #00A1D3}.ace-p5 .ace_keyword.ace_operator {\tcolor: #A67F59}.ace-p5 .ace_meta,.ace-p5 .ace_support.ace_class,.ace-p5 .ace_support.ace_type {\tcolor: #859900}.ace-p5 .ace_paren{\tcolor: #666}.ace-p5 .ace_constant.ace_character,.ace-p5 .ace_constant.ace_other {\tcolor: #CB4B16}.ace-p5 .ace_constant.ace_language {\tcolor: #B58900}.ace-p5 .ace_constant.ace_numeric {\tcolor: #dc3787}.ace-p5 .ace_fold {\tbackground-color: #268BD2;\tborder-color: #586E75}.ace-p5 .ace_function, {\tcolor: #00a1d3 !important}.ace-p5 .ace_entity.ace_name.ace_function,.ace-p5 .ace_entity.ace_name.ace_tag,.ace-p5 .ace_support.ace_function,.ace-p5 .ace_variable,.ace-p5 .ace_variable.ace_language {\tcolor: #00a1d3 !important}.ace-p5 .ace_storage {\tcolor: #704f21 !important}.ace-p5 .ace_string {color: #00a1d3 !important;}.ace-p5 .ace_string.ace_regexp {color: #D30102}.ace-p5 .ace_comment,.ace-p5 .ace_entity.ace_other.ace_attribute-name {color: #a0a0a0}.ace-p5 .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHjy8NJ/AAjgA5fzQUmBAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),i.a.require(["ace/theme/p5"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(738)(e))},76:function(e,t,n){var i=n(176),a=n(88);n(1061);function s(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.range[0]<t.range[0]&&t.range[1]<i.range[1])return-1;if(t.range[1]<i.range[0])return n}return e.length}function r(e,t,n,i,a){if(a)if(t.type="Block")var s="/*\n"+t.value+"\n*/";else s="// "+t.value;else s=n.substr(t.range[0],t.range[1]-t.range[0]);0===e.length&&e.push({code:""});var r=e[e.length-1],o=t.loc.start.line-i;return 0==o?r.code+=s:1===o?r.code+="\n"+s:e.push({code:s}),t.loc.end.line}function o(e,t,n){t.range;var i=t.id.name,a="";if(t.params.length>=1){var s=t.params[0].range[0],r=t.params[t.params.length-1].range[1];a=n.substr(s,r-s)}var o=t.body.range[0]+1,l=t.body.range[1]-1,c=n.substr(o,l-o);e.push({code:c,name:i,args:a})}t.jsToStamps=function(e){try{var t=i.parseScript(e,{range:!0,comment:!0,tolerant:!0,loc:!0})}catch(c){return null}var n=a.cloneDeep(t.body);!function(e,t){for(var n=0;n<t.length;n++){var i=t[n],a=s(e,i);a>=0&&e.splice(a,0,i)}}(n,t.comments);var l={fns:[],blobs:[]};return function(e,t,n,i){for(var a=0,s=[],l=0;l<e.length;l++){var c=e[l];"FunctionDeclaration"===c.type?o(n,c,i):a="Block"===c.type||"Line"===c.type?r(s,c,i,a,!0):r(s,c,i,a,!1)}for(l=0;l<s.length;l++){var d=s[l];""!=d.code&&t.push(d)}}(n,l.blobs,l.fns,e),l},t.getIdentifiers=function(e){try{var t=i.parseScript(e)}catch(p){}for(var n,a={},s={},r=[[null,t,0,null]];r.length>0;){var o=r.shift(),l=o[0],c=o[1],d=o[3],h=o[2];null!==c&&(l&&c&&d&&"id"===l&&"Identifier"===c.type&&((n=d.type).includes("Declaration")||n.includes("Declarator"))&&c.name in a===!1&&(a[c.name]=[d.type,h]),l&&"name"===l&&c in a===!1&&(s[c]=h),c instanceof Array?c.map((function(e){return r.push([null,e,h+1,c])})):c instanceof Object&&Object.keys(c).map((function(e){r.push([e,c[e],h+1,c])})))}var u={declared:[],undeclared:[]};return Object.keys(a).map((function(e){3===a[e][1]&&a[e][0].includes("Declaration")?u.declared.push(e):5===a[e][1]&&a[e][0].includes("Declarator")&&u.declared.push(e)})),Object.keys(s).map((function(e){u.undeclared.push(e)})),u}},880:function(e,t){},895:function(e,t){},897:function(e,t){}},[[321,1,2]]]);
//# sourceMappingURL=main.b2dbb70d.chunk.js.map