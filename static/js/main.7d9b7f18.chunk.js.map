{"version":3,"sources":["react-cristal/dist/es2015/styled.js","react-cristal/dist/es2015/domain.js","react-cristal/dist/es2015/utils.js","react-cristal/dist/es2015/stacker.js","react-archer/src/Point.js","react-archer/src/SvgArrow.js","react-archer/src/ArcherContainer.js","react-archer/src/ArcherElement.js","react-cristal/dist/es2015/cristal.js","react-cristal/dist/es2015/content.js","react-cristal/dist/es2015/header.js","Stamp.js","ConsoleStamp.js","ControlBar.js","View.js","App.js","index.js","icons/box.svg","icons/file.svg","icons/tool.svg","icons/bell.svg","icons/image.svg","icons/chevron-down.svg","icons/download.svg","icons/upload.svg","icons/archive.svg","icons/message-square.svg","icons/info.svg","icons/star.svg","starterStamps.js","globals.js","icons/code.svg","icons/grid.svg","icons/git-commit.svg","icons/message-circle.svg","icons/layout.svg","icons/layers-light.svg","icons/trash.svg","icons/copy.svg","icons/rotate-ccw.svg","icons/type.svg","icons/chevron-up.svg","icons/check-square.svg","icons/square.svg","icons/eye.svg","icons/eye-off.svg","icons/empty.svg","ModalManager.js","PublishModal.js","parser.js","theme-p5.js","icons/globe.svg"],"names":["templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","templateObject_10","templateObject_11","__makeTemplateObject","cooked","raw","Object","defineProperty","value","minWidth","minHeight","padding","Wrapper","styled","div","_a","isActive","Header","isDraggable","BottomRightResizeHandle","BottomLeftResizeHandle","ContentWrapper","RightResizeHandle","img","LeftResizeHandle","BottomResizeHandle","isSmartPosition","position","defaultSize","width","height","getBoundaryCoords","coords","size","x","y","innerWidth","window","innerHeight","maxX","maxY","Math","min","max","getCordsFromInitialPosition","initialPosition","xCenter","yCenter","Infinity","Stacker","getNextIndex","index","maxIndex","updateMaxIndex","Point","this","point","SvgArrow","startingPoint","startingAnchorOrientation","endingPoint","endingAnchorOrientation","strokeColor","arrowLength","strokeWidth","strokeDasharray","arrowLabel","arrowMarkerId","noCurves","offset","onMouseOver","actualArrowLength","onMouseOut","xStart","yStart","endingPointWithArrow","xArrowHeadEnd","yArrowHeadEnd","endingVector","arrowX","arrowY","computeEndingArrowDirectionVector","xEnd","yEnd","computeEndingPointAccordingToArrowHead","startingPosition","xAnchor1","yAnchor1","abs","computeStartingAnchorPosition","endingPosition","xAnchor2","yAnchor2","computeEndingAnchorPosition","pathString","curveMarker","angle","atan2","xOffset","cos","yOffset","sin","computePathString","xLabel","yLabel","labelWidth","labelHeight","computeLabelDimensions","onDoubleClick","d","style","fill","stroke","markerEnd","location","href","split","overflow","pointerEvents","left","top","transform","defaultSvgContainerStyle","background","rectToPoint","rect","ArcherContainerContext","React","createContext","ArcherContainerContextProvider","Provider","ArcherContainerContextConsumer","Consumer","ArcherContainer","props","refreshScreen","setState","state","storeParent","ref","parent","currentState","getRectFromRef","getBoundingClientRect","getParentCoordinates","rectp","getPointCoordinatesFromAnchorPosition","parentCoordinates","refs","retPos","anchorPosition","add","computeCoordinatesFromAnchorPosition","substract","scale","registerTransitions","elementId","newSourceToTargets","prevState","sourceToTargetsMap","unregisterTransitions","sourceToTargetsMapCopy","registerChild","id","observer","observe","unregisterChild","unobserve","newRefs","getSourceToTargets","jaggedSourceToTargets","keys","map","key","concat","apply","getDist","x1","y1","x2","y2","sqrt","pow","p5NumberMap","in_min","in_max","out_min","out_max","setRelativeOffsets","sourceToTargets","anchor","relevantSourceToTargets","filter","data","source","target","otherLocationPosList","otherLocationPosDict","otherLocation","negationFactor","opposite","adjacent","thetaDegrees","atan","PI","push","sort","a","b","pos","medianVal","length","relativeSourceOffset","relativeOffsetSize","relativeTargetOffset","getComputedAnchors","computedSourceAnchor","computedTargetAnchor","xDiff","yDiff","newSource","assign","newTarget","computeArrows","result","idDict","label","arrowThickness","JSON","stringify","getMarkerId","arrowMarkerUniquePrefix","generateAllArrowMarkers","arrowPath","markerWidth","markerHeight","refX","refY","orient","markerUnits","svgContainerStyle","ResizeObserver","arrowMarkerRandomNumber","random","toString","slice","addEventListener","elementKey","removeEventListener","SvgArrows","className","viewBox","children","Component","defaultProps","ArcherElementNoContext","newRelations","newSourceToTarget","generateSourceToTarget","context","Error","relations","targetId","sourceAnchor","targetAnchor","onRefUpdate","prevProps","isEqual","ArcherElementWithContext","navigator","userAgent","toLowerCase","indexOf","require","ipcRenderer","__extends","extendStatics","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Cristal","_super","_this","arguments","zIndex","isDragging","isResizingX","isResizingY","isResizingXLeft","downKey","isMoving","originalHeight","ghostX","ghostY","opt","cmd","ctrl","plus","minus","zero","space","onWindowResize","_b","undefined","newX","newY","saveWrapperRef","el","childrenElement","initialSize","setInitialPosition","cords","saveHeaderRef","headerElement","onKeyDown","e","keyCode","preventDefault","onKeyUp","onMouseDown","manualResize","widthDiff","heightDiff","manualSetSize","onWheel","ctrlKey","getPosition","movementX","movementY","getScale","getSnapMargin","snapMargin","round","getDimensions","changeX","newWidth","newHeight","oldAbsX","oldAbsY","newAbsX","newAbsY","onResize","roundAbsX","roundAbsY","sendingWidthDiff","sendingHeightDiff","onMouseMove","isResizing","postMessage","type","onStartMove","newPosition","resizeCristal","_c","notifyResize","onStoppedMove","notifyStopMove","callBack","notifyMove","notifyStartMove","notifyOptMove","onMove","notifyZChange","onZChange","dimensions","onStopMove","onOptMove","notifyStartResize","onStartResize","notifyStopResize","onStopResize","onMouseUp","mouseIsDown","startFullResize","startFullLeftResize","startXResize","startXLeftResize","startYResize","renderResizeHandles","isResizable","color","right","bottom","changeZIndex","createIcon","iconType","hiddenFlag","classVal","tooltipText","uniqueClass","parentID","mouseOverCallback","$","css","opacity","mouseOutCallback","globals","iconOpacity","icon","onClick","iconSize","src","OverlayTrigger","trigger","placement","overlay","Tooltip","componentDidMount","document","onGlobalMouseDown","passive","iframeElem","getElementById","console","log","componentWillUnmount","get","enumerable","configurable","title","onClose","closeHidden","onCopy","copyHidden","closeBtn","DeleteStampIcon","copyBtn","CopyIcon","clearBtn","ClearConsoleIcon","showClear","onClear","onMinimize","minimizeBtn","MinimzeIcon","titleIcon","makeBigIcon","CodeSizeIcon","showCodeSize","onCodeSize","sideButtons","class","cursor","render","margin","border","outline","HeaderComponent","header","ContentComponent","content","invisible","getLinesOn","lineData","allContent","ArcherElement","wrapperName","CristalContent","CristalHeader","mime","FunctionStamp","starterEditorWidth","isMediaFile","starterArgs","isIndex","isTxtFile","isBlob","starterName","starterIframeWidth","starterIframeHeight","code","starterCode","name","args","iframeDisabled","iframeWidth","iframeHeight","editorHeight","starterEditorHeight","editorWidth","isSpecialFn","editorScrolling","errorLines","iframeCode","editsMade","runningBorder","resizingIframe","hidden","initialHidden","looping","loopingTransition","starterZIndex","exportableCode","codeSize","starterCodeSize","dataUri","editorTopShadow","editorBottomShadow","iframeDimensTransition","mediaAssetHeight","mediaAssetWidth","lineHighLightingStatus","starterLineHighLightingStatus","cristalRef","createRef","editorRef","updateLooping","bind","callback","message","checkName","setDataUri","requestCompile","mimeType","lookup","mimeTypeArr","join","fileObj","File","reader","FileReader","onload","readAsDataURL","specialFns","lineNum","setLayerPicker","newErrors","newErrorLines","getExportableCode","getHTML","i","addErrorLine","current","editor","completers","getCompletions","session","prefix","completions","p5Lib","forEach","w","meta","roundX","roundY","newDimensions","getIframeDimensionFromGhost","isScrolling","disablePan","markers","startRow","endRow","theme","mode","shadow","setEditorScrolling","boxShadow","onChange","onEditsMade","onLoad","setEditorShadow","renderer","scrollBar","on","arg","fontSize","showPrintMargin","wrapEnabled","showGutter","highlightActiveLine","onScroll","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","hasCssTransforms","fontFamily","scrollTop","scrollHeight","nameArr","pop","nameWithExtension","compileActions","setTimeout","displayName","Name","nameColor","builtIns","listeners","namePlaceholder","stripExtension","backgroundColor","placeholder","disabled","event","newName","addExtension","startsWith","imageWidth","Image","imageHeight","controls","createElement","MediaAssetIcon","updateIframeDimensions","loopingOpacity","iframeDimensOpacity","fnTitleHeight","transition","floor","onResizeStart","onResizeStop","newSize","getCristalDimens","getData","compileCallback","handle","manualIframeResize","dimens","getP5CanvasDimensions","renderMediaAsset","addNewIframeConsole","contentWindow","scrolling","srcdoc","sandbox","allow","status","isFile","isOpt","getCopyStampName","copyOffset","addStamp","getFirstLine","exported","getIcon","change","resize","FunctionStampIcon","HtmlStampIcon","BlobStampIcon","FileStampIcon","ImageStampIcon","BuiltInStampIcon","ListenerStampIcon","bgColor","cristalOpacity","shadowSize","s","setLineData","setDependencyLineHighlightings","onDelete","copyAndOpt","resizeEditor","bigCodeSize","onMouseLeave","headerHeight","renderFunctionName","flexWrap","renderEditor","renderIframe","_","ipc","ConsoleStamp","logs","consoleHeight","starterConsoleHeight","consoleWidth","starterConsoleWidth","lastFreq","limit","receiveMessage","logToConsole","lineno","ConsoleStampIcon","send","savedIframeHeight","newConsole","Hook","newLogs","method","checkLastLog","consoleContainer","lastLog","freqString","renderedLogs","cloneDeep","resizeConsole","clearConsole","styles","LOG_COLOR","LOG_ERROR_BACKGROUND","LOG_ERROR_BORDER","LOG_ERROR_COLOR","BASE_FONT_FAMILY","BASE_FONT_SIZE","LOG_COMMAND_COLOR","BASE_BACKGROUND_COLOR","LOG_BORDER","LOG_COMMAND_ICON","variant","ControlBar","minPickerHeight","minJsImporterHeight","topBarHeight","minNonSideBarWidth","importButtonHeight","spanWidth","spanWidthWide","worldDropDowns","jsImporterHeight","sideBarWidth","pickerHeight","pickerScrollEnabled","codeHasError","updateControlBarDimensions","setWorldDropDowns","disableZoom","axis","renderSideBarResizeHandle","renderLayerPicker","renderJsImporter","renderImportButton","addRawJavascript","text","buttonTextSize","parseCode","snapshot","hasError","item","toggleOnIcon","iconNameCallback","centerCallback","toggleOffIcon","overalOpacity","EmptyIcon","clas","hideCallback","provided","pickers","overflowY","pickerData","isSetting","renderSettingsPicker","draggableId","getDraggableClass","innerRef","draggableProps","dragHandleProps","renderPicker","flexGrow","droppableProps","settingsPicker","renderPickerResizeHandle","flexFlow","display","renderSettingsPickers","onDragEnd","droppableId","renderPickers","removeClass","addClass","UploadIcon","iconCallback","modalManagerRef","requestUpload","alignLeft","DownloadIcon","requestDownload","normalFn","dropDownData","builtInFns","listenerFns","starterBlobs","starterBlob","requestFileUpload","sampleFile","undoDelete","deletedStamps","stampData","reverse","WorldsIcon","alignRight","requestPublish","requestPublishInfo","InfoIcon","getWorldNamesAndKeys","allWorlds","open","worldKeyToUrl","renderSideBar","renderTopBar","TopButton","down","mouseOverDropDown","givenUniqueClass","dropDownIcon","ExpandMoreIcon","substr","dropDowns","oneWordName","getUniqueID","createTopButtonIcon","dropDownHeight","maxHeight","textAlign","expandButton","renderTooltip","renderDropDowns","View","compiledBefore","stampRefs","stampElems","counter","htmlID","consoleStamp","setupExists","htmlAsksForCss","htmlAsksForJs","lines","traversalGraph","consoleId","numToggles","originX","originY","counterMutex","Mutex","gridSize","newStampMarginVariance","newStampMargin","g","l","shft","centerX","centerY","zoom","body","snapToGrid","toggleLinesOn","pan","newTimeOut","mouseWheelTimeout","clearTimeout","deltaY","clientX","clientY","deltaX","changeY","panDisabled","newScale","mouseX","mouseY","zoomDisabled","curDistX","curDistY","unScaledDistX","unScaledDistY","scaledDistX","scaledDistY","newOriginX","newOriginY","numFns","stampOrder","stamperObject","worldKey","worldEdited","worldPublishTime","highlightedLines","linesOn","recompileIfEnoughStamps","stamps","addConsoleStamp","getAutoLayout","js","rawJS","parser","jsToStamps","curNumStamps","getNumStamps","stampsData","xPos","yPos","initialXPos","layoutedStampsData","getFilledInStampData","iframeDimens","brHeight","cristalDimens","autoLayoutMargin","ranges","strRanges","defaultDimens","createCanvasStart","start","end","paramsArr","Number","htmlCode","runnableCode","codeData","getRunnableCode","html","cheerio","load","withStartIndices","jsBlock","prepend","getIframeErrorCallBack","htmlStr","linesToJs","replaceWith","loadAssets","dimension","defaults","defaultEditorWidth","defaultVarEditorHeight","setting","createConsoleStamp","acquire","release","stampID","elem","defaultEditorHeight","defaultIframeWidth","seenCode","onMouseOutLine","deleteFrame","checkAllNames","addStampToState","newSetupExists","values","fileDict","getStamperObject","stamperHeader","getLineData","supplyLineData","line","duplicateNamedStamps","stampRef","clearErrorsAndUpdate","graph","oldGraph","lineDataToGraph","lastLineData","newGraph","seen","compileStampName","checkForSetup","otherID","compileSingleStamp","recursiveCompile","recursiveCompileStamp","nameDict","stamp","curLine","addCodeBlock","contents","numLines","isFn","getNumLines","declaredDict","undeclaredArr","variables","getVariables","declared","variable","undeclared","noWhiteSpace","replace","varEndIndex","lineDict","undeclaredItem","usingID","declaringID","lineKey","getLineRelation","listenerIDs","isListener","isFnStamp","listenerID","setupID","preloadID","indexID","fileIsReferenced","fileName","includes","isHighlighted","textColor","getLineColor","userSelect","seeThru","getLineLabel","getLineStyle","fileIdDict","setLineHighlighted","sourceAndTarget","startStampId","endStampId","getJSLineData","getListenerLineData","getSetupLineData","getIndexLineData","getPreloadLineData","getFileLineData","overalID","fullFun","setLoopingControl","loopingCallbacks","splice","setIframeDisabled","xOff","yOff","manualPan","toggleHide","firstN","dots","calcSnapMargin","destination","removed","gridLines","borderWidth","x0","y0","roundedX0","roundedY0","borderLeft","borderTop","LinesIcon","SettingOnIcon","SettingOffIcon","GridIcon","setSettingsPicker","consoleRef","centerOnStamp","VisibilityIcon","VisibilityOffIcon","isConsole","initialHeight","consoleElem","renderGridLines","onMouseOverLine","loadStamperObject","controlBarRef","getWorldData","ModalManager","getFileDict","App","ReactDOM","module","exports","keyPressCode","mousePressCode","starter","compressedJs","worlds","ExpandLessIcon","GlobalVarIcon","CommentIcon","PermanentWorldIcon","iframeMargin","iconTransition","borderTransition","windowResized","deviceMoved","deviceTurned","deviceShaken","keyPressed","keyReleased","keyTyped","mouseMoved","mouseDragged","mousePressed","mouseReleased","mouseClicked","doubleClicked","mouseWheel","draw","preload","setup","fnStampWidth","fnStampHeight","GitHub","detect","browser","modalButtons","modalVisible","modalHeader","modalContent","saveInterval","cdnLibs","askedAboutCdn","inputElem","miniInputElem","publishInfoVisible","onlineWorldDict","lastWorldCheck","publishModal","protectAgainstClosed","domain","oauthToken","githubUsername","receiveFiles","hideModal","hidePublishInfoModal","sendSaveData","libs","queryString","search","URLSearchParams","urlWorldKey","getUrlWorldKey","getWorldObject","loadStoredStamperObject","error","stored","localStorage","getItem","parse","LZUTF8","decompress","inputEncoding","setWorldData","repo","token","getRepo","date","Date","listCommits","request","getTime","getWorldPublishTime","time","requestOnlineWorldCheck","loadInitialStamperObject","setInterval","fileObjs","rawFileList","fileInfo","buffer","checkAndOpenFiles","buttons","rawCode","createInputElement","returnValue","getOnlineWorlds","onlineWorlds","removeChild","webkitdirectory","multiple","idAttr","createAttribute","setAttributeNode","typeAttr","multipleAttr","directoryAttr","styleAttr","appendChild","fileType","accept","uploadMini","clearInterval","createMiniImputElem","click","dispatchEvent","MouseEvent","onfocus","file","webkitRelativePath","path","readAsText","files","imgData","stampifyFiles","readFile","initialFiles","containsLib","usingName","deleteInputElement","readFiles","newWorldStamper","compressedStamperObj","compress","outputEncoding","setItem","zip","JSZip","uri","idx","substring","base64","generateAsync","then","saveAs","oldJs","newStamperObject","imgs","indexContent","libName","replaceFilesWithCDN","stamperFileContent","updateStamperObject","fnData","singleFnData","transferred","endsWith","author","keyArr","worldData","localWorldAuthor","publishModalName","worldKeyToNameAuthor","publishModalAuthor","checkPublishWorldName","renderLinkForm","publishWorld","hidePublishModal","worldNameAuthorToKey","publishDate","worldKeyToFileName","writeFile","history","pushState","getContents","onlineWorldTimeArr","onlineWorldTimeDict","worldFileNameToKey","timeCallback","modalizeErrors","getOnlineWorldObject","dateString","commit","committer","timeNum","bufContent","Buffer","stringContent","TextDecoder","decode","nameAuthorDict","show","centered","onHide","closeButton","Title","Body","Footer","buttonElems","btnData","renderPublishInfoModal","publishVisible","publishNameAuthorExists","publishModalMode","fontStyle","publishModalLoading","esprima","getPos","comment","range","addBlob","lastBlobLine","isComment","lineDiff","loc","addFn","fnStamps","params","argStart","argEnd","program","parseScript","tolerant","comments","insertComments","fillStampArrays","fullDict","typeName","q","cur","shift","val","pVal","lvl","newVal","newKey","ace","define","isDark","cssClass","cssText","importCssString","m"],"mappings":"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,6DACA,SACA,cACA,UACA,eACA,kBACA,cACA,cACA,gCACA,QACA,wBACA,sBACA,0BACA,wBACA,yBACA,yBACA,+BACA,yBACA,cACA,iCACA,sBACA,wBACA,0BACA,4BACA,mBACA,QACA,YACA,mCACA,mBACA,SACA,4BACA,oBACA,kBACA,cACA,eACA,WACA,cACA,aACA,QACA,yBACA,cACA,iBACA,eACA,UACA,iBACA,0CACA,uBACA,WACA,eACA,sBACA,SACA,aACA,mBACA,kBACA,aACA,uBACA,eACA,SACA,kCACA,0CACA,WACA,uBACA,oBACA,sBACA,qBACA,sBACA,eACA,0CACA,sBACA,wBACA,gCACA,oBACA,QACA,QACA,QACA,uBACA,0BACA,QACA,WACA,QACA,WACA,gBACA,gBACA,gBACA,UACA,iBACA,mBACA,oBACA,kBACA,aACA,aACA,WACA,UACA,gBACA,cACA,aACA,SACA,mBACA,aACA,aACA,WACA,+BACA,6BACA,sCACA,wBACA,aACA,0BACA,cACA,QACA,mBACA,oBACA,gBACA,qBACA,gBACA,oBACA,eACA,8BACA,6BACA,YACA,WACA,mBACA,eACA,yBACA,iBACA,aACA,yBACA,gBACA,gBACA,gBACA,gBACA,iBACA,iBACA,iBACA,UACA,oBACA,iBACA,2BACA,0BACA,4BACA,6BACA,sCACA,kCACA,WACA,eACA,eACA,eACA,WACA,gCACA,+BACA,gCACA,iBACA,iBACA,mBACA,kBACA,gBACA,gBACA,mBACA,gBACA,QACA,8BACA,WACA,qBACA,kBACA,iBACA,oBACA,2BACA,sBACA,4BACA,sDACA,OACA,SACA,gBACA,gBACA,iBACA,mBACA,uBACA,6BACA,QACA,mBACA,6BACA,eACA,gBACA,wBACA,uBACA,iBACA,iBACA,iBACA,oBACA,oBACA,oBACA,cACA,iBACA,8BACA,eACA,kBACA,eACA,iBACA,cACA,SACA,UACA,KACA,aACA,MACA,SACA,aACA,YACA,UACA,eACA,gBACA,cACA,eACA,QACA,SACA,wBACA,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","file":"static/js/main.7d9b7f18.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\n\nexport var minWidth = 60;\nexport var minHeight = 60;\nexport var padding = 10;\nvar wrapperStyles = function (_a) {\n    var isActive = _a.isActive;\n    if (isActive) {\n        return \"\\n      \\n    \";\n    }\n    return \"opacity: 1;\";\n};\nexport var Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \"\\n position: fixed;\\n  display: inline-flex;\\n  flex-direction: column;\\n  background: white;\\n  min-width: \", \"px;\\n  min-height: \", \"px;\\n  user-select: none;\\n\"], [\"\\n  \", \"\\n  position: fixed;\\n  display: inline-flex;\\n  flex-direction: column;\\n  background: white;\\n  min-width: \", \"px;\\n  min-height: \", \"px;\\n  user-select: none;\\n\"])), wrapperStyles, minWidth, minHeight);\nexport var Header = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  height: 30px;\\n  border-bottom: 1px solid rgb(215,215,215);\\n  cursor: \", \";\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-left: \", \"px;\\n\"], [\"\\n  height: 30px;\\n  border-bottom: 1px solid #ccc;\\n  cursor: \", \";\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-left: \", \"px;\\n\"])), function (_a) {\n    var isDraggable = _a.isDraggable;\n    return isDraggable ? \"-webkit-grab\" : \"default\";\n}, padding);\nexport var BottomRightResizeHandle = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"], [\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"])));\nexport var BottomLeftResizeHandle = styled.div(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  cursor: nesw-resize;\\n\"], [\"\\n  width: 20px;\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n\"])));\nexport var ContentWrapper = styled.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\" \\n  padding: \", \"px;\\n\"], [\"\\n  padding: \", \"px;\\n\"])), padding);\n\nexport var CloseIcon = styled.img(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 15px;\\n  height: 15px;\\n margin-left:12px;\\n  opacity: 0.3;\\n  cursor: auto;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 60px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"], [\"\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  opacity: 0.3;\\n  cursor: pointer;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 30px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"])));\nexport var CopyIcon = styled.img(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  position: relative;\\n  width: 17px;\\n  height: 17px;\\n  opacity: 0.3;\\n  cursor: auto;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 40px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #FF0000;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"], [\"\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  opacity: 0.3;\\n  cursor: pointer;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n\\n  &:before, &:after {\\n    position: absolute;\\n    right: 40px;\\n    content: ' ';\\n    height: 21px;\\n    width: 2px;\\n    background-color: #333;\\n  }\\n\\n  &:before {\\n    transform: rotate(45deg);\\n  }\\n\\n  &:after {\\n    transform: rotate(-45deg);\\n  }\\n\"])));\n\nexport var Title = styled.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  white-space: nowrap;\\n  max-width: calc(100% - 25px);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"], [\"\\n  white-space: nowrap;\\n  max-width: calc(100% - 25px);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"])));\nexport var RightResizeHandle = styled.div(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"], [\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"])));\n\nexport var LeftResizeHandle = styled.div(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  left: 0;\\n  cursor: ew-resize;\\n\"], [\"\\n  width: 20px;\\n  height: calc(100% - 50px);\\n  position: absolute;\\n  bottom: 20px;\\n  right: 0;\\n  cursor: ew-resize;\\n\"])));\n\nexport var BottomResizeHandle = styled.div(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  width: calc(100% - 40px);\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 20px;\\n  cursor: ns-resize;\\n\"], [\"\\n  width: calc(100% - 40px);\\n  height: 20px;\\n  position: absolute;\\n  bottom: 0;\\n  left: 20px;\\n  cursor: ns-resize;\\n\"])));\n\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8,templateObject_9, templateObject_10, templateObject_11;\n","export var isSmartPosition = function (position) {\n    return typeof position === 'string';\n};\n","import { minHeight, minWidth, padding } from \"./styled\";\nvar defaultSize = { width: minWidth, height: minHeight };\nexport var getBoundaryCoords = function (coords, size) {\n    if (size === void 0) { size = defaultSize; }\n    var x = coords.x, y = coords.y;\n    var width = size.width, height = size.height;\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var maxX = innerWidth - (width || 0) - padding;\n    var maxY = innerHeight - (height || 0) - padding;\n    return {\n        x: Math.min(Math.max(x, padding), maxX),\n        y: Math.min(Math.max(y, padding), maxY)\n    };\n};\nexport var getCordsFromInitialPosition = function (initialPosition, size) {\n    if (size === void 0) { size = defaultSize; }\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var width = size.width, height = size.height;\n    var xCenter = (innerWidth / 2) - (width / 2);\n    var yCenter = (innerHeight / 2) - (height / 2);\n    switch (initialPosition) {\n        case 'top-left':\n        default:\n            return { x: 10, y: 10 };\n        case 'top-center':\n            return { x: xCenter, y: 10 };\n        case 'bottom-center':\n            return { x: xCenter, y: Infinity };\n        case 'top-right':\n            return { x: Infinity, y: 10 };\n        case 'bottom-left':\n            return { x: 10, y: Infinity };\n        case 'bottom-right':\n            return { x: Infinity, y: Infinity };\n        case 'center':\n            return { x: xCenter, y: yCenter };\n    }\n};\n\nexport var isInView = function(coords, size){\n    var x = coords.x, y = coords.y;\n    var width = size.width, height = size.height;\n    var innerWidth = window.innerWidth, innerHeight = window.innerHeight;\n    var left = x, right = x + width, top = y, bottom = y + height;\n\n    var result = left < innerWidth && right > 0 && bottom > 0 && top < innerHeight\n    return result\n}\n","var Stacker = (function () {\n    function Stacker() {\n    }\n    Stacker.getNextIndex = function (index) {\n        if (index === Stacker.maxIndex) {\n            return index;\n        }\n        Stacker.maxIndex++;\n        return Stacker.maxIndex;\n    };\n     Stacker.updateMaxIndex = function (index) {\n        Stacker.maxIndex = Math.max(Stacker.maxIndex, index)\n    };\n    Stacker.maxIndex = 100;\n    return Stacker;\n}());\nexport { Stacker };\n","// @flow\n\nclass Point {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(point: Point) {\n    return new Point(this.x + point.x, this.y + point.y);\n  }\n\n  substract(point: Point) {\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n}\n\nexport default Point;\n","// @flow\n\nimport React from 'react';\nimport Point from './Point';\n\ntype Props = {\n  startingPoint: Point,\n  startingAnchorOrientation: AnchorPositionType,\n  endingPoint: Point,\n  endingAnchorOrientation: AnchorPositionType,\n  strokeColor: string,\n  arrowLength: number,\n  strokeWidth: number,\n  strokeDasharray?: string,\n  arrowLabel?: ?React$Node,\n  arrowMarkerId: string,\n  noCurves: boolean,\n  offset?: number,\n};\n\nfunction computeEndingArrowDirectionVector(endingAnchorOrientation) {\n  switch (endingAnchorOrientation) {\n    case 'left':\n      return { arrowX: -1, arrowY: 0 };\n    case 'right':\n      return { arrowX: 1, arrowY: 0 };\n    case 'top':\n      return { arrowX: 0, arrowY: -1 };\n    case 'bottom':\n      return { arrowX: 0, arrowY: 1 };\n    default:\n      return { arrowX: 0, arrowY: 0 };\n  }\n}\n\nexport function computeEndingPointAccordingToArrowHead(\n  xArrowHeadEnd: number,\n  yArrowHeadEnd: number,\n  arrowLength: number,\n  strokeWidth: number,\n  endingAnchorOrientation: AnchorPositionType,\n) {\n  const endingVector = computeEndingArrowDirectionVector(endingAnchorOrientation);\n\n  const { arrowX, arrowY } = endingVector;\n\n  const xEnd = xArrowHeadEnd + (arrowX * arrowLength * strokeWidth) / 2;\n  const yEnd = yArrowHeadEnd + (arrowY * arrowLength * strokeWidth) / 2;\n\n  return { xEnd, yEnd };\n}\n\nexport function computeStartingAnchorPosition(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n  startingAnchorOrientation: AnchorPositionType,\n): { xAnchor1: number, yAnchor1: number } {\n  if (startingAnchorOrientation === 'top' || startingAnchorOrientation === 'bottom') {\n    const absFactor = startingAnchorOrientation === 'bottom' ? 1 : -1;\n    return {\n      xAnchor1: xStart,\n      yAnchor1: yStart + (absFactor * Math.abs(yEnd - yStart)) / 2,\n    };\n  }\n  if (startingAnchorOrientation === 'left' || startingAnchorOrientation === 'right') {\n    const absFactor = startingAnchorOrientation === 'right' ? 1 : -1;\n    return {\n      xAnchor1: xStart + (absFactor * Math.abs(xEnd - xStart)) / 2,\n      yAnchor1: yStart,\n    };\n  }\n\n  return { xAnchor1: xStart, yAnchor1: yStart };\n}\n\nexport function computeEndingAnchorPosition(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n  endingAnchorOrientation: AnchorPositionType,\n): { xAnchor2: number, yAnchor2: number } {\n  if (endingAnchorOrientation === 'top' || endingAnchorOrientation === 'bottom') {\n    const absFactor = endingAnchorOrientation === 'bottom' ? 1 : -1;\n    return {\n      xAnchor2: xEnd,\n      yAnchor2: yEnd + (absFactor * Math.abs(yEnd - yStart)) / 2,\n    };\n  }\n  if (endingAnchorOrientation === 'left' || endingAnchorOrientation === 'right') {\n    const absFactor = endingAnchorOrientation === 'right' ? 1 : -1;\n    return {\n      xAnchor2: xEnd + (absFactor * Math.abs(xEnd - xStart)) / 2,\n      yAnchor2: yEnd,\n    };\n  }\n\n  return { xAnchor2: xEnd, yAnchor2: yEnd };\n}\n\nexport function computeLabelDimensions(\n  xStart: number,\n  yStart: number,\n  xEnd: number,\n  yEnd: number,\n): { xLabel: number, yLabel: number, labelWidth: number, labelHeight: number } {\n  const labelWidth = Math.max(Math.abs(xEnd - xStart), 1);\n  const labelHeight = Math.max(Math.abs(yEnd - yStart), 1);\n\n  const xLabel = xEnd > xStart ? xStart : xEnd;\n  const yLabel = yEnd > yStart ? yStart : yEnd;\n\n  return {\n    xLabel,\n    yLabel,\n    labelWidth,\n    labelHeight,\n  };\n}\n\nfunction computePathString({\n  xStart,\n  yStart,\n  xAnchor1,\n  yAnchor1,\n  xAnchor2,\n  yAnchor2,\n  xEnd,\n  yEnd,\n  noCurves,\n  offset,\n}: {|\n  xStart: number,\n  yStart: number,\n  xAnchor1: number,\n  yAnchor1: number,\n  xAnchor2: number,\n  yAnchor2: number,\n  xEnd: number,\n  yEnd: number,\n  noCurves: boolean,\n  offset?: number,\n|}): string {\n  const curveMarker = noCurves ? '' : 'C';\n\n  if (offset && offset > 0) {\n    const angle = Math.atan2(yAnchor1 - yStart, xAnchor1 - xStart);\n\n    const xOffset = offset * Math.cos(angle);\n    const yOffset = offset * Math.sin(angle);\n\n    xStart = xStart + xOffset;\n    xEnd = xEnd - xOffset;\n\n    yStart = yStart + yOffset;\n    yEnd = yEnd - yOffset;\n  }\n\n  return (\n    `M${xStart},${yStart} ` +\n    `${curveMarker}${xAnchor1},${yAnchor1} ${xAnchor2},${yAnchor2} ` +\n    `${xEnd},${yEnd}`\n  );\n}\n\nconst SvgArrow = ({\n  startingPoint,\n  startingAnchorOrientation,\n  endingPoint,\n  endingAnchorOrientation,\n  strokeColor,\n  arrowLength,\n  strokeWidth,\n  strokeDasharray,\n  arrowLabel,\n  arrowMarkerId,\n  noCurves,\n  offset,\n  onMouseOver,\n  onMouseOut,\n}: Props) => {\n  const actualArrowLength = arrowLength * 2;\n\n  const xStart = startingPoint.x;\n  const yStart = startingPoint.y;\n\n  const endingPointWithArrow = computeEndingPointAccordingToArrowHead(\n    endingPoint.x,\n    endingPoint.y,\n    actualArrowLength,\n    strokeWidth,\n    endingAnchorOrientation,\n  );\n  const { xEnd, yEnd } = endingPointWithArrow;\n\n  const startingPosition = computeStartingAnchorPosition(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n    startingAnchorOrientation,\n  );\n  const { xAnchor1, yAnchor1 } = startingPosition;\n\n  const endingPosition = computeEndingAnchorPosition(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n    endingAnchorOrientation,\n  );\n  const { xAnchor2, yAnchor2 } = endingPosition;\n\n  const pathString = computePathString({\n    xStart,\n    yStart,\n    xAnchor1,\n    yAnchor1,\n    xAnchor2,\n    yAnchor2,\n    xEnd,\n    yEnd,\n    noCurves,\n    offset,\n  });\n\n  const { xLabel, yLabel, labelWidth, labelHeight } = computeLabelDimensions(\n    xStart,\n    yStart,\n    xEnd,\n    yEnd,\n  );\n\n  return (\n    <g onDoubleClick={() => onMouseOver()}>\n      <path\n        d={pathString}\n        style={{ fill: 'none', stroke: strokeColor, strokeWidth: strokeWidth, strokeDasharray }}\n        markerEnd={`url(${window.location.href.split('#')[0]}#${arrowMarkerId})`}\n      />\n\n      {arrowLabel && (\n        <foreignObject\n          x={xLabel}\n          y={yLabel}\n          width={labelWidth}\n          height={labelHeight}\n          style={{ overflow: 'visible', pointerEvents: 'none' }}\n        >\n          <div\n            style={{\n              position: 'absolute',\n              left: '50%',\n              top: '50%',\n              transform: 'translateX(-50%) translateY(-50%)',\n              pointerEvents: 'all',\n            }}\n          >\n            <div>{arrowLabel}</div>\n          </div>\n        </foreignObject>\n      )}\n    </g>\n  );\n};\n\nexport default SvgArrow;\n","// @flow\n\nimport React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport Point from './Point';\n\nimport SvgArrow from './SvgArrow';\n\ntype Props = {\n  arrowLength: number,\n  arrowThickness: number,\n  strokeColor: string,\n  strokeWidth: number,\n  strokeDasharray?: string,\n  noCurves?: boolean,\n  children: React$Node,\n  style?: Object,\n  svgContainerStyle?: Object,\n  className?: string,\n  offset?: number,\n};\n\ntype SourceToTargetsArrayType = Array<SourceToTargetType>;\n\n// For typing when munging sourceToTargetsMap\ntype JaggedSourceToTargetsArrayType = Array<SourceToTargetsArrayType>;\n\ntype State = {\n  refs: {\n    [string]: HTMLElement,\n  },\n  sourceToTargetsMap: {\n    [string]: SourceToTargetsArrayType,\n  },\n  observer: ResizeObserver,\n  parent: ?HTMLElement,\n};\n\nconst defaultSvgContainerStyle = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0,\n  background: 'black',\n};\n\nfunction rectToPoint(rect: ClientRect) {\n  return new Point(rect.left, rect.top);\n}\n\nfunction computeCoordinatesFromAnchorPosition(\n  anchorPosition: AnchorPositionType,\n  rect: ClientRect,\n) {\n  switch (anchorPosition) {\n    case 'top':\n      return rectToPoint(rect).add(new Point(rect.width / 2, 0));\n    case 'bottom':\n      return rectToPoint(rect).add(new Point(rect.width / 2, rect.height));\n    case 'left':\n      return rectToPoint(rect).add(new Point(0, rect.height / 2));\n    case 'right':\n      return rectToPoint(rect).add(new Point(rect.width, rect.height / 2));\n    case 'middle':\n      return rectToPoint(rect).add(new Point(rect.width / 2, rect.height / 2));\n    default:\n      return new Point(0, 0);\n  }\n}\n\nexport type ArcherContainerContextType = {\n  registerChild?: (string, HTMLElement) => void,\n  registerTransitions?: (string, Array<SourceToTargetType>) => void,\n  unregisterChild?: string => void,\n  unregisterTransitions?: string => void,\n};\n\nconst ArcherContainerContext = React.createContext<ArcherContainerContextType>({});\n\nexport const ArcherContainerContextProvider = ArcherContainerContext.Provider;\nexport const ArcherContainerContextConsumer = ArcherContainerContext.Consumer;\n\nexport class ArcherContainer extends React.Component<Props, State> {\n  arrowMarkerUniquePrefix: string;\n\n  constructor(props: Props) {\n    super(props);\n\n    const observer = new ResizeObserver(() => {\n      this.refreshScreen();\n    });\n\n    this.state = {\n      refs: {},\n      sourceToTargetsMap: {},\n      observer,\n      parent: null,\n    };\n\n    const arrowMarkerRandomNumber = Math.random()\n      .toString()\n      .slice(2);\n\n    this.arrowMarkerUniquePrefix = `arrow${arrowMarkerRandomNumber}`;\n  }\n\n  static defaultProps = {\n    arrowLength: 10,\n    arrowThickness: 6,\n    strokeColor: '#f00',\n    strokeWidth: 2,\n    svgContainerStyle: {},\n  };\n\n  componentDidMount() {\n    if (window) window.addEventListener('resize', this.refreshScreen);\n  }\n\n  componentWillUnmount() {\n    const { observer } = this.state;\n\n    Object.keys(this.state.refs).map(elementKey => {\n      observer.unobserve(this.state.refs[elementKey]);\n    });\n\n    if (window) window.removeEventListener('resize', this.refreshScreen);\n  }\n\n  refreshScreen = (): void => {\n    this.setState({ ...this.state });\n  };\n\n  storeParent = (ref: ?HTMLElement): void => {\n    if (this.state.parent) return;\n\n    this.setState(currentState => ({ ...currentState, parent: ref }));\n  };\n\n  getRectFromRef = (ref: ?HTMLElement): ?ClientRect => {\n    if (!ref) return null;\n\n    return ref.getBoundingClientRect();\n  };\n\n  getParentCoordinates = (): Point => {\n    const rectp = this.getRectFromRef(this.state.parent);\n\n    if (!rectp) {\n      return new Point(0, 0);\n    }\n    return rectToPoint(rectp);\n  };\n\n  getPointCoordinatesFromAnchorPosition = (\n    position: AnchorPositionType,\n    index: string,\n    parentCoordinates: Point,\n  ): Point => {\n    const rect = this.getRectFromRef(this.state.refs[index]);\n\n    if (!rect) {\n      return null;\n    }\n    const absolutePosition = computeCoordinatesFromAnchorPosition(position, rect);\n\n    var retPos = absolutePosition.substract(parentCoordinates);\n    retPos.x = retPos.x / this.props.scale;\n    retPos.y = retPos.y / this.props.scale;\n\n    return retPos;\n  };\n\n  registerTransitions = (\n    elementId: string,\n    newSourceToTargets: Array<SourceToTargetType>,\n  ): void => {\n    this.setState((prevState: State) => ({\n      sourceToTargetsMap: {\n        ...prevState.sourceToTargetsMap,\n        [elementId]: newSourceToTargets,\n      },\n    }));\n  };\n\n  unregisterTransitions = (elementId: string): void => {\n    this.setState(currentState => {\n      const sourceToTargetsMapCopy = { ...currentState.sourceToTargetsMap };\n      delete sourceToTargetsMapCopy[elementId];\n      return { sourceToTargetsMap: sourceToTargetsMapCopy };\n    });\n  };\n\n  registerChild = (id: string, ref: HTMLElement): void => {\n    if (!this.state.refs[id]) {\n      this.state.observer.observe(ref);\n\n      this.setState((currentState: State) => ({\n        refs: { ...currentState.refs, [id]: ref },\n      }));\n    }\n  };\n\n  unregisterChild = (id: string): void => {\n    this.setState((currentState: State) => {\n      currentState.observer.unobserve(currentState.refs[id]);\n      const newRefs = { ...currentState.refs };\n      delete newRefs[id];\n      return { refs: newRefs };\n    });\n  };\n\n  getSourceToTargets = (): Array<SourceToTargetType> => {\n    const { sourceToTargetsMap } = this.state;\n\n    // Object.values is unavailable in IE11\n    const jaggedSourceToTargets: JaggedSourceToTargetsArrayType = Object.keys(\n      sourceToTargetsMap,\n    ).map((key: string) => sourceToTargetsMap[key]);\n\n    // Flatten\n    return [].concat.apply([], jaggedSourceToTargets);\n  };\n\n  getDist = (x1, y1, x2, y2) => Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  p5NumberMap = (value, in_min, in_max, out_min, out_max) => {\n    return ((value - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n  };\n\n  setRelativeOffsets = (sourceToTargets, anchor, parentCoordinates, id) => {\n    var relevantSourceToTargets = sourceToTargets.filter(\n      data =>\n        (data.source.id === id && data.source.anchor === anchor) ||\n        (data.target.id === id && data.target.anchor === anchor),\n    );\n\n    var otherLocationPosList = [];\n    var otherLocationPosDict = {};\n\n    relevantSourceToTargets.map(data => {\n      if (data.source.id === id) {\n        var otherLocation = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.target.id,\n          parentCoordinates,\n        );\n\n        var location = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.source.id,\n          parentCoordinates,\n        );\n      }\n\n      if (data.target.id === id) {\n        var otherLocation = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.source.id,\n          parentCoordinates,\n        );\n\n        var location = this.getPointCoordinatesFromAnchorPosition(\n          'middle',\n          data.target.id,\n          parentCoordinates,\n        );\n      }\n\n      var opposite = -1 * (location.y - otherLocation.y);\n      var adjacent = -1 * (location.x - otherLocation.x);\n      var theta = Math.atan(opposite / adjacent);\n      var thetaDegrees = (theta * 180) / Math.PI;\n\n      if (opposite > 0 && adjacent > 0) {\n      }\n\n      if (opposite < 0 && adjacent > 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 0, -90, 0, 90);\n      } else if (opposite < 0 && adjacent < 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 90, 0, 90, 180);\n      } else if (opposite > 0 && adjacent < 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 0, -90, 180, 270);\n      } else if (opposite > 0 && adjacent > 0) {\n        thetaDegrees = this.p5NumberMap(thetaDegrees, 90, 0, 270, 360);\n      }\n\n      if (anchor === 'right' && thetaDegrees >= 270) {\n        thetaDegrees -= 360;\n      }\n\n      var negationFactor;\n\n      if (anchor === 'bottom') {\n        negationFactor = 1;\n        thetaDegrees = (thetaDegrees + 270) % 360;\n      } else if (anchor === 'left') {\n        negationFactor = 1;\n        thetaDegrees = (thetaDegrees + 0) % 360;\n      } else if (anchor === 'top') {\n        thetaDegrees = (thetaDegrees + 90) % 360;\n        negationFactor = -1;\n      } else if (anchor === 'right') {\n        thetaDegrees = (thetaDegrees + 180) % 360;\n        negationFactor = -1;\n      }\n\n      otherLocationPosList.push(thetaDegrees);\n      otherLocationPosDict[thetaDegrees] = data;\n\n      // var negationFactor;\n      // if (anchor === 'top' || anchor === 'right') {\n      //   negationFactor = -1;\n      // } else if (anchor === 'left' || anchor === 'bottom') {\n      //   negationFactor = 1;\n      // }\n\n      otherLocationPosList.sort(function(a, b) {\n        return a - b;\n      });\n\n      otherLocationPosList.map((pos, index) => {\n        var data = otherLocationPosDict[pos];\n        var medianVal = 0.5 * (otherLocationPosList.length - 1);\n        if (data.source.id === id) {\n          data.relativeSourceOffset =\n            (index - medianVal) * this.props.relativeOffsetSize * negationFactor;\n        } else {\n          data.relativeTargetOffset =\n            (index - medianVal) * this.props.relativeOffsetSize * negationFactor;\n        }\n      });\n    });\n  };\n\n  getComputedAnchors = (source, target, parentCoordinates) => {\n    var startingAnchorOrientation = source.anchor;\n    var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n      'middle',\n      source.id,\n      parentCoordinates,\n    );\n\n    var endingAnchorOrientation = target.anchor;\n    var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n      'middle',\n      target.id,\n      parentCoordinates,\n    );\n\n    var xDiff = startingPoint.x - endingPoint.x;\n    var yDiff = startingPoint.y - endingPoint.y;\n\n    var computedSourceAnchor;\n    var computedTargetAnchor;\n\n    if (Math.abs(yDiff) > Math.abs(xDiff)) {\n      if (yDiff > 0) {\n        computedTargetAnchor = 'bottom';\n        computedSourceAnchor = 'top';\n      } else {\n        computedTargetAnchor = 'top';\n        computedSourceAnchor = 'bottom';\n      }\n    } else {\n      if (xDiff < 0) {\n        computedTargetAnchor = 'left';\n        computedSourceAnchor = 'right';\n      } else {\n        computedTargetAnchor = 'right';\n        computedSourceAnchor = 'left';\n      }\n    }\n\n    var newSource = Object.assign({}, source);\n    var newTarget = Object.assign({}, target);\n\n    if (source.anchor === 'middle') {\n      newSource.anchor = computedSourceAnchor;\n    }\n\n    if (target.anchor === 'middle') {\n      newTarget.anchor = computedTargetAnchor;\n    }\n\n    return { source: newSource, target: newTarget };\n  };\n\n  computeArrows = (): React$Node => {\n    const parentCoordinates = this.getParentCoordinates();\n\n    var sourceToTargets = this.getSourceToTargets();\n\n    sourceToTargets = sourceToTargets.filter(data => {\n      var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n        'middle',\n        data.source.id,\n        parentCoordinates,\n      );\n\n      var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n        'middle',\n        data.target.id,\n        parentCoordinates,\n      );\n\n      return startingPoint && endingPoint;\n    });\n\n    sourceToTargets = sourceToTargets.map(data => {\n      var result = this.getComputedAnchors(data.source, data.target, parentCoordinates);\n      data = Object.assign({}, data);\n      data.source = result.source;\n      data.target = result.target;\n      return data;\n    });\n\n    var idDict = {};\n    sourceToTargets.map(data => {\n      idDict[data.source.id] = '';\n      idDict[data.target.id] = '';\n    });\n\n    Object.keys(idDict).map(id => {\n      this.setRelativeOffsets(sourceToTargets, 'left', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'right', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'top', parentCoordinates, id);\n      this.setRelativeOffsets(sourceToTargets, 'bottom', parentCoordinates, id);\n    });\n\n    return sourceToTargets.map(data => {\n      var source = data.source;\n      var target = data.target;\n      var label = data.label;\n      var style = data.style;\n      var relativeSourceOffset = data.relativeSourceOffset;\n      var relativeTargetOffset = data.relativeTargetOffset;\n      const strokeColor = (style && style.strokeColor) || this.props.strokeColor;\n\n      const arrowLength = (style && style.arrowLength) || this.props.arrowLength;\n\n      const strokeWidth = (style && style.strokeWidth) || this.props.strokeWidth;\n\n      const strokeDasharray = (style && style.strokeDasharray) || this.props.strokeDasharray;\n\n      const arrowThickness = (style && style.arrowThickness) || this.props.arrowThickness;\n\n      const noCurves = (style && style.noCurves) || this.props.noCurves;\n\n      const offset = this.props.offset || 0;\n\n      var endingAnchorOrientation = target.anchor;\n      var endingPoint = this.getPointCoordinatesFromAnchorPosition(\n        target.anchor,\n        target.id,\n        parentCoordinates,\n      );\n\n      var startingAnchorOrientation = source.anchor;\n      var startingPoint = this.getPointCoordinatesFromAnchorPosition(\n        source.anchor,\n        source.id,\n        parentCoordinates,\n      );\n\n      if (source.anchor === 'top' || source.anchor === 'bottom') {\n        startingPoint.x += relativeSourceOffset;\n      } else {\n        startingPoint.y += relativeSourceOffset;\n      }\n\n      if (target.anchor === 'top' || target.anchor === 'bottom') {\n        endingPoint.x += relativeTargetOffset;\n      } else {\n        endingPoint.y += relativeTargetOffset;\n      }\n\n      var onMouseOver = this.props.onMouseOver;\n      if (!this.props.onMouseOver) {\n        onMouseOver = () => null;\n      }\n\n      var onMouseOut = this.props.onMouseOut;\n      if (!this.props.onMouseOut) {\n        onMouseOut = () => null;\n      }\n\n      return (\n        <SvgArrow\n          onMouseOver={() => onMouseOver({ source: source, target: target })}\n          onMouseOut={() => onMouseOut({ source: source, target: target })}\n          key={JSON.stringify({ source, target })}\n          startingPoint={startingPoint}\n          startingAnchorOrientation={startingAnchorOrientation}\n          endingPoint={endingPoint}\n          endingAnchorOrientation={endingAnchorOrientation}\n          strokeColor={strokeColor}\n          arrowLength={arrowLength}\n          strokeWidth={strokeWidth}\n          strokeDasharray={strokeDasharray}\n          arrowLabel={label}\n          arrowThickness={arrowThickness}\n          arrowMarkerId={this.getMarkerId(source, target)}\n          noCurves={!!noCurves}\n          offset={offset}\n        />\n      );\n    });\n  };\n\n  /** Generates an id for an arrow marker\n   * Useful to have one marker per arrow so that each arrow\n   * can have a different color!\n   * */\n  getMarkerId = (source: EntityRelationType, target: EntityRelationType): string => {\n    return `${this.arrowMarkerUniquePrefix}${source.id}${target.id}`;\n  };\n\n  /** Generates all the markers\n   * We want one marker per arrow so that each arrow can have\n   * a different color or size\n   * */\n  generateAllArrowMarkers = (): React$Node => {\n    return this.getSourceToTargets().map(({ source, target, label, style }: SourceToTargetType) => {\n      const strokeColor = (style && style.strokeColor) || this.props.strokeColor;\n\n      const arrowLength = (style && style.arrowLength) || this.props.arrowLength;\n\n      const arrowThickness = (style && style.arrowThickness) || this.props.arrowThickness;\n\n      const arrowPath = `M0,0 L0,${arrowThickness} L${arrowLength - 1},${arrowThickness / 2} z`;\n\n      return (\n        <marker\n          id={this.getMarkerId(source, target)}\n          key={this.getMarkerId(source, target)}\n          markerWidth={arrowLength}\n          markerHeight={arrowThickness}\n          refX=\"0\"\n          refY={arrowThickness / 2}\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path d={arrowPath} fill={strokeColor} />\n        </marker>\n      );\n    });\n  };\n\n  svgContainerStyle = () => ({\n    ...defaultSvgContainerStyle,\n    ...this.props.svgContainerStyle,\n  });\n\n  render() {\n    const SvgArrows = this.computeArrows();\n\n    return (\n      <ArcherContainerContextProvider\n        value={{\n          registerTransitions: this.registerTransitions,\n          unregisterTransitions: this.unregisterTransitions,\n          registerChild: this.registerChild,\n          unregisterChild: this.unregisterChild,\n        }}\n      >\n        <div style={{ ...this.props.style }} className={this.props.className}>\n          <div>\n            <svg\n              viewBox={`${-this.props.left / this.props.scale} ${-this.props.top /\n                this.props.scale} ${window.innerWidth / this.props.scale} ${window.innerHeight /\n                this.props.scale}`}\n              style={{\n                position: 'absolute',\n                top: -this.props.top / this.props.scale,\n                left: -this.props.left / this.props.scale,\n                width: window.innerWidth / this.props.scale,\n                height: window.innerHeight / this.props.scale,\n              }}\n            >\n              <defs>{this.generateAllArrowMarkers()}</defs>\n\n              {SvgArrows}\n            </svg>\n          </div>\n          <div style={{ height: '100%' }} ref={this.storeParent}>\n            {this.props.children}\n          </div>\n        </div>\n      </ArcherContainerContextProvider>\n    );\n  }\n}\n\nexport default ArcherContainer;\n","// @flow\n\nimport React from 'react';\nimport isEqual from 'react-fast-compare';\n\nimport { type ArcherContainerContextType, ArcherContainerContextConsumer } from './ArcherContainer';\n\ntype OuterProps = {\n  id: string,\n  relations: Array<RelationType>,\n  style?: Object,\n  className?: string,\n  children: React$Node,\n};\n\ntype InnerProps = OuterProps & {\n  context: ArcherContainerContextType,\n};\n\nexport class ArcherElementNoContext extends React.Component<InnerProps> {\n  static defaultProps = {\n    relations: [],\n  };\n\n  componentDidUpdate(prevProps: InnerProps) {\n    if (isEqual(prevProps.relations, this.props.relations)) return;\n\n    this.registerTransitions(this.props.relations);\n  }\n\n  componentDidMount() {\n    if (this.props.relations.length === 0) {\n      return;\n    }\n\n    this.registerTransitions(this.props.relations);\n  }\n\n  componentWillUnmount() {\n    this.unregisterChild();\n    this.unregisterTransitions();\n  }\n\n  registerTransitions = (newRelations: Array<RelationType>) => {\n    const newSourceToTarget = this.generateSourceToTarget(newRelations);\n\n    if (!this.props.context.registerTransitions) {\n      throw new Error(\n        `Could not find \"registerTransition\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.registerTransitions(this.props.id, newSourceToTarget);\n  };\n\n  generateSourceToTarget = (relations: Array<RelationType>): Array<SourceToTargetType> => {\n    const { id } = this.props;\n\n    return relations.map(\n      ({ targetId, sourceAnchor, targetAnchor, label, style }: RelationType) => ({\n        source: { id, anchor: sourceAnchor },\n        target: { id: targetId, anchor: targetAnchor },\n        label,\n        style,\n      }),\n    );\n  };\n\n  unregisterTransitions = () => {\n    if (!this.props.context.unregisterTransitions) {\n      throw new Error(\n        `Could not find \"unregisterTransitions\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.unregisterTransitions(this.props.id);\n  };\n\n  onRefUpdate = (ref: ?HTMLElement) => {\n    if (!ref) return;\n    if (!this.props.context.registerChild) {\n      throw new Error(\n        `Could not find \"registerChild\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.registerChild(this.props.id, ref);\n  };\n\n  unregisterChild = () => {\n    if (!this.props.context.unregisterChild) {\n      throw new Error(\n        `Could not find \"unregisterChild\" in the context of ` +\n          `<ArcherElement>. Wrap the component in a <ArcherContainer>.`,\n      );\n    }\n\n    this.props.context.unregisterChild(this.props.id);\n  };\n\n  render() {\n    return (\n      <div\n        style={{ ...this.props.style, position: 'relative' }}\n        className={this.props.className}\n        ref={this.onRefUpdate}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst ArcherElementWithContext = (props: OuterProps) => (\n  <ArcherContainerContextConsumer>\n    {context => <ArcherElementNoContext {...props} context={context} />}\n  </ArcherContainerContextConsumer>\n);\n\nexport default ArcherElementWithContext;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Component } from \"react\";\nimport {\n  Wrapper,\n  Header,\n  BottomRightResizeHandle,\n  BottomLeftResizeHandle,\n  RightResizeHandle,\n  BottomResizeHandle,\n  LeftResizeHandle,\n  ContentWrapper,\n  padding,\n  Title,\n  minWidth,\n  minHeight\n} from \"./styled\";\nimport { isSmartPosition } from \"./domain\";\nimport {\n  getCordsFromInitialPosition,\n  getBoundaryCoords,\n  isInView\n} from \"./utils\";\nimport { Stacker } from \"./stacker\";\nimport styled from \"styled-components\";\n\nimport \"./../../../App.scss\";\nimport $ from \"jquery\";\nimport pf, { globals, p5Lib } from \"./../../../globals.js\";\n\nimport ArcherContainer from \"./../../../react-archer/src/ArcherContainer.js\";\nimport ArcherElement from \"./../../../react-archer/src/ArcherElement.js\";\n\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nvar __extends =\n  (this && this.__extends) ||\n  (function() {\n    var extendStatics =\n      Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array &&\n        function(d, b) {\n          d.__proto__ = b;\n        }) ||\n      function(d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n      };\n    return function(d, b) {\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype =\n        b === null\n          ? Object.create(b)\n          : ((__.prototype = b.prototype), new __());\n    };\n  })();\n\nvar Cristal = (function(_super) {\n  __extends(Cristal, _super);\n  function Cristal() {\n    var _this = (_super !== null && _super.apply(this, arguments)) || this;\n\n    if (_this.props.zIndex) {\n      var zIndex = _this.props.zIndex;\n      Stacker.updateMaxIndex(zIndex);\n    } else {\n      var zIndex = Stacker.getNextIndex();\n    }\n\n    _this.state = {\n      x: padding,\n      y: padding,\n      isDragging: false,\n      isResizingX: false,\n      isResizingY: false,\n      isResizingXLeft: false,\n      zIndex: zIndex,\n      downKey: -1,\n      isMoving: false,\n      originalHeight: null,\n      ghostX: 0,\n      ghostY: 0\n    };\n\n    _this.opt = 18;\n    _this.cmd = 91;\n    _this.ctrl = 17;\n    _this.plus = 187;\n    _this.minus = 189;\n    _this.zero = 48;\n    _this.space = 32;\n    _this.onWindowResize = function() {\n      var _a = _this.state,\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n      var size = width && height ? { width: width, height: height } : undefined;\n      var _b = getBoundaryCoords({ x: x, y: y }, size),\n        newX = _b.x,\n        newY = _b.y;\n      _this.setState({\n        x: newX,\n        y: newY\n      });\n    };\n    _this.saveWrapperRef = function(el) {\n      _this.childrenElement = el;\n      if (!_this.childrenElement) return;\n      var initialSize = _this.props.initialSize;\n      var width, height;\n      if (initialSize) {\n        var rect = _this.childrenElement.getBoundingClientRect();\n        if (initialSize.width) {\n          width = initialSize.width;\n        } else {\n          width = rect.width;\n        }\n        if (initialSize.height) {\n          height = initialSize.height;\n        } else {\n          height = rect.height;\n        }\n      } else {\n        var rect = _this.childrenElement.getBoundingClientRect();\n        width = rect.width;\n        height = rect.height;\n      }\n\n      _this.setState({ width: width, height: height, originalHeight: height });\n      _this.setInitialPosition({ width: width, height: height });\n    };\n    _this.setInitialPosition = function(size) {\n      var initialPosition = _this.props.initialPosition;\n\n      if (!initialPosition) return;\n      var cords;\n      if (isSmartPosition(initialPosition)) {\n        cords = getCordsFromInitialPosition(initialPosition, size);\n      } else {\n        cords = initialPosition;\n      }\n      // var _a = getBoundaryCoords(cords, size),\n      //   x = _a.x,\n      //   y = _a.y;\n      _this.setState({ x: cords.x, y: cords.y });\n    };\n    _this.saveHeaderRef = function(el) {\n      _this.headerElement = el;\n    };\n\n    _this.onKeyDown = function(e) {\n      if (\n        _this.state.downKey === _this.cmd ||\n        _this.state.downKey === _this.ctrl\n      ) {\n        if (e.keyCode === _this.zero) {\n          e.preventDefault();\n        } else if (e.keyCode === _this.plus) {\n          e.preventDefault();\n        } else if (e.keyCode === _this.minus) {\n          e.preventDefault();\n        }\n      } else {\n        _this.setState({ downKey: e.keyCode });\n      }\n    };\n\n    _this.onKeyUp = function(e) {\n      if (e.keyCode === _this.state.downKey) {\n        _this.setState({ downKey: -1 });\n      }\n    };\n\n    _this.onMouseDown = function(e) {\n      var isDraggable = _this.props.isDraggable;\n      if (!isDraggable) return;\n\n      _this.setState({\n        isDragging: true\n      });\n    };\n\n    _this.manualResize = function(widthDiff, heightDiff) {\n      var width = _this.state.width,\n        height = _this.state.height;\n\n      _this.setState({ width: width + widthDiff, height: height + heightDiff });\n    };\n\n    _this.manualSetSize = function(width, height) {\n      _this.setState({ width: width, height: height });\n    };\n\n    _this.onWheel = function(e) {\n      if (e.ctrlKey) {\n        e.preventDefault();\n      }\n    };\n\n    _this.getPosition = function(movementX, movementY) {\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n\n      var newX = _this.state.ghostX + movementX;\n      var newY = _this.state.ghostY + movementY;\n\n      this.setState({ ghostX: newX, ghostY: newY });\n      if (_this.props.getSnapMargin) {\n        var snapMargin = _this.props.getSnapMargin();\n      } else {\n        var snapMargin = 0;\n      }\n\n      if (snapMargin === 0) {\n        return { x: newX, y: newY };\n      } else {\n        var roundX = Math.round(newX / snapMargin) * snapMargin;\n        var roundY = Math.round(newY / snapMargin) * snapMargin;\n        return { x: roundX, y: roundY };\n      }\n    };\n\n    _this.getDimensions = function(widthDiff, heightDiff, changeX) {\n      var newWidth = _this.state.ghostX + widthDiff;\n      var newHeight = _this.state.ghostY + heightDiff;\n      var oldAbsX = _this.state.x + _this.state.width;\n      var oldAbsY = _this.state.y + _this.state.height;\n      var newAbsX = _this.state.x + newWidth;\n      var newAbsY = _this.state.y + newHeight;\n\n      if (changeX) {\n        oldAbsX = _this.state.x;\n        newAbsX = _this.state.ghostX - widthDiff;\n      }\n\n      var ghostX = Math.max(newWidth, minWidth);\n      if (changeX) {\n        ghostX = _this.state.ghostX - widthDiff;\n      }\n      var ghostY = Math.max(newHeight, minHeight);\n      var onResize = _this.props.onResize;\n      if (_this.props.getSnapMargin) {\n        var snapMargin = _this.props.getSnapMargin();\n      } else {\n        var snapMargin = 0;\n      }\n      if (snapMargin === 0) {\n        var resizeBlocked = onResize(\n          widthDiff,\n          heightDiff,\n          _this.state.x,\n          false\n        );\n        if (!resizeBlocked) {\n          this.setState({ ghostX: ghostX, ghostY: ghostY });\n          return { widthDiff: widthDiff, heightDiff: heightDiff };\n        }\n      } else {\n        var roundAbsX = Math.round(newAbsX / snapMargin) * snapMargin;\n        var roundAbsY = Math.round(newAbsY / snapMargin) * snapMargin;\n\n        var sendingWidthDiff = 0;\n        var sendingHeightDiff = 0;\n        if (widthDiff != 0) {\n          sendingWidthDiff = roundAbsX - oldAbsX;\n        }\n        if (heightDiff != 0) {\n          sendingHeightDiff = roundAbsY - oldAbsY;\n        }\n\n        if (changeX) {\n          sendingWidthDiff = -sendingWidthDiff;\n        }\n\n        var resizeBlocked = onResize(\n          sendingWidthDiff,\n          sendingHeightDiff,\n          _this.state.x,\n          false\n        );\n\n        if (!resizeBlocked) {\n          this.setState({ ghostX: ghostX, ghostY: ghostY });\n          return { widthDiff: sendingWidthDiff, heightDiff: sendingHeightDiff };\n        }\n      }\n\n      return { widthDiff: 0, heightDiff: 0 };\n    };\n\n    _this.onMouseMove = function(e) {\n      var isResizing = _this.isResizing;\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n      var _a = _this.state,\n        isDragging = _a.isDragging,\n        currentX = _a.x,\n        currentY = _a.y,\n        currentWidth = _a.width,\n        currentHeight = _a.height;\n      var movementX = e.movementX,\n        movementY = e.movementY;\n      var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight;\n\n      if (isDragging) {\n        window.postMessage({ type: \"edited\" }, \"*\");\n        var size =\n          currentWidth && currentHeight\n            ? { width: currentWidth, height: currentHeight }\n            : undefined;\n\n        _this.onStartMove(() => {\n          if (_this.state.downKey === _this.space) {\n            return;\n          }\n          var newPosition = _this.getPosition(\n            movementX / scale,\n            movementY / scale\n          );\n          var newX = newPosition.x;\n          var newY = newPosition.y;\n\n          _this.setState({ x: newX, y: newY });\n        });\n\n        // _this.setState({ x: newX, y: newY }, _this.onStartMove);\n        return;\n      } else if (isResizing) {\n        window.postMessage({ type: \"edited\" }, \"*\");\n        _this.resizeCristal(e);\n      }\n    };\n\n    _this.resizeCristal = function(e) {\n      var isResizing = _this.isResizing;\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n\n      var _a = _this.state,\n        isDragging = _a.isDragging,\n        currentX = _a.x,\n        currentY = _a.y,\n        currentWidth = _a.width,\n        currentHeight = _a.height;\n      var movementX = e.movementX / scale,\n        movementY = e.movementY / scale;\n      var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight;\n      var newX = currentX + movementX;\n      var newY = currentY + movementY;\n      var _c = _this.state,\n        isResizingX = _c.isResizingX,\n        isResizingY = _c.isResizingY,\n        isResizingXLeft = _c.isResizingXLeft;\n\n      var height = currentHeight;\n      var width = currentWidth;\n      var x = currentX;\n\n      var widthDiff = 0;\n      var heightDiff = 0;\n      var changeX = false;\n\n      if (isResizingX) {\n        widthDiff = movementX;\n        // var width = Math.max(newWidth, minWidth);\n      }\n      if (isResizingXLeft) {\n        widthDiff = -movementX;\n        changeX = true;\n\n        // var width = Math.max(newWidth, minWidth);\n        // var x = currentX + movementX;\n      }\n      if (isResizingY) {\n        heightDiff = movementY;\n        // var height = Math.max(newHeight, minHeight);\n      }\n\n      _this.notifyResize(widthDiff, heightDiff, changeX);\n    };\n\n    _this.onStoppedMove = function() {\n      if (this.state.isMoving) {\n        _this.notifyStopMove();\n      }\n\n      _this.setState({ isMoving: false });\n    };\n\n    _this.onStartMove = function(callBack) {\n      _this.notifyMove();\n      if (_this.state.isMoving === false) {\n        _this.setState({ ghostX: _this.state.x, ghostY: _this.state.y }, () => {\n          _this.setState({ isMoving: true }, () => callBack());\n        });\n        _this.notifyStartMove();\n        if (_this.state.downKey === _this.opt) {\n          _this.notifyOptMove();\n        }\n      } else {\n        callBack();\n      }\n    };\n    _this.notifyMove = function() {\n      var onMove = _this.props.onMove;\n      onMove && onMove(_this.state);\n    };\n    _this.notifyZChange = function() {\n      var onZChange = _this.props.onZChange;\n      onZChange && onZChange(_this.state);\n    };\n    _this.notifyResize = function(widthDiff, heightDiff, changeX) {\n      var onResize = _this.props.onResize;\n      // var heightDiff = newHeight - _this.state.height;\n      // var widthDiff = newWidth - _this.state.width;\n      var resizeBlocked = false;\n\n      var dimensions = this.getDimensions(widthDiff, heightDiff, changeX);\n\n      widthDiff = dimensions.widthDiff;\n      heightDiff = dimensions.heightDiff;\n      var newHeight = Math.max(_this.state.height + heightDiff, minHeight);\n      var newWidth = Math.max(_this.state.width + widthDiff, minWidth);\n      var newX = _this.state.x;\n      if (changeX) {\n        newX -= widthDiff;\n      }\n      onResize(widthDiff, heightDiff, _this.state.x, true);\n      _this.setState({ height: newHeight, width: newWidth, x: newX });\n    };\n\n    _this.notifyStartMove = function() {\n      var onStartMove = _this.props.onStartMove;\n      onStartMove && onStartMove(_this.state);\n    };\n    _this.notifyStopMove = function() {\n      var onStopMove = _this.props.onStopMove;\n      onStopMove && onStopMove(_this.state);\n    };\n    _this.notifyOptMove = function() {\n      var onOptMove = _this.props.onOptMove;\n      onOptMove && onOptMove(_this.state);\n    };\n    _this.notifyStartResize = function() {\n      var onStartResize = _this.props.onStartResize;\n      onStartResize && onStartResize(_this.state);\n    };\n    _this.notifyStopResize = function() {\n      var onStopResize = _this.props.onStopResize;\n      onStopResize && onStopResize(_this.state);\n    };\n\n    _this.onMouseUp = function() {\n      _this.onStoppedMove();\n      if (\n        _this.state.isResizingY ||\n        _this.state.isResizingX ||\n        _this.state.isResizingXLeft\n      ) {\n        _this.notifyStopResize();\n      }\n      _this.setState({\n        isDragging: false,\n        isResizingX: false,\n        isResizingXLeft: false,\n        isResizingY: false,\n        mouseIsDown: false\n      });\n    };\n    _this.startFullResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      _this.setState({\n        isResizingX: true,\n        isResizingY: true\n      });\n    };\n    _this.startFullLeftResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      _this.setState({\n        isResizingXLeft: true,\n        isResizingY: true\n      });\n    };\n    _this.startXResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingX: true });\n    };\n    _this.startXLeftResize = function() {\n      _this.setState({ ghostX: _this.state.x, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingXLeft: true });\n    };\n    _this.startYResize = function() {\n      _this.setState({ ghostX: _this.state.width, ghostY: _this.state.height });\n      _this.notifyStartResize();\n      return _this.setState({ isResizingY: true });\n    };\n    _this.renderResizeHandles = function() {\n      var isResizable = _this.props.isResizable;\n\n      if (!isResizable) return;\n\n      if (_this.props.getScale) {\n        var scale = _this.props.getScale();\n      } else {\n        var scale = 1;\n      }\n      var height = _this.state.height;\n      var width = _this.state.width;\n      var thickness = 5;\n      var color = \"transparent\";\n      return [\n        React.createElement(RightResizeHandle, {\n          key: \"right-resize\",\n          onMouseDown: _this.startXResize,\n          style: {\n            background: color,\n            right: -thickness / 2,\n            width: thickness / scale,\n            bottom: thickness / scale,\n            height: height - 30 - thickness / scale\n          }\n        }),\n        React.createElement(LeftResizeHandle, {\n          key: \"left-resize\",\n          onMouseDown: _this.startXLeftResize,\n          style: {\n            background: color,\n            left: -thickness / 2,\n            width: thickness / scale,\n            bottom: thickness / scale,\n            height: height - 30 - thickness / scale\n          }\n        }),\n        React.createElement(BottomRightResizeHandle, {\n          key: \"bottom-right-resize\",\n          onMouseDown: _this.startFullResize,\n          style: {\n            background: color,\n            right: -thickness / 2,\n            bottom: -thickness / 2,\n            width: thickness / scale,\n            height: thickness / scale\n          }\n        }),\n        React.createElement(BottomLeftResizeHandle, {\n          key: \"bottom-left-resize\",\n          onMouseDown: _this.startFullLeftResize,\n          style: {\n            background: color,\n            left: -thickness / 2,\n            bottom: -thickness / 2,\n            width: thickness / scale,\n            height: thickness / scale\n          }\n        }),\n        React.createElement(BottomResizeHandle, {\n          key: \"bottom-resize\",\n          onMouseDown: _this.startYResize,\n          style: {\n            background: color,\n            bottom: -thickness / 2,\n            height: thickness / scale,\n            left: thickness / scale,\n            width: width - (2 * thickness) / scale\n          }\n        })\n      ];\n    };\n\n    _this.changeZIndex = function() {\n      var zIndex = _this.state.zIndex;\n      _this.setState(\n        {\n          zIndex: Stacker.getNextIndex(zIndex)\n        },\n        _this.notifyZChange\n      );\n    };\n\n    return _this;\n  }\n  Cristal.prototype.componentDidMount = function() {\n    document.addEventListener(\"mousedown\", this.onGlobalMouseDown);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n    document.addEventListener(\"wheel\", this.onWheel, { passive: false });\n    var iframeElem = document.getElementById(\"iframe\" + this.props.parentID);\n    if (iframeElem) {\n      iframeElem.addEventListener(\"wheel\", e => console.log(e));\n    }\n\n    this.notifyZChange();\n    // window.addEventListener('resize', this.onWindowResize);\n  };\n  Cristal.prototype.componentWillUnmount = function() {\n    document.removeEventListener(\"mousedown\", this.onGlobalMouseDown);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n    document.removeEventListener(\"wheel\", this.onWheel);\n\n    // window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  Object.defineProperty(Cristal.prototype, \"isResizing\", {\n    get: function() {\n      var _a = this.state,\n        isResizingX = _a.isResizingX,\n        isResizingY = _a.isResizingY,\n        isResizingXLeft = _a.isResizingXLeft;\n      return isResizingX || isResizingY || isResizingXLeft;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  function getLineRelations(_this) {\n    var _a = _this.state,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      isDragging = _a.isDragging,\n      zIndex = _a.zIndex;\n    if (_this.props.lineData) {\n      var lineData = _this.props.lineData;\n    } else {\n      var lineData = [];\n    }\n\n    var lineRelations = lineData.map(line => {\n      var targetAnchor;\n      var sourceAnchor;\n      var sourceX = x + width / 2;\n      var sourceY = y + height / 2;\n      var targetX =\n        parseInt($(\"#vertex_\" + line.end).css(\"left\"), 10) +\n        parseInt($(\"#vertex_\" + line.end).css(\"width\"), 10) / 2;\n      var targetY =\n        parseInt($(\"#vertex_\" + line.end).css(\"top\"), 10) +\n        parseInt($(\"#vertex_\" + line.end).css(\"height\"), 10) / 2;\n\n      var xDiff = sourceX - targetX;\n      var yDiff = sourceY - targetY;\n\n      if (!targetX) {\n        return null;\n      }\n\n      if (Math.abs(yDiff) > Math.abs(xDiff)) {\n        if (yDiff > 0) {\n          targetAnchor = \"bottom\";\n          sourceAnchor = \"top\";\n        } else {\n          targetAnchor = \"top\";\n          sourceAnchor = \"bottom\";\n        }\n      } else {\n        if (xDiff < 0) {\n          targetAnchor = \"left\";\n          sourceAnchor = \"right\";\n        } else {\n          targetAnchor = \"right\";\n          sourceAnchor = \"left\";\n        }\n      }\n\n      line.targetAnchor = targetAnchor;\n      line.sourceAnchor = sourceAnchor;\n      line.targetId = \"line_\" + line.end;\n\n      return line;\n    });\n\n    return lineRelations.filter(line => line);\n  }\n\n  function createIcon(\n    _this,\n    iconType,\n    hiddenFlag = false,\n    classVal = \"\",\n    callBack = null,\n    tooltipText\n  ) {\n    if (hiddenFlag) {\n      return null;\n    }\n\n    var uniqueClass = classVal + _this.props.parentID;\n    var mouseOverCallback = () => {\n      $(\".\" + uniqueClass).css({ opacity: \"1\" });\n    };\n\n    var mouseOutCallback = () => {\n      $(\".\" + uniqueClass).css({ opacity: globals.iconOpacity });\n    };\n    var opacity = globals.iconOpacity;\n    if (!callBack) {\n      mouseOverCallback = () => {};\n      mouseOutCallback = () => {};\n      opacity = opacity * 0.5;\n    }\n\n    var icon = React.createElement(\"img\", {\n      onClick: callBack,\n      style: {\n        opacity: opacity,\n        height: globals.iconSize,\n        width: globals.iconSize\n      },\n      className: \"text-greyIcon m-1 \" + uniqueClass,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n\n    if (!tooltipText) {\n      return icon;\n    }\n    return (\n      <div onMouseOver={mouseOverCallback} onMouseOut={mouseOutCallback}>\n        <OverlayTrigger\n          trigger=\"hover\"\n          placement=\"top\"\n          overlay={\n            <Tooltip id=\"alert\" className=\"picker-style-tooltip\">\n              {tooltipText}\n            </Tooltip>\n          }\n        >\n          {icon}\n        </OverlayTrigger>\n      </div>\n    );\n  }\n\n  Object.defineProperty(Cristal.prototype, \"header\", {\n    get: function() {\n      var _a = this.props,\n        title = _a.title,\n        isDraggable = _a.isDraggable,\n        onClose = _a.onClose,\n        closeHidden = _a.closeHidden,\n        onCopy = _a.onCopy,\n        copyHidden = _a.copyHidden;\n\n      var closeBtn = createIcon(\n        this,\n        globals.DeleteStampIcon,\n        closeHidden,\n        \"mouseOnClose\",\n        onClose,\n        \"delete stamp\"\n      );\n      var copyBtn = createIcon(\n        this,\n        globals.CopyIcon,\n        copyHidden,\n        \"mouseOnCopy\",\n        onCopy,\n        \"copy stamp\"\n      );\n      var clearBtn = createIcon(\n        this,\n        globals.ClearConsoleIcon,\n        !_a.showClear,\n        \"mousOnClear\",\n        _a.onClear,\n        \"clear console\"\n      );\n\n      if (_a.onMinimize) {\n        var minimizeBtn = createIcon(\n          this,\n          globals.MinimzeIcon,\n          _a.onMinimize === null,\n          \"mouseOnMinimize\",\n          _a.onMinimize\n        );\n      }\n\n      var titleIcon = null;\n      if (this.props.icon) {\n        var titleIcon = createIcon(this, this.props.icon);\n      }\n\n      var makeBigIcon = createIcon(\n        this,\n        globals.CodeSizeIcon,\n        !_a.showCodeSize,\n        \"mouseOnBig\",\n        _a.onCodeSize,\n        \"toggle text size\"\n      );\n\n      var sideButtons = (\n        <div\n          class=\"row mt-1\"\n          style={{ position: \"absolute\", cursor: \"auto\", right: 18, top: 0 }}\n        >\n          {makeBigIcon}\n          {copyBtn}\n          {closeBtn}\n          {clearBtn}\n          {minimizeBtn}\n        </div>\n      );\n\n      return React.createElement(\n        Header,\n        {\n          className: \"bg-white rounded-top\",\n          isDraggable: isDraggable,\n          ref: this.saveHeaderRef,\n          onMouseDown: this.onMouseDown\n        },\n        titleIcon,\n        sideButtons\n      );\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Cristal.prototype, \"content\", {\n    get: function() {\n      var children = this.props.children;\n      return React.createElement(ContentWrapper, {}, children);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Cristal.prototype.render = function() {\n    var isResizing = this.isResizing;\n    var _a = this.state,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height,\n      isDragging = _a.isDragging,\n      zIndex = _a.zIndex;\n    var className = this.props.className;\n    var isActive = isDragging || isResizing;\n    var style = {\n      left: x,\n      top: y,\n      margin: 0,\n      width: width,\n      height: height,\n      zIndex: zIndex,\n      position: \"absolute\",\n      border: this.props.border,\n      outline: this.props.outline\n    };\n\n    var HeaderComponent = this.header;\n    var ContentComponent = this.content;\n    if (this.props.invisible) {\n      return <span />;\n    }\n\n    var relations = [];\n    if (this.props.getLinesOn && this.props.getLinesOn()) {\n      relations = this.props.lineData;\n    }\n    var allContent = (\n      <ArcherElement id={\"line_\" + this.props.parentID} relations={relations}>\n        {HeaderComponent}\n        {ContentComponent}\n      </ArcherElement>\n    );\n\n    var onDoubleClick = () => null;\n    if (this.props.onDoubleClick) {\n      onDoubleClick = this.props.onDoubleClick;\n    }\n\n    var cristalComponent = React.createElement(\n      Wrapper,\n      {\n        id: \"vertex_\" + this.props.parentID,\n        style: style,\n        ref: this.saveWrapperRef,\n        isActive: isActive,\n        className: className + \" rounded \" + this.props.wrapperName,\n        onMouseDown: this.changeZIndex,\n        overflow: \"hidden\",\n        onDoubleClick: onDoubleClick\n      },\n      allContent,\n      this.renderResizeHandles()\n    );\n\n    return cristalComponent;\n  };\n  Cristal.defaultProps = {\n    children: null,\n    isResizable: true,\n    isDraggable: true\n  };\n  return Cristal;\n})(Component);\nexport { Cristal };\n","import * as React from 'react';\nimport { Component } from 'react';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CristalContent = (function (_super) {\n    __extends(CristalContent, _super);\n    function CristalContent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CristalContent.prototype.render = function () {\n        return React.createElement(\"div\", null, \"Custom Content\");\n    };\n    return CristalContent;\n}(Component));\nexport { CristalContent };\n","import * as React from 'react';\nimport { Component } from 'react';\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CristalHeader = (function (_super) {\n    __extends(CristalHeader, _super);\n    function CristalHeader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CristalHeader.prototype.render = function () {\n        return React.createElement(\"div\", null, \"Custom header\");\n    };\n    return CristalHeader;\n}(Component));\nexport { CristalHeader };\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport \"ace-builds/webpack-resolver\";\nimport AceEditor from \"react-ace\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\n\nimport \"./theme-p5.js\";\n\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\n\nimport { Resizable, ResizableBox } from \"react-resizable\";\n\nvar mime = require(\"mime-types\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class FunctionStamp extends Component {\n  constructor(props) {\n    super(props);\n    var starterEditorWidth = this.props.starterEditorWidth;\n    if (this.props.isMediaFile) {\n      starterEditorWidth = 0;\n    }\n    var starterArgs = this.props.starterArgs;\n    if (\n      this.props.isIndex ||\n      this.props.isTxtFile ||\n      this.props.isMediaFile ||\n      this.props.isBlob\n    ) {\n      starterArgs = \" \";\n    }\n\n    var starterName = this.props.starterName;\n    if (this.props.isBlob) {\n      starterName = \"\";\n    }\n\n    var starterIframeWidth = this.props.starterIframeWidth;\n    var starterIframeHeight = this.props.starterIframeHeight;\n    if (this.props.isTxtFile || this.props.isBlob) {\n      starterIframeWidth = 0;\n      starterIframeHeight = 0;\n    }\n\n    var lineHighLightingStatus = \"none\";\n\n    this.state = {\n      code: this.props.starterCode,\n      name: starterName,\n      args: starterArgs,\n      iframeDisabled: this.props.iframeDisabled,\n      iframeWidth: starterIframeWidth,\n      iframeHeight: starterIframeHeight,\n      editorHeight: this.props.starterEditorHeight,\n      editorWidth: starterEditorWidth,\n      isSpecialFn: false,\n      editorScrolling: false,\n      errorLines: this.props.errorLines,\n      iframeCode: \"\",\n      editsMade: false,\n      runningBorder: false,\n      resizingIframe: false,\n      x: this.props.initialPosition.x,\n      y: this.props.initialPosition.y,\n      hidden: this.props.initialHidden,\n      looping: true,\n      loopingTransition: \"\",\n      zIndex: this.props.starterZIndex,\n      exportableCode: \"\",\n      codeSize: this.props.starterCodeSize,\n      dataUri: \"\",\n      lineData: [],\n      editorTopShadow: false,\n      editorBottomShadow: false,\n      ghostX: starterIframeWidth,\n      ghostY: starterIframeHeight,\n      iframeDimensTransition: \"\",\n      mediaAssetHeight: null,\n      mediaAssetWidth: null,\n      lineHighLightingStatus: this.props.starterLineHighLightingStatus\n      // on, off, none\n    };\n\n    this.cristalRef = React.createRef();\n    this.editorRef = React.createRef();\n\n    this.updateLooping = this.updateLooping.bind(this);\n  }\n\n  toggleHide(callback) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n    if (this.state.hidden) {\n      this.setState(\n        {\n          hidden: false,\n          iframeHeight: this.state.iframeHeight,\n          zIndex: undefined\n        },\n        callback\n      );\n    } else {\n      this.setState({ hidden: true }, callback);\n    }\n  }\n\n  updateLooping(e) {\n    if (\n      e.data.type != \"loop\" ||\n      e.data.id != this.props.id ||\n      this.props.isIndex ||\n      this.props.isMediaFile ||\n      this.props.isBlob\n    ) {\n      return;\n    }\n\n    if (e.data.message === \"start\") {\n      this.setState({ looping: true, loopingTransition: \"\" });\n    } else if (e.data.message === \"stop\") {\n      this.setState({\n        looping: false,\n        loopingTransition: \"opacity 1s ease-in\"\n      });\n    }\n  }\n\n  componentDidMount() {\n    // this.loadp5Lib()\n\n    this.checkName();\n    this.setDataUri(() => this.props.requestCompile(this.props.id));\n    window.addEventListener(\"message\", this.updateLooping);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.updateLooping);\n  }\n\n  setDataUri(callback = () => null) {\n    if (this.props.isTxtFile === false) {\n      return;\n    }\n    var mimeType = mime.lookup(this.state.name);\n\n    if (!mimeType || mimeType.split(\"/\").length === 0) {\n      callback();\n      return;\n    }\n    var mimeTypeArr = mimeType.split(\"/\");\n    mimeTypeArr[0] = \"text\";\n    mimeType = mimeTypeArr.join(\"/\");\n\n    var fileObj = new File([this.state.code], this.state.name, {\n      type: mimeType\n    });\n\n    var reader = new FileReader();\n\n    reader.onload = function(e) {\n      this.setState({ dataUri: e.target.result }, callback);\n    };\n\n    reader.onload = reader.onload.bind(this);\n\n    reader.readAsDataURL(fileObj);\n  }\n\n  checkName() {\n    var isSpecialFn = this.state.name in globals.specialFns;\n    this.setState({ isSpecialFn: isSpecialFn });\n  }\n\n  addErrorLine(lineNum) {\n    var errorLines = this.state.errorLines;\n    errorLines[lineNum] = \"\";\n    this.setState({ errorLines: errorLines }, () =>\n      this.props.setLayerPicker()\n    );\n  }\n\n  setLineData(lineData = []) {\n    this.setState({ lineData: lineData });\n  }\n\n  clearErrorsAndUpdate(newErrors = []) {\n    var newErrorLines = this.state.errorLines;\n    var newErrorLines = {};\n\n    this.setState({ errorLines: newErrorLines }, () => {\n      var iframeCode = \"\";\n      var exportableCode = \"\";\n      this.props.setLayerPicker();\n\n      if (this.props.isBlob) {\n        exportableCode = this.props.getExportableCode();\n      } else if (\n        this.props.isTxtFile === false &&\n        this.props.isMediaFile === false\n      ) {\n        iframeCode = this.props.getHTML(this.props.id);\n      }\n\n      this.setState({\n        iframeCode: iframeCode,\n        exportableCode: exportableCode,\n        looping: true,\n        loopingTransition: \"\"\n      });\n      for (var i = 0; i < newErrors.length; i++) {\n        this.addErrorLine(newErrors[i]);\n      }\n    });\n  }\n\n  loadp5Lib() {\n    this.editorRef.current &&\n      this.editorRef.current.editor.completers.push({\n        getCompletions: function(editor, session, pos, prefix, callback) {\n          var completions = [];\n          p5Lib.forEach(function(w) {\n            completions.push({\n              value: w,\n              meta: \"p5.js\"\n            });\n          });\n          callback(null, completions);\n        }\n      });\n  }\n\n  getIframeDimensionFromGhost(movementX, movementY) {\n    var snapMargin = this.props.getSnapMargin();\n    var newX = this.state.ghostX + movementX;\n    var newY = this.state.ghostY + movementY;\n    this.setState({ ghostX: newX, ghostY: newY });\n    var snapMargin = this.props.getSnapMargin();\n\n    if (snapMargin === 0) {\n      return { movementX: movementX, movementY: movementY };\n    } else {\n      var roundX = Math.round(newX / snapMargin) * snapMargin;\n      var roundY = Math.round(newY / snapMargin) * snapMargin;\n      return {\n        movementX: roundX - this.state.iframeWidth,\n        movementY: roundY - this.state.iframeHeight\n      };\n    }\n  }\n\n  updateIframeDimensions(movementX = 0, movementY = 0) {\n    var newDimensions = this.getIframeDimensionFromGhost(movementX, movementY);\n\n    if (newDimensions.movementX === 0 && newDimensions.movementY === 0) {\n      return;\n    }\n\n    movementX = newDimensions.movementX;\n    movementY = newDimensions.movementY;\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    var width = this.state.iframeWidth + movementX;\n    var height = this.state.iframeHeight + movementY;\n    if (width < 30) {\n      movementX = 0;\n      width = 30;\n    }\n    if (height < 30) {\n      movementY = 0;\n      height = 30;\n    }\n\n    this.setState({ iframeWidth: width, iframeHeight: height });\n\n    if (this.props.isMediaFile === false) {\n      movementY = 0;\n    }\n\n    this.cristalRef.current.manualResize(movementX, movementY);\n  }\n\n  setEditorScrolling(isScrolling) {\n    if (isScrolling && this.state.editorScrolling == false) {\n      this.setState({ editorScrolling: true });\n      this.props.disablePan(true);\n    } else if (isScrolling === false && this.state.editorScrolling) {\n      this.setState({ editorScrolling: false });\n      this.props.disablePan(false);\n    }\n  }\n\n  renderEditor() {\n    var markers = [];\n    for (var i in this.state.errorLines) {\n      if (i != 0) {\n        markers.push({\n          startRow: i - 1,\n          endRow: i,\n          type: \"background\",\n          className: \"bg-warningOrange marker\"\n        });\n      }\n    }\n\n    var theme = \"p5\";\n\n    if (this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile) {\n      theme = \"solarized_light\";\n    }\n\n    if (this.props.isTxtFile || this.props.isIndex) {\n      var mimeType = mime.lookup(this.state.name);\n      if (!mimeType || mimeType.split(\"/\").length === 0) {\n        var mode = \"\";\n      } else {\n        var mimeTypeArr = mimeType.split(\"/\");\n        var mode = mimeTypeArr[mimeTypeArr.length - 1];\n      }\n    } else {\n      var mode = \"javascript\";\n    }\n\n    var shadow = \"\";\n\n    if (this.state.editorBottomShadow && this.state.editorTopShadow) {\n      shadow =\n        \"inset 0 7px 6px -8px rgba(0, 0, 0, .15), inset 0 -7px 6px -8px rgba(0, 0, 0, .15)\";\n    } else if (this.state.editorTopShadow) {\n      shadow = \"inset 0 7px 6px -8px rgba(0, 0, 0, .15)\";\n    } else if (this.state.editorBottomShadow) {\n      shadow = \"inset 0 -7px 6px -8px rgba(0, 0, 0, .15)\";\n    }\n\n    return (\n      <div\n        onMouseOut={() => {\n          this.setEditorScrolling(false);\n        }}\n      >\n        <br hidden={this.props.isBlob} />\n        <AceEditor\n          markers={markers}\n          style={{\n            width: this.state.editorWidth,\n            height: this.state.editorHeight,\n            background: \"transparent\",\n            boxShadow: shadow\n          }}\n          className=\"code\"\n          mode={mode}\n          theme={theme}\n          onChange={(value, editor) => {\n            this.setState({ code: value });\n            this.onEditsMade();\n          }}\n          name={\"name\" + this.props.id.toString()}\n          onLoad={editor => {\n            this.setEditorShadow(editor.renderer.scrollBar);\n            editor.on(\"change\", (arg, editor) => {\n              this.setEditorShadow(editor.renderer.scrollBar);\n            });\n          }}\n          fontSize={this.state.codeSize}\n          showPrintMargin={false}\n          wrapEnabled={true}\n          showGutter={false}\n          highlightActiveLine={false}\n          value={this.state.code}\n          ref={this.editorRef}\n          onScroll={editor => {\n            this.setEditorScrolling(true);\n            this.setEditorShadow(editor.renderer.scrollBar);\n          }}\n          setOptions={{\n            enableBasicAutocompletion: false,\n            enableLiveAutocompletion: false,\n            enableSnippets: false,\n            showLineNumbers: false,\n            tabSize: 2,\n            hasCssTransforms: true,\n            fontFamily: \"Inconsolata\"\n          }}\n        />\n      </div>\n    );\n  }\n\n  setEditorShadow(scrollBar) {\n    var editorTopShadow = false;\n    var editorBottomShadow = false;\n\n    if (scrollBar.scrollTop - 5 > 0) {\n      editorTopShadow = true;\n    }\n\n    if (\n      scrollBar.scrollTop + this.state.editorHeight + 5 <\n      scrollBar.scrollHeight\n    ) {\n      editorBottomShadow = true;\n    }\n\n    this.setState({\n      editorTopShadow: editorTopShadow,\n      editorBottomShadow: editorBottomShadow\n    });\n  }\n\n  stripExtension(name) {\n    var nameArr = name.split(\".\");\n    if (nameArr.length < 2) {\n      return name;\n    } else {\n      nameArr.pop();\n      return nameArr.join(\".\");\n    }\n  }\n\n  getExtension(name) {\n    var nameArr = name.split(\".\");\n    if (nameArr.length < 2) {\n      return \"\";\n    } else {\n      var ext = nameArr.pop();\n      return ext;\n    }\n  }\n\n  addExtension(name, nameWithExtension) {\n    var nameArr = nameWithExtension.split(\".\");\n    if (nameArr.length < 2) {\n      return name;\n    } else {\n      var ext = nameArr.pop();\n      return name + \".\" + ext;\n    }\n  }\n\n  compileCallback() {\n    if (this.state.editsMade) {\n      var compileActions = () => {\n        this.props.requestCompile(this.props.id);\n        window.postMessage({ type: \"edited\" }, \"*\");\n        this.setState({ editsMade: false, runningBorder: true }, () =>\n          setTimeout(() => {\n            this.setState({ runningBorder: false });\n          }, 300)\n        );\n      };\n\n      if (this.props.isTxtFile) {\n        this.setDataUri(compileActions);\n      } else {\n        compileActions();\n      }\n    }\n  }\n\n  onEditsMade() {\n    this.setState({ editsMade: true });\n    window.postMessage({ type: \"edited\" }, \"*\");\n  }\n\n  renderFunctionName() {\n    var displayName = \"\";\n    if (this.state.name != this.props.starterName) {\n      var displayName = this.state.Name;\n    }\n\n    var nameColor = \"blue\";\n    if (this.state.name in globals.builtIns) {\n      nameColor = \"pink\";\n    } else if (this.state.name in globals.listeners) {\n      nameColor = \"pink\";\n    } else if (\n      this.props.isIndex ||\n      this.props.isTxtFile ||\n      this.props.isMediaFile\n    ) {\n      nameColor = \"htmlCssName\";\n    }\n\n    var argsColor = \"greyText\";\n    var namePlaceholder = \"function name...\";\n    if (this.props.isTxtFile) {\n      namePlaceholder = \"file name...\";\n    } else if (this.props.isMediaFile) {\n      namePlaceholder = \"\";\n    }\n\n    var displayName = this.state.name;\n    if (this.props.isMediaFile) {\n      displayName = this.stripExtension(displayName);\n    }\n\n    var backgroundColor = \"bg-transparent\";\n    if (0 in this.state.errorLines) {\n      backgroundColor = \"bg-warningOrange\";\n    }\n    return (\n      <div>\n        <p\n          hidden={!this.props.isMediaFile}\n          className={\"text-lightGreyText name\"}\n          style={{ position: \"absolute\", top: 49, left: 19 }}\n        >\n          {this.state.name}\n        </p>\n        <input\n          placeholder={namePlaceholder}\n          disabled={this.props.isIndex}\n          onChange={event => {\n            var newName = event.target.value;\n\n            if (this.props.isMediaFile) {\n              newName = this.addExtension(newName, this.state.name);\n            }\n            this.setState({ name: newName });\n            this.onEditsMade();\n          }}\n          style={{ background: \"transparent\" }}\n          value={displayName}\n          class={\"text-\" + nameColor + \" name \" + backgroundColor}\n        />\n\n        <br />\n\n        <input\n          // @cameron styling for arguments field\n          placeholder=\"arguments...\"\n          disabled={\n            this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile\n          }\n          onChange={event => {\n            this.setState({ args: event.target.value });\n            this.onEditsMade();\n          }}\n          style={{ background: \"transparent\" }}\n          value={this.state.args}\n          class={\"text-\" + argsColor + \" args \" + backgroundColor}\n        />\n      </div>\n    );\n  }\n\n  renderMediaAsset() {\n    if (!this.props.isMediaFile) {\n      return null;\n    }\n\n    var mimeType = mime.lookup(this.state.name);\n    if (!mimeType) {\n      return;\n    }\n    if (mimeType.startsWith(\"image\")) {\n      if (!this.state.imageWidth) {\n        var img = new Image();\n\n        img.onload = function() {\n          this.setState({ imageWidth: img.width, imageHeight: img.height });\n        };\n\n        img.onload = img.onload.bind(this);\n\n        img.src = this.state.code;\n      }\n\n      return <img src={this.state.code} />;\n    } else if (mimeType.startsWith(\"audio\")) {\n      return (\n        <audio controls>\n          <source src={this.state.code} type={mimeType} />\n        </audio>\n      );\n    } else if (mimeType.startsWith(\"video\")) {\n      return (\n        <video controls>\n          <source src={this.state.code} type={mimeType} />\n        </video>\n      );\n    } else {\n      return (\n        <div\n          className={\"bg-borderGrey pt-5 d-flex justify-content-center\"}\n          style={{\n            width: this.state.iframeWidth,\n            height: this.state.iframeHeight\n          }}\n        >\n          {React.createElement(\"img\", {\n            style: { width: 100, height: 100, opacity: 0.5 },\n            src: globals.MediaAssetIcon\n          })}\n        </div>\n      );\n    }\n  }\n\n  manualIframeResize(width, height) {\n    // this.setState({iframeWidth:dimens.width, iframeHeight:dimens.height, resizingIframe:true}, setTimeout(() =>\n    //       this.setState({resizingIframe:false}), 250))\n\n    setTimeout(() => {\n      this.setState({ iframeDimensTransition: \"\" });\n    }, 1200);\n\n    setTimeout(() => {\n      this.setState({\n        resizingIframe: false,\n        iframeDimensTransition: \"opacity 1s ease-out\"\n      });\n    }, 200);\n\n    this.setState({ resizingIframe: true });\n    this.updateIframeDimensions(\n      width - this.state.iframeWidth,\n      height - this.state.iframeHeight\n    );\n  }\n\n  renderIframe() {\n    var loopingOpacity = 0.0;\n    if (this.state.looping === false) {\n      loopingOpacity = 0.5;\n    }\n\n    if (this.state.resizingIframe) {\n      var iframeDimensOpacity = 0.5;\n    } else {\n      var iframeDimensOpacity = 0;\n    }\n\n    return (\n      <div>\n        <div\n          style={{\n            position: \"absolute\",\n            fontSize: globals.codeSize,\n            opacity: iframeDimensOpacity,\n            top: globals.fnTitleHeight - 5,\n            right: 25,\n            transition: this.state.iframeDimensTransition\n          }}\n          class=\"text-greyText \"\n        >\n          {\"W:\" +\n            Math.floor(this.state.iframeWidth) +\n            \" H:\" +\n            Math.floor(this.state.iframeHeight)}\n        </div>\n        <div\n          style={{\n            transition: this.state.loopingTransition,\n            position: \"absolute\",\n            fontSize: globals.codeSize,\n            opacity: loopingOpacity,\n            top: globals.fnTitleHeight - 5,\n            left: 25 + this.state.editorWidth\n          }}\n          class=\"text-greyText \"\n        >\n          {\"paused\"}\n        </div>\n\n        <Resizable\n          className=\"ml-1 bg-white shadow\"\n          onResize={e => {\n            this.updateIframeDimensions(\n              e.movementX / this.props.getScale(),\n              e.movementY / this.props.getScale()\n            );\n          }}\n          onResizeStart={() => {\n            this.props.onStartMove();\n            this.setState({ resizingIframe: true });\n            this.setState({\n              ghostX: this.state.iframeWidth,\n              ghostY: this.state.iframeHeight\n            });\n          }}\n          onResizeStop={e => {\n            this.setState({\n              ghostX: this.state.iframeWidth,\n              ghostY: this.state.iframeHeight\n            });\n            this.props.onStopMove();\n            this.setState({ resizingIframe: false });\n            var newSize = this.props.getCristalDimens(this.getData());\n            this.cristalRef.current.manualSetSize(\n              newSize.width,\n              newSize.height\n            );\n          }}\n          onMouseOver={this.compileCallback.bind(this)}\n          style={{\n            overflow: \"hidden\",\n            zIndex: 5,\n            border: \"none\"\n          }}\n          handle={\n            <span\n              className=\"react-resizable-handle react-resizable-handle-se\"\n              onDoubleClick={() => {\n                if (this.state.imageWidth) {\n                  this.manualIframeResize(\n                    this.state.imageWidth,\n                    this.state.imageHeight\n                  );\n                } else {\n                  var dimens = this.props.getP5CanvasDimensions();\n                  this.manualIframeResize(dimens.width, dimens.height);\n                }\n              }}\n            />\n          }\n        >\n          <div>\n            <div\n              style={{\n                position: \"absolute\",\n                width: this.state.iframeWidth,\n                height: this.state.iframeHeight,\n                background: \"transparent\"\n              }}\n              hidden={!this.state.iframeDisabled}\n            >\n              {\" \"}\n            </div>\n            <div\n              style={{\n                height: this.state.iframeHeight,\n                width: this.state.iframeWidth,\n                zIndex: -1\n              }}\n            >\n              {this.renderMediaAsset()}\n\n              <iframe\n                hidden={this.props.isMediaFile}\n                ref={iframeElem => {\n                  if (iframeElem) {\n                    this.props.addNewIframeConsole(\n                      iframeElem.contentWindow.console\n                    );\n                  }\n                }}\n                id={\"iframe\" + this.props.id}\n                scrolling=\"no\"\n                style={{\n                  border: \"none\",\n\n                  height: this.state.iframeHeight,\n                  width: this.state.iframeWidth\n                  // pointerEvents:\"none\"\n                }}\n                srcdoc={this.state.iframeCode}\n                sandbox=\"allow-forms allow-modals allow-pointer-lock allow-popups  allow-same-origin allow-scripts\"\n                allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media\"\n              />\n            </div>\n          </div>\n        </Resizable>\n      </div>\n    );\n  }\n\n  setIframeDisabled(status) {\n    this.setState({ iframeDisabled: status });\n  }\n\n  getCopyStampName(name, isFile) {\n    if (!isFile) {\n      return name + \"Copy\";\n    } else {\n      var nameArr = name.split(\".\");\n      if (nameArr.length === 0) {\n        return \"\";\n      }\n      nameArr[0] = nameArr[0] + \"Copy\";\n      return nameArr.join(\".\");\n    }\n  }\n\n  copyAndOpt(isOpt = false) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n    if (this.props.isIndex) {\n      return;\n    }\n\n    var data = this.getData();\n    data.zIndex = undefined;\n\n    var newName = this.getCopyStampName(\n      this.state.name,\n      this.props.isTxtFile || this.props.isMediaFile\n    );\n\n    if (!this.props.isBlob) {\n      if (isOpt) {\n        this.setState({ name: newName }, () => this.checkName());\n      } else {\n        data.name = newName;\n      }\n    }\n\n    if (isOpt) {\n      data.iframeDisabled = true;\n    } else {\n      data.x += globals.copyOffset;\n      data.y += globals.copyOffset;\n    }\n\n    var callback = id => this.props.requestCompile(id);\n    if (isOpt) {\n      callback = id => {\n        this.props.requestCompile(id);\n        this.cristalRef.current.changeZIndex();\n      };\n    }\n\n    var newName = this.props.addStamp(data, callback);\n  }\n\n  getData() {\n    var name = this.state.name;\n    if (this.props.isBlob) {\n      name = this.props.getFirstLine(this.state.code);\n    }\n\n    var data = {\n      id: this.props.id,\n      name: name,\n      code: this.state.code,\n      args: this.state.args,\n      x: this.state.x,\n      y: this.state.y,\n      editorWidth: this.state.editorWidth,\n      editorHeight: this.state.editorHeight,\n      iframeWidth: this.state.iframeWidth,\n      iframeHeight: this.state.iframeHeight,\n      isIndex: this.props.isIndex,\n      isTxtFile: this.props.isTxtFile,\n      isMediaFile: this.props.isMediaFile,\n      hidden: this.state.hidden,\n      exported: true,\n      zIndex: this.state.zIndex,\n      isBlob: this.props.isBlob,\n      codeSize: this.state.codeSize,\n      icon: this.getIcon(),\n      lineHighLightingStatus: this.state.lineHighLightingStatus\n    };\n\n    return data;\n  }\n\n  resizeEditor(widthDiff, heightDiff, x, change = true) {\n    var height = this.state.editorHeight + heightDiff;\n    var width = this.state.editorWidth + widthDiff;\n\n    if (height < 0 || width < 0) {\n      return true;\n    }\n\n    if (change) {\n      this.setState({\n        editorHeight: height,\n        editorWidth: width,\n        x: x\n      });\n      this.editorRef.current.editor.resize();\n    }\n  }\n\n  getIcon() {\n    var icon = globals.FunctionStampIcon;\n    if (this.props.isIndex) {\n      icon = globals.HtmlStampIcon;\n    } else if (this.props.isBlob) {\n      icon = globals.BlobStampIcon;\n    } else if (this.props.isTxtFile) {\n      icon = globals.FileStampIcon;\n    } else if (this.props.isMediaFile) {\n      icon = globals.ImageStampIcon;\n    } else if (this.state.isSpecialFn) {\n      if (globals.specialFns[this.state.name]) {\n        icon = globals.BuiltInStampIcon;\n      } else {\n        icon = globals.ListenerStampIcon;\n      }\n    }\n\n    return icon;\n  }\n\n  setLineHighlighted(lineHighLightingStatus) {\n    this.setState({ lineHighLightingStatus: lineHighLightingStatus });\n  }\n\n  render() {\n    var headerColor = \"bg-white\";\n\n    var border = \"border border-borderGrey\";\n\n    if (Object.keys(this.state.errorLines).length > 0) {\n      border = \"border border-warningOrange\";\n    }\n    if (this.state.runningBorder) {\n      border = \"border border-blue\";\n    }\n\n    // <!-- @cameron little white div thing --> scroll down to style\n\n    var bgColor = \"bg-jsArea\";\n    if (this.props.isIndex || this.props.isTxtFile || this.props.isMediaFile) {\n      bgColor = \"bg-htmlCssArea\";\n    }\n\n    if (this.state.hidden) {\n      return <div></div>;\n    }\n\n    var iframeWidth = this.state.iframeWidth;\n    if (this.props.isTxtFile) {\n      iframeWidth = 0;\n    }\n\n    var initialHeight = this.state.editorHeight + globals.fnTitleHeight + 60;\n    if (this.props.isMediaFile) {\n      initialHeight = this.state.iframeHeight + globals.fnTitleHeight + 35;\n    } else if (this.props.isBlob) {\n      initialHeight = this.state.editorHeight + 60;\n    }\n\n    var cristalOpacity = 1;\n    var shadowSize = \"shadow-sm\";\n    if (this.state.lineHighLightingStatus === \"off\") {\n      cristalOpacity = 0.5;\n    }\n\n    if (this.state.lineHighLightingStatus === \"on\") {\n      shadowSize = \"shadow-lg\";\n    }\n\n    return (\n      <div style={{ opacity: cristalOpacity }}>\n        <Cristal\n          opacity={cristalOpacity}\n          zIndex={this.state.zIndex}\n          onZChange={s => {\n            this.setState({ zIndex: s.zIndex }, () => this.props.setLineData());\n          }}\n          getScale={this.props.getScale}\n          getSnapMargin={this.props.getSnapMargin}\n          initialSize={this.props.getCristalDimens(this.getData())}\n          ref={this.cristalRef}\n          isResizable={!this.props.isMediaFile}\n          onStartResize={() => {\n            this.props.onStartMove();\n            this.setEditorShadow(\n              this.editorRef.current.editor.renderer.scrollBar\n            );\n          }}\n          onStopResize={() => {\n            this.props.onStopMove();\n            this.setEditorShadow(\n              this.editorRef.current.editor.renderer.scrollBar\n            );\n          }}\n          onDoubleClick={() =>\n            this.props.getLinesOn() &&\n            this.props.setDependencyLineHighlightings(this.props.id)\n          }\n          onStartMove={this.props.onStartMove}\n          onStopMove={this.props.onStopMove}\n          onClose={() => this.props.onDelete(this.props.id)}\n          onCopy={() => this.copyAndOpt()}\n          onOptMove={() => this.copyAndOpt(true)}\n          closeHidden={this.props.isIndex}\n          copyHidden={this.props.isIndex}\n          getLinesOn={this.props.getLinesOn}\n          initialPosition={{ x: this.state.x, y: this.state.y }}\n          lineData={this.state.lineData}\n          className={\n            \"stamp \" +\n            shadowSize +\n            \" \" +\n            bgColor +\n            \" \" +\n            border +\n            \" vertex\" +\n            this.props.id\n          }\n          onResize={this.resizeEditor.bind(this)}\n          onMove={s => this.setState({ x: s.x, y: s.y })}\n          icon={this.getIcon()}\n          parentID={this.props.id}\n          showCodeSize={this.props.isBlob}\n          onCodeSize={() => {\n            window.postMessage({ type: \"edited\" }, \"*\");\n            if (this.state.codeSize === globals.codeSize) {\n              this.setState({ codeSize: globals.bigCodeSize });\n            } else {\n              this.setState({ codeSize: globals.codeSize });\n            }\n          }}\n        >\n          <div onMouseLeave={this.compileCallback.bind(this)}>\n            <div\n              class={headerColor}\n              hidden={this.props.isBlob}\n              style={{\n                position: \"absolute\",\n                top: globals.headerHeight,\n                left: 0,\n                width: \"100%\",\n                height: globals.fnTitleHeight,\n                color: \"transparent\"\n              }}\n            >\n              {\" \"}\n            </div>\n\n            <div class=\"p-2\">\n              <div hidden={this.props.isBlob}>{this.renderFunctionName()}</div>\n\n              <div class=\"row m-0 mt-2\" style={{ flexWrap: \"nowrap\" }}>\n                {this.renderEditor()}\n\n                {this.renderIframe()}\n              </div>\n            </div>\n          </div>\n        </Cristal>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport \"ace-builds/webpack-resolver\";\nimport AceEditor from \"react-ace\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport { Hook, Console, Decode } from \"console-feed\";\n\nvar _ = require(\"lodash\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ConsoleStamp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      logs: [],\n      consoleHeight: this.props.starterConsoleHeight,\n      consoleWidth: this.props.starterConsoleWidth,\n      lastFreq: 0,\n      hidden: this.props.initialHidden,\n      x: this.props.initialPosition.x,\n      y: this.props.initialPosition.y,\n      zIndex: -1\n    };\n\n    this.cristalRef = React.createRef();\n    this.limit = 100;\n    this.receiveMessage = this.receiveMessage.bind(this);\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"error\") {\n      return;\n    }\n\n    this.logToConsole(e.data.message);\n\n    var lineNum = e.data.lineno;\n    var message = e.data.message;\n    var id = e.data.id;\n\n    this.props.addErrorLine(lineNum, id);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.receiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.receiveMessage);\n  }\n\n  clearConsole() {\n    this.setState({ logs: [], lastFreq: 0 });\n  }\n\n  getIcon() {\n    return globals.ConsoleStampIcon;\n  }\n\n  toggleHide(callback) {\n    ipc && ipc.send(\"edited\");\n    if (this.state.hidden) {\n      this.setState(\n        {\n          hidden: false,\n          savedIframeHeight: this.state.iframeHeight,\n          iframeHeight: 0\n        },\n        () =>\n          this.setState(\n            { iframeHeight: this.state.savedIframeHeight },\n            callback\n          )\n      );\n    } else {\n      this.setState({ hidden: true }, callback);\n    }\n  }\n  setEditorScrolling(isScrolling) {\n    this.props.disablePan(isScrolling);\n  }\n\n  addNewIframeConsole(newConsole) {\n    var p5LogError = `Did you just try to use p5.js's loop() function? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n\n    var p5LogError2 = `Did you just try to use p5.js's noLoop() function? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup`;\n    Hook(newConsole, newLogs => {\n      newLogs.map(log => {\n        if (\n          log.method === \"log\" &&\n          log.data[0] != p5LogError &&\n          log.data[0] != p5LogError2\n        ) {\n          this.checkLastLog(log);\n        }\n      });\n    });\n  }\n\n  checkLastLog(log) {\n    var logs = this.state.logs;\n    if (logs.length < 1) {\n      this.setState({ logs: [log], lastFreq: 0 });\n      var consoleContainer = document.getElementById(\"consoleContainer\");\n      if (consoleContainer) {\n        consoleContainer.scrollTop = consoleContainer.scrollHeight;\n      }\n    } else {\n      var lastLog = logs[logs.length - 1];\n\n      if (_.isEqual(lastLog.data, log.data)) {\n        if (this.state.lastFreq >= this.limit) {\n          return;\n        }\n        this.setState({ lastFreq: this.state.lastFreq + 1 });\n      } else {\n        if (this.state.lastFreq > 1) {\n          var freqString = this.state.lastFreq.toString();\n          if (this.state.lastFreq >= this.limit) {\n            freqString += \"+\";\n          }\n          logs.push({\n            method: \"command\",\n            data: [\"(\" + freqString + \")\"]\n          });\n        }\n        logs.push(log);\n        this.setState({ logs: logs, lastFreq: 1 });\n        var consoleContainer = document.getElementById(\"consoleContainer\");\n        if (consoleContainer) {\n          consoleContainer.scrollTop = consoleContainer.scrollHeight;\n        }\n      }\n    }\n  }\n\n  logToConsole(message, method = \"error\") {\n    this.checkLastLog({ method: method, data: [message] });\n  }\n\n  getData() {\n    var data = {\n      x: this.state.x,\n      y: this.state.y,\n      consoleWidth: this.state.consoleWidth,\n      consoleHeight: this.state.consoleHeight,\n      hidden: this.state.hidden,\n      zIndex: this.state.zIndex\n    };\n\n    return data;\n  }\n\n  resizeConsole(widthDiff, heightDiff, x, change = true) {\n    var height = this.state.consoleWidth + heightDiff;\n    var width = this.state.consoleHeight + widthDiff;\n\n    if (height < 0 || width < 0) {\n      return true;\n    }\n\n    console.log(\"WIDTH\", this.state.consoleWidth);\n    // console.log(\"HEIGHT\", this.state.consoleHeight);\n\n    if (change) {\n      this.setState({\n        consoleHeight: height,\n        consoleWidth: width,\n        x: x\n      });\n    }\n  }\n\n  render() {\n    var renderedLogs = _.cloneDeep(this.state.logs);\n    if (this.state.lastFreq > 1) {\n      var freqString = this.state.lastFreq.toString();\n      if (this.state.lastFreq >= this.limit) {\n        freqString += \"+\";\n      }\n\n      renderedLogs.push({\n        method: \"command\",\n        data: [\"(\" + freqString + \")\"]\n      });\n\n      var consoleContainer = document.getElementById(\"consoleContainer\");\n      if (consoleContainer) {\n        consoleContainer.scrollTop = consoleContainer.scrollHeight;\n      }\n    }\n\n    if (this.state.hidden) {\n      return <div></div>;\n    }\n\n    return (\n      <Cristal\n        getLinesOn={this.props.getLinesOn}\n        getSnapMargin={this.props.getSnapMargin}\n        zIndex={this.props.starterZIndex}\n        getScale={this.props.getScale}\n        parentID={this.props.id}\n        ref={this.cristalRef}\n        closeHidden={true}\n        copyHidden={true}\n        onResize={this.resizeConsole.bind(this)}\n        initialPosition={{ x: this.state.x, y: this.state.y }}\n        onMove={s => this.setState({ x: s.x, y: s.y })}\n        onStartResize={this.props.onStartMove.bind(this)}\n        onStopResize={this.props.onStopMove.bind(this)}\n        className=\"stamp bg-lightGrey border border-borderGrey shadow-sm\"\n        icon={this.getIcon()}\n        showClear\n        onZChange={s => this.setState({ zIndex: s.zIndex })}\n        onClear={this.clearConsole.bind(this)}\n        initialSize={{\n          width: this.state.consoleWidth + 22,\n          height: this.state.consoleHeight + 50\n        }}\n      >\n        <div\n          id=\"consoleContainer\"\n          onMouseOver={() => this.setEditorScrolling(true)}\n          onMouseOut={() => this.setEditorScrolling(false)}\n          style={{\n            width: this.state.consoleWidth,\n            height: this.state.consoleHeight,\n            overflow: \"hidden\",\n            \"overflow-y\": \"scroll\",\n            \"white-space\": \"nowrap\"\n          }}\n        >\n          <Console\n            styles={{\n              LOG_COLOR: \"black\",\n              LOG_ERROR_BACKGROUND: \"rgba(255, 184, 0, .5)\",\n              LOG_ERROR_BORDER: \"transparent\",\n              LOG_ERROR_COLOR: \"rgba(102,102,102)\",\n              BASE_FONT_FAMILY: \"Inconsolata\",\n              BASE_FONT_SIZE: 10,\n              LOG_COMMAND_COLOR: \"rgba(150,150,150)\",\n              BASE_BACKGROUND_COLOR: \"transparent\",\n              LOG_BORDER: \"rgb(225,225,225)\",\n              LOG_COMMAND_ICON: \"\"\n            }}\n            logs={renderedLogs}\n            variant=\"light\"\n          />\n        </div>\n      </Cristal>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport ConsoleStamp from \"./ConsoleStamp.js\";\n\nimport { Mutex } from \"async-mutex\";\nimport { Line } from \"react-lineto\";\nimport cheerio from \"cheerio\";\nimport { SteppedLineTo } from \"react-lineto\";\nimport parser from \"./parser.js\";\nimport anim from \"css-animation\";\nimport { Resizable, ResizableBox } from \"react-resizable\";\nimport styled from \"styled-components\";\n\nimport Overlay from \"react-bootstrap/Overlay\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\n\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\nimport pf1, {\n  normalFn,\n  starterBlobs,\n  listenerFns,\n  builtInFns,\n  worlds,\n  sampleFile,\n  empty,\n  starter\n} from \"./starterStamps.js\";\n\nvar _ = require(\"lodash\");\n\nvar esprima = require(\"esprima\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ControlBar extends Component {\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.minPickerHeight = 70;\n    this.minJsImporterHeight = 30;\n    this.topBarHeight = 60;\n    this.minWidth = 150;\n    this.minNonSideBarWidth = 30;\n    this.editorRef = React.createRef();\n    this.importButtonHeight = 50;\n    this.spanWidth = 5;\n    this.spanWidthWide = 60;\n    this.receiveMessage = this.receiveMessage.bind(this);\n\n    this.state = {\n      worldDropDowns: [],\n      jsImporterHeight: 110,\n      sideBarWidth: 200,\n      pickerHeight:\n        window.innerHeight -\n        (this.topBarHeight + this.importButtonHeight + 110),\n      pickerScrollEnabled: true,\n      codeHasError: false,\n      code: `\\n// import unstructured Javascript code or individual functions\n\n// like the below, feel free to delete: \nfunction noiseWave() {\nlet noiseScale=0.02;\nbackground(0);\nfor (let x=0; x < width; x++) {\nlet noiseVal = noise((mouseX+x)*noiseScale, mouseY*noiseScale);\nstroke(noiseVal*255);\nline(x, mouseY+noiseVal*80, x, height);\n}\n}`\n    };\n  }\n\n  componentDidMount() {\n    this.props.updateControlBarDimensions(\n      this.state.sideBarWidth,\n      this.topBarHeight\n    );\n    window.addEventListener(\"resize\", this.onWindowResize.bind(this));\n    window.addEventListener(\"message\", this.receiveMessage);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onWindowResize);\n    window.removeEventListener(\"message\", this.receiveMessage);\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"worlds\") {\n      return;\n    }\n\n    this.setWorldDropDowns();\n  }\n\n  onWindowResize(e) {\n    this.setState({\n      pickerHeight:\n        window.innerHeight -\n        (this.topBarHeight +\n          this.importButtonHeight +\n          this.state.jsImporterHeight)\n    });\n    if (this.state.sideBarWidth > window.innerWidth - this.minNonSideBarWidth) {\n      this.setState({\n        sideBarWidth: window.innerWidth - this.minNonSideBarWidth\n      });\n    }\n  }\n\n  renderSideBar() {\n    return (\n      <div\n        class=\"bg-white border border-borderGrey shadow-sm\"\n        onMouseOver={() => {\n          this.props.disablePan(true);\n          this.props.disableZoom(true);\n        }}\n        onMouseOut={() => {\n          this.props.disablePan(false);\n          this.props.disableZoom(false);\n        }}\n        style={{\n          position: \"absolute\",\n          top: this.topBarHeight,\n          left: 0,\n          height: window.innerHeight - this.topBarHeight,\n\n          zIndex: 1000000000000000000\n        }}\n      >\n        <Resizable\n          width={this.state.sideBarWidth}\n          onResize={e => {\n            var newWidth = this.state.sideBarWidth + e.movementX;\n            if (\n              newWidth > this.minWidth &&\n              newWidth <= window.innerWidth - this.minNonSideBarWidth\n            ) {\n              this.setState({ sideBarWidth: newWidth }, () =>\n                this.editorRef.current.editor.resize()\n              );\n            }\n          }}\n          onResizeStop={e =>\n            this.props.updateControlBarDimensions(\n              this.state.sideBarWidth,\n              this.topBarHeight\n            )\n          }\n          height={window.innerHeight - this.topBarHeight}\n          axis=\"x\"\n          handle={this.renderSideBarResizeHandle()}\n        >\n          <div>\n            {this.renderLayerPicker()}\n            {this.renderJsImporter()}\n            {this.renderImportButton()}\n          </div>\n        </Resizable>\n      </div>\n    );\n  }\n\n  parseCode() {\n    try {\n      this.props.addRawJavascript(this.state.code);\n      this.setState({ code: \"\" });\n    } catch (e) {\n      this.setState({ codeHasError: true });\n    }\n  }\n  renderJsImporter() {\n    return (\n      <div\n        class=\"bg-jsArea\"\n        style={{\n          width: this.state.sideBarWidth,\n          height:\n            window.innerHeight - (this.state.pickerHeight + this.topBarHeight)\n        }}\n      >\n        <AceEditor\n          style={{\n            width: this.state.sideBarWidth,\n            height:\n              window.innerHeight -\n              (this.state.pickerHeight +\n                this.topBarHeight +\n                this.importButtonHeight),\n            background: \"transparent\",\n            fontFamily: \"Inconsolata\"\n          }}\n          mode=\"javascript\"\n          theme=\"p5\"\n          onChange={value =>\n            this.setState({ code: value, codeHasError: false })\n          }\n          name={\"jsImporter\"}\n          fontSize={globals.codeSize}\n          showPrintMargin={false}\n          wrapEnabled={true}\n          showGutter={false}\n          highlightActiveLine={false}\n          onMouseOver={() => this.props.disablePan(true)}\n          onMouseOut={() => this.props.disablePan(false)}\n          value={this.state.code}\n          ref={this.editorRef}\n          setOptions={{\n            tabSize: 2,\n            hasCssTransforms: true\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderImportButton() {\n    var text = \"import javascript\";\n    var color = \"grey\";\n    if (this.state.codeHasError) {\n      text = \"syntax error\";\n      color = \"warningOrangeDark\";\n    }\n\n    return (\n      <div\n        class=\"p-2\"\n        style={{ position: \"absolute\", bottom: -2, left: -5, width: \"100%\" }}\n      >\n        <button\n          class={\n            \"btn btn-block shadow-sm m-1 bg-\" + color + \" border-borderGrey\"\n          }\n          style={{\n            fontSize: globals.buttonTextSize\n          }}\n          onClick={this.parseCode.bind(this)}\n          disabled={this.state.codeHasError}\n        >\n          {text}\n        </button>\n      </div>\n    );\n  }\n\n  getDraggableClass(snapshot, hasError) {\n    var className;\n    if (snapshot.isDragging) {\n      className = \"border border-lightGreyText\";\n    } else {\n      className = \"border-bottom border-borderGrey\";\n    }\n\n    if (hasError) {\n      if (snapshot.isDragging) {\n        className += \" bg-warningOrange\";\n      } else {\n        className = \"border-bottom border-white bg-warningOrange\";\n      }\n    } else {\n      className += \" bg-white\";\n    }\n\n    return className;\n  }\n\n  renderPicker(item) {\n    if (item.status) {\n      var iconType = item.toggleOnIcon;\n      var iconNameCallback = () =>\n        centerCallback(this.state.sideBarWidth, this.topBarHeight);\n    } else {\n      var iconType = item.toggleOffIcon;\n      var iconNameCallback = null;\n    }\n\n    var overalOpacity = 1;\n    var centerCallback = item.centerCallback;\n\n    if (item.status === false && item.icon != globals.EmptyIcon) {\n      overalOpacity = 0.5;\n      centerCallback = () => null;\n    }\n\n    if (!item.centerCallback) {\n      centerCallback = () => null;\n      iconNameCallback = null;\n    }\n\n    if (item.icon === globals.EmptyIcon) {\n      var iconType = item.toggleOnIcon;\n      if (item.status === false) {\n        var iconType = item.toggleOffIcon;\n      }\n    }\n\n    return (\n      <div\n        style={{ opacity: overalOpacity, width: this.state.sideBarWidth }}\n        class=\"d-flex justify-content-between p-1 pl-2 pr-3\"\n      >\n        <div\n          clas=\"row\"\n          style={{ overflow: \"hidden\", cursor: \"auto\" }}\n          onClick={() =>\n            centerCallback(this.state.sideBarWidth, this.topBarHeight)\n          }\n        >\n          {this.createIcon(\n            \"type\" + item.id.toString(),\n            item.icon,\n            iconNameCallback,\n            item.name\n          )}\n        </div>\n        <div style={{ cursor: \"auto\" }}>\n          {this.createIcon(\n            \"hide\" + item.id.toString(),\n            iconType,\n            item.hideCallback\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderPickers(provided, snapshot) {\n    var pickers = [];\n    var overflowY = \"hidden\";\n    if (this.state.pickerScrollEnabled) {\n      overflowY = \"scroll\";\n    }\n\n    this.props.pickerData.map((item, index) => {\n      if (item.isSetting) {\n        pickers.push(this.renderSettingsPicker(item));\n        return;\n      }\n\n      pickers.push(\n        <Draggable draggableId={item.id.toString()} index={index}>\n          {(provided, snapshot) => (\n            <div\n              class={this.getDraggableClass(snapshot, item.hasError)}\n              ref={provided.innerRef}\n              {...provided.draggableProps}\n              {...provided.dragHandleProps}\n            >\n              {this.renderPicker(item)}\n            </div>\n          )}\n        </Draggable>\n      );\n    });\n\n    return (\n      <div\n        className=\" bg-white\"\n        style={{\n          \"overflow-y\": overflowY,\n          width: this.state.sideBarWidth,\n          flexGrow: 1\n        }}\n        ref={provided.innerRef}\n        {...provided.droppableProps}\n      >\n        {pickers}\n        {provided.placeholder}\n        <br />\n        <br />\n      </div>\n    );\n  }\n\n  renderSettingsPicker(item) {\n    return (\n      <div class=\"border-bottom border-borderGrey bg-grey\">\n        {this.renderPicker(item)}\n      </div>\n    );\n  }\n\n  renderSettingsPickers() {\n    var pickers = this.props.settingsPicker.map(item =>\n      this.renderSettingsPicker(item)\n    );\n\n    return (\n      <div\n        class=\"bg-white  border-bottom border-borderGrey shadow-sm\"\n        style={{ zIndex: 2 }}\n      >\n        {pickers}\n      </div>\n    );\n  }\n\n  renderLayerPicker() {\n    return (\n      <Resizable\n        width={this.state.sideBarWidth}\n        onResize={e => {\n          var newHeight = this.state.pickerHeight + e.movementY;\n          if (\n            newHeight > this.minPickerHeight &&\n            newHeight <\n              window.innerHeight -\n                (this.topBarHeight +\n                  this.minJsImporterHeight +\n                  +this.importButtonHeight)\n          ) {\n            this.setState(\n              {\n                pickerHeight: this.state.pickerHeight + e.movementY,\n                jsImporterHeight: this.state.jsImporterHeight - e.movementY\n              },\n              () => this.editorRef.current.editor.resize()\n            );\n          }\n        }}\n        onResizeStart={() => this.setState({ pickerScrollEnabled: false })}\n        onResizeStop={() => this.setState({ pickerScrollEnabled: true })}\n        height={this.state.pickerHeight}\n        axis=\"y\"\n        handle={this.renderPickerResizeHandle()}\n      >\n        <div\n          style={{\n            overflow: \"hidden\",\n            flexFlow: \"column\",\n            display: \"flex\",\n            height: this.state.pickerHeight\n          }}\n        >\n          {this.renderSettingsPickers()}\n          <DragDropContext onDragEnd={this.props.onDragEnd}>\n            <Droppable droppableId=\"droppable\">\n              {this.renderPickers.bind(this)}\n            </Droppable>\n          </DragDropContext>\n        </div>\n      </Resizable>\n    );\n  }\n\n  createIcon(uniqueClass, iconType, hideCallback = null, text) {\n    var mouseOverCallback = () => {\n      $(\".\" + uniqueClass + \"Icon\").css({ opacity: \"1\" });\n      $(\".\" + uniqueClass + \"Text\")\n        .removeClass(\"text-greyText\")\n        .addClass(\"text-greyIcon\");\n    };\n\n    var mouseOutCallback = () => {\n      $(\".\" + uniqueClass + \"Icon\").css({ opacity: globals.iconOpacity });\n      $(\".\" + uniqueClass + \"Text\")\n        .addClass(\"text-greyText\")\n        .removeClass(\"text-greyIcon\");\n    };\n    if (!hideCallback) {\n      mouseOverCallback = () => {};\n      mouseOutCallback = () => {};\n    }\n    if (text) {\n      return (\n        <div onMouseOver={mouseOverCallback} onMouseOut={mouseOutCallback}>\n          {React.createElement(\"img\", {\n            style: {\n              height: globals.iconSize,\n              opacity: globals.iconOpacity,\n              width: globals.iconSize\n            },\n            className: \" m-1 text-greyIcon \" + uniqueClass + \"Icon\",\n            onClick: hideCallback,\n            src: iconType\n          })}\n          <b class={\"text-greyText picker ml-1 \" + uniqueClass + \"Text\"}>\n            {text}\n          </b>\n        </div>\n      );\n    }\n\n    return React.createElement(\"img\", {\n      style: {\n        height: globals.iconSize,\n        opacity: globals.iconOpacity,\n        width: globals.iconSize\n      },\n      className: \" m-1 text-greyIcon \" + uniqueClass + \"Icon\",\n      onClick: hideCallback,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n  }\n\n  renderSideBarResizeHandle() {\n    return (\n      <div\n        style={{\n          width: 10,\n          cursor: \"ew-resize\",\n          height: \"100%\",\n          right: 0,\n          top: 0,\n          position: \"absolute\",\n          background: \"transparent\",\n          color: \"transparent\"\n        }}\n      >\n        hi\n      </div>\n    );\n  }\n\n  renderPickerResizeHandle() {\n    return (\n      <span\n        className=\"border-bottom border-borderGrey border-top bg-grey\"\n        style={{\n          width: \"100%\",\n          cursor: \"ns-resize\",\n          height: 15,\n          right: 0,\n          bottom: 0,\n          position: \"absolute\",\n          background: \"transparent\"\n        }}\n      />\n    );\n  }\n\n  renderTopBar() {\n    return (\n      <div\n        class=\"bg-white border border-borderGrey shadow-sm row justify-content-between\"\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 15,\n          height: this.topBarHeight + 2,\n          width: \"100%\",\n          zIndex: 1000000000000000001\n        }}\n        onMouseOver={() => {\n          this.props.disablePan(true);\n          this.props.disableZoom(true);\n        }}\n        onMouseOut={() => {\n          this.props.disablePan(false);\n          this.props.disableZoom(false);\n        }}\n      >\n        <span hidden={!ipc} />\n        <div class=\"row pl-5\" hidden={ipc}>\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.UploadIcon}\n            uniqueClass=\"upload\"\n            iconCallback={() => {\n              this.props.modalManagerRef.current.requestUpload();\n            }}\n            tooltipText=\"upload sketch\"\n            alignLeft\n          />\n          <span style={{ width: this.spanWidthWide }} />\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.DownloadIcon}\n            uniqueClass=\"download\"\n            iconCallback={() => {\n              this.props.modalManagerRef.current.requestDownload();\n            }}\n            tooltipText=\"download sketch\"\n          />\n        </div>\n\n        <div class=\"row\">\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.FunctionStampIcon}\n            uniqueClass=\"basic\"\n            iconCallback={() =>\n              this.props.addStamp(normalFn, id => {\n                this.props.requestCompile(id);\n                window.postMessage({ type: \"edited\" }, \"*\");\n              })\n            }\n            dropDownData={builtInFns\n              .map(data => ({\n                name: data.name,\n                icon: globals.BuiltInStampIcon,\n                callback: () =>\n                  this.props.addStamp(data, id => {\n                    this.props.requestCompile(id);\n                    window.postMessage({ type: \"edited\" }, \"*\");\n                  })\n              }))\n              .concat([{}])\n              .concat(\n                listenerFns.map(data => ({\n                  name: data.name,\n                  icon: globals.ListenerStampIcon,\n                  callback: () =>\n                    this.props.addStamp(data, id => {\n                      this.props.requestCompile(id);\n                      window.postMessage({ type: \"edited\" }, \"*\");\n                    })\n                }))\n              )}\n            tooltipText=\"function\"\n          />\n          <span style={{ width: this.spanWidth }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.BlobStampIcon}\n            uniqueClass=\"varStamp\"\n            iconCallback={() =>\n              this.props.addStamp(starterBlobs[0].data, id => {\n                this.props.requestCompile(id);\n                window.postMessage({ type: \"edited\" }, \"*\");\n              })\n            }\n            dropDownData={starterBlobs.map(starterBlob => ({\n              name: starterBlob.name,\n              icon: globals.BlobStampIcon,\n              callback: () =>\n                this.props.addStamp(starterBlob.data, id => {\n                  this.props.requestCompile(id);\n                  window.postMessage({ type: \"edited\" }, \"*\");\n                })\n            }))}\n            tooltipText=\"global\"\n          />\n          <span style={{ width: this.spanWidth }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.FileStampIcon}\n            uniqueClass=\"fileStamp\"\n            iconCallback={() =>\n              this.props.modalManagerRef.current.requestFileUpload(\"text\")\n            }\n            tooltipText=\"file\"\n            dropDownData={[\n              {\n                name: \"upload files\",\n                icon: globals.FileStampIcon,\n                callback: () =>\n                  this.props.modalManagerRef.current.requestFileUpload(\"text\")\n              },\n              {\n                name: \"new file\",\n                icon: globals.FileStampIcon,\n                callback: () =>\n                  this.props.addStamp(sampleFile, id => {\n                    this.props.requestCompile(id);\n                    window.postMessage({ type: \"edited\" }, \"*\");\n                  })\n              }\n            ]}\n          />\n\n          <span style={{ width: this.spanWidth }} />\n          <TopButton\n            iconType={globals.ImageStampIcon}\n            uniqueClass=\"imageStamp\"\n            iconCallback={() =>\n              this.props.modalManagerRef.current.requestFileUpload()\n            }\n            tooltipText=\"media\"\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n          />\n\n          <span style={{ width: this.spanWidthWide }} />\n\n          <TopButton\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n            iconType={globals.ClearConsoleIcon}\n            uniqueClass=\"undoDelete\"\n            iconCallback={() => this.props.undoDelete()}\n            dropDownData={this.props.deletedStamps\n              .map((stampData, index) => ({\n                name: stampData.name,\n                icon: stampData.icon,\n                callback: () => this.props.undoDelete(index)\n              }))\n              .reverse()}\n            tooltipText=\"undo delete\"\n            disabled={this.props.deletedStamps.length === 0}\n          />\n        </div>\n\n        <span hidden={true} />\n        <div className=\"pr-5 row\">\n          <TopButton\n            iconType={globals.WorldsIcon}\n            uniqueClass=\"worlds\"\n            iconCallback={null}\n            dropDownData={this.state.worldDropDowns}\n            tooltipText=\"examples...\"\n            alignRight\n            disablePan={this.props.disablePan}\n            disableZoom={this.props.disableZoom}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  setWorldDropDowns() {\n    var dropDownData = [\n      {\n        name: \"publish current sketch\",\n        callback: () => this.props.modalManagerRef.current.requestPublish(),\n        icon: globals.UploadIcon\n      }\n    ];\n\n    dropDownData.push({\n      name: \"get current example info\",\n      callback: () => this.props.modalManagerRef.current.requestPublishInfo(),\n      icon: globals.InfoIcon\n    });\n\n    if (ipc) {\n      this.setState({ worldDropDowns: dropDownData });\n      return;\n    }\n    dropDownData.push({});\n\n    this.props.modalManagerRef.current.getWorldNamesAndKeys(allWorlds => {\n      allWorlds.map(item => {\n        dropDownData.push({\n          name: item.name,\n          callback: () => {\n            window.open(\n              this.props.modalManagerRef.current.worldKeyToUrl(item.key),\n              \"_blank\"\n            );\n\n            // this.props.modalManagerRef.current.getWorldObject(item.key, true,\n            //  (so) => this.props.modalManagerRef.current.loadWithOverwriteProtection(so))\n          }\n        });\n        this.setState({ worldDropDowns: dropDownData });\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderSideBar()}\n        {this.renderTopBar()}\n      </div>\n    );\n  }\n}\n\nclass TopButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { down: false, mouseOverDropDown: false };\n    this.topBarHeight = 60;\n  }\n\n  onMouseDown() {\n    if (this.state.mouseOverDropDown === false) {\n      this.props.disablePan(false);\n\n      this.props.disableZoom(false);\n      this.setState({ down: false });\n    }\n  }\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.onMouseDown.bind(this));\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.onMouseDown);\n  }\n\n  createTopButtonIcon(\n    iconType,\n    callback,\n    givenUniqueClass,\n    size,\n    dropDownIcon = false,\n    disabled\n  ) {\n    var uniqueClass = givenUniqueClass;\n    var mouseOverCallback = () => {\n      this.setState({ mouseOverDropDown: true }, () =>\n        $(\".\" + uniqueClass).css({ opacity: \"1\" })\n      );\n    };\n\n    var mouseOutCallback = () => {\n      this.setState(\n        { mouseOverDropDown: false },\n\n        () => {\n          if (\n            this.state.down === false ||\n            (iconType != globals.ExpandMoreIcon && this.props.iconCallback)\n          ) {\n            $(\".\" + uniqueClass).css({ opacity: globals.iconOpacity });\n          }\n        }\n      );\n    };\n\n    if (!callback && dropDownIcon === false) {\n      callback = () => this.setState({ down: !this.state.down });\n      uniqueClass += \"expand\";\n    }\n\n    if (dropDownIcon) {\n      mouseOverCallback = () => null;\n      mouseOutCallback = () => null;\n    }\n\n    if (this.props.disabled) {\n      mouseOverCallback = () => null;\n      // mouseOutCallback = () => null;\n      callback = () => null;\n    }\n\n    return React.createElement(\"img\", {\n      style: { opacity: globals.iconOpacity, height: size, width: size },\n      className: \" text-greyIcon \" + uniqueClass,\n      onClick: callback,\n      onMouseOver: mouseOverCallback,\n      onMouseOut: mouseOutCallback,\n      src: iconType\n    });\n  }\n\n  getUniqueID() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  }\n\n  renderDropDowns() {\n    if (this.state.down === false) {\n      return null;\n    }\n\n    var dropDowns = this.props.dropDownData.map(data => {\n      var oneWordName = \"\";\n      if (data.name) {\n        oneWordName = this.getUniqueID();\n      } else {\n        return (\n          <div>\n            <div style={{ height: 5, color: \"transparent\", width: \"100%\" }}>\n              hi\n            </div>\n            <div\n              className=\"border-top border-borderGrey\"\n              style={{ height: 5, color: \"transparent\", width: \"100%\" }}\n            >\n              hi\n            </div>\n          </div>\n        );\n      }\n      return (\n        <div\n          class={\n            this.props.uniqueClass +\n            oneWordName +\n            \" picker text-greyText p-1 pl-3 pr-3\"\n          }\n          onMouseOver={() => {\n            if (!data.name) {\n              return;\n            }\n            this.setState({ mouseOverDropDown: true });\n            $(\".\" + this.props.uniqueClass + oneWordName).css({\n              background: \"rgb(240, 240, 240)\"\n            });\n          }}\n          onMouseOut={() => {\n            if (!data.name) {\n              return;\n            }\n            this.setState({ mouseOverDropDown: false });\n            $(\".\" + this.props.uniqueClass + oneWordName).css({\n              background: \"transparent\"\n            });\n          }}\n          onClick={() => {\n            if (!data.name) {\n              return;\n            }\n            data.callback();\n            this.setState({ down: false });\n          }}\n        >\n          <a className=\"mr-2\" hidden={!data.name || !data.icon}>\n            {this.createTopButtonIcon(\n              data.icon,\n              undefined,\n              \"dropDown\",\n              12,\n              true,\n              this.props.disabled\n            )}\n          </a>\n          {data.name}\n        </div>\n      );\n    });\n\n    var right = \"default\";\n    if (this.props.alignRight) {\n      right = 0;\n    }\n\n    var dropDownHeight = window.innerHeight - this.topBarHeight;\n\n    return (\n      <div\n        class=\"bg-white border border-borderGrey rounded mt-2 justify-content-left\"\n        style={{\n          position: \"absolute\",\n          right: right,\n          \"overflow-y\": \"scroll\",\n          maxHeight: dropDownHeight\n        }}\n      >\n        {dropDowns}\n      </div>\n    );\n  }\n\n  renderTooltip() {\n    // if (this.props.alignRight) {\n    //   return (\n    //     <div\n    //       class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n    //       style={{\n    //         opacity: \"1\",\n    //         position: \"absolute\",\n    //         right: 20,\n    //         top: 5,\n    //         transition: \"all .2s ease-out\"\n    //       }}\n    //     >\n    //       {this.props.tooltipText}\n    //     </div>\n    //   );\n    // }\n\n    // if (this.props.alignLeft) {\n    //   return (\n    //     <div\n    //       class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n    //       style={{\n    //         opacity: \"1\",\n    //         position: \"absolute\",\n    //         left: 20,\n    //         top: 5\n    //       }}\n    //     >\n    //       {this.props.tooltipText}\n    //     </div>\n    //   );\n    // }\n\n    var offset = \"-140px\";\n    if (this.props.dropDownData) {\n      var offset = \"-133px\";\n    }\n    return (\n      <div style={{ position: \"absolute\", top: 5 }}>\n        <div style={{ position: \"absolute\", width: 300, left: offset }}>\n          <div\n            class={\"picker text-greyText tooltip\" + this.props.uniqueClass}\n            style={{\n              opacity: \"1\",\n              textAlign: \"center\"\n            }}\n          >\n            {this.props.tooltipText}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  render() {\n    if (this.state.down) {\n      $(\".\" + this.props.uniqueClass + \"expand\").css({\n        opacity: \"1\"\n      });\n    } else {\n      $(\".\" + this.props.uniqueClass + \"expand\").css({\n        opacity: \".5\"\n      });\n    }\n\n    var expandButton = null;\n    if (this.props.dropDownData) {\n      expandButton = this.createTopButtonIcon(\n        globals.ExpandMoreIcon,\n        () => this.setState({ down: !this.state.down }),\n        this.props.uniqueClass + \"expand\",\n        16,\n        false,\n        this.props.disabled\n      );\n    }\n\n    var opacity = 1;\n    if (this.props.disabled) {\n      opacity = opacity * 0.5;\n    }\n\n    return (\n      <div class=\"m-3 mt-4\" style={{ opacity: opacity }}>\n        {this.renderTooltip()}\n        <div>\n          {this.createTopButtonIcon(\n            this.props.iconType,\n            this.props.iconCallback,\n            this.props.uniqueClass,\n            20,\n            false,\n            this.props.disabled\n          )}\n\n          {expandButton}\n        </div>\n\n        {this.renderDropDowns()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Cristal from \"./react-cristal/dist/es2015/index.js\";\nimport $ from \"jquery\";\nimport { saveAs } from \"file-saver\";\nimport pf, { globals, p5Lib } from \"./globals.js\";\nimport Stamp from \"./Stamp.js\";\nimport ModalManager from \"./ModalManager.js\";\nimport ConsoleStamp from \"./ConsoleStamp.js\";\nimport ControlBar from \"./ControlBar.js\";\n\nimport ArcherContainer from \"./react-archer/src/ArcherContainer.js\";\nimport ArcherElement from \"./react-archer/src/ArcherElement.js\";\n\nimport { Mutex } from \"async-mutex\";\nimport { Line } from \"react-lineto\";\nimport cheerio from \"cheerio\";\nimport { SteppedLineTo } from \"react-lineto\";\nimport parser from \"./parser.js\";\nimport anim from \"css-animation\";\nimport { Resizable, ResizableBox } from \"react-resizable\";\nimport styled from \"styled-components\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport LZUTF8 from \"lzutf8\";\n\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-html\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-min-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/snippets/javascript\";\n\nimport pf1, { starter, stamperHeader } from \"./starterStamps.js\";\n\nvar _ = require(\"lodash\");\nvar mime = require(\"mime-types\");\n\nvar esprima = require(\"esprima\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class View extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      compiledBefore: false,\n      stampRefs: {},\n      stampElems: {},\n      scale: 1,\n      counter: 0,\n      htmlID: -1,\n      consoleStamp: null,\n      setupExists: true,\n      htmlAsksForCss: true,\n      htmlAsksForJs: true,\n      lines: [],\n      lineData: [],\n      traversalGraph: {},\n      consoleId: -1,\n      numToggles: 0,\n      originX: 0,\n      originY: 0,\n      scale: 1,\n      pickerData: [],\n      sideBarWidth: 0,\n      topBarHeight: 0,\n      zoomDisabled: false,\n      mouseWheelTimeout: null,\n      mouseIsDown: false,\n      downKey: -1,\n      panDisabled: false,\n      stampOrder: [],\n\n      worldKey: null,\n      worldPublishTime: null,\n      worldEdited: false,\n\n      snapToGrid: false,\n      linseOn: false,\n\n      settingsPicker: [],\n      lineData: [],\n      deletedStamps: [],\n      actualLinesOn: false,\n      lastLineData: [],\n      highlightedLines: {}\n    };\n    this.counterMutex = new Mutex();\n\n    this.modalManagerRef = React.createRef();\n\n    this.onWheel = this.onWheel.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.gridSize = 50;\n    this.newStampMarginVariance = 100;\n    this.newStampMargin = 20;\n    this.space = 32;\n    this.cmd = 91;\n    this.ctrl = 17;\n    this.plus = 187;\n    this.minus = 189;\n    this.zero = 48;\n    this.g = 71;\n    this.l = 76;\n    this.shft = 16;\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"wheel\", this.onWheel);\n    document.addEventListener(\"keydown\", this.onKeyDown);\n    document.addEventListener(\"keyup\", this.onKeyUp);\n    document.addEventListener(\"mousedown\", this.onMouseDown);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n\n    var centerX = window.innerWidth / 2 + this.state.topBarHeight;\n    var centerY = window.innerHeight / 2 + this.state.sideBarWidth;\n\n    ipc &&\n      ipc.on(\"zoomIn\", () => {\n        this.zoom(\n          this.state.scale * 2,\n          centerX,\n          centerY,\n          this.setLineData.bind(this)\n        );\n      });\n\n    ipc &&\n      ipc.on(\"zoomOut\", () => {\n        this.zoom(\n          this.state.scale * 0.5,\n          centerX,\n          centerY,\n          this.setLineData.bind(this)\n        );\n      });\n\n    ipc &&\n      ipc.on(\"zoomActual\", () => {\n        this.zoom(1, centerX, centerY, this.setLineData.bind(this));\n      });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"wheel\", this.onWheel);\n    document.removeEventListener(\"keydown\", this.onKeyDown);\n    document.removeEventListener(\"keyup\", this.onKeyUp);\n    document.removeEventListener(\"mousedown\", this.onMouseDown);\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === this.space) {\n      document.body.style.cursor = \"grab\";\n    }\n\n    var centerX = window.innerWidth / 2 + this.state.topBarHeight;\n    var centerY = window.innerHeight / 2 + this.state.sideBarWidth;\n    if (this.state.downKey === this.cmd || this.state.downKey === this.ctrl) {\n      if (e.keyCode === this.zero) {\n        e.preventDefault();\n        this.zoom(1, centerX, centerY, this.setLineData.bind(this));\n      } else if (e.keyCode === this.plus) {\n        e.preventDefault();\n        this.zoom(\n          this.state.scale * 2,\n          centerX,\n          centerY,\n          this.setLineData.bind(this)\n        );\n      } else if (e.keyCode === this.minus) {\n        e.preventDefault();\n        this.zoom(\n          this.state.scale * 0.5,\n          centerX,\n          centerY,\n          this.setLineData.bind(this)\n        );\n      }\n    } else if (this.state.downKey === this.shft) {\n      if (e.keyCode === this.g) {\n        var snapToGrid = this.state.snapToGrid;\n        this.setState({ snapToGrid: !snapToGrid }, () => this.setLayerPicker());\n      } else if (e.keyCode === this.l) {\n        this.toggleLinesOn();\n      }\n    } else {\n      this.setState({ downKey: e.keyCode });\n    }\n  }\n\n  onKeyUp(e) {\n    document.body.style.cursor = \"auto\";\n    if (e.keyCode === this.state.downKey) {\n      this.setState({ downKey: -1 });\n    }\n  }\n  onMouseDown() {\n    this.setState({ mouseIsDown: true });\n  }\n\n  onMouseUp() {\n    this.setState({ mouseIsDown: false });\n  }\n\n  onMouseMove(e) {\n    if (this.state.mouseIsDown && this.state.downKey == this.space) {\n      this.pan(e.movementX, e.movementY);\n    }\n  }\n\n  onWheel(e) {\n    var newTimeOut = setTimeout(s => this.onStopMove(), 250);\n    if (this.state.mouseWheelTimeout) {\n      clearTimeout(this.state.mouseWheelTimeout);\n    } else {\n      this.onStartMove();\n    }\n\n    this.setState({ mouseWheelTimeout: newTimeOut });\n\n    if (e.ctrlKey) {\n      this.zoom(this.state.scale - e.deltaY * 0.01, e.clientX, e.clientY);\n    } else {\n      this.pan(-e.deltaX, -e.deltaY);\n    }\n  }\n\n  pan(changeX, changeY) {\n    if (this.state.panDisabled) {\n      return;\n    }\n\n    var a = this.state,\n      currentX = a.originX,\n      currentY = a.originY;\n    var newX = currentX + changeX;\n    var newY = currentY + changeY;\n    this.setState({ originX: newX, originY: newY });\n  }\n\n  zoom(newScale, mouseX, mouseY, callback = () => null) {\n    if (this.state.zoomDisabled) {\n      return;\n    }\n\n    var scale = this.state.scale,\n      x = this.state.originX,\n      y = this.state.originY;\n\n    if (newScale < 0.1) {\n      return;\n    }\n\n    var curDistX = mouseX - x,\n      curDistY = mouseY - y;\n\n    var unScaledDistX = curDistX / scale,\n      unScaledDistY = curDistY / scale;\n\n    var scaledDistX = unScaledDistX * newScale,\n      scaledDistY = unScaledDistY * newScale;\n\n    var newOriginX = mouseX,\n      newOriginY = mouseY;\n\n    var newX = newOriginX - scaledDistX,\n      newY = newOriginY - scaledDistY;\n\n    this.setState({ scale: newScale }, () =>\n      this.setState({ originX: newX, originY: newY }, () => callback())\n    );\n  }\n\n  updateControlBarDimensions(sideBarWidth, topBarHeight) {\n    this.setState({ sideBarWidth: sideBarWidth, topBarHeight: topBarHeight });\n  }\n\n  recompileIfEnoughStamps(numFns) {\n    if (this.state.stampOrder.length === numFns) {\n      this.requestCompile();\n    }\n  }\n\n  loadStamperObject(stamperObject) {\n    this.setState(\n      {\n        stampRefs: {},\n\n        stampElems: {},\n\n        counter: 0,\n        htmlID: -1,\n        scale: 1,\n        consoleStamp: null,\n        consoleId: -1,\n        originX: 0,\n        originY: 0,\n        compiledBefore: false,\n        stampOrder: [],\n\n        worldKey: null,\n        worldEdited: false,\n        worldPublishTime: null,\n        highlightedLines: {},\n\n        snapToGrid: false,\n        linesOn: false,\n        deletedStamps: []\n      },\n      () => {\n        if (!stamperObject.highlightedLines) {\n          stamperObject.highlightedLines = {};\n        }\n        this.setState(\n          {\n            scale: stamperObject.scale,\n            originX: stamperObject.originX,\n            originY: stamperObject.originY,\n\n            worldKey: stamperObject.worldKey,\n            worldEdited: stamperObject.worldEdited == true,\n            worldPublishTime: stamperObject.worldPublishTime,\n            highlightedLines: stamperObject.highlightedLines,\n\n            snapToGrid: stamperObject.snapToGrid == true,\n            linesOn: stamperObject.linesOn == true\n          },\n          () => {\n            var callback = () =>\n              this.recompileIfEnoughStamps(stamperObject.stamps.length);\n            this.addConsoleStamp(stamperObject.console);\n            var stampData = stamperObject.stamps;\n            if (stamperObject.stamps.length > 0 && !stamperObject.stamps[0].x) {\n              stampData = this.getAutoLayout(\n                stamperObject.stamps,\n                stamperObject.js\n              );\n            }\n\n            stampData.map(data => this.addStamp(data, callback));\n          }\n        );\n      }\n    );\n  }\n\n  addRawJavascript(rawJS) {\n    var stamperObject = parser.jsToStamps(rawJS);\n    var curNumStamps = this.getNumStamps();\n\n    var callback = () => {\n      window.postMessage({ type: \"edited\" }, \"*\");\n      this.recompileIfEnoughStamps(\n        stamperObject.stamps.length + curNumStamps.stamps\n      );\n    };\n\n    var stampData = this.getAutoLayout(\n      stamperObject.stamps,\n      this.getExportableCode() + \"\\n\" + rawJS\n    );\n\n    stampData.map(data => this.addStamp(data, callback));\n  }\n\n  getAutoLayout(stampsData, rawJS) {\n    if (!rawJS) {\n      rawJS = \"\";\n    }\n    var xPos = this.setInitialPosition(\"x\");\n    var yPos = this.setInitialPosition(\"y\");\n\n    var initialXPos = xPos;\n    var maxHeight = -1;\n    var layoutedStampsData = [];\n\n    for (var i = 0; i < stampsData.length; i++) {\n      var data = stampsData[i];\n      data = this.getFilledInStampData(data);\n      var iframeDimens = this.getP5CanvasDimensions(rawJS);\n      data.iframeWidth = iframeDimens.width;\n      data.iframeHeight = iframeDimens.height;\n\n      if (!data.isBlob && !data.isTxtFile) {\n        data.editorHeight = Math.max(\n          data.editorHeight,\n          data.iframeHeight - globals.brHeight\n        );\n      }\n      var cristalDimens = this.getCristalDimens(data);\n\n      data.x = xPos;\n      data.y = yPos;\n\n      var absoluteEndPoint =\n        xPos + cristalDimens.width + globals.autoLayoutMargin;\n      var endPointRelativeToScreen =\n        (absoluteEndPoint - this.state.originX) * this.state.scale;\n\n      if (endPointRelativeToScreen >= window.innerWidth) {\n        xPos = initialXPos;\n        yPos = yPos + maxHeight + globals.autoLayoutMargin;\n        maxHeight = -1;\n        data.x = xPos;\n        data.y = yPos;\n      }\n\n      xPos += cristalDimens.width + globals.autoLayoutMargin;\n      maxHeight = Math.max(maxHeight, cristalDimens.height);\n\n      layoutedStampsData.push(data);\n    }\n\n    return layoutedStampsData;\n  }\n\n  getIframeErrorCallBack(ranges, offset = 0) {\n    var strRanges = JSON.stringify(ranges);\n    return `\n  // window.addEventListener('error', function(e) { \n  //   console.log(\"addEventListener\")\n  //     logToConsole(e.message, e.lineno)\n  //   }, false);\n\nwindow.onerror = function (message, url, lineno, colno) {\n\n  logToConsole(message, lineno)\n}\n\n\n// document.onwheel = function (e) {\n\n//   console.log(document)\n\n\n// }\n\nfunction logToConsole(message, lineno){\n\n\n      var adjLineNum = -1\n      var stampId\n      var ranges = ${strRanges}\n\n      ranges.map(range => {\n        var start = range.start\n        var end = range.end\n        var id = range.id\n        var isFN = range.isFN\n        var isInRange = start + ${offset} < lineno + 1 && lineno -1 < end + ${offset}\n\n        \n        if(isInRange){\n          adjLineNum = lineno - start - ${offset} + 1\n          stampId = id\n          if(range.isFn){\n            adjLineNum -= 1\n          }\n        }\n      })\n      if(stampId){\n      window.parent.postMessage({type:\"error\", message:message, lineno:adjLineNum, id:stampId}, '*')\n      }\n\n    }`;\n  }\n\n  getP5CanvasDimensions(code = this.getExportableCode()) {\n    var defaultDimens = { width: 100, height: 100 };\n    var createCanvasStart = code.indexOf(\"createCanvas(\");\n    if (createCanvasStart < 0) {\n      return defaultDimens;\n    }\n\n    var start = createCanvasStart + \"createCanvas(\".length;\n\n    var end = code.indexOf(\")\", start);\n    if (end < 0) {\n      return defaultDimens;\n    }\n\n    var paramsArr = code.substr(start, end - start).split(\",\");\n    if (paramsArr.length != 2) {\n      return defaultDimens;\n    }\n\n    var width = Number(paramsArr[0]);\n    var height = Number(paramsArr[1]);\n    if (!width || !height) {\n      return defaultDimens;\n    }\n\n    return { width: width, height: height };\n  }\n\n  loadAssets(htmlCode) {\n    this.state.stampOrder.map(id => {\n      var item = this.state.stampRefs[id];\n      var name = item.current.state.name;\n      var code = item.current.state.code;\n      if (item.current.props.isTxtFile) {\n        code = item.current.state.dataUri;\n      }\n      if (item.current.props.isTxtFile || item.current.props.isMediaFile) {\n        htmlCode = htmlCode\n          .split(`'${name}'`)\n          .join(`\"${code}\"`)\n          .split(\"`\" + name + \"`\")\n          .join(`\"${code}\"`)\n          .split(`\"${name}\"`)\n          .join(`\"${code}\"`);\n      }\n    });\n\n    return htmlCode;\n  }\n\n  getHTML(id) {\n    if (this.state.htmlID in this.state.stampRefs === false) {\n      return \"\";\n    }\n\n    if (id === this.state.htmlID) {\n      var runnableCode = \"\";\n      var ranges = [];\n    } else {\n      var codeData = this.getRunnableCode(id);\n      var runnableCode = codeData.runnableCode;\n\n      var ranges = codeData.ranges;\n    }\n\n    var htmlStamp = this.state.stampRefs[this.state.htmlID];\n\n    var html = htmlStamp.current.state.code;\n\n    const parser = cheerio.load(html, { withStartIndices: true });\n\n    var jsBlockStr =\n      \"<script type='text/javascript'>\" + runnableCode + \"</script>\";\n\n    var jsSelector = '[src=\"sketch.js\"]';\n\n    var jsBlock = parser(jsBlockStr);\n\n    // const start = parser(jsSelector).get(0).startIndex;\n\n    var htmlAsksForJs = parser(jsSelector).length > 0;\n    if (htmlAsksForJs === false && this.state.htmlAsksForJs === true) {\n      this.state.consoleStamp.ref.current.logToConsole(\n        `Stamper Error: Your index.html is missing a div for sketch.js. Make sure you're linking to sketch.js and not another sketch file.`\n      );\n      this.state.stampRefs[this.state.htmlID].current.addErrorLine(-1);\n      this.setState({ htmlAsksForJs: htmlAsksForJs });\n    } else if (htmlAsksForJs === true && this.state.htmlAsksForJs === false) {\n      this.setState({ htmlAsksForJs: htmlAsksForJs });\n    }\n\n    parser(\"head\").prepend(\n      \"<script class='errorListener' >\" +\n        this.getIframeErrorCallBack(ranges) +\n        \"</script>\"\n    );\n\n    var htmlStr = parser.html();\n    var linesToJs = 0;\n    for (var i = 0; i < htmlStr.length; i++) {\n      if (htmlStr[i] === \"\\n\") {\n        linesToJs += 1;\n      }\n      if (htmlStr.substr(i, \"sketch.js\".length) === \"sketch.js\") {\n        break;\n      }\n    }\n\n    parser(\".errorListener\").replaceWith(\n      `<script class='errorListener'>` +\n        this.getIframeErrorCallBack(ranges, linesToJs) +\n        \"</script>\"\n    );\n    parser(jsSelector).replaceWith(jsBlock);\n\n    var html = parser.html();\n    html = this.loadAssets(html);\n\n    return html;\n  }\n\n  addErrorLine(lineNum, id) {\n    if (id in this.state.stampRefs) {\n      this.state.stampRefs[id].current.addErrorLine(lineNum);\n    }\n  }\n\n  setInitialPosition(dimension) {\n    if (dimension === \"x\") {\n      return (\n        (-this.state.originX + this.state.sideBarWidth) / this.state.scale +\n        50 +\n        Math.random() * this.newStampMarginVariance\n      );\n    } else if (dimension === \"y\") {\n      // Math.random() * this.newStampMarginVariance ) * this.state.scale\n      return (\n        (-this.state.originY + this.state.topBarHeight) / this.state.scale +\n        50 +\n        Math.random() * this.newStampMarginVariance\n      );\n    }\n  }\n\n  addConsoleStamp(data) {\n    var defaults = {\n      x: this.setInitialPosition(\"x\"),\n      y: this.setInitialPosition(\"y\"),\n      consoleWidth: globals.defaultEditorWidth,\n      consoleHeight: globals.defaultVarEditorHeight,\n      hidden: false,\n      zIndex: undefined\n    };\n\n    Object.keys(defaults).map(setting => {\n      if (setting in data) {\n        defaults[setting] = data[setting];\n      }\n    });\n    data = defaults;\n\n    this.createConsoleStamp(data);\n  }\n\n  async createConsoleStamp(data) {\n    var x = data.x,\n      y = data.y,\n      consoleWidth = data.consoleWidth,\n      consoleHeight = data.consoleHeight;\n    const release = await this.counterMutex.acquire();\n    var counter = this.state.counter;\n    this.setState({ counter: counter + 1 }, () => release());\n\n    var ref = React.createRef();\n\n    var stampID = counter.toString();\n\n    var elem = (\n      <ConsoleStamp\n        ref={ref}\n        initialPosition={{ x: x, y: y }}\n        getLinesOn={() => this.state.linesOn}\n        id={stampID}\n        onStartMove={this.onStartMove.bind(this)}\n        onStopMove={this.onStopMove.bind(this)}\n        disablePan={this.disablePan.bind(this)}\n        starterConsoleWidth={consoleWidth}\n        starterConsoleHeight={consoleHeight}\n        addErrorLine={this.addErrorLine.bind(this)}\n        initialHidden={data.hidden}\n        getScale={this.getScale.bind(this)}\n        starterZIndex={data.zIndex}\n        getSnapMargin={this.getSnapMargin.bind(this)}\n      />\n    );\n\n    var consoleStamp = { elem: elem, ref: ref };\n    this.setState({ consoleStamp: consoleStamp, consoleId: stampID });\n  }\n\n  getUniqueID() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  }\n\n  getFilledInStampData(data) {\n    var defaults = {\n      name: \"sketch\",\n      code: \"rect(50, 50, 50, 50)\",\n      args: \"x=mouseX, y=mouseY\",\n      x: this.setInitialPosition(\"x\"),\n      y: this.setInitialPosition(\"y\"),\n      iframeDisabled: false,\n      editorWidth: globals.defaultEditorWidth,\n      editorHeight: globals.defaultEditorHeight - globals.brHeight,\n      iframeWidth: globals.defaultIframeWidth,\n      iframeHeight: globals.defaultEditorHeight,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      isBlob: false,\n      hidden: false,\n      zIndex: undefined,\n      codeSize: globals.codeSize,\n      lineHighLightingStatus: \"none\",\n      id: this.getUniqueID()\n    };\n\n    if (\n      !data.iframeWidth &&\n      !data.iframeHeight &&\n      !data.isIndex &&\n      !data.isTxtFile &&\n      !data.isMediaFile\n    ) {\n      if (data.isBlob) {\n        var seenCode = data.code.toString();\n      } else {\n        var seenCode = `function ${data.name.toString()}(${data.args.toString()}){\\n  ${data.code.toString()}\\n}`;\n      }\n\n      var iframeDimens = this.getP5CanvasDimensions(\n        this.getExportableCode() + \"\\n\" + seenCode\n      );\n      data.iframeWidth = iframeDimens.width;\n      data.iframeHeight = iframeDimens.height;\n    }\n\n    Object.keys(defaults).map(setting => {\n      if (setting in data) {\n        defaults[setting] = data[setting];\n      }\n    });\n\n    return defaults;\n  }\n\n  addStamp(data, callback = () => null) {\n    data = this.getFilledInStampData(data);\n\n    ///\n\n    var ref = React.createRef();\n\n    var elem = (\n      <Stamp\n        ref={ref}\n        setDependencyLineHighlightings={this.setDependencyLineHighlightings.bind(\n          this\n        )}\n        onMouseOutLine={this.onMouseOutLine.bind(this)}\n        isIndex={data.isIndex}\n        isTxtFile={data.isTxtFile}\n        isMediaFile={data.isMediaFile}\n        isBlob={data.isBlob}\n        getExportableCode={this.getExportableCode.bind(this)}\n        starterZIndex={data.zIndex}\n        starterCode={data.code}\n        starterArgs={data.args}\n        starterName={data.name}\n        errorLines={{}}\n        getCristalDimens={this.getCristalDimens.bind(this)}\n        setLineData={this.setLineData.bind(this)}\n        starterEditorWidth={data.editorWidth}\n        starterEditorHeight={data.editorHeight}\n        initialPosition={{ x: data.x, y: data.y }}\n        starterCodeSize={data.codeSize}\n        getFirstLine={this.getFirstLine.bind(this)}\n        id={data.id}\n        starterLineHighLightingStatus={data.lineHighLightingStatus}\n        getP5CanvasDimensions={this.getP5CanvasDimensions.bind(this)}\n        setLayerPicker={this.setLayerPicker.bind(this)}\n        deleteFrame={this.deleteFrame}\n        initialHidden={data.hidden}\n        onStartMove={this.onStartMove.bind(this)}\n        onStopMove={this.onStopMove.bind(this)}\n        addStamp={this.addStamp.bind(this)}\n        onDelete={this.onDelete.bind(this)}\n        starterIframeWidth={data.iframeWidth}\n        starterIframeHeight={data.iframeHeight}\n        checkAllNames={this.checkAllNames.bind(this)}\n        disablePan={this.disablePan.bind(this)}\n        iframeDisabled={data.iframeDisabled}\n        requestCompile={this.requestCompile.bind(this)}\n        getHTML={this.getHTML.bind(this)}\n        addNewIframeConsole={this.addNewIframeConsole.bind(this)}\n        getScale={this.getScale.bind(this)}\n        getLinesOn={() => this.state.linesOn}\n        getSnapMargin={this.getSnapMargin.bind(this)}\n      />\n    );\n\n    if (data.isIndex) {\n      this.setState({ htmlID: data.id });\n    }\n\n    this.addStampToState(ref, elem, data.id, callback);\n  }\n\n  async addStampToState(ref, elem, id, callback) {\n    const release = await this.counterMutex.acquire();\n    var stampRefs = Object.assign({}, this.state.stampRefs);\n    var stampElems = Object.assign({}, this.state.stampElems);\n    var stampOrder = Object.assign([], this.state.stampOrder);\n    stampRefs[id] = ref;\n    stampElems[id] = elem;\n    stampOrder.push(id);\n\n    this.setState(\n      {\n        stampRefs: stampRefs,\n        stampElems: stampElems,\n\n        stampOrder: stampOrder\n      },\n      () => {\n        release();\n        callback(id);\n      }\n    );\n  }\n\n  addNewIframeConsole(newConsole) {\n    if (this.state.consoleStamp === null) {\n      return;\n    }\n    this.state.consoleStamp.ref.current.addNewIframeConsole(newConsole);\n  }\n\n  checkForSetup() {\n    var newSetupExists = false;\n    var stampRefs = Object.values(this.state.stampRefs);\n    for (var i = 0; i < stampRefs.length; i++) {\n      var stampRef = stampRefs[i].current;\n\n      if (stampRef.state.name === \"setup\") {\n        newSetupExists = true;\n      }\n    }\n\n    if (this.state.setupExists && newSetupExists === false) {\n      this.state.consoleStamp.ref.current.logToConsole(\n        `Stamper Error: You don't have a setup. This will constrain your canvas to a default width and height.`\n      );\n    }\n\n    this.setState({ setupExists: newSetupExists });\n\n    return newSetupExists;\n  }\n\n  getFileDict() {\n    var fileDict = {};\n    fileDict[\"sketch.js\"] = { content: this.getExportableCode(), type: \"text\" };\n    var stamperObject = this.getStamperObject();\n\n    stamperObject.js = fileDict[\"sketch.js\"].content;\n\n    fileDict[\"stamper.js\"] = {\n      content: stamperHeader + JSON.stringify(stamperObject),\n      type: \"text\"\n    };\n\n    this.state.stampOrder.map(id => {\n      var item = this.state.stampRefs[id];\n      var code = item.current.state.code;\n      var name = item.current.state.name;\n      if (item.current.props.isTxtFile || item.current.props.isIndex) {\n        fileDict[name] = { content: code, type: \"text\" };\n      } else if (item.current.props.isMediaFile) {\n        fileDict[name] = { content: code, type: \"media\" };\n      }\n    });\n    return fileDict;\n  }\n\n  setLineData(id) {\n    var lineData = this.getLineData();\n    this.setState({ lineData: lineData }, () => this.supplyLineData());\n  }\n\n  supplyLineData() {\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      var stampRef = stamp.current;\n      stampRef.setLineData(\n        this.state.lineData.filter(line => line.start === id)\n      );\n    });\n  }\n\n  compileSingleStamp(id, duplicateNamedStamps) {\n    var stamp = this.state.stampRefs[id];\n    var stampRef = stamp.current;\n    if (stampRef) {\n      var newErrors = [];\n      if (\n        stampRef.props.id in duplicateNamedStamps &&\n        stampRef.props.isIndex === false\n      ) {\n        newErrors.push(0);\n      }\n\n      stampRef.clearErrorsAndUpdate(newErrors);\n    }\n  }\n\n  lineDataToGraph(lineData) {\n    var graph = {};\n\n    lineData.map(line => {\n      if (!(line.start in graph)) {\n        graph[line.start] = [];\n      }\n\n      if (!(line.end in graph)) {\n        graph[line.end] = [];\n      }\n\n      graph[line.start].push(line.end);\n    });\n\n    return graph;\n  }\n\n  requestCompile(id) {\n    var oldGraph = this.lineDataToGraph(\n      Object.assign([], this.state.lastLineData)\n    );\n    var newGraph = this.lineDataToGraph(this.getLineData(true));\n\n    this.setState({ lastLineData: this.getLineData(true) });\n    this.setLineData(id);\n\n    var seen = {};\n\n    this.state.consoleStamp.ref.current.logToConsole(\"Updated code\", \"debug\");\n\n    var duplicateNamedStamps = this.checkAllNames();\n\n    this.checkForSetup();\n\n    if (!id) {\n      this.state.stampOrder.map(id => {\n        this.compileSingleStamp(id, duplicateNamedStamps);\n      });\n    } else {\n      var compileStampName;\n\n      if (id in this.state.stampRefs) {\n        compileStampName = this.state.stampRefs[id].current.state.name;\n      } else {\n        if (this.state.deletedStamps.length > 0) {\n          compileStampName = this.state.deletedStamps[\n            this.state.deletedStamps.length - 1\n          ].name;\n        }\n      }\n\n      this.state.stampOrder.map(otherID => {\n        var stampRef = this.state.stampRefs[otherID].current;\n        if (compileStampName === stampRef.state.name) {\n          this.compileSingleStamp(otherID, duplicateNamedStamps);\n          seen[otherID] = \"\";\n        }\n      });\n\n      this.recursiveCompile(id, oldGraph, seen, duplicateNamedStamps);\n      this.recursiveCompile(id, newGraph, seen, duplicateNamedStamps);\n    }\n  }\n\n  recursiveCompile(id, graph, seen, duplicateNamedStamps) {\n    if (!(id in seen)) {\n      seen[id] = \"\";\n      if (id in this.state.stampRefs) {\n        this.compileSingleStamp(id, duplicateNamedStamps);\n      }\n    }\n\n    graph[id] &&\n      graph[id].map(otherID =>\n        this.recursiveCompile(otherID, graph, seen, duplicateNamedStamps)\n      );\n  }\n\n  recursiveCompileStamp(id, seen, traversalGraph, duplicateNamedStamps) {\n    if (id in seen) {\n      return;\n    } else {\n      seen[id] = \"\";\n    }\n\n    if (id in this.state.stampRefs) {\n      var stampRef = this.state.stampRefs[id].current;\n    } else {\n      return;\n    }\n\n    if (stampRef) {\n      var newErrors = [];\n\n      if (\n        stampRef.props.id in duplicateNamedStamps &&\n        stampRef.props.isIndex === false\n      ) {\n        newErrors.push(0);\n      }\n\n      stampRef.clearErrorsAndUpdate(newErrors);\n\n      if (id in traversalGraph === false) {\n        return;\n      }\n      traversalGraph[id].map(id =>\n        this.recursiveCompileStamp(\n          id,\n          seen,\n          traversalGraph,\n          duplicateNamedStamps\n        )\n      );\n    }\n  }\n\n  disablePan(status) {\n    this.setState({ panDisabled: status });\n  }\n\n  disableZoom(status) {\n    this.setState({ zoomDisabled: status });\n  }\n\n  checkAllNames() {\n    var nameDict = {};\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (stamp.current.props.isBlob) {\n        return;\n      }\n      if (stamp.current) {\n        var name = stamp.current.state.name;\n        if (!(name in nameDict)) {\n          nameDict[name] = 0;\n        }\n        nameDict[name] += 1;\n      }\n    });\n    var duplicateNamedStamps = {};\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (stamp.current.props.isBlob) {\n        return;\n      }\n\n      if (stamp.current.props.isTxtFile || stamp.current.props.isMediaFile) {\n        var mimeType = mime.lookup(stamp.current.state.name);\n        if (!mimeType) {\n          duplicateNamedStamps[stamp.current.props.id] = \"\";\n          this.state.consoleStamp.ref.current.logToConsole(\n            `Stamper Error: The file extension '.${\n              stamp.current.state.name.split(\".\")[\n                stamp.current.state.name.split(\".\").length - 1\n              ]\n            }' is invalid.`\n          );\n        }\n      }\n      if (stamp.current) {\n        var stampRef = stamp.current;\n        var name = stamp.current.state.name;\n        if (nameDict[name] > 1) {\n          duplicateNamedStamps[stamp.current.props.id] = \"\";\n\n          this.state.consoleStamp.ref.current.logToConsole(\n            `Stamper Error: Multiple Stamps shouldn't have the same name. Consider channging one of your ${name}s to something else.`\n          );\n        }\n      }\n    });\n\n    return duplicateNamedStamps;\n  }\n\n  getExportableCode() {\n    var runnableCode = [];\n    var ranges = [];\n    var curLine = 1;\n    var code;\n\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n      if (\n        stamp.current.props.isTxtFile ||\n        stamp.current.props.isIndex ||\n        stamp.current.props.isMediaFile\n      ) {\n        return;\n      }\n\n      if (stamp.current.props.isBlob) {\n        var code = \"\\n\" + stamp.current.state.code + \"\\n\";\n        curLine = this.addCodeBlock(\n          code,\n          stamp.current.props.id,\n          runnableCode,\n          ranges,\n          curLine,\n          false\n        );\n      } else {\n        var state = stamp.current.state;\n        var contents = state.code.split(\"\\n\").join(\"\\n  \");\n\n        var code = `function ${state.name}(${state.args}){\\n  ${contents}\\n}`;\n        curLine = this.addCodeBlock(\n          code,\n          stamp.current.props.id,\n          runnableCode,\n          ranges,\n          curLine,\n          true\n        );\n      }\n    });\n\n    return runnableCode.join(\"\\n\");\n  }\n\n  getNumLines(code) {\n    var numLines = 0;\n    for (var i = 0; i < code.length; i++) {\n      if (code[i] === \"\\n\") {\n        numLines += 1;\n      }\n    }\n\n    return numLines;\n  }\n\n  addCodeBlock(code, id, runnableCode, ranges, curLine, isFn) {\n    code = code + \"\\n\";\n    var start = curLine;\n    var end = curLine + this.getNumLines(code) - 1;\n    runnableCode.push(code);\n    ranges.push({ start: start, end: end, id: id, isFn: isFn });\n    return end + 1;\n  }\n\n  // setLines() {\n  //   var lines = [];\n  //   var borderColorInt = 205 + 15 - 15 * this.state.scale;\n  //   var style = {\n  //     borderColor: `rgb(${borderColorInt}, ${borderColorInt}, ${borderColorInt})`,\n  //     borderWidth: 1\n  //   };\n\n  //   this.state.lineData.map(singleLineData => {\n  //     lines.push(\n  //       <SteppedLineTo\n  //         {...style}\n  //         from={\"vertex\" + singleLineData[0]}\n  //         to={\"vertex\" + singleLineData[1]}\n  //         orientation=\"v\"\n  //       />\n  //     );\n  //   });\n\n  //   this.setState({ lines: lines });\n  // }\n\n  getJSLineData() {\n    var declaredDict = {};\n    var undeclaredArr = [];\n    var lineData = [];\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n\n      var state = stampRef.state;\n      if (\n        stampRef.props.isMediaFile ||\n        stampRef.props.isTxtFile ||\n        stampRef.props.isIndex\n      ) {\n        return;\n      } else if (stampRef.props.isBlob) {\n        var code = state.code;\n      } else {\n        var code = `function ${state.name}(${state.args}){\\n${state.code}\\n}`;\n      }\n      var variables = parser.getVariables(code);\n      if (variables) {\n        variables.declared.map(variable => (declaredDict[variable] = id));\n        variables.undeclared.map(variable => {\n          var noWhiteSpace = code.replace(/\\s/g, \"\");\n          var varEndIndex = noWhiteSpace.indexOf(variable) + variable.length;\n\n          if (\n            noWhiteSpace.length > varEndIndex &&\n            noWhiteSpace[varEndIndex] === \"(\"\n          ) {\n            variable += \"()\";\n          }\n\n          undeclaredArr.push({ variable: variable, id: id });\n        });\n      }\n    });\n\n    var lineDict = {};\n\n    undeclaredArr.map(undeclaredItem => {\n      var variable = undeclaredItem.variable;\n      var usingID = undeclaredItem.id;\n      var declaringID = declaredDict[variable.split(\"()\").join(\"\")];\n\n      if (declaringID && usingID) {\n        if (!(usingID + \"_\" + declaringID in lineDict)) {\n          lineDict[usingID + \"_\" + declaringID] = [];\n        }\n        lineDict[usingID + \"_\" + declaringID].push(variable);\n      }\n    });\n\n    var lineData = Object.keys(lineDict).map(lineKey => {\n      return this.getLineRelation(\n        lineKey.split(\"_\")[1],\n        lineKey.split(\"_\")[0],\n        \"js\",\n        lineDict[lineKey].join(\", \")\n      );\n    });\n\n    return lineData;\n  }\n\n  isFnStamp(id) {\n    var props = this.state.stampRefs[id].current.props;\n    return (\n      !props.isBlob && !props.isMediaFile && !props.isTxtFile && !props.isIndex\n    );\n  }\n\n  getListenerLineData() {\n    var listenerIDs = [];\n    var lineData = [];\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (this.isListener(stampRef.state.name)) {\n        listenerIDs.push(stampRef.props.id);\n      }\n    });\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (\n        this.isListener(stampRef.state.name) ||\n        !this.isFnStamp(id) ||\n        stampRef.state.name === \"setup\" ||\n        stampRef.state.name === \"preload\"\n      ) {\n        return;\n      }\n      listenerIDs.map(listenerID => {\n        lineData.push(this.getLineRelation(listenerID, id, \"listener\"));\n      });\n    });\n\n    return lineData;\n  }\n\n  getSetupLineData() {\n    var lineData = [];\n    var setupID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      var stampRef = this.state.stampRefs[id].current;\n      if (stampRef.state.name === \"setup\") {\n        setupID = id;\n      }\n    }\n\n    if (setupID) {\n      this.state.stampOrder.map(id => {\n        if (\n          this.isFnStamp(id) &&\n          setupID != id &&\n          this.state.stampRefs[id].current.state.name != \"preload\"\n        ) {\n          lineData.push(this.getLineRelation(setupID, id, \"setup\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  getPreloadLineData() {\n    var lineData = [];\n    var preloadID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      var stampRef = this.state.stampRefs[id].current;\n      if (stampRef.state.name === \"preload\") {\n        preloadID = id;\n      }\n    }\n\n    if (preloadID) {\n      this.state.stampOrder.map(id => {\n        if (this.isFnStamp(id) && preloadID != id) {\n          lineData.push(this.getLineRelation(preloadID, id, \"preload\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  getIndexLineData() {\n    var lineData = [];\n    var indexID;\n\n    for (var i = 0; i < this.state.stampOrder.length; i++) {\n      var id = this.state.stampOrder[i];\n      var stampRef = this.state.stampRefs[id].current;\n      if (stampRef.props.isIndex) {\n        indexID = id;\n      }\n    }\n\n    if (indexID) {\n      if (\n        !this.fileIsReferenced(\n          this.state.stampRefs[indexID].current.state.code,\n          \"sketch.js\"\n        )\n      ) {\n        return [];\n      }\n      this.state.stampOrder.map(id => {\n        if (this.isFnStamp(id)) {\n          lineData.push(this.getLineRelation(indexID, id, \"index\"));\n        }\n      });\n    }\n\n    return lineData;\n  }\n\n  fileIsReferenced(code, fileName) {\n    return (\n      code.includes(`'${fileName}'`) ||\n      code.includes(`\"${fileName}\"`) ||\n      code.includes(\"`\" + fileName + \"`\")\n    );\n  }\n\n  getLineLabel(text, type, isHighlighted) {\n    var backgroundColor = \"transparent\";\n    var textColor = this.getLineColor(type);\n    if (isHighlighted) {\n      backgroundColor = this.getLineColor(type);\n      textColor = \"white\";\n    }\n    var label = (\n      <div\n        className={\"name rounded p-2\"}\n        style={{\n          transform: \"scale(\" + 0.8 + \")\",\n          color: textColor,\n          backgroundColor: backgroundColor,\n          cursor: \"default\",\n          userSelect: \"none\"\n        }}\n      >\n        {text}\n      </div>\n    );\n\n    return label;\n  }\n\n  getLineColor(type, seeThru = false) {\n    var opacity = \"1\";\n    if (seeThru) {\n      opacity = \".2\";\n    }\n    if (type === \"file\") {\n      return \"rgba(140,154, 53, \" + opacity + \")\";\n    } else if (type === \"js\") {\n      return \"rgba(70,160,206, \" + opacity + \")\";\n    } else if (type === \"listener\") {\n      return \"rgba(218,16,96, \" + opacity + \")\";\n    } else {\n      return \"rgba(170,170,170, \" + opacity + \")\";\n    }\n  }\n\n  getLineStyle(type, isHighlighted) {\n    var strokeColor = this.getLineColor(type, !isHighlighted);\n    var style = {\n      strokeColor: strokeColor,\n      strokeWidth: 5,\n      arrowLength: 4,\n      arrowThickness: 4\n    };\n    return style;\n  }\n\n  getLineRelation(start, end, type, label) {\n    var isHighlighted = start + \"_\" + end in this.state.highlightedLines;\n\n    if (!label) {\n      label = type;\n    }\n    return {\n      end: end,\n      start: start,\n      type: type,\n      label: this.getLineLabel(label, type, isHighlighted),\n      style: this.getLineStyle(type, isHighlighted)\n    };\n  }\n\n  getFileLineData() {\n    var fileIdDict = {};\n    var lineData = [];\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      if (\n        stampRef.props.isMediaFile ||\n        stampRef.props.isTxtFile ||\n        stampRef.props.isIndex\n      ) {\n        fileIdDict[stampRef.state.name] = id;\n      }\n    });\n\n    this.state.stampOrder.map(id => {\n      var stampRef = this.state.stampRefs[id].current;\n      Object.keys(fileIdDict).map(fileName => {\n        if (this.fileIsReferenced(stampRef.state.code, fileName)) {\n          lineData.push(\n            this.getLineRelation(fileIdDict[fileName], id, \"file\", fileName)\n          );\n        }\n      });\n    });\n\n    return lineData;\n  }\n\n  setDependencyLineHighlightings(id) {\n    var graph = this.lineDataToGraph(this.getLineData(id));\n\n    this.state.stampOrder.map(id => {\n      this.state.stampRefs[id].current.setLineHighlighted(\"off\");\n    });\n    this.state.stampRefs[id].current.setLineHighlighted(\"on\");\n\n    var highlightedLines = {};\n    graph[id].map(otherID => {\n      highlightedLines[id + \"_\" + otherID] = \"\";\n      this.state.stampRefs[otherID].current.setLineHighlighted(\"on\");\n    });\n\n    this.setState({ highlightedLines: highlightedLines }, () =>\n      this.setLineData()\n    );\n  }\n\n  onMouseOverLine(sourceAndTarget) {\n    var startStampId = sourceAndTarget.source.id.split(\"_\").pop();\n    var endStampId = sourceAndTarget.target.id.split(\"_\").pop();\n    this.state.stampOrder.map(id => {\n      this.state.stampRefs[id].current.setLineHighlighted(\"off\");\n    });\n    this.state.stampRefs[startStampId].current.setLineHighlighted(\"on\");\n    this.state.stampRefs[endStampId].current.setLineHighlighted(\"on\");\n\n    var lineName = startStampId + \"_\" + endStampId;\n    var highlightedLines = {};\n    highlightedLines[lineName] = \"\";\n    this.setState({ highlightedLines: highlightedLines }, () => {\n      this.setLineData();\n    });\n  }\n\n  onMouseOutLine() {\n    this.state.stampOrder.map(id => {\n      this.state.stampRefs[id].current.setLineHighlighted(\"none\");\n    });\n\n    this.setState({ highlightedLines: {} }, () => this.setLineData());\n  }\n\n  getLineData() {\n    var lineData = [];\n\n    lineData = lineData.concat(this.getJSLineData());\n\n    lineData = lineData.concat(this.getListenerLineData());\n\n    lineData = lineData.concat(this.getSetupLineData());\n\n    lineData = lineData.concat(this.getIndexLineData());\n    lineData = lineData.concat(this.getPreloadLineData());\n\n    lineData = lineData.concat(this.getFileLineData());\n\n    var lineDict = {};\n\n    lineData = lineData.filter(line => {\n      var lineKey = line.start + \"_\" + line.end;\n      if (lineKey in lineDict === false) {\n        lineDict[lineKey] = 0;\n      }\n      lineDict[lineKey] += 1;\n\n      return lineDict[lineKey] === 1 && line.start != line.end;\n    });\n\n    var relativeOffsetUnit = 10;\n\n    lineData.map(line => {\n      line.targetAnchor = \"middle\";\n      line.sourceAnchor = \"middle\";\n      line.targetId = \"line_\" + line.end;\n    });\n\n    return lineData;\n  }\n\n  getRunnableCode(overalID) {\n    var runnableCode = [];\n    var ranges = [];\n    var curLine = 1;\n    var code;\n\n    this.state.stampOrder.map(id => {\n      var stamp = this.state.stampRefs[id];\n\n      if (\n        stamp.current.state.name != \"draw\" &&\n        stamp.current.props.isTxtFile === false &&\n        stamp.current.props.isMediaFile === false &&\n        stamp.current.props.isIndex === false &&\n        !(\n          this.isListener(stamp.current.state.name) &&\n          this.isListener(this.state.stampRefs[overalID].current.state.name)\n        ) &&\n        !(\n          this.isListener(stamp.current.state.name) &&\n          (this.state.stampRefs[overalID].current.state.name === \"setup\" ||\n            this.state.stampRefs[overalID].current.state.name === \"preload\")\n        )\n      ) {\n        var state = stamp.current.state;\n        if (stamp.current.props.isBlob) {\n          var code = state.code;\n\n          curLine = this.addCodeBlock(\n            code,\n            stamp.current.props.id,\n            runnableCode,\n            ranges,\n            curLine,\n            false\n          );\n        } else {\n          var code = `function ${state.name}(${state.args}){\\n${state.code}\\n}`;\n          curLine = this.addCodeBlock(\n            code,\n            stamp.current.props.id,\n            runnableCode,\n            ranges,\n            curLine,\n            true\n          );\n        }\n      }\n    });\n\n    if (\n      overalID in this.state.stampRefs == false ||\n      this.state.stampRefs[overalID].current === null\n    ) {\n      return { ranges: ranges, runnableCode: runnableCode.join(\"\") };\n    }\n\n    var stampRef = this.state.stampRefs[overalID].current;\n    var state = stampRef.state;\n    if (state.name === \"draw\" || this.isListener(state.name)) {\n      var fullFun = `function ${state.name}(${state.args}){\\n${state.code}\\n}`;\n      curLine = this.addCodeBlock(\n        fullFun,\n        stampRef.props.id,\n        runnableCode,\n        ranges,\n        curLine,\n        true\n      );\n    } else if (state.name === \"setup\" || state.name === \"preload\") {\n      // do nothing\n    } else {\n      code = `function draw(){\\n${state.name}()\\n}`;\n      curLine = this.addCodeBlock(\n        code,\n        stampRef.props.id,\n        runnableCode,\n        ranges,\n        curLine,\n        false\n      );\n    }\n\n    runnableCode = this.setLoopingControl(\n      overalID,\n      runnableCode.join(\"\"),\n      state.name\n    );\n\n    return { ranges: ranges, runnableCode: runnableCode };\n  }\n\n  setLoopingControl(id, runnableCode) {\n    var loopingVar = \"_isLooping\";\n\n    var loopingCallbacks = `\\n\nvar _isLooping = true\\n\nwindow.parent.postMessage({type:\"loop\", message:\"stop\", id:\"${id}\"}, '*')\nvar _userSetLoop = true\nvar _stopLooping = setTimeout(() => {\n noLoop() \n}, 1000)\n\ndocument.addEventListener('mouseenter', () => {\nclearTimeout(_stopLooping)\nwindow.parent.postMessage({type:\"loop\", message:\"start\", id:\"${id}\"}, '*')\nif(_isLooping){\n\nloop()\n}\n\n});\n\ndocument.addEventListener('mouseleave', () => {\n  window.parent.postMessage({type:\"loop\", message:\"stop\", id:\"${id}\"}, '*')\n_stopLooping =setTimeout(() => {\n noLoop() \n}, 1000)\n});\n\n`;\n\n    runnableCode = runnableCode\n      .split(\"noLoop()\")\n      .join(`noLoop(); _isLooping = false`);\n\n    runnableCode = runnableCode\n      .split(\"loop()\")\n      .join(`loop(); _isLooping = true`);\n\n    runnableCode = runnableCode + loopingCallbacks;\n\n    return runnableCode;\n  }\n\n  isListener(name) {\n    return name in globals.specialFns && globals.specialFns[name] === false;\n  }\n\n  async onDelete(id) {\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    if (id in this.state.stampRefs) {\n      const release = await this.counterMutex.acquire();\n\n      var stampRefs = Object.assign({}, this.state.stampRefs);\n      var stampElems = Object.assign({}, this.state.stampElems);\n      var deletedStamps = Object.assign([], this.state.deletedStamps);\n      var stampData = stampRefs[id].current.getData();\n      deletedStamps.push(stampData);\n      delete stampRefs[id];\n      stampElems[id] = <span hidden={true} />;\n\n      var stampOrder = Object.assign([], this.state.stampOrder);\n      stampOrder.splice(stampOrder.indexOf(id), 1);\n      this.setState(\n        {\n          stampRefs: stampRefs,\n          stampElems: stampElems,\n          stampOrder: stampOrder,\n          deletedStamps: deletedStamps\n        },\n        () => this.requestCompile(id)\n      );\n      release();\n    }\n  }\n\n  undoDelete(position = this.state.deletedStamps.length - 1) {\n    if (this.state.deletedStamps.length <= position || position < 0) {\n      return;\n    }\n    var deletedStamps = Object.assign([], this.state.deletedStamps);\n\n    var stampData = deletedStamps[position];\n    deletedStamps.splice(position, 1);\n\n    this.setState({ deletedStamps: deletedStamps });\n\n    this.addStamp(stampData, id => {\n      this.requestCompile(id);\n      window.postMessage({ type: \"edited\" }, \"*\");\n    });\n  }\n\n  refreshConsoleStamp(consoleStamp) {\n    var data = consoleStamp.ref.current.getData();\n    this.setState({ consoleStamp: null }, () => this.addConsoleStamp(data));\n  }\n\n  getStamperObject(id) {\n    var data = {\n      stamps: [],\n      scale: this.state.scale,\n      console: this.state.consoleStamp.ref.current.getData(),\n      originX: this.state.originX,\n      originY: this.state.originY,\n      worldKey: this.state.worldKey,\n      worldEdited: this.state.worldEdited,\n      worldPublishTime: this.state.worldPublishTime,\n      snapToGrid: this.state.snapToGrid,\n      linesOn: this.state.linesOn,\n      js: this.getExportableCode(),\n      highlightedLines: this.state.highlightedLines\n    };\n    this.state.stampOrder.map(stampID => {\n      if (stampID != id) {\n        var stamp = this.state.stampRefs[stampID];\n        data.stamps.push(stamp.current.getData());\n      }\n    });\n\n    return data;\n  }\n\n  onStartMove() {\n    var stampRefs = this.state.stampRefs;\n    for (var i in stampRefs) {\n      var stamp = stampRefs[i].current;\n\n      stamp.setIframeDisabled(true);\n    }\n  }\n\n  onStopMove() {\n    this.setState({ mouseWheelTimeout: null });\n    var stampRefs = this.state.stampRefs;\n    for (var i in stampRefs) {\n      var stamp = stampRefs[i].current;\n      stamp.setIframeDisabled(false);\n    }\n  }\n\n  centerOnStamp(id, xOff, yOff) {\n    var stampRef;\n\n    if (id in this.state.stampRefs) {\n      stampRef = this.state.stampRefs[id].current;\n    } else if (\n      this.state.consoleStamp.ref.current &&\n      id === this.state.consoleStamp.ref.current.props.id\n    ) {\n      stampRef = this.state.consoleStamp.ref.current;\n    }\n\n    if (stampRef) {\n      var cristalRef = stampRef.cristalRef.current;\n      if (cristalRef) {\n        var x = this.state.originX + cristalRef.state.x * this.state.scale,\n          y = this.state.originY + cristalRef.state.y * this.state.scale,\n          width = cristalRef.state.width,\n          height = cristalRef.state.height;\n\n        var newX =\n          (window.innerWidth - xOff) / 2 +\n          xOff -\n          (width / 2) * this.state.scale;\n        var newY =\n          (window.innerHeight - yOff) / 2 +\n          yOff -\n          (height / 2) * this.state.scale;\n\n        this.manualPan(newX - x, newY - y);\n        cristalRef.changeZIndex();\n      }\n    }\n  }\n\n  manualPan(xDiff, yDiff) {\n    $(\".allStamps\").css({ transition: \"all .5s ease\" });\n\n    setTimeout(() => {\n      $(\".allStamps\").css({ transition: \"\" });\n    }, 500);\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n    this.setState({\n      originX: this.state.originX + xDiff,\n      originY: this.state.originY + yDiff\n    });\n  }\n\n  toggleHide(stampRef) {\n    stampRef.toggleHide(() => {\n      this.setLayerPicker();\n    });\n  }\n\n  getFirstLine(text) {\n    var firstN = text.length;\n\n    for (var i = 0; i < text.length; i++) {\n      if (text[i] === \"\\n\") {\n        if (firstN === text.length) {\n          firstN = i;\n        }\n      }\n    }\n\n    if (firstN === 0) {\n      return \" \";\n    }\n\n    var dots = \"\";\n    if (firstN > 15) {\n      firstN = 15;\n      dots = \"...\";\n    }\n\n    return text.substr(0, firstN) + dots;\n  }\n\n  getScale() {\n    return this.state.scale;\n  }\n\n  getSnapMargin() {\n    if (this.state.snapToGrid) {\n      return this.calcSnapMargin();\n    } else {\n      return 0;\n    }\n  }\n\n  onDragEnd(result) {\n    if (!result.destination) {\n      return;\n    }\n\n    window.postMessage({ type: \"edited\" }, \"*\");\n\n    if (result.source.index === 0 || result.destination.index === 0) {\n      return;\n    }\n    var stampOrder = Object.assign([], this.state.stampOrder);\n\n    const [removed] = stampOrder.splice(result.source.index - 1, 1);\n    stampOrder.splice(result.destination.index - 1, 0, removed);\n\n    this.setState({ stampOrder: [] }, () => {\n      this.setLayerPicker();\n      this.setState({ stampOrder: stampOrder }, () => this.setLayerPicker());\n    });\n  }\n  calcSnapMargin() {\n    var snapMargin = Math.max(Math.round(1 / this.state.scale) * 20, 5);\n    return 20;\n  }\n\n  renderGridLines() {\n    if (this.state.snapToGrid === false) {\n      return null;\n    }\n\n    var gridLines = [];\n\n    var borderWidth = Math.max(Math.round(1 / this.state.scale), 0.5);\n    var snapMargin = this.calcSnapMargin();\n\n    var roundedScale = Math.round(1 / this.state.scale);\n\n    var actualOriginX = -this.state.originX;\n\n    // var x0 = -Math.round(this.state.originX /snapMargin)*snapMargin\n    // var y0 = -Math.round(this.state.originY/snapMargin)*snapMargin\n\n    var x0 = -this.state.originX / this.state.scale;\n    var y0 = -this.state.originY / this.state.scale;\n\n    var roundedX0 = Math.round(x0 / snapMargin) * snapMargin;\n    var roundedY0 = Math.round(y0 / snapMargin) * snapMargin;\n\n    var width = window.innerWidth / this.state.scale;\n    var height = window.innerHeight / this.state.scale;\n\n    var x = roundedX0;\n\n    while (x < width + x0) {\n      gridLines.push(\n        <span\n          className=\"border-borderGrey\"\n          style={{\n            position: \"absolute\",\n            top: roundedY0,\n            height: height,\n            width: 10,\n            left: x,\n            background: \"transparent\",\n            borderLeft: borderWidth + \"px solid\"\n          }}\n        />\n      );\n      x += snapMargin;\n    }\n\n    var y = roundedY0;\n\n    while (y < height + y0) {\n      gridLines.push(\n        <span\n          className=\"border-borderGrey\"\n          style={{\n            position: \"absolute\",\n            top: y,\n            height: 10,\n            width: width,\n            left: roundedX0,\n            background: \"transparent\",\n            borderTop: borderWidth + \"px solid\"\n          }}\n        />\n      );\n      y += snapMargin;\n    }\n\n    return gridLines;\n  }\n\n  toggleLinesOn() {\n    this.setState({ linesOn: !this.state.linesOn }, () => {\n      this.setLayerPicker();\n      this.setLineData();\n    });\n\n    this.onMouseOutLine();\n  }\n\n  setSettingsPicker() {\n    var pickerData = [];\n\n    pickerData.push({\n      name: \"lines  (L)\",\n      status: this.state.linesOn,\n      icon: globals.LinesIcon,\n\n      hideCallback: () => {\n        this.toggleLinesOn();\n      },\n\n      id: this.getUniqueID(),\n      isSetting: true,\n      toggleOnIcon: globals.SettingOnIcon,\n      toggleOffIcon: globals.SettingOffIcon\n    });\n\n    pickerData.push({\n      name: \"snap to grid (G)\",\n      status: this.state.snapToGrid,\n      icon: globals.GridIcon,\n\n      hideCallback: () => {\n        this.setState({ snapToGrid: !this.state.snapToGrid }, () =>\n          this.setLayerPicker()\n        );\n      },\n      id: this.getUniqueID(),\n      isSetting: true,\n      toggleOnIcon: globals.SettingOnIcon,\n      toggleOffIcon: globals.SettingOffIcon\n    });\n\n    this.setState({ settingsPicker: pickerData });\n  }\n\n  setLayerPicker() {\n    this.setSettingsPicker();\n\n    var pickerData = [];\n\n    if (this.state.consoleStamp && this.state.consoleStamp.ref.current) {\n      var consoleRef = this.state.consoleStamp.ref.current;\n      pickerData.push({\n        name: \"console\",\n        status: !consoleRef.state.hidden,\n        icon: consoleRef.getIcon(),\n        centerCallback: (xOff, yOff) =>\n          this.centerOnStamp(consoleRef.props.id, xOff, yOff),\n        hideCallback: () => this.toggleHide(consoleRef),\n        id: consoleRef.props.id,\n        isSetting: true,\n        toggleOnIcon: globals.VisibilityIcon,\n        toggleOffIcon: globals.VisibilityOffIcon\n      });\n    }\n\n    this.state.stampOrder.map(id => {\n      if (id in this.state.stampRefs) {\n        var stampRef = this.state.stampRefs[id].current;\n        if (!stampRef) {\n          return;\n        }\n        if (stampRef.props.isBlob) {\n          var name = this.getFirstLine(stampRef.state.code);\n        } else {\n          var name = stampRef.state.name;\n        }\n      }\n\n      // name += \"_\" + id;\n\n      pickerData.push({\n        name: name,\n        icon: stampRef.getIcon(),\n        status: !stampRef.state.hidden,\n        centerCallback: (xOff, yOff) =>\n          this.centerOnStamp(stampRef.props.id, xOff, yOff),\n        hideCallback: () => this.toggleHide(stampRef),\n        id: stampRef.props.id,\n        isConsole: false,\n        hasError: Object.keys(stampRef.state.errorLines).length > 0,\n        toggleOnIcon: globals.VisibilityIcon,\n        toggleOffIcon: globals.VisibilityOffIcon\n      });\n    });\n\n    this.setState({ pickerData: pickerData });\n  }\n\n  getNumStamps() {\n    return {\n      stamps: this.state.stampOrder.length\n    };\n  }\n\n  getWorldData() {\n    return {\n      worldKey: this.state.worldKey,\n      worldPublishTime: this.state.worldPublishTime,\n      worldEdited: this.state.worldEdited\n    };\n  }\n\n  // getMaxCoords() {\n  //   var coords = this.state.stampOrder.map(key => {\n  //     var stampRef = this.state.stampRefs[key].current;\n  //     if (!stampRef) {\n  //       return { x: 0, y: 0 };\n  //     }\n  //     return {\n  //       x: stampRef.state.x + stampRef.getSize().width,\n  //       y: stampRef.state.y + stampRef.getSize().height\n  //     };\n  //   });\n  //   coords.push({ x: 0, y: 0 });\n\n  //   return coords.reduce((maxCoords, coords) => {\n  //     return {\n  //       x: Math.max(maxCoords.x, coords.x),\n  //       y: Math.max(maxCoords.y, coords.y)\n  //     };\n  //   });\n  //          // <div  style={{width:this.getMaxCoords().x,height:this.getMaxCoords().y, background:\"black\" }} >hi</div>\n  // }\n\n  getCristalDimens(data) {\n    var iframeWidth = data.iframeWidth;\n    if (data.isTxtFile || data.isBlob) {\n      iframeWidth = 0;\n    }\n\n    var initialHeight = data.editorHeight + globals.fnTitleHeight + 60;\n    if (data.isMediaFile) {\n      initialHeight = data.iframeHeight + globals.fnTitleHeight + 35;\n    } else if (data.isBlob) {\n      initialHeight = data.editorHeight + 80;\n    }\n\n    return {\n      width: iframeWidth + data.editorWidth + 42,\n      height: initialHeight\n    };\n  }\n\n  render() {\n    if (this.state.consoleStamp) {\n      var consoleElem = this.state.consoleStamp.elem;\n    } else {\n      var consoleElem = null;\n    }\n\n    // var maxCoords = this.getMaxCoords();\n\n    return (\n      <div>\n        <div\n          class=\"row bg-grey\"\n          style={{ height: \"100vh\" }}\n          onClick={() => this.state.linesOn && this.onMouseOutLine()}\n        >\n          <div\n            className=\"allStamps\"\n            style={{\n              position: \"absolute\",\n              left: this.state.originX,\n              top: this.state.originY,\n              transform: \"scale(\" + this.state.scale + \")\"\n            }}\n          >\n            <div>{this.renderGridLines()}</div>\n            <ArcherContainer\n              onMouseOver={this.onMouseOverLine.bind(this)}\n              onMouseOut={this.onMouseOutLine.bind(this)}\n              scale={this.state.scale}\n              top={this.state.originY}\n              left={this.state.originX}\n              relativeOffsetSize={25}\n            >\n              {Object.values(this.state.stampElems)}\n              {consoleElem}\n\n              <Cristal invisible></Cristal>\n            </ArcherContainer>\n          </div>\n        </div>\n\n        <ControlBar\n          getNumStamps={this.getNumStamps.bind(this)}\n          requestCompile={this.requestCompile.bind(this)}\n          pickerData={this.state.pickerData}\n          addStamp={this.addStamp.bind(this)}\n          disablePan={this.disablePan.bind(this)}\n          disableZoom={this.disableZoom.bind(this)}\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          updateControlBarDimensions={this.updateControlBarDimensions.bind(\n            this\n          )}\n          ref={this.controlBarRef}\n          modalManagerRef={this.modalManagerRef}\n          onDragEnd={this.onDragEnd.bind(this)}\n          recompileIfEnoughStamps={this.recompileIfEnoughStamps.bind(this)}\n          getWorldData={this.getWorldData.bind(this)}\n          settingsPicker={this.state.settingsPicker}\n          deletedStamps={this.state.deletedStamps}\n          undoDelete={this.undoDelete.bind(this)}\n          addRawJavascript={this.addRawJavascript.bind(this)}\n        />\n\n        <ModalManager\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          ref={this.modalManagerRef}\n          loadStamperObject={this.loadStamperObject.bind(this)}\n          getStamperObject={this.getStamperObject.bind(this)}\n          getFileDict={this.getFileDict.bind(this)}\n          addStamp={this.addStamp.bind(this)}\n          requestCompile={this.requestCompile.bind(this)}\n          getWorldData={this.getWorldData.bind(this)}\n          setWorldData={(data, callback) => this.setState(data, callback)}\n        />\n      </div>\n    );\n  }\n}\n","import \"./App.scss\";\n\nimport React, { Component, useState } from \"react\";\n\nimport View from \"./View.js\";\n\n\n\nexport default class App extends Component {\n\n  render() {\n    return (\n      <div>\n        <View />\n      </div>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/box.310d8273.svg\";","module.exports = __webpack_public_path__ + \"static/media/file.5bd43cb8.svg\";","module.exports = __webpack_public_path__ + \"static/media/tool.d68b9b61.svg\";","module.exports = __webpack_public_path__ + \"static/media/bell.86facacc.svg\";","module.exports = __webpack_public_path__ + \"static/media/image.117a6d3e.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-down.c66b213d.svg\";","module.exports = __webpack_public_path__ + \"static/media/download.ce2002cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload.14dd1331.svg\";","module.exports = __webpack_public_path__ + \"static/media/archive.97582ec6.svg\";","module.exports = __webpack_public_path__ + \"static/media/message-square.42f61b6c.svg\";","module.exports = __webpack_public_path__ + \"static/media/info.47197c1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/star.ac8ea213.svg\";","import pf, { globals, p5Lib } from \"./globals.js\";\n\nvar asciiArt =\n  \"   ____    __    ____      ____    ______ ______           ____    ____    ____       \\n  /\\\\  _\\\\  _\\\\ \\\\ _/\\\\__ \\\\    /\\\\  _`\\\\ /\\\\__  _/\\\\  _  \\\\  /'\\\\_/`\\\\/\\\\  _`\\\\ /\\\\  _`\\\\ /\\\\  _`\\\\     \\n  \\\\ \\\\ \\\\/ /\\\\_` ' \\\\/_/\\\\ \\\\   \\\\ \\\\,\\\\L\\\\_\\\\/_/\\\\ \\\\\\\\ \\\\ \\\\L\\\\ \\\\/\\\\      \\\\ \\\\ \\\\L\\\\ \\\\ \\\\ \\\\L\\\\_\\\\ \\\\ \\\\L\\\\ \\\\   \\n   \\\\ \\\\ \\\\ \\\\/_>   <_ \\\\ \\\\ \\\\   \\\\/_\\\\__ \\\\  \\\\ \\\\ \\\\\\\\ \\\\  __ \\\\ \\\\ \\\\__\\\\ \\\\ \\\\ ,__/\\\\ \\\\  _\\\\L\\\\ \\\\ ,  /   \\n    \\\\ \\\\ \\\\_ /\\\\_, ,_\\\\ \\\\_\\\\ \\\\    /\\\\ \\\\L\\\\ \\\\ \\\\ \\\\ \\\\\\\\ \\\\ \\\\/\\\\ \\\\ \\\\ \\\\_/\\\\ \\\\ \\\\ \\\\/  \\\\ \\\\ \\\\L\\\\ \\\\ \\\\ \\\\\\\\ \\\\  \\n     \\\\ \\\\___\\\\/_/\\\\_\\\\/ /\\\\___\\\\   \\\\ `\\\\____\\\\ \\\\ \\\\_\\\\\\\\ \\\\_\\\\ \\\\_\\\\ \\\\_\\\\\\\\ \\\\_\\\\ \\\\_\\\\   \\\\ \\\\____/\\\\ \\\\_\\\\ \\\\_\\\\\\n      \\\\/___/  \\\\/_/  \\\\/___/    \\\\/_____/  \\\\/_/ \\\\/_/\\\\/_/\\\\/_/ \\\\/_/\\\\/_/    \\\\/___/  \\\\/_/\\\\/ /\";\n\nexport const stamperHeader = `/*\n${asciiArt}\n\n\nHello and welcome to your Stamper metadata file! \nThis file keeps track of all of the info Stamper needs about your stamps. \n\nDon't worry, it won't affect your sketch if you run it on any other IDE.\n\nPlease DON'T MODIFY ANY OF THE INFORMATION BELOW or else your project may behave unexpectantly in Stamper.\nHowever, if your project is acting strangely, delete this file and reopen your project. \nYou'll lose your stamps' formatting but keep all of the code.\n\nHappy Stamping :)\n\n*/\n\n`;\n\nexport const builtInFns = [\n  {\n    name: \"draw\",\n    args: \"\",\n    code: `colorMode(RGB, 255, 255, 255, 1);\nbackground(0, 0, 0, .01);\nstroke(255);\nstrokeWeight(1)\n\nif (mouseIsPressed) {\nline(mouseX, mouseY, pmouseX, pmouseY);\n}`\n  },\n  {\n    name: \"setup\",\n    args: \"\",\n    code: `createCanvas(${globals.defaultIframeWidth},${globals.defaultEditorHeight})\nbackground(100);`\n  },\n  { name: \"preload\", args: \"\", code: \"img = loadImage('YOUR IMAGE');\" }\n];\n\nvar keyPressCode = `fill(\"black\")\ntextSize(50);\n\n// display last key pressed.\ntext(key + ' ' + keyCode, 20, 70);`;\n\nvar mousePressCode = `fill('black')\n\n// display last clicked location\ntext(mouseX + ', ' + mouseY, mouseX + 10, mouseY - 10)\nrectMode(CENTER)\nrect(mouseX, mouseY, 1, 20)\nrect(mouseX, mouseY, 20, 1)`;\n\nexport const listenerFns = [\n  {\n    name: \"keyPressed\",\n    args: \"\",\n    code: `background('yellow')\\n` + keyPressCode\n  },\n  {\n    name: \"keyReleased\",\n    args: \"\",\n    code: `background('springgreen')\\n` + keyPressCode\n  },\n  {\n    name: \"keyTyped\",\n    args: \"\",\n    code: `background('cyan')\\n` + keyPressCode\n  },\n  {},\n  {\n    name: \"mousePressed\",\n    args: \"\",\n    code: `background('yellow')\\n` + mousePressCode\n  },\n  {\n    name: \"mouseReleased\",\n    args: \"\",\n    code: `background('springgreen')\\n` + mousePressCode\n  },\n  {\n    name: \"mouseClicked\",\n    args: \"\",\n    code: `background('cyan')\\n` + mousePressCode\n  },\n  {\n    name: \"doubleClicked\",\n    args: \"\",\n    code: `background('cyan')\\n` + mousePressCode\n  },\n  {},\n  {\n    name: \"mouseMoved\",\n    args: \"\",\n    code: `background(0, 10)\nstrokeWeight(0)\nfill(255)\nsize = 2*random(0, width)/3\nellipse(width/2,height/2,size, size)`\n  },\n\n  {\n    name: \"mouseDragged\",\n    args: \"\",\n    code: `background(0, 10)\nstrokeWeight(0)\nfill(255)\nsize = 2*random(0, width)/3\nellipse(width/2,height/2,size, size)`\n  },\n  {},\n  {\n    name: \"mouseWheel\",\n    args: \"\",\n    code: `background('yellow')\nstrokeWeight(1)\nstroke(\"black\")\nvar y = random(0, height)\nline(0, y, width, y)`\n  }\n];\n\nexport const normalFn = {\n  name: \"blueCircle\",\n  args: \"posX=mouseX, posY=mouseY\",\n  code: `strokeWeight(1)\nstroke(\"black\")\nfill('lightblue')\nellipse(posX, posY, 30, 30)`\n};\n\nexport const starterBlobs = [\n  {\n    name: \"global variable\",\n    data: { code: \"var global1 = 1\", isBlob: true }\n  },\n  {\n    name: \"comment\",\n    data: {\n      code: `/*\\n  comment here\\n*/`,\n      codeSize: globals.bigCodeSize,\n      isBlob: true\n    }\n  },\n  {\n    name: \"class\",\n    data: {\n      code: `class Jitter {\n  constructor() {\n    this.x = random(width);\n    this.y = random(height);\n    this.diameter = random(10, 30);\n    this.speed = 1;\n  }\n\n  move() {\n    this.x += random(-this.speed, this.speed);\n    this.y += random(-this.speed, this.speed);\n  }\n\n  display() {\n    ellipse(this.x, this.y, this.diameter, this.diameter);\n  }\n}`,\n      isBlob: true\n    }\n  }\n];\n\nexport const sampleFile = {\n  name: \"sample.js\",\n  code: \"// put some code to import into your js in here\",\n  isTxtFile: true\n};\n\nexport const varBlob = { code: \"var global1 = 1\", isBlob: true };\n\nexport default function DefaultExportPlaceholder() {\n  return null;\n}\n\nexport const empty = {\n  stamps: [\n    {\n      name: \"style.css\",\n      code: \"\\nhtml, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 268.53419986245996,\n      y: 177.7984650004281,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: 642,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 309.13872819066705,\n      y: 148.12237211435783,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: 641,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 1,\n  console: {\n    x: 303.0271580940204,\n    y: 206.71662152101146,\n    consoleWidth: 225,\n    consoleHeight: 200,\n    hidden: true,\n    zIndex: 640\n  },\n  originX: 0,\n  originY: 0,\n\n  worldKey: \"empty\",\n  compressedJs: \"\"\n};\n\nvar starter2 = {\n  stamps: [\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 1551.2140684066003,\n      y: 526.1806151153287,\n      editorWidth: 225,\n      editorHeight: 176.29205282888586,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"style.css\",\n      code: \"html, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 1551.6900090741035,\n      y: 889.4753177293393,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code:\n        '/* READ ME\\n\\n    Welcome to Stamper!\\n    \\n    What you have before you is a p5.js sketch formatted in artboard-like items called Stamps. \\n    \\n    You can think of these big Stamps titled \"setup\", \"draw\", and \"sizeDot\" as functions. They can call one another and use global variables.\\n    \\n    You can also import file and media Stamps in the bar above and use the console Stamp to debug your code.\\n    \\n    Anything in p5.js should work in Stamper. You can upload existing p5 sketches to Stamper or download this Sketch and open it up somewhere else. \\n    \\n    Happy stamping, we\\'re excited to see what you make! \\n    \\n    - Maayan & Cam\\n    \\n*/',\n      args: \" \",\n      x: 702.0843016558624,\n      y: 526.3886604608753,\n      editorWidth: 224.2321933879481,\n      editorHeight: 627.8573293703668,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 632,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"var xPos = 0\\nvar maxSize = 20\",\n      args: \" \",\n      x: 1025.2197591789836,\n      y: 526.1831709984822,\n      editorWidth: 120.72506930849877,\n      editorHeight: 174.63795191901036,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 627,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code: \"createCanvas(200, 200)\\nbackground(175, 112, 248)\\nnoStroke()\",\n      args: \"\",\n      x: 1216.6046212636682,\n      y: 526.1050713082992,\n      editorWidth: 187.33684948280245,\n      editorHeight: 75.20212084900183,\n      iframeWidth: 47.18718026609529,\n      iframeHeight: 84.26214854159208,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 630,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nvar size = random(0, maxSize)\\n\\n// set the opacity\\nvar opacity = map(size, \\n    0, maxSize, \\n    0, 255)\\n\\n// draw a dot   \\nfill(255, opacity);\\nellipse(x,y,size, size);\\n\\n\",\n      args: \"x=mouseX, y=mouseY\",\n      x: 1025.1123055679532,\n      y: 789.7862113698332,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200.4613444482518,\n      iframeHeight: 199.7524142951453,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 579,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"draw\",\n      code:\n        \"// update xPos and background\\nbackground(175, 112, 248, 10)\\nxPos = (xPos +2) % width\\n\\n// draw a row of dots\\nfor(var i = 0; \\n    i < height/maxSize; \\n    i++){\\n      sizeDot(xPos, i*maxSize )\\n}\\n\",\n      args: \"\",\n      x: 1025.3740565788173,\n      y: 1153.6991713934658,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 580,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 0.7838764402270318,\n  console: {\n    x: 700.0778726617857,\n    y: 1240.2239882058916,\n    consoleWidth: 244.781440843727,\n    consoleHeight: 199.19044002384612,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: -257.2010372715673,\n  originY: -311.9703251082989,\n  worldKey: \"starter\",\n  compressedJs:\n    \"\\u0013{9;@z$\"\n};\nvar particles = {\n  stamps: [\n    {\n      name: \"style.css\",\n      code: \"\\nhtml, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 2487.723154997192,\n      y: 454.1828386163433,\n      editorWidth: 155.2851590781397,\n      editorHeight: 108.88644457518404,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 2926.0613195853425,\n      y: 460.660255253893,\n      editorWidth: 331.9915568373324,\n      editorHeight: 267.30348833629085,\n      iframeWidth: 225,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code:\n        \"// nothing much to see here\\ncreateCanvas(300,300) // this won't alter the window size\\nbackground(backgroundFade)\\nnoStroke()\",\n      args: \"\",\n      x: 1922.4727804881593,\n      y: -28.839556505847952,\n      editorWidth: 300,\n      editorHeight: 95.77622017221594,\n      iframeWidth: 229.2823664771775,\n      iframeHeight: 125.05858664939339,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"basicDot\",\n      code: \"fill(255);\\nellipse(x, y, 10, 10)\",\n      args: \"x=mouseX, y=mouseY\",\n      x: -59.00091994708015,\n      y: 619.609814794894,\n      editorWidth: 181.2419711791158,\n      editorHeight: 111.52588114745845,\n      iframeWidth: 134.907702273812,\n      iframeHeight: 130.38322448430927,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 101,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"speedColorDot\",\n      code:\n        \"if(!speed){\\n  speed = random(0, .01)\\n}\\n\\n// set the opacity and color based on the speed the dots are moving\\nvar opacity = max(100, speed *100 * 255)\\nvar colorOff = speed *100\\nfill(150 - colorOff*40, 100+ colorOff*80, 255, opacity);\\nellipse(x,y,5, 5);\\n\",\n      args: \"x = mouseX, y=mouseY\",\n      x: 329.9599253794122,\n      y: 976.0473944121347,\n      editorWidth: 296.7340422149467,\n      editorHeight: 176.59932474664424,\n      iframeWidth: 169.71609003165736,\n      iframeHeight: 195.90489555790055,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 102,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"getPosition\",\n      code:\n        \"\\n if(angle === 0){\\n  lastFaderX = faderX\\n  faderX = faderX*.97 + .03* mouseX / width;\\n  speed = abs(faderX - lastFaderX)\\n  randomSeed(actRandomSeed); \\n }\\n var randomX = random(0,width);\\n  var randomY = random(0,height);\\n  var circleX = width / 2 + cos(angle) * 100;\\n  var circleY = height / 2 + sin(angle) * 100;\\n  var x = lerp(randomX,circleX,faderX);\\n  var y = lerp(randomY,circleY,faderX);\\n  if(mouseIsPressed){\\n     background(backgroundFade, 10)\\n  var angle = map(mouseX, 0, width, 0,7)\\n  var circleX = width / 2 + cos(angle) * 100;\\n  var circleY = height / 2 + sin(angle) * 100;\\n  basicDot(circleX, circleY) \\n  }\\n\\n  \\n  return {x:x, y:y}\\n  \",\n      args: \"angle\",\n      x: 1307.5816569518977,\n      y: 677.5063472275517,\n      editorWidth: 379.21463817319534,\n      editorHeight: 376.8484971084752,\n      iframeWidth: 289.3981629416132,\n      iframeHeight: 292.2735384641079,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 103,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"drawFadedParticles\",\n      code:\n        \"background(backgroundFade, 20);\\n\\nfor (var i = 0; i < count; i++) {\\n  var angle = i*360/count\\n  \\n  // mix and match dot functions here!\\n  pos = getPosition(angle)\\n  basicDot(pos.x, pos.y)\\n}\",\n      args: \"\",\n      x: 655.2944910006604,\n      y: -49.9258150353464,\n      editorWidth: 309.7943589626219,\n      editorHeight: 146.47663811577075,\n      iframeWidth: 297.3456070084918,\n      iframeHeight: 298.4895813984271,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 104,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"speedDot\",\n      code:\n        \"\\nif(!speed){\\n  speed = random(0, .01)\\n}\\n\\n// set the opacity based on the speed the dots are moving\\nvar opacity = max(100, speed *100 * 255)\\nfill(150, 100, 255,opacity);\\nellipse(x,y,10, 10);\\n\\n\",\n      args: \"x = mouseX, y=mouseY\",\n      x: -159.95756973196586,\n      y: 906.1192916260952,\n      editorWidth: 308.7544796011597,\n      editorHeight: 185.16405770099925,\n      iframeWidth: 116.75259491582909,\n      iframeHeight: 204.18278884948927,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 105,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nnoStroke()\\nvar size = random(0, 10)\\n\\n// use it to draw the dot\\nfill(86,186,255, size*.1 *255);\\nellipse(x,y,size, size);\",\n      args: \"x = mouseX, y=mouseY\",\n      x: 327.8196574329079,\n      y: 620.3268102451857,\n      editorWidth: 199.66994116856335,\n      editorHeight: 179.9979040763115,\n      iframeWidth: 91.90910563176772,\n      iframeHeight: 206.14265666314918,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 106,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"drawParticles\",\n      code:\n        \"\\nbackground(40);\\n\\nfor (var i = 0; i < count; i++) {\\n  var angle = i*360/count\\n  pos = getPosition(angle)\\n  \\n  // mix and match dot functions here!\\n  sizeDot(pos.x, pos.y)\\n  speedColorDot(pos.x, pos.y)\\n}\",\n      args: \"\",\n      x: -6.737551201596916,\n      y: -46.19936428968789,\n      editorWidth: 300,\n      editorHeight: 193.4799063003186,\n      iframeWidth: 308.1860599190181,\n      iframeHeight: 294.830608250465,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 133,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"// the particle pattern\",\n      args: \" \",\n      x: -101.36309304052276,\n      y: -164.3449970916704,\n      editorWidth: 561.388125203422,\n      editorHeight: 39.624291076671355,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 123,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code: \"// different types of dots, mouse over the canvases to see them\",\n      args: \" \",\n      x: -389.8061630364864,\n      y: 495.0560125150731,\n      editorWidth: 959.3106635538155,\n      editorHeight: 49.88002660116602,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 124,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code:\n        \"// a helper function to get the particle pattern, mouse over the canvas while pressing your mouse down to visualize what it does\",\n      args: \" \",\n      x: 967.2439576737161,\n      y: 522.8690319916844,\n      editorWidth: 955.2083693440158,\n      editorHeight: 62.18690923055951,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 125,\n      isBlob: true,\n      codeSize: 28\n    },\n    {\n      name: \"\",\n      code:\n        \"// globals\\n\\nvar actRandomSeed = 0;\\nvar count = 300;\\nvar faderX = 0\\nvar backgroundFade = 40\\nvar lastFaderX\\nvar speed\\nvar angleUnit = (360 / count);\",\n      args: \" \",\n      x: 1662.564205981018,\n      y: -101.65610389740152,\n      editorWidth: 190.13049921671842,\n      editorHeight: 183.20458841959572,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"// setup stuff\",\n      args: \" \",\n      x: 1929.8952193556572,\n      y: -153.45214631512889,\n      editorWidth: 341.91538497923824,\n      editorHeight: 35.52199686687362,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: true,\n      codeSize: 28\n    }\n  ],\n  scale: 0.40940849184989847,\n  console: {\n    x: 2406.431838044327,\n    y: 726.7041236433164,\n    consoleWidth: 398.5547609288658,\n    consoleHeight: 312.41625580738497,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: 450.0090809071319,\n  originY: 189.64858810122308,\n\n  worldKey: \"particles\",\n  compressedJs:\n    '\"\\u00149S\\nC\\f\\u0015H'\n};\nvar starter1 = {\n  stamps: [\n    {\n      name: \"index.html\",\n      code:\n        '<html>\\n  <head>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\"></script>\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\"></script>\\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\\n  </head>\\n  <body>\\n    <script src=\\'sketch.js\\'></script>\\n  </body>\\n</html>\\n',\n      args: \" \",\n      x: 1551.2140684066003,\n      y: 526.1806151153287,\n      editorWidth: 225,\n      editorHeight: 176.29205282888586,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: true,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"style.css\",\n      code: \"html, body {\\n  margin: 0;\\n  padding: 0;\\n}\",\n      args: \" \",\n      x: 1551.6900090741035,\n      y: 889.4753177293393,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: true,\n      isMediaFile: false,\n      hidden: true,\n      exported: true,\n      zIndex: -1,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code:\n        '/* READ ME\\n\\n    Welcome to Stamper!\\n    \\n    What you have before you is a p5.js sketch formatted in artboard-like items called Stamps. \\n    \\n    You can think of these big Stamps titled \"setup\", \"draw\", and \"sizeDot\" as functions. They can call one another and use global variables.\\n    \\n    You can also import file and media Stamps in the bar above and use the console Stamp to debug your code.\\n    \\n    Anything in p5.js should work in Stamper. You can upload existing p5 sketches to Stamper or download this Sketch and open it up somewhere else. \\n    \\n    Happy stamping, we\\'re excited to see what you make! \\n    \\n    - Maayan & Cam\\n    \\n*/',\n      args: \" \",\n      x: 702.0843016558624,\n      y: 526.3886604608753,\n      editorWidth: 224.2321933879481,\n      editorHeight: 627.8573293703668,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 632,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"\",\n      code: \"var xPos = 0\\nvar maxSize = 20\",\n      args: \" \",\n      x: 1025.2197591789836,\n      y: 526.1831709984822,\n      editorWidth: 120.72506930849877,\n      editorHeight: 174.63795191901036,\n      iframeWidth: 0,\n      iframeHeight: 0,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 627,\n      isBlob: true,\n      codeSize: 14\n    },\n    {\n      name: \"setup\",\n      code: \"createCanvas(200, 200)\\nbackground(175, 112, 248)\\nnoStroke()\",\n      args: \"\",\n      x: 1216.6046212636682,\n      y: 526.1050713082992,\n      editorWidth: 187.33684948280245,\n      editorHeight: 75.20212084900183,\n      iframeWidth: 47.18718026609529,\n      iframeHeight: 84.26214854159208,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 630,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"sizeDot\",\n      code:\n        \"// generate a random size\\nvar size = random(0, maxSize)\\n\\n// set the opacity\\nvar opacity = map(size, \\n    0, maxSize, \\n    0, 255)\\n\\n// draw a dot   \\nfill(255, opacity);\\nellipse(x,y,size, size);\\n\\n\",\n      args: \"x=mouseX, y=mouseY\",\n      x: 1025.1123055679532,\n      y: 789.7862113698332,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200.4613444482518,\n      iframeHeight: 199.7524142951453,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 579,\n      isBlob: false,\n      codeSize: 14\n    },\n    {\n      name: \"draw\",\n      code:\n        \"// update xPos and background\\nbackground(175, 112, 248, 10)\\nxPos = (xPos +2) % width\\n\\n// draw a row of dots\\nfor(var i = 0; \\n    i < height/maxSize; \\n    i++){\\n      sizeDot(xPos, i*maxSize )\\n}\\n\",\n      args: \"\",\n      x: 1025.3740565788173,\n      y: 1153.6991713934658,\n      editorWidth: 225,\n      editorHeight: 175,\n      iframeWidth: 200,\n      iframeHeight: 200,\n      isIndex: false,\n      isTxtFile: false,\n      isMediaFile: false,\n      hidden: false,\n      exported: true,\n      zIndex: 580,\n      isBlob: false,\n      codeSize: 14\n    }\n  ],\n  scale: 0.7838764402270318,\n  console: {\n    x: 700.0778726617857,\n    y: 1240.2239882058916,\n    consoleWidth: 244.781440843727,\n    consoleHeight: 199.19044002384612,\n    hidden: true,\n    zIndex: -1\n  },\n  originX: -257.2010372715673,\n  originY: -311.9703251082989,\n  compressedJs:\n    \"\\u0013{9;@z$\"\n};\n\nexport const starter = starter1;\n\nexport const worlds = [\n  { name: \"starter\", data: starter2 },\n  { name: \"empty\", data: empty },\n  { name: \"particles\", data: particles }\n];\n","import GridIcon from \"./icons/grid.svg\";\nimport LinesIcon from \"./icons/git-commit.svg\";\nimport ConsoleStampIcon from \"./icons/message-circle.svg\";\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport HtmlStampIcon from \"./icons/layout.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport BlobStampIcon from \"./icons/globe.svg\";\nimport MediaAssetIcon from \"./icons/layers-light.svg\";\nimport DeleteStampIcon from \"./icons/trash.svg\";\nimport CopyIcon from \"./icons/copy.svg\";\nimport ClearConsoleIcon from \"./icons/rotate-ccw.svg\";\nimport CodeSizeIcon from \"./icons/type.svg\";\nimport MinimzeIcon from \"@material-ui/icons/MinimizeOutlined\";\n\nimport ExpandLessIcon from \"./icons/chevron-up.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport SettingOnIcon from \"./icons/check-square.svg\";\nimport SettingOffIcon from \"./icons/square.svg\";\n\nimport VisibilityIcon from \"./icons/eye.svg\";\nimport VisibilityOffIcon from \"./icons/eye-off.svg\";\nimport EmptyIcon from \"./icons/empty.svg\";\n\nexport const globals = {\n  SettingOnIcon:SettingOnIcon,\n  SettingOffIcon:SettingOffIcon,\n  ExpandLessIcon:ExpandLessIcon,\n  EmptyIcon:EmptyIcon,\n  GridIcon:GridIcon,\n  LinesIcon:LinesIcon,\n  ConsoleStampIcon:ConsoleStampIcon, \n  FunctionStampIcon:FunctionStampIcon,\n  FileStampIcon:FileStampIcon,\n  HtmlStampIcon:HtmlStampIcon, \n  BuiltInStampIcon:BuiltInStampIcon,\n  ListenerStampIcon:ListenerStampIcon,\n  ImageStampIcon:ImageStampIcon,\n  BlobStampIcon:BlobStampIcon, \n  MediaAssetIcon:MediaAssetIcon,\n  DeleteStampIcon:DeleteStampIcon, \n  CopyIcon:CopyIcon, \n  ClearConsoleIcon:ClearConsoleIcon,\n  ExpandMoreIcon:ExpandMoreIcon,\n  DownloadIcon:DownloadIcon,\n  UploadIcon:UploadIcon,\n  WorldsIcon:WorldsIcon,\n  GlobalVarIcon:GlobalVarIcon,\n  CommentIcon:CommentIcon,\n  InfoIcon:InfoIcon,\n  PermanentWorldIcon:PermanentWorldIcon,\n  CodeSizeIcon:CodeSizeIcon,\n  MinimzeIcon:MinimzeIcon,\n  VisibilityIcon:VisibilityIcon,\n  VisibilityOffIcon:VisibilityOffIcon,\n  defaultEditorWidth: 225,\n  defaultVarEditorHeight: 200,\n  defaultEditorHeight:200,\n  defaultIframeWidth: 200,\n  iframeMargin: 0,\n  headerHeight: 30,\n  brHeight: 25,\n  codeSize: 14,\n  buttonTextSize: 12,\n  bigCodeSize:28,\n  fnTitleHeight: 100,\n  copyOffset: 35,\n  iconOpacity:.5,\n  iconSize:15,\n  iconTransition: \"all .3s ease\",\n  borderTransition: \"border .3s ease-out\",\n  autoLayoutMargin:20,\n\n  listeners:{\n        windowResized:  false,\n    deviceMoved:  false,\n    deviceTurned: false,\n    deviceShaken: false,\n\n    keyPressed: false,\n    keyReleased:  false,\n    keyTyped: false,\n\n    mouseMoved: false,\n    mouseDragged: false,\n\n    mousePressed: false,\n    mouseReleased:  false,\n    mouseClicked: false,\n    doubleClicked:  false,\n    \n    mouseWheel: false,\n  },\n\n\n  builtIns:{\n        draw:           true,\n    preload:        true,\n    setup:          true,\n  },\n\n  specialFns: {\n    draw:           true,\n    preload:        true,\n    setup:          true,\n    \n    windowResized:  false,\n    deviceMoved:  false,\n    deviceTurned: false,\n    deviceShaken: false,\n\n    keyPressed: false,\n    keyReleased:  false,\n    keyTyped: false,\n\n    mouseMoved: false,\n    mouseDragged: false,\n\n    mousePressed: false,\n    mouseReleased:  false,\n    mouseClicked: false,\n    doubleClicked:  false,\n    \n    mouseWheel: false,\n  },\n\n  fnStampWidth:     557,\n  fnStampHeight:    318\n\n};\n\nexport const p5Lib = [\n\"abs()\",\n\"acos()\",\n\"alpha(color)\",\n\"ambient(color)\",\n\"ambientLight(r,g,b)\",\n\"append(array,value)\",\n\"applyMatrix(n00,n01,n02,n03,n10,n11,n12,n13,n20,n21,n22,n23,n30,n31,n32,n33)\",\n\"arc(x,y,width,start,stop)\",\n\"arrayCopy(src,dst,(length))\",\n\"asin()\",\n\"atan()\",\n\"atan2()\",\n\"background(color)\",\n\"beginCamera()\",\n\"beginContour()\",\n\"beginRaw(renderer,filename)\",\n\"beginRecord(renderer,filename)\",\n\"beginShape()\",\n\"bezier(x1,y1,x2,y2,x3,y3,x4,y4)\",\n\"bezierDetail(detail)\",\n\"bezierPoint(a,b,c,d,t)\",\n\"bezierTangent(a,b,c,d,t)\",\n\"bezierVertex(x2,y2,x3,y3,x4,y4)\",\n\"binary(value,(digits))\",\n\"blend(sx,sy,sw,sh,dx,dy,dw,dh,mode)\",\n\"blendMode(mode)\",\n\"blue(color)\",\n\"boolean(value)\",\n\"box(size)\",\n\"brightness(color)\",\n\"byte(value)\",\n\"camera(eyeX,eyeY,eyeZ,centerX,centerY,centerZ,upX,upY,upZ)\",\n\"ceil()\",\n\"char(value)\",\n\"clear()\",\n\"color(color)\",\n\"colorMode(mode)\",\n\"concat(a,b)\",\n\"constrain()\",\n\"copy(sx,sy,sw,sh,dx,dy,dw,dh)\",\n\"cos()\",\n\"createFont(name,size)\",\n\"createGraphics(w,h)\",\n\"createImage(w,h,format)\",\n\"createInput(filename)\",\n\"createOutput(filename)\",\n\"createReader(filename)\",\n\"createShape(kind,parameters)\",\n\"createWriter(filename)\",\n\"cursor(img)\",\n\"curve(x1,y1,x2,y2,x3,y3,x4,y4)\",\n\"curveDetail(detail)\",\n\"curvePoint(a,b,c,d,t)\",\n\"curveTangent(a,b,c,d,t)\",\n\"curveTightness(tightness)\",\n\"curveVertex(x,y)\",\n\"day()\",\n\"degrees()\",\n\"directionalLight(r,g,b,nx,ny,nz)\",\n\"displayDensity()\",\n\"dist()\",\n\"ellipse(x,y,width,height)\",\n\"ellipseMode(mode)\",\n\"emissive(color)\",\n\"endCamera()\",\n\"endContour()\",\n\"endRaw()\",\n\"endRecord()\",\n\"endShape()\",\n\"exp()\",\n\"expand(list,(newSize))\",\n\"fill(color)\",\n\"filter(shader)\",\n\"float(value)\",\n\"floor()\",\n\"frameRate(fps)\",\n\"frustum(left,right,bottom,top,near,far)\",\n\"fullScreen(renderer)\",\n\"get(x,y)\",\n\"green(color)\",\n\"hex(value,(digits))\",\n\"hour()\",\n\"hue(color)\",\n\"image(image,x,y)\",\n\"imageMode(mode)\",\n\"int(value)\",\n\"join(list,seperator)\",\n\"launch(args)\",\n\"lerp()\",\n\"lerpColor(color1,color2,amount)\",\n\"lightFalloff(constant,linear,quadratic)\",\n\"lights()\",\n\"lightSpecular(r,g,b)\",\n\"line(x1,y1,x2,y2)\",\n\"loadBytes(filename)\",\n\"loadFont(filename)\",\n\"loadImage(filename)\",\n\"loadPixels()\",\n\"loadShader(fragFilename,(vertFilename))\",\n\"loadShape(filename)\",\n\"loadStrings(filename)\",\n\"loadTable(filename,(options))\",\n\"loadXML(filename)\",\n\"log()\",\n\"mag()\",\n\"map()\",\n\"match(string,regexp)\",\n\"matchAll(string,regexp)\",\n\"max()\",\n\"millis()\",\n\"min()\",\n\"minute()\",\n\"modelX(x,y,z)\",\n\"modelY(x,y,z)\",\n\"modelZ(x,y,z)\",\n\"month()\",\n\"nf(num,digits)\",\n\"nfc(num,(right))\",\n\"nfp(num,(digits))\",\n\"nfs(num,digits)\",\n\"noCursor()\",\n\"noCursor()\",\n\"noFill()\",\n\"noise()\",\n\"noiseDetail()\",\n\"noiseSeed()\",\n\"noLights()\",\n\"norm()\",\n\"normal(nx,ny,nz)\",\n\"noSmooth()\",\n\"noStroke()\",\n\"noTint()\",\n\"ortho(left,right,bottom,top)\",\n\"parseXML(string,(options))\",\n\"perspective(fovy,aspect,zNear,zFar)\",\n\"pixelDensity(density)\",\n\"point(x,y)\",\n\"pointLight(r,g,b,x,y,z)\",\n\"popMatrix()\",\n\"pow()\",\n\"print(variables)\",\n\"printArray(array)\",\n\"printCamera()\",\n\"println(variables)\",\n\"printMatrix()\",\n\"printProjection()\",\n\"pushMatrix()\",\n\"quad(x,y,x2,y2,x3,y3,x4,y4)\",\n\"quadraticVertex(x,y,x2,y2)\",\n\"radians()\",\n\"random()\",\n\"randomGaussian()\",\n\"randomSeed()\",\n\"rect(x,y,width,height)\",\n\"rectMode(mode)\",\n\"red(color)\",\n\"requestImage(filename)\",\n\"resetMatrix()\",\n\"resetShader()\",\n\"reverse(list)\",\n\"rotate(angle)\",\n\"rotateX(angle)\",\n\"rotateY(angle)\",\n\"rotateZ(angle)\",\n\"round()\",\n\"saturation(color)\",\n\"save(filename)\",\n\"saveBytes(filename,data)\",\n\"saveFrame(filename####)\",\n\"saveStream(target,source)\",\n\"saveStrings(filename,data)\",\n\"saveTable(table,filename,(options))\",\n\"saveXML(xml,filename,(options))\",\n\"scale(s)\",\n\"screenX(x,y)\",\n\"screenY(x,y)\",\n\"screenZ(x,y)\",\n\"second()\",\n\"selectFolder(prompt,callback)\",\n\"selectInput(prompt,callback)\",\n\"selectOutput(prompt,callback)\",\n\"set(x,y,color)\",\n\"shader(shader)\",\n\"shape(shape,x,y)\",\n\"shapeMode(mode)\",\n\"shearX(angle)\",\n\"shearY(angle)\",\n\"shininess(shine)\",\n\"shorten(list)\",\n\"sin()\",\n\"size(width,height,renderer)\",\n\"smooth()\",\n\"sort(list,(count))\",\n\"specular(color)\",\n\"sphere(radius)\",\n\"sphereDetail(res)\",\n\"splice(list,value,index)\",\n\"split(value,digits)\",\n\"splitTokes(value,(delim))\",\n\"spotLight(r,g,b,x,y,z,nx,ny,nz,angle,concentration)\",\n\"sq()\",\n\"sqrt()\",\n\"string(value)\",\n\"stroke(color)\",\n\"strokeCap(cap)\",\n\"strokeJoin(join)\",\n\"strokeWeight(weight)\",\n\"subset(list,start,(count))\",\n\"tan()\",\n\"text(string,x,y)\",\n\"textAlign(alignX,(alignY))\",\n\"textAscent()\",\n\"textDescent()\",\n\"textFont(font,(size))\",\n\"textLeading(leading)\",\n\"textMode(mode)\",\n\"textSize(size)\",\n\"texture(image)\",\n\"textureMode(mode)\",\n\"textureWrap(wrap)\",\n\"textWidth(string)\",\n\"tint(color)\",\n\"translate(x,y)\",\n\"triangle(x1,y1,x2,y2,x3,y3)\",\n\"trim(string)\",\n\"unbinary(value)\",\n\"unhex(value)\",\n\"updatePixels()\",\n\"vertex(x,y)\",\n\"year()\",\n\"HALF_PI\",\n\"PI\",\n\"QUARTER_PI\",\n\"TAU\",\n\"TWO_PI\",\n\"frameCount\",\n\"deltaTime\",\n\"focused\",\n\"displayWidth\",\n\"displayHeight\",\n\"windowWidth\",\n\"windowHeight\",\n\"width\",\n\"height\",\n\"disableFriendlyErrors\",\n\"p5.Element\",\n\"VIDEO\",\n\"AUDIO\",\n\"p5.MediaElement\",\n\"p5.File\",\n\"p5.Graphics\",\n\"p5.TypedDict\",\n\"p5.NumberDict\",\n\"deviceOrientation\",\n\"accelerationX\",\n\"accelerationY\",\n\"accelerationZ\",\n\"pAccelerationX\",\n\"pAccelerationY\",\n\"pAccelerationZ\",\n\"rotationX\",\n\"rotationY\",\n\"rotationZ\",\n\"pRotationX\",\n\"pRotationY\",\n\"pRotationZ\",\n\"turnAxis\",\n\"keyIsPressed\",\n\"key\",\n\"keyCode\",\n\"movedX\",\n\"movedY\",\n\"mouseX\",\n\"mouseY\",\n\"pmouseX\",\n\"pmouseY\",\n\"winMouseX\",\n\"winMouseY\",\n\"pwinMouseX\",\n\"pwinMouseY\",\n\"mouseButton\",\n\"mouseIsPressed\",\n\"DEGREES\",\n\"RADIANS\",\n\"CORNER\",\n\"CORNERS\",\n\"CENTER\",\n\"RADIUS\",\n\"exitPointerLock()\",\n\"angleMode(mode)\",\n\"touches\",\n\"touchStarted(fxn)\",\n\"touchMoved(fxn)\",\n\"touchEnded(fxn)\",\n\"saveCanvas(selectedCanvas, [filename], [extension])\",\n\"saveCanvas([filename], [extension])\",\n\"saveFrames(filename, extension, duration, framerate, [callback])\",\n\"pixels\",\n\"loadJSON(path, [jsonpOptions], [datatype], [callback], [errorCallback])\",\n\"loadJSON(path, datatype, [callback], [errorCallback])\",\n\"loadJSON(path, callback, [errorCallback])\",\n\"httpGet(path, [datatype], [data], [callback], [errorCallback])\",\n\"httpGet(path, data, [callback], [errorCallback])\",\n\"httpGet(path, callback, [errorCallback])\",\n\"httpPost(path, [datatype], [data], [callback], [errorCallback])\",\n\"httpPost(path, data, [callback], [errorCallback])\",\n\"httpPost(path, callback, [errorCallback])\",\n\"httpDo(path, [method], [datatype], [data], [callback], [errorCallback])\",\n\"httpDo(path, options, [callback], [errorCallback])\",\n\"saveJSON(json, filename, [optimize])\",\n\"createVector([x], [y], [z])\",\n\"textStyle(theStyle)\",\n\"orbitControl([sensitivityX], [sensitivityY], [sensitivityZ])\",\n\"debugMode()\",\n\"debugMode(mode)\",\n\"debugMode(mode, [gridSize], [gridDivisions], [xOff], [yOff], [zOff])\",\n\"debugMode(mode, [axesSize], [xOff], [yOff], [zOff])\",\n\"debugMode([gridSize], [gridDivisions], [gridXOff], [gridYOff], [gridZOff], [axesSize], [axesXOff], [axesYOff], [axesZOff])\",\n\"noDebugMode()\",\n\"specularColor(v1, v2, v3)\",\n\"specularColor(value)\",\n\"specularColor(gray)\",\n\"specularColor(values)\",\n\"specularColor(color)\",\n\"createShader(vertSrc, fragSrc)\",\n\"normalMaterial()\",\n\"ambientMaterial(v1, [v2], [v3], [a])\",\n\"ambientMaterial(color)\",\n\"emissiveMaterial(v1, [v2], [v3], [a])\",\n\"emissiveMaterial(color)\",\n\"specularMaterial(v1, [v2], [v3], [a])\",\n\"specularMaterial(color)\",\n\"createCamera()\",\n\"setCamera(cam)\"\n];\n\nexport default function DefaultExportPlaceholder() {\n  return null;\n}\n","module.exports = __webpack_public_path__ + \"static/media/code.d7ef8adb.svg\";","module.exports = __webpack_public_path__ + \"static/media/grid.0ed55763.svg\";","module.exports = __webpack_public_path__ + \"static/media/git-commit.00746f95.svg\";","module.exports = __webpack_public_path__ + \"static/media/message-circle.ebbe6d9a.svg\";","module.exports = __webpack_public_path__ + \"static/media/layout.8a437d55.svg\";","module.exports = __webpack_public_path__ + \"static/media/layers-light.76db5efc.svg\";","module.exports = __webpack_public_path__ + \"static/media/trash.e6887622.svg\";","module.exports = __webpack_public_path__ + \"static/media/copy.745449c2.svg\";","module.exports = __webpack_public_path__ + \"static/media/rotate-ccw.7260812b.svg\";","module.exports = __webpack_public_path__ + \"static/media/type.3950b751.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-up.90f47098.svg\";","module.exports = __webpack_public_path__ + \"static/media/check-square.75b12164.svg\";","module.exports = __webpack_public_path__ + \"static/media/square.e3aa28b6.svg\";","module.exports = __webpack_public_path__ + \"static/media/eye.62517b9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/eye-off.c68b9e9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/empty.43d9eb10.svg\";","import \"./App.scss\";\nimport $ from \"jquery\";\nimport React, { Component, useState } from \"react\";\nimport { saveAs } from \"file-saver\";\nimport parser from \"./parser.js\";\nimport LZUTF8 from \"lzutf8\";\nimport JSZip from \"jszip\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\nimport PublishModal from \"./PublishModal.js\";\n\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport BlobStampIcon from \"./icons/code.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport pf1, {\n  normalFn,\n  commentBlob,\n  varBlob,\n  listenerFns,\n  builtInFns,\n  worlds,\n  starter,\n  empty,\n  stamperHeader\n} from \"./starterStamps.js\";\nvar GitHub = require(\"github-api\");\nconst { detect } = require(\"detect-browser\");\nvar deepEqual = require(\"deep-equal\");\nconst browser = detect();\nvar mime = require(\"mime-types\");\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ModalManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalButtons: [],\n      modalVisible: !ipc && browser && browser.name != \"chrome\",\n      modalHeader: \"Use Chrome please!\",\n      modalContent:\n        \"Right now, the web version of Stamper is only supported in Google Chrome.\",\n      saveInterval: null,\n      cdnLibs: false,\n      askedAboutCdn: false,\n      inputElem: null,\n      miniInputElem: null,\n      publishInfoVisible: false,\n      onlineWorldDict: null,\n      lastWorldCheck: -1,\n      publishModal: null\n      // can be unsubmitted, success, failure, loading\n    };\n    this.protectAgainstClosed = this.protectAgainstClosed.bind(this);\n    this.receiveMessage = this.receiveMessage.bind(this);\n    this.domain = \"https://p5stamper.com\";\n    this.oauthToken = \"65c5d1e11f91a9e1e565f0c2ca8248e9fc1d587c\";\n    this.githubUsername = \"p5stamper\";\n    this.receiveFiles = this.receiveFiles.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n    this.hidePublishInfoModal = this.hidePublishInfoModal.bind(this);\n    this.sendSaveData = this.sendSaveData.bind(this);\n    this.libs = {\n      \"p5.js\": \"https://cdn.jsdelivr.net/npm/p5\",\n      \"p5.min.js\": \"https://cdn.jsdelivr.net/npm/p5\",\n      \"p5.dom.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.js\",\n      \"p5.dom.min.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js\",\n      \"p5.sound.js\":\n        \"p5.sound.jshttps://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.js\",\n      \"p5.sound.min.js\":\n        \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js\",\n      \"p5.accessibility.js\":\n        \"https://cdn.jsdelivr.net/gh/processing/p5.accessibility@0.2.0/dist/p5.accessibility.js\",\n      \"p5.accessibility.min.js\":\n        \"https://cdn.jsdelivr.net/gh/processing/p5.accessibility@0.2.0/dist/p5.accessibility.js\"\n    };\n  }\n\n  getUrlWorldKey() {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    return urlParams.get(\"e\");\n  }\n\n  loadInitialStamperObject() {\n    if (ipc) {\n      this.props.loadStamperObject(starter);\n      return;\n    } else {\n      var urlWorldKey = this.getUrlWorldKey();\n\n      if (urlWorldKey) {\n        try {\n          this.getWorldObject(urlWorldKey, true, stamperObject => {\n            if (stamperObject) {\n              this.props.loadStamperObject(stamperObject);\n            } else {\n              this.loadStoredStamperObject();\n            }\n          });\n          return;\n        } catch (error) {\n          this.loadStoredStamperObject();\n          return;\n        }\n      }\n    }\n\n    this.loadStoredStamperObject();\n  }\n\n  loadStoredStamperObject() {\n    var stored = localStorage.getItem(\"storedStamper\");\n\n    if (stored === null) {\n      this.props.loadStamperObject(starter);\n      return;\n    }\n\n    try {\n      var stamperObject = JSON.parse(\n        LZUTF8.decompress(stored, {\n          inputEncoding: \"StorageBinaryString\"\n        })\n      );\n      this.props.loadStamperObject(stamperObject);\n      return;\n    } catch (error) {\n      this.props.loadStamperObject(starter);\n      return;\n    }\n  }\n\n  receiveMessage(e) {\n    if (e.data.type != \"edited\") {\n      return;\n    }\n    this.props.setWorldData({ worldEdited: true });\n\n    ipc && ipc.send(\"edited\");\n  }\n\n  requestOnlineWorldCheck() {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    var date = new Date();\n\n    repo.listCommits({}, (error, result, request) => {\n      if (error) {\n        window.postMessage({ type: \"worlds\" }, \"*\");\n        this.setState({ lastWorldCheck: date.getTime() });\n        return;\n      }\n\n      this.getWorldPublishTime(\"\", time => {\n        if (time >= this.state.lastWorldCheck) {\n          console.log(\"UPDATING WORLDS\");\n          window.postMessage({ type: \"worlds\" }, \"*\");\n        }\n        this.setState({ lastWorldCheck: date.getTime() });\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.requestOnlineWorldCheck();\n\n    window.addEventListener(\"message\", this.receiveMessage);\n\n    this.loadInitialStamperObject();\n    let saveInterval = setInterval(this.sendSaveData.bind(this), 180000);\n    this.setState({ saveInterval: saveInterval });\n    // ipc &&\n    //   ipc.on(\"requestUpload\", event => {\n    //     this.requestUpload();\n    //     var buttons = [];\n    //     buttons.push({\n    //       text: \"open\",\n    //       color: \"outline-primary\",\n    //       callback: () => {\n    //         this.requestUpload();\n    //       }\n    //     });\n\n    //     this.setState({\n    //       modalVisible: true,\n    //       modalHeader: \"Please select a p5.js sketch folder.\",\n    //       modalContent:\n    //         \"It must have an index.html and sketch.js in the root. It doesn't need to have been created in Stamper.\",\n    //       modalButtons: buttons\n    //     });\n    //   });\n\n    ipc &&\n      ipc.on(\"openDirectory\", (event, data) => {\n        var fileObjs = [];\n        data.rawFileList.map(fileInfo => {\n          var mimeType = mime.lookup(fileInfo.name);\n          var fileObj = new File([fileInfo.buffer], fileInfo.name, {\n            type: mimeType\n          });\n          fileObjs.push(fileObj);\n        });\n        console.log(fileObjs);\n        this.checkAndOpenFiles(fileObjs);\n      });\n    ipc &&\n      ipc.on(\"exteriorChanges\", event => {\n        var buttons = [];\n\n        buttons.push({\n          text: \"re-open sketch\",\n          color: \"outline-primary\",\n          callback: () => {\n            this.requestUpload();\n          }\n        });\n\n        this.setState({\n          modalVisible: true,\n          modalHeader:\n            \"The directory that your sketch was saved in has changed.\",\n          modalContent:\n            \"Please re-specify where you want your sketch to be saved.\",\n          modalButtons: buttons\n        });\n      });\n\n    ipc &&\n      ipc.on(\"requestSave\", (event, rawCode) => {\n        this.sendSaveData();\n      });\n\n    ipc &&\n      ipc.on(\"resetView\", (event, data) => {\n        if (data.worldKey) {\n          this.getWorldObject(\n            data.worldKey,\n            true,\n            stamperObject =>\n              stamperObject && this.props.loadStamperObject(stamperObject)\n          );\n        } else {\n          this.props.loadStamperObject(starter);\n        }\n      });\n\n    ipc &&\n      ipc.on(\"getWorlds\", (event, data) => {\n        this.getWorldNamesAndKeys(\n          allWorlds => ipc && ipc.send(\"sendWorlds\", allWorlds)\n        );\n      });\n\n    this.createInputElement();\n\n    // window.addEventListener(\"beforeunload\", function (e){\n    //   this.sendSaveData()\n    //   localStorage.setItem(\"e\", JSON.stringify(e))\n    // });\n\n    //     window.addEventListener('beforeunload', function (e) {\n    //   // Cancel the event\n    //   // this.sendSaveData()\n    //   // if(this.props.getWorldData().worldEdited){\n    //   e.preventDefault();\n    //   // Chrome requires returnValue to be set\n    //   e.returnValue = '';\n    //   // }\n\n    // });\n\n    // window.onbeforeunload = null;\n\n    window.addEventListener(\"beforeunload\", this.sendSaveData);\n\n    // window.onbeforeunload = confirmExit;\n    // function confirmExit() {\n    //     return \"You have attempted to leave this page. Are you sure?\";\n    // }\n  }\n\n  protectAgainstClosed(e) {\n    console.log(\"PROTECTING\");\n    //     console.log(e)\n    // e.preventDefault()\n\n    //     var zip = new JSZip();\n    //  zip.file(\"file\", JSON.stringify(e), { base64: true });\n\n    //     zip.generateAsync({ type: \"blob\" }).then(function(content) {\n    //       saveAs(content, \"stamper_sketch.zip\");\n    //     });\n\n    var message = \"You have not filled out the form yet\";\n    e.returnValue = message;\n\n    return \"You have not filled out the form yet\";\n  }\n\n  getWorldNamesAndKeys(callback = () => null) {\n    var allWorlds = [];\n    worlds.map(item => allWorlds.push({ key: item.name, name: item.name }));\n\n    this.getOnlineWorlds(onlineWorlds => {\n      if (onlineWorlds.length > 0) {\n        allWorlds.push({});\n      }\n\n      allWorlds = allWorlds.concat(onlineWorlds);\n      callback(allWorlds);\n    });\n  }\n\n  deleteInputElement() {\n    this.state.inputElem.removeEventListener(\"change\", this.receiveFiles);\n    document.getElementById(\"root\").removeChild(this.state.inputElem);\n  }\n\n  createInputElement() {\n    var inputElem = document.createElement(\"input\", {\n      id: \"sketchInput\",\n      type: \"file\",\n      webkitdirectory: \"true\",\n      multiple: \"true\"\n    });\n    var idAttr = document.createAttribute(\"id\");\n    idAttr.value = \"sketchInput\";\n    inputElem.setAttributeNode(idAttr);\n\n    var typeAttr = document.createAttribute(\"type\");\n    typeAttr.value = \"file\";\n    inputElem.setAttributeNode(typeAttr);\n\n    var multipleAttr = document.createAttribute(\"multiple\");\n    multipleAttr.value = \"true\";\n    inputElem.setAttributeNode(multipleAttr);\n\n    var directoryAttr = document.createAttribute(\"webkitdirectory\");\n    directoryAttr.value = \"true\";\n    inputElem.setAttributeNode(directoryAttr);\n\n    var styleAttr = document.createAttribute(\"hidden\");\n    styleAttr.value = \"true\";\n    inputElem.setAttributeNode(styleAttr);\n\n    inputElem.addEventListener(\"change\", this.receiveFiles);\n\n    document.getElementById(\"root\").appendChild(inputElem);\n\n    this.setState({ inputElem: inputElem });\n  }\n\n  createMiniImputElem(fileType, callback) {\n    if (fileType === \"text\") {\n      var accept = \"text/*\";\n    } else {\n      var accept = \"\";\n    }\n\n    var miniInputElem = (\n      <input\n        type=\"file\"\n        hidden={true}\n        id=\"miniInput\"\n        accept={accept}\n        multiple\n        onChange={e => this.uploadMini(e, fileType)}\n      />\n    );\n\n    this.setState({ miniInputElem: null }, () =>\n      this.setState({ miniInputElem: miniInputElem }, () => callback())\n    );\n  }\n\n  componentWillUnmout() {\n    window.removeEventListener(\"message\", this.receiveMessage);\n    window.removeEventListener(\"beforeunload\", this.sendSaveData);\n    this.state.inputElem.removeEventListener(\"change\", this.receiveFiles);\n    clearInterval(this.state.saveInterval);\n    this.setState({ saveInterval: null });\n  }\n\n  requestFileUpload(type) {\n    this.createMiniImputElem(type, () =>\n      document.getElementById(\"miniInput\").click()\n    );\n  }\n\n  requestUpload() {\n    document\n      .getElementById(\"sketchInput\")\n      .dispatchEvent(new MouseEvent(\"click\"));\n    document.body.onfocus = () => {\n      document.body.onfocus = null;\n      this.hideModal();\n    };\n  }\n\n  readFile(file, fileDict, callback) {\n    var reader = new FileReader();\n    if (file.webkitRelativePath != \"\") {\n      var nameArr = file.webkitRelativePath.split(\"/\");\n      var fileName = \"\";\n      if (nameArr.length > 0) {\n        fileName = nameArr.slice(1, nameArr.length).join(\"/\");\n      }\n    } else {\n      fileName = file.name;\n    }\n\n    if (this.state.cdnLibs && file.name in this.libs) {\n      fileDict[fileName] = {};\n      return;\n    }\n\n    if (file.type.startsWith(\"text\") || file.type.startsWith(\"application\")) {\n      var fileType = \"text\";\n    } else {\n      var fileType = \"media\";\n    }\n\n    reader.onload = function(e) {\n      console.log(e.target.result);\n      fileDict[fileName] = {\n        content: e.target.result,\n        type: fileType,\n        path: file.path\n      };\n      callback();\n    };\n\n    try {\n      if (fileType === \"text\") {\n        reader.readAsText(file);\n      } else {\n        reader.readAsDataURL(file);\n      }\n    } catch {\n      fileDict[fileName] = {};\n      this.setState({\n        modalVisible: true,\n        modalHeader:\n          \"Oh no! It looks like we had trouble reading one of your files.\",\n        modalContent:\n          \"Check that your index.html, sketch.js, and style.css are properly configured.\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n    }\n  }\n\n  uploadMini(e, fileType) {\n    var files = Object.assign([], e.target.files);\n\n    files.map(file => {\n      var reader = new FileReader();\n\n      var callback = imgData =>\n        this.props.addStamp(imgData, id => {\n          this.props.requestCompile(id);\n          window.postMessage({ type: \"edited\" }, \"*\");\n        });\n\n      reader.onload = e => {\n        var data = {\n          code: e.target.result,\n          name: file.name,\n          isMediaFile: fileType != \"text\",\n          isTxtFile: fileType === \"text\"\n        };\n        callback(data);\n      };\n\n      reader.onload.bind(this);\n\n      if (file.type.startsWith(\"text\")) {\n        if (!fileType) {\n          this.setState({\n            modalVisible: true,\n            modalHeader: `${file.name} failed to upload.`,\n            modalContent: \"You can't upload text files as a media asset\",\n            modalButtons: [\n              {\n                text: \"ok\",\n                color: \"outline-secondary\",\n                callback: this.hideModal\n              }\n            ]\n          });\n        } else {\n          reader.readAsText(file);\n        }\n      } else {\n        reader.readAsDataURL(file);\n      }\n    });\n  }\n\n  readFiles(files) {\n    var fileDict = {};\n    var callback = () => {\n      if (Object.keys(fileDict).length === files.length) {\n        this.stampifyFiles(fileDict);\n      }\n    };\n    for (var i = 0; i < files.length; i++) {\n      this.readFile(files[i], fileDict, () => callback());\n    }\n\n    if (files.length === 0) {\n      callback();\n    }\n  }\n\n  receiveFiles(e) {\n    this.checkAndOpenFiles(e.target.files);\n  }\n  checkAndOpenFiles(initialFiles) {\n    var askedAboutCdn = false;\n    this.setState({ askedAboutCdn: askedAboutCdn });\n\n    var files = [];\n    var containsLib = false;\n    for (var i = 0; i < initialFiles.length; i++) {\n      var usingName = initialFiles[i].name.split(\"/\").pop();\n      if (usingName in this.libs) {\n        containsLib = true;\n      }\n      if (usingName.startsWith(\".\") === false) {\n        files.push(initialFiles[i]);\n      }\n    }\n\n    console.log(files);\n    this.deleteInputElement();\n    this.createInputElement();\n\n    if (containsLib && askedAboutCdn === false) {\n      var buttons = [];\n      buttons.push({\n        text: \"no\",\n        color: \"outline-secondary\",\n        callback: () => {\n          this.setState({ cdnLibs: false }, () => this.readFiles(files));\n          this.hideModal();\n        }\n      });\n      buttons.push({\n        text: \"yes\",\n        color: \"outline-primary\",\n        callback: () => {\n          this.setState({ cdnLibs: true }, () => this.readFiles(files));\n          this.hideModal();\n        }\n      });\n\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"Would you like to import p5's core libraries via CDN?\",\n        modalContent:\n          \"The libraries are currently stored in large files in your sketch. This may cause Stamper to run slowly. Importing them via CDN won't cause them to behave differently but will speed up Stamper.\",\n        modalButtons: buttons\n      });\n    } else {\n      this.readFiles(files);\n    }\n  }\n\n  loadWithOverwriteProtection(newWorldStamper) {\n    var buttons = [];\n    buttons.push({\n      text: \"cancel\",\n      color: \"outline-secondary\",\n      callback: this.hideModal\n    });\n    buttons.push({\n      text: \"yes\",\n      color: \"outline-primary\",\n      callback: () => {\n        this.props.loadStamperObject(newWorldStamper);\n        this.hideModal();\n        this.props.setWorldData({ worldEdited: false });\n      }\n    });\n    if (!ipc) {\n      buttons.push({\n        text: \"yes, but download my current sketch first\",\n        color: \"outline-primary\",\n        callback: () => {\n          this.requestDownload();\n          this.props.loadStamperObject(newWorldStamper);\n          this.hideModal();\n          this.props.setWorldData({ worldEdited: false });\n        }\n      });\n    }\n\n    if (!this.props.getWorldData().worldEdited) {\n      this.props.loadStamperObject(newWorldStamper);\n      this.props.setWorldData({ worldEdited: false });\n    } else {\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"This will overwrite your current work\",\n        modalContent: \"Would you like to load the example anyways?\",\n        modalButtons: buttons\n      });\n    }\n  }\n\n  sendSaveData() {\n    console.log(\"SAVING\");\n    this.requestOnlineWorldCheck();\n    var stamperObject = this.props.getStamperObject();\n    var compressedStamperObj = LZUTF8.compress(JSON.stringify(stamperObject), {\n      outputEncoding: \"StorageBinaryString\"\n    });\n\n    !ipc && localStorage.setItem(\"storedStamper\", compressedStamperObj);\n\n    ipc && ipc.send(\"save\", this.props.getFileDict());\n  }\n\n  requestDownload() {\n    var fileDict = this.props.getFileDict();\n\n    var zip = new JSZip();\n    Object.keys(fileDict).map(name => {\n      if (fileDict[name].type === \"media\") {\n        var uri = fileDict[name].content;\n\n        var idx = uri.indexOf(\"base64,\") + \"base64,\".length;\n        var content = uri.substring(idx);\n\n        zip.file(name, content, { base64: true });\n      } else {\n        zip.file(name, fileDict[name].content);\n      }\n    });\n\n    zip.generateAsync({ type: \"blob\" }).then(function(content) {\n      saveAs(content, \"stamper_sketch.zip\");\n    });\n  }\n\n  updateStamperObject(js, stamperObject) {\n    if (stamperObject === undefined) {\n      var oldJs = undefined;\n    } else {\n      var oldJs = stamperObject.js;\n    }\n\n    if (oldJs === js) {\n      return stamperObject;\n    }\n\n    try {\n      var newStamperObject = parser.jsToStamps(js);\n      newStamperObject.js = js;\n    } catch (e) {\n      throw \"Syntax error in Javascript\";\n    }\n\n    newStamperObject.console = { hidden: true };\n    newStamperObject.scale = 0.7;\n    newStamperObject.originX = 0;\n    newStamperObject.originY = 0;\n    newStamperObject.imgs = [];\n\n    return newStamperObject;\n  }\n\n  replaceFilesWithCDN(indexContent) {\n    Object.keys(this.libs).map(libName => {\n      indexContent = indexContent\n        .replace(`\"${libName}\"`, `\"${this.libs[libName]}\"`)\n        .replace(`'${libName}'`, `'${this.libs[libName]}'`)\n        .replace(\"`\" + libName + \"`\", \"`\" + this.libs[libName] + \"`\");\n    });\n\n    return indexContent;\n  }\n\n  stampifyFiles(fileDict, path) {\n    if (\n      \"index.html\" in fileDict === false ||\n      \"sketch.js\" in fileDict === false\n    ) {\n      this.setState({\n        modalVisible: true,\n        modalHeader: \"Oh no! It looks like you're missing some files.\",\n        modalContent:\n          \"Stamper sketchs must have an 'index.html' file and a 'sketch.js' file.\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n      return;\n    }\n\n    if (this.state.cdnLibs) {\n      fileDict[\"index.html\"].content = this.replaceFilesWithCDN(\n        fileDict[\"index.html\"].content\n      );\n    }\n\n    var stamperObject = undefined;\n    if (\"stamper.js\" in fileDict) {\n      var stamperFileContent = fileDict[\"stamper.js\"].content;\n      stamperObject = JSON.parse(\n        stamperFileContent.substring(\n          stamperFileContent.indexOf(\"{\"),\n          stamperFileContent.length\n        )\n      );\n    }\n\n    try {\n      stamperObject = this.updateStamperObject(\n        fileDict[\"sketch.js\"].content,\n        stamperObject\n      );\n    } catch (e) {\n      this.setState({\n        modalVisible: true,\n        modalHeader:\n          \"Oh no! It looks like your sketch file has a few syntax errors.\",\n        modalContent:\n          \"We can't parse javascript with syntax errors into Stamper land :(\",\n        modalButtons: [\n          { text: \"ok\", color: \"outline-secondary\", callback: this.hideModal }\n        ]\n      });\n      return;\n    }\n\n    var fnData = [];\n\n    stamperObject.stamps.map(singleFnData => {\n      if (this.state.cdnLibs && singleFnData.name in this.libs) {\n        // pass\n      } else if (\n        !singleFnData.isTxtFile &&\n        !singleFnData.isMediaFile &&\n        !singleFnData.isIndex\n      ) {\n        fnData.push(singleFnData);\n      } else if (singleFnData.name in fileDict) {\n        singleFnData.code = fileDict[singleFnData.name].content;\n        fileDict[singleFnData.name].transferred = true;\n        fnData.push(singleFnData);\n      }\n    });\n\n    Object.keys(fileDict).map(name => {\n      if (this.state.cdnLibs && name in this.libs) {\n        // pass\n      } else if (\n        name === \"sketch.js\" ||\n        name === \"stamper.js\" ||\n        fileDict[name].transferred ||\n        Object.keys(fileDict[name]) === 0\n      ) {\n        // pass\n      } else if (name === \"index.html\") {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isIndex: true,\n          hidden: true\n        });\n      } else if (fileDict[name].type === \"media\") {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isMediaFile: true,\n          hidden: true\n        });\n      } else {\n        fnData.push({\n          name: name,\n          args: \" \",\n          code: fileDict[name].content,\n          isTxtFile: true,\n          hidden: true\n        });\n      }\n    });\n\n    stamperObject.stamps = fnData;\n    this.props.loadStamperObject(stamperObject);\n    ipc &&\n      ipc.send(\"updatePath\", {\n        fileDict: fileDict\n      });\n  }\n\n  worldKeyToUrl(key) {\n    return this.domain + \"/?e=\" + key;\n  }\n\n  worldKeyToFileName(key) {\n    return key + \".json\";\n  }\n\n  worldFileNameToKey(fileName) {\n    if (!fileName) {\n      return \"\";\n    }\n    if (fileName.endsWith(\".json\")) {\n      return fileName.substring(0, fileName.length - \".json\".length);\n    } else {\n      throw \"improperly configured filename\";\n    }\n  }\n\n  worldKeyToNameAuthor(key) {\n    if (!key) {\n      return { name: \"\", author: \"\" };\n    }\n    var keyArr = key\n      .split(\"_\")\n      .join(\" \")\n      .split(\"~\");\n\n    if (keyArr.length === 2) {\n      return { name: keyArr[0], author: keyArr[1] };\n    } else if (keyArr.length === 1) {\n      return { name: keyArr[0] };\n    } else {\n      throw \"improperly configured key\";\n    }\n  }\n\n  worldNameAuthorToKey(name, author) {\n    var key = name + \"~\" + author;\n\n    return key.split(\" \").join(\"_\");\n  }\n\n  hideModal() {\n    this.setState({ modalVisible: false });\n  }\n\n  requestPublish() {\n    var worldData = this.props.getWorldData();\n    var localWorldAuthor = localStorage.getItem(\"localWorldAuthor\");\n\n    var publishModalName = \"\";\n    if (worldData.worldKey) {\n      publishModalName = this.worldKeyToNameAuthor(worldData.worldKey).name;\n    }\n\n    var publishModalAuthor = \"\";\n    if (localWorldAuthor) {\n      publishModalAuthor = localWorldAuthor;\n    }\n\n    var publishModal = (\n      <PublishModal\n        publishModalName={publishModalName}\n        publishModalAuthor={publishModalAuthor}\n        checkPublishWorldName={this.checkPublishWorldName.bind(this)}\n        renderLinkForm={this.renderLinkForm.bind(this)}\n        publishWorld={this.publishWorld.bind(this)}\n        hidePublishModal={this.hidePublishModal.bind(this)}\n      />\n    );\n\n    this.setState({ publishModal: publishModal });\n  }\n\n  requestPublishInfo() {\n    this.setState({ publishInfoVisible: true });\n  }\n\n  checkPublishWorldName(name, author) {\n    var key = this.worldNameAuthorToKey(name, author);\n\n    return key in this.state.onlineWorldDict;\n  }\n\n  publishWorld(name, author, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n\n    var publishDate = new Date();\n\n    var key = this.worldNameAuthorToKey(name, author);\n    var fileName = this.worldKeyToFileName(key);\n    this.props.setWorldData(\n      { worldKey: key, worldPublishTime: publishDate.toString() },\n      () => {\n        repo.writeFile(\n          \"master\",\n          fileName,\n          JSON.stringify(this.props.getStamperObject()),\n          \"commited new world\",\n          {},\n          (error, result, request) => {\n            if (error) {\n              console.log(error);\n\n              callback(error);\n              return;\n            }\n            localStorage.setItem(\"localWorldAuthor\", author);\n            window.history.pushState({}, null, this.worldKeyToUrl(key));\n\n            // window.location.search = $.param({ e: key });\n            callback();\n          }\n        );\n      }\n    );\n  }\n\n  getOnlineWorlds(callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    repo.getContents(\"master\", \"\", false, (error, result, request) => {\n      var onlineWorldTimeArr = [];\n      var onlineWorldTimeDict = {};\n\n      var timeCallback = (time, fileName) => {\n        var key = this.worldFileNameToKey(fileName);\n        onlineWorldTimeArr.push(time);\n        onlineWorldTimeDict[time] = key;\n        if (onlineWorldTimeArr.length === result.length) {\n          onlineWorldTimeArr.sort().reverse();\n          var onlineWorlds = [];\n          var onlineWorldDict = {};\n          onlineWorldTimeArr.map(time => {\n            if (time >= 0 && time in onlineWorldTimeDict) {\n              var key = onlineWorldTimeDict[time];\n              var name =\n                this.worldKeyToNameAuthor(key).name +\n                \" by \" +\n                this.worldKeyToNameAuthor(key).author;\n              onlineWorlds.push({ name: name, key: key });\n              onlineWorldDict[key] = \"\";\n            }\n          });\n          this.setState({ onlineWorldDict: onlineWorldDict }, () =>\n            callback(onlineWorlds)\n          );\n        }\n      };\n\n      if (result.length === 0) {\n        this.setState({ onlineWorldDict: {} }, () => callback([]));\n      }\n      result.map(item => {\n        this.getWorldPublishTime(item.name, time =>\n          timeCallback(time, item.name)\n        );\n      });\n    });\n  }\n\n  getWorldObject(key, modalizeErrors, callback) {\n    console.log(\"GETTING WORLD OBJECT\");\n    if (!key) {\n      callback(undefined);\n    }\n\n    for (var i = 0; i < worlds.length; i++) {\n      if (key === worlds[i].name) {\n        callback(worlds[i].data);\n        return;\n      }\n    }\n    this.getOnlineWorldObject(key, modalizeErrors, callback);\n  }\n\n  getWorldPublishTime(fileName, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n    repo.listCommits({ path: fileName }, (error, result, request) => {\n      if (error) {\n        callback(-1, fileName);\n      } else if (result.length === 0) {\n        callback(-1, fileName);\n      } else {\n        var dateString = result[0].commit.committer.date;\n        var dateObj = new Date(dateString);\n        var timeNum = dateObj.getTime();\n        callback(timeNum);\n      }\n    });\n  }\n\n  getOnlineWorldObject(key, modalizeErrors, callback) {\n    var gh = new GitHub({ token: this.oauthToken });\n    var repo = gh.getRepo(\"p5stamper\", \"worlds\");\n\n    repo.getContents(\n      \"master\",\n      this.worldKeyToFileName(key),\n      false,\n      (error, result, request) => {\n        if (error) {\n          modalizeErrors &&\n            this.setState({\n              modalVisible: true,\n              modalHeader: `Oh no! It looks like '${\n                this.worldKeyToNameAuthor(key).name\n              } by ${\n                this.worldKeyToNameAuthor(key).author\n              }' doesn't exist in our example list yet.`,\n              modalContent:\n                \"Our server may not be fully updated, try again in a few minutes.\",\n              modalButtons: [\n                {\n                  text: \"ok\",\n                  color: \"outline-secondary\",\n                  callback: this.hideModal\n                }\n              ]\n            });\n          callback(undefined);\n          return;\n        }\n\n        var bufContent = new Buffer(result.content, \"base64\");\n        var stringContent = new TextDecoder(\"utf-8\").decode(bufContent);\n        try {\n          callback(JSON.parse(stringContent));\n        } catch (error) {\n          console.log(error);\n\n          modalizeErrors &&\n            this.setState({\n              modalVisible: true,\n              modalHeader: `Oh no! It looks like there were issues loading '${\n                this.worldKeyToNameAuthor(key).name\n              }'.`,\n              modalContent: \"The example may be corrupted.\",\n              modalButtons: [\n                {\n                  text: \"ok\",\n                  color: \"outline-secondary\",\n                  callback: this.hideModal\n                }\n              ]\n            });\n        }\n      }\n    );\n  }\n\n  hidePublishModal() {\n    this.setState({ publishModal: null });\n  }\n\n  hidePublishInfoModal() {\n    this.setState({ publishInfoVisible: false });\n  }\n\n  renderLinkForm() {\n    return (\n      <input\n        class=\"picker picker form-control form-control-sm mt-1 mb-1\"\n        value={this.worldKeyToUrl(this.props.getWorldData().worldKey)}\n      />\n    );\n  }\n\n  renderPublishInfoModal() {\n    var worldData = this.props.getWorldData();\n\n    var title = \"You aren't working in a published sketch.\";\n\n    if (worldData.worldKey) {\n      var nameAuthorDict = this.worldKeyToNameAuthor(worldData.worldKey);\n      if (nameAuthorDict.author) {\n        title = `${nameAuthorDict.name} by ${nameAuthorDict.author}`;\n      } else {\n        title = `${nameAuthorDict.name}`;\n      }\n    }\n\n    return (\n      <Modal\n        show={this.state.publishInfoVisible}\n        style={{ zIndex: 2000000000000000001 }}\n        centered\n        onHide={this.hidePublishInfoModal}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className=\"name\">{title}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div>\n            <div hidden={!worldData.worldKey}>\n              {this.renderLinkForm()}\n              <div\n                class=\"ml-1 picker text-greyText\"\n                hidden={!worldData.worldPublishTime}\n              >\n                {\"published \" + worldData.worldPublishTime}\n              </div>\n              <div\n                class=\"ml-1 picker text-primary\"\n                hidden={!this.props.getWorldData().worldEdited}\n              >\n                {\n                  \"the sketch you have now is an edited version of what's published\"\n                }\n              </div>\n            </div>\n            <div hidden={worldData.worldKey} class=\"picker\">\n              {\"Publish this sketch to see it's published info\"}\n            </div>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant={\"outline-secondary\"}\n            size=\"sm\"\n            onClick={this.hidePublishInfoModal}\n          >\n            {\"ok\"}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  render() {\n    var buttonElems = this.state.modalButtons.map(btnData => (\n      <Button variant={btnData.color} size=\"sm\" onClick={btnData.callback}>\n        {btnData.text}\n      </Button>\n    ));\n    return (\n      <div>\n        {this.state.miniInputElem}\n        <Modal\n          show={this.state.modalVisible}\n          style={{ zIndex: 2000000000000000001 }}\n          centered\n          onHide={this.hideModal}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title className=\"name\">{this.state.modalHeader}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body className=\"picker\">{this.state.modalContent} </Modal.Body>\n          <Modal.Footer hidden={buttonElems.length === 0}>\n            {buttonElems}\n          </Modal.Footer>\n        </Modal>\n\n        {this.state.publishModal}\n        {this.renderPublishInfoModal()}\n      </div>\n    );\n  }\n}\n","import \"./App.scss\";\nimport $ from \"jquery\";\nimport React, { Component, useState } from \"react\";\nimport { saveAs } from \"file-saver\";\nimport parser from \"./parser.js\";\nimport LZUTF8 from \"lzutf8\";\nimport JSZip from \"jszip\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\n\nimport FunctionStampIcon from \"./icons/box.svg\";\nimport BuiltInStampIcon from \"./icons/tool.svg\";\nimport ListenerStampIcon from \"./icons/bell.svg\";\nimport BlobStampIcon from \"./icons/code.svg\";\nimport ExpandMoreIcon from \"./icons/chevron-down.svg\";\nimport DownloadIcon from \"./icons/download.svg\";\nimport UploadIcon from \"./icons/upload.svg\";\nimport WorldsIcon from \"./icons/archive.svg\";\nimport GlobalVarIcon from \"./icons/globe.svg\";\nimport CommentIcon from \"./icons/message-square.svg\";\nimport FileStampIcon from \"./icons/file.svg\";\nimport ImageStampIcon from \"./icons/image.svg\";\nimport InfoIcon from \"./icons/info.svg\";\nimport PermanentWorldIcon from \"./icons/star.svg\";\n\nimport pf1, {\n  normalFn,\n  commentBlob,\n  varBlob,\n  listenerFns,\n  builtInFns,\n  worlds,\n  starter,\n  empty,\n  stamperHeader\n} from \"./starterStamps.js\";\nvar GitHub = require(\"github-api\");\nconst { detect } = require(\"detect-browser\");\nvar deepEqual = require(\"deep-equal\");\nconst browser = detect();\n\nvar userAgent = navigator.userAgent.toLowerCase();\nif (userAgent.indexOf(\" electron/\") > -1) {\n  const electron = window.require(\"electron\");\n  var ipc = electron.ipcRenderer;\n} else {\n  var ipc = false;\n}\n\nexport default class ModalManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      publishVisible: true,\n      publishModalName: this.props.publishModalName,\n      publishModalAuthor: this.props.publishModalAuthor,\n      publishNameAuthorExists: false,\n      publishModalMode: \"unsubmitted\"\n      // can be unsubmitted, success, failure, loading\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      publishNameAuthorExists: this.props.checkPublishWorldName(\n        this.state.publishModalName,\n        this.state.publishModalAuthor\n      )\n    });\n  }\n\n  componentWillUnmout() {}\n\n  render() {\n    return (\n      <Modal\n        show={this.state.publishVisible}\n        style={{ zIndex: 2000000000000000001 }}\n        centered\n        onHide={this.props.hidePublishModal}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className=\"name\">{\"Publish current sketch\"}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div class=\"picker \">\n            {\n              \"This will add your sketch to the examples list and give you a link to share it with.\"\n            }\n            <div class=\"row picker p-2\">\n              <input\n                placeholder=\"name\"\n                class=\" m-1 form-control form-control-sm\"\n                style={{ width: 150 }}\n                value={this.state.publishModalName}\n                onChange={e => {\n                  this.setState(\n                    {\n                      publishModalName: e.target.value\n                        .split(\"_\")\n                        .join(\" \")\n                        .split(\"~\")\n                        .join(\" \"),\n\n                      publishModalMode: \"unsubmitted\"\n                    },\n                    () =>\n                      this.setState({\n                        publishNameAuthorExists: this.props.checkPublishWorldName(\n                          this.state.publishModalName,\n                          this.state.publishModalAuthor\n                        )\n                      })\n                  );\n                }}\n              />\n              <div class=\" picker m-2\">{\"by\"}</div>\n              <input\n                placeholder=\"author (you)\"\n                class=\" m-1 form-control form-control-sm\"\n                style={{ width: 150 }}\n                value={this.state.publishModalAuthor}\n                onChange={e => {\n                  this.setState(\n                    {\n                      publishModalAuthor: e.target.value\n                        .split(\"_\")\n                        .join(\" \")\n                        .split(\"~\")\n                        .join(\" \"),\n                      publishModalMode: \"unsubmitted\"\n                    },\n                    () =>\n                      this.setState({\n                        publishNameAuthorExists: this.props.checkPublishWorldName(\n                          this.state.publishModalName,\n                          this.state.publishModalAuthor\n                        )\n                      })\n                  );\n                }}\n              />\n            </div>\n            <div class=\"mt-2\">\n              <div\n                hidden={this.state.publishModalMode != \"loading\"}\n                class=\"picker text-greyText\"\n                style={{ fontStyle: \"italic\" }}\n              >\n                {\"loading...\"}\n              </div>\n              <div\n                hidden={this.state.publishModalMode != \"failure\"}\n                class=\"picker text-warningOrangeDark\"\n              >\n                {\n                  \"Oh no! There was an error publishing your sketch. If you recently published a sketch with the same name and author, we may still be processing it. Please try again in another minute or so.\"\n                }\n              </div>\n              <div\n                hidden={\n                  !this.state.publishNameAuthorExists ||\n                  this.state.publishModalMode !== \"unsubmitted\"\n                }\n                class=\"picker text-warningOrangeDark\"\n              >\n                {\n                  \"An example with this name and author already exists. If you publish, you'll overwrite that example (please don't do this if this isn't your example to overwrite).\"\n                }\n              </div>\n              <div hidden={this.state.publishModalMode != \"success\"}>\n                <div class=\"picker text-primary\">\n                  Congrats! Your sketch was successfully published (it will take\n                  several minutes for it to show up in the examples list).\n                  Access it at:\n                </div>\n                {this.props.renderLinkForm()}\n              </div>\n            </div>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant={\"outline-secondary\"}\n            size=\"sm\"\n            onClick={this.props.hidePublishModal}\n          >\n            {this.state.publishModalMode === \"unsubmitted\" ? \"cancel\" : \"done\"}\n          </Button>\n          <Button\n            disabled={\n              !this.state.publishModalName ||\n              !this.state.publishModalAuthor ||\n              this.state.publishModalLoading\n            }\n            variant={\"outline-primary\"}\n            size=\"sm\"\n            onClick={() => {\n              this.setState({ publishModalMode: \"loading\" });\n              this.props.publishWorld(\n                this.state.publishModalName,\n                this.state.publishModalAuthor,\n                error => {\n                  if (error) {\n                    this.setState({ publishModalMode: \"failure\" });\n                  } else {\n                    this.setState({ publishModalMode: \"success\" });\n                  }\n                }\n              );\n            }}\n          >\n            {\"publish\"}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n","var esprima = require(\"esprima\");\nvar _ = require(\"lodash\");\nconst log = require(\"electron-log\");\n\n\n\n\n// function printQ(q){\n//   var str = \"\"\n//   q.map(data => {\n//     if(data[0] === null){\n//       str +=  \"null\" + \",\"\n//     }else{\n//       str +=  data[0].toString() + \",\"\n//     }\n\n//   })\n// }\n\n//////////////////////////////////// jsToStamps\n\nfunction jsToStamps(rawCode) {\n  try{\n    var program = esprima.parseScript(rawCode, {\n      range: true,\n      comment: true,\n      tolerant: true,\n      loc: true\n    });\n  }catch(error){\n    console.log(error)\n    return null\n  }\n\n  var body = _.cloneDeep(program.body);\n\n  insertComments(body, program.comments);\n\n  var stamperObject = { stamps: [] };\n \n  fillStampArrays(body, stamperObject.stamps, rawCode);\n    \n\n  return stamperObject;\n}\n\nfunction fillStampArrays(body, fnStamps, rawCode) {\n  var lastBlobLine = 0;\n  for (var i = 0; i < body.length; i++) {\n    var item = body[i];\n    if (item.type === \"FunctionDeclaration\") {\n      addFn(fnStamps, item, rawCode);\n    } else if (item.type === \"Block\" || item.type === \"Line\") {\n      lastBlobLine = addBlob(fnStamps, item, rawCode, lastBlobLine, true);\n    } else {\n      lastBlobLine = addBlob(\n        fnStamps,\n        item,\n        rawCode,\n        lastBlobLine,\n        false\n      );\n    }\n  }\n\n  // for (var i = 0; i < tempBlobStamps.length; i++) {\n  //   var blobStamp = tempBlobStamps[i];\n  //   if (blobStamp.code != \"\") {\n  //     blobStamps.push(blobStamp);\n  //   }\n  // }\n}\n\nfunction insertComments(body, comments) {\n  for (var i = 0; i < comments.length; i++) {\n    var comment = comments[i];\n    var pos = getPos(body, comment);\n\n    if (pos >= 0) {\n      body.splice(pos, 0, comment);\n    }\n  }\n}\n\nfunction getPos(body, comment) {\n  for (var i = 0; i < body.length; i++) {\n    var item = body[i];\n    if (item.range[0] < comment.range[0] && comment.range[1] < item.range[1]) {\n      return -1;\n    }\n    if (comment.range[1] < item.range[0]) {\n      return i;\n    }\n  }\n  return body.length;\n}\n\nfunction addBlob(stamps, item, rawCode, lastBlobLine, isComment) {\n  if (isComment) {\n    if ((item.type === \"Block\")) {\n      var code = \"/*\" + item.value + \"*/\";\n    } else {\n      var code = \"// \" + item.value;\n    }\n  } else {\n    var code = rawCode.substr(item.range[0], item.range[1] - item.range[0]);\n  }\n\n\nvar lineDiff = item.loc.start.line - lastBlobLine;\n\n  if(stamps.length === 0){\n    stamps.push({ code: code, isBlob:true });    \n  }else if(!stamps[stamps.length - 1].isBlob){\n    stamps.push({ code: code, isBlob:true });   \n  }else if(lineDiff > 1){\n    stamps.push({ code: code, isBlob:true });\n  }else if(lineDiff === 0){\n    var lastStamp = stamps[stamps.length - 1];\n    lastStamp.code += code;\n  }else if(lineDiff === 1){\n    var lastStamp = stamps[stamps.length - 1];\n    lastStamp.code += \"\\n\" + code;\n  }\n\n\n\n\n\n  // if (stamps.length === 0) {\n  //   stamps.push({ code: \"\", isBlob:true });\n  // }\n\n  // var lastStamp = stamps[stamps.length - 1];\n  // if(lastStamp.isBlob === false){\n\n  // }\n\n  // var lineDiff = item.loc.start.line - lastBlobLine;\n  // if (lineDiff == 0) {\n  //   lastStamp.code += code;\n  // } else if (lineDiff === 1) {\n  //   lastStamp.code += \"\\n\" + code;\n  // } else {\n  //   stamps.push({ code: code, isBlob:true });\n  // }\n\n  return item.loc.end.line;\n}\n\nfunction addFn(fnStamps, item, rawCode) {\n  var range = item.range;\n  var name = item.id.name;\n\n  var args = \"\";\n  if (item.params.length >= 1) {\n    var argStart = item.params[0].range[0];\n    var argEnd = item.params[item.params.length - 1].range[1];\n    var args = rawCode.substr(argStart, argEnd - argStart);\n  }\n\n  var start = item.body.range[0] + 1;\n  var end = item.body.range[1] - 1;\n  var code = rawCode.substr(start, end - start);\n  fnStamps.push({ code: code, name: name, args: args });\n}\n\nexports.jsToStamps = jsToStamps;\n\n//////////////////////////////////// getVariables\n\nfunction isDeclaration(typeName){\n  return typeName.includes(\"Declaration\") || typeName.includes(\"Declarator\")\n}\n\nfunction getVariables(rawCode) {\n\n\n  try {\n    var fullDict = esprima.parseScript(rawCode);\n  } catch (error) {\n    // throw error i guess\n  }\n\n\n  var declared = {};\n  var undeclared = {};\n\n  var q = [[null, fullDict, 0, null]];\n\n  while (q.length > 0) {\n\n    var cur = q.shift();\n  \n  \n    var key = cur[0];\n    var val = cur[1];\n    var pVal = cur[3];\n    var lvl = cur[2];\n\n\n\n\n    if (val === null) {\n      continue;\n    }\n\n    if (key && val && pVal) {\n\n      if (\n        key === \"id\" &&\n        val.type === \"Identifier\" &&\n        isDeclaration(pVal.type) &&\n        val.name in declared === false\n      ) {\n  \n        declared[val.name] = [pVal.type, lvl];\n      }\n    }\n   \n    if (key && key === \"name\") {\n      if (val in declared === false) {\n        undeclared[val] = lvl;\n      }\n    }\n\n\n    if (val instanceof Array) {\n\n      val.map(newVal => q.push([null, newVal, lvl + 1, val]));\n    } else if (val instanceof Object) {\n  \n      Object.keys(val).map(newKey => {\n        q.push([newKey, val[newKey], lvl + 1, val]);\n      });\n\n    } else {\n      // let it die\n    }\n    \n  }\n\n\n  var result = {declared:[], undeclared:[]}\n  Object.keys(declared).map(name => {\n    if (declared[name][1] === 3 && declared[name][0].includes(\"Declaration\") ) {\n      result.declared.push(name)\n    }else if(declared[name][1] === 5 && declared[name][0].includes(\"Declarator\")){\n    result.declared.push(name)\n    }\n  });\n\n  var relevantUndeclared = {}\n  Object.keys(undeclared).map(name => {\n    result.undeclared.push(name)\n  })\n\n  return result\n}\n\n\nexports.getVariables = getVariables;\n","import ace from \"ace-builds\"\nace.define(\"ace/theme/p5\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-p5\";\nexports.cssText = \".ace-p5 .ace_gutter {\\\n\tbackground: #F5F8FC;\\\n\tcolor: #333 !important;\\\n}\\\n\\\n.ace-p5 .ace_identifier {\\\n\tcolor: #000000;\\\n}\\\n.ace-p5 .ace_print-margin {\\\n\twidth: 1px;\\\n\tbackground: #F5F8FC;\\\n}\\\n\\\n.ace-p5 {\\\n\tbackground-color: #F5F8FC;\\\n\tcolor: #586E75\\\n}\\\n\\\n.ace-p5 .ace_cursor {\\\n\tcolor: #000000\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_selection {\\\n\tbackground: rgb(181, 213, 255)\\\n}\\\n\\\n.ace-p5.ace_multiselect .ace_selection.ace_start {\\\n\tbox-shadow: 0 0 3px 0px #FDF6E3;\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_step {\\\n\tbackground: rgb(255, 255, 0)\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_bracket {\\\n\tmargin: -1px 0 0 -1px;\\\n\tborder: 1px solid rgba(147, 161, 161, 0.50)\\\n}\\\n\\\n.ace-p5 .ace_marker-layer .ace_active-line {\\\n\tbackground: #EEE8D5\\\n}\\\n\\\n.ace-p5 .ace_gutter-active-line {\\\n\tbackground-color : #EDE5C1\\\n}\\\n.ace-p5 .ace_marker-layer .ace_selected-word {\\\n\tborder: 1px solid #7f9390\\\n}\\\n\\\n.ace-p5 .ace_invisible {\\\n\tcolor: rgba(147, 161, 161, 0.50)\\\n}\\\n\\\n.ace-p5 .ace_keyword  {\\\n\tcolor: #00A1D3\\\n}\\\n\\\n.ace-p5 .ace_keyword.ace_operator {\\\n\tcolor: #A67F59\\\n}\\\n.ace-p5 .ace_meta,\\\n.ace-p5 .ace_support.ace_class,\\\n.ace-p5 .ace_support.ace_type {\\\n\tcolor: #859900\\\n}\\\n\\\n.ace-p5 .ace_paren{\\\n\tcolor: #666\\\n}\\\n.ace-p5 .ace_constant.ace_character,\\\n.ace-p5 .ace_constant.ace_other {\\\n\tcolor: #CB4B16\\\n}\\\n.ace-p5 .ace_constant.ace_language {\\\n\tcolor: #B58900\\\n}\\\n.ace-p5 .ace_constant.ace_numeric {\\\n\tcolor: #dc3787\\\n}\\\n.ace-p5 .ace_fold {\\\n\tbackground-color: #268BD2;\\\n\tborder-color: #586E75\\\n}\\\n.ace-p5 .ace_function, {\\\n\tcolor: #00a1d3 !important\\\n}\\\n.ace-p5 .ace_entity.ace_name.ace_function,\\\n.ace-p5 .ace_entity.ace_name.ace_tag,\\\n.ace-p5 .ace_support.ace_function,\\\n.ace-p5 .ace_variable,\\\n.ace-p5 .ace_variable.ace_language {\\\n\tcolor: #00a1d3 !important\\\n}\\\n.ace-p5 .ace_storage {\\\n\tcolor: #704f21 !important\\\n}\\\n.ace-p5 .ace_string {\\\ncolor: #00a1d3 !important;\\\n}\\\n.ace-p5 .ace_string.ace_regexp {\\\ncolor: #D30102\\\n}\\\n.ace-p5 .ace_comment,\\\n.ace-p5 .ace_entity.ace_other.ace_attribute-name {\\\ncolor: #a0a0a0\\\n}\\\n.ace-p5 .ace_indent-guide {\\\nbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHjy8NJ/AAjgA5fzQUmBAAAAAElFTkSuQmCC) right repeat-y\\\n}\"\n;\n\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});                (function() {\n                    ace.require([\"ace/theme/p5\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            ","module.exports = __webpack_public_path__ + \"static/media/globe.50d70b6d.svg\";"],"sourceRoot":""}